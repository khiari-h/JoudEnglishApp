// ReadingTextSelector/index.js - VERSION REFACTORIS√âE avec CategorySelector g√©n√©rique

import CategorySelector from "../../../../components/exercise-common/CategorySelector";
import { useCallback } from "react";
import PropTypes from 'prop-types';

/**
 * üé® ReadingTextSelector - Version Refactoris√©e avec CategorySelector g√©n√©rique
 * 80+ lignes ‚Üí 25 lignes (-70% de code)
 * Adaptateur pour le s√©lecteur d'exercices de lecture
 * R√©utilise le composant g√©n√©rique CategorySelector
 * Pattern identique √† VocabularyCategorySelector
 */
const ReadingTextSelector = ({
  exercises = [],
  selectedIndex = 0,
  onSelectExercise,
  // scrollViewRef, // Pas utilis√© par CategorySelector, mais gard√© pour compatibilit√©
  levelColor,
}) => {
  // Transformation du format des exercices pour correspondre au composant g√©n√©rique
  const formattedExercises = exercises.map((exercise, index) => ({
    id: index,
    name: exercise.title || `Exercise ${index + 1}`,
  }));

  // Fonction de callback adapt√©e - notre composant utilise des indices,
  // le composant g√©n√©rique utilise des IDs
  const handleExerciseSelect = useCallback((exerciseId) => {
    // Si l'option "Tous" est s√©lectionn√©e (null), nous s√©lectionnons le premier exercice
    if (exerciseId === null) {
      onSelectExercise(0);
    } else {
      onSelectExercise(exerciseId);
    }
  }, [onSelectExercise]);

  return (
    <CategorySelector
      categories={formattedExercises}
      selectedCategory={selectedIndex === undefined ? 0 : selectedIndex}
      onSelectCategory={handleExerciseSelect}
      primaryColor={levelColor}
      // Props sp√©cifiques √† Reading
      label="Reading Exercises:" // Titre personnalis√©
      showAllOption={false} // Pas besoin de "Tous" pour les exercices
    />
  );
};

// ‚úÖ D√©finition de PropTypes pour la validation des props
ReadingTextSelector.propTypes = {
  // 'exercises' est manquant dans la validation
  exercises: PropTypes.arrayOf(PropTypes.shape({
    title: PropTypes.string,
  })).isRequired,
  // 'selectedIndex' est manquant dans la validation
  selectedIndex: PropTypes.number,
  // 'onSelectExercise' est manquant dans la validation
  onSelectExercise: PropTypes.func.isRequired,
  // 'levelColor' est manquant dans la validation
  levelColor: PropTypes.string,
};

export default ReadingTextSelector;