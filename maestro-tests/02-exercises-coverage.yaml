# Test E2E : Couverture compl√®te des exercices
# V√©rifie que tous les exercices mettent √† jour la progression correctement

appId: com.joudenglish.app
name: "Couverture compl√®te des exercices"
tags:
  - "exercises"
  - "progress-update"
  - "coverage"

env:
  TIMEOUT: 15000
  RETRY_COUNT: 3

# Test Vocabulaire Classique
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "vocabulary" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "vocabulary-button"
      - assertVisible: "Vocabulaire"
      
      # Faire 5 mots
      - repeat:
          times: 5
          commands:
            - tapOn: "Traduire"
            - tapOn: "Suivant"
      
      # V√©rifier progression
      - assertVisible: "5/15"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "5%" # Progression mise √† jour
      - tapOn: "‚Üê"
      - tapOn: "Accueil"
      - assertVisible: "5" # Mots aujourd'hui

# Test Vocabulaire Fast
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "vocabulary_fast" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "vocabulary_fast-button"
      - assertVisible: "Vocabulaire Fast"
      
      # Faire quelques mots
      - repeat:
          times: 3
          commands:
            - tapOn: "Traduire"
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "3%" # Progression Fast
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test Phrases
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "phrases" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "phrases-button"
      - assertVisible: "Phrases"
      
      # Faire quelques phrases
      - repeat:
          times: 2
          commands:
            - tapOn: "Traduire"
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "2%" # Progression Phrases
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test Grammaire
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "grammar" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "grammar-button"
      - assertVisible: "Grammaire"
      
      # Faire quelques exercices
      - repeat:
          times: 2
          commands:
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "2%" # Progression Grammaire
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test Lecture
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "reading" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "reading-button"
      - assertVisible: "Lecture"
      
      # Faire quelques exercices
      - repeat:
          times: 2
          commands:
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "2%" # Progression Lecture
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test Orthographe
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "spelling" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "spelling-button"
      - assertVisible: "Orthographe"
      
      # Faire quelques exercices
      - repeat:
          times: 2
          commands:
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "2%" # Progression Orthographe
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test Correction d'erreurs
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "errorCorrection" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "errorCorrection-button"
      - assertVisible: "Correction d'erreurs"
      
      # Faire quelques exercices
      - repeat:
          times: 2
          commands:
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "2%" # Progression Correction
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test Jeux de mots
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "wordGames" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "wordGames-button"
      - assertVisible: "Jeux de mots"
      
      # Faire quelques exercices
      - repeat:
          times: 2
          commands:
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "2%" # Progression Jeux
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test Conversations
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "conversations" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "conversations-button"
      - assertVisible: "Conversations"
      
      # Faire quelques exercices
      - repeat:
          times: 2
          commands:
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "2%" # Progression Conversations
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test √âvaluation
---
- runFlow:
    when:
      true: ${ENV:EXERCISE == "assessment" || !ENV:EXERCISE}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      - tapOn: "assessment-button"
      - assertVisible: "√âvaluation"
      
      # Faire quelques questions
      - repeat:
          times: 2
          commands:
            - tapOn: "Suivant"
      
      # Retour et v√©rification
      - tapOn: "‚Üê"
      - assertVisible: "2%" # Progression √âvaluation
      - tapOn: "‚Üê"
      - tapOn: "Accueil"

# Test de v√©rification finale - Tous les exercices ont progress√©
---
- runFlow:
    when:
      true: ${ENV:VERIFICATION == "final" || !ENV:VERIFICATION}
    commands:
      - launchApp
      - tapOn: "Niveaux"
      - tapOn: "level-1-button"
      
      # V√©rifier que tous les exercices ont progress√©
      - assertVisible: "Vocabulaire"
      - assertVisible: "Vocabulaire Fast"
      - assertVisible: "Phrases"
      - assertVisible: "Grammaire"
      - assertVisible: "Lecture"
      - assertVisible: "Orthographe"
      - assertVisible: "Correction d'erreurs"
      - assertVisible: "Jeux de mots"
      - assertVisible: "Conversations"
      - assertVisible: "√âvaluation"
      
      # Retour au dashboard
      - tapOn: "‚Üê"
      - tapOn: "Accueil"
      
      # V√©rifier que les m√©triques globales ont √©t√© mises √† jour
      - assertVisible: "üìä Aujourd'hui"
      - assertVisible: "üèÜ Progression g√©n√©rale"
