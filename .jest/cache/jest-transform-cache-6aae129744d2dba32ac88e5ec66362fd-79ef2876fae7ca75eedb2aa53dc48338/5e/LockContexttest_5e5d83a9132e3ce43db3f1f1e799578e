3aee3b465b1ba2c3c920ecbeee7c061d
_getJestObj().mock('../../src/services/lockService', function () {
  return {
    isEnabled: jest.fn(),
    verifyPin: jest.fn(),
    disableLock: jest.fn(),
    enableLock: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _LockContext = require("../../src/contexts/LockContext");
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var Lock = require('../../src/services/lockService');
var Consumer = function Consumer() {
  var _useLock = (0, _LockContext.useLock)(),
    isEnabled = _useLock.isEnabled,
    isLocked = _useLock.isLocked,
    unlockWithPin = _useLock.unlockWithPin,
    disable = _useLock.disable,
    enable = _useLock.enable,
    isLoading = _useLock.isLoading;
  return (0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {
    children: ["\xA0 \xA0 \xA0 ", isLoading && (0, _jsxRuntime.jsx)("text", {
      testID: "loading",
      children: "Loading..."
    }), "\xA0 \xA0 \xA0 ", (0, _jsxRuntime.jsx)("text", {
      testID: "enabled",
      children: String(isEnabled)
    }), "\xA0 \xA0 \xA0 ", (0, _jsxRuntime.jsx)("text", {
      testID: "locked",
      children: String(isLocked)
    }), "\xA0 \xA0 \xA0 ", (0, _jsxRuntime.jsx)("button", {
      testID: "unlock-correct-pin",
      onPress: function onPress() {
        return unlockWithPin('1234');
      }
    }), "\xA0 \xA0 \xA0 ", (0, _jsxRuntime.jsx)("button", {
      testID: "unlock-wrong-pin",
      onPress: function onPress() {
        return unlockWithPin('0000');
      }
    }), "\xA0 \xA0 \xA0 ", (0, _jsxRuntime.jsx)("button", {
      testID: "unlock-lockout",
      onPress: function onPress() {
        return unlockWithPin('0000');
      }
    }), "\xA0 \xA0 \xA0 ", (0, _jsxRuntime.jsx)("button", {
      testID: "disable",
      onPress: disable
    }), "\xA0 \xA0 \xA0 ", (0, _jsxRuntime.jsx)("button", {
      testID: "enable",
      onPress: enable
    }), "\xA0 \xA0 "]
  });
};
describe('LockContext', function () {
  beforeEach(function () {
    jest.clearAllMocks();
    Lock.isEnabled.mockResolvedValue(true);
    Lock.verifyPin.mockResolvedValue({
      ok: true
    });
    Lock.disableLock.mockResolvedValue(true);
    Lock.enableLock.mockResolvedValue(true);
  });
  it('initializes locked when enabled, unlocks with correct PIN, and can disable', (0, _asyncToGenerator2.default)(function* () {
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    expect(ui.getByTestId('enabled').props.children).toBe('true');
    expect(ui.getByTestId('locked').props.children).toBe('true');
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(ui.getByTestId('unlock-correct-pin'));
    }));
    expect(ui.getByTestId('locked').props.children).toBe('false');
    expect(Lock.verifyPin).toHaveBeenCalledWith('1234');
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(ui.getByTestId('disable'));
    }));
    expect(ui.getByTestId('enabled').props.children).toBe('false');
    expect(Lock.disableLock).toHaveBeenCalled();
  }));
  it('initializes unlocked when not enabled', (0, _asyncToGenerator2.default)(function* () {
    Lock.isEnabled.mockResolvedValueOnce(false);
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    expect(ui.getByTestId('enabled').props.children).toBe('false');
    expect(ui.getByTestId('locked').props.children).toBe('false');
  }));
  it('should not unlock with an incorrect PIN', (0, _asyncToGenerator2.default)(function* () {
    Lock.verifyPin.mockResolvedValueOnce({
      ok: false
    });
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    expect(ui.getByTestId('locked').props.children).toBe('true');
    var result;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      result = yield ui.getByTestId('unlock-wrong-pin').props.onPress();
    }));
    expect(ui.getByTestId('locked').props.children).toBe('true');
    expect(result).toEqual({
      ok: false
    });
    expect(Lock.verifyPin).toHaveBeenCalledWith('0000');
  }));
  it('should return lockout reason when pin verification fails with lockout', (0, _asyncToGenerator2.default)(function* () {
    Lock.verifyPin.mockResolvedValueOnce({
      ok: false,
      reason: 'lockout'
    });
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    var result;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      result = yield ui.getByTestId('unlock-lockout').props.onPress();
    }));
    expect(ui.getByTestId('locked').props.children).toBe('true');
    expect(result).toEqual({
      ok: false,
      reason: 'lockout'
    });
    expect(Lock.verifyPin).toHaveBeenCalledWith('0000');
  }));
  it('should enable the lock', (0, _asyncToGenerator2.default)(function* () {
    Lock.isEnabled.mockResolvedValueOnce(false);
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    expect(ui.getByTestId('enabled').props.children).toBe('false');
    expect(ui.getByTestId('locked').props.children).toBe('false');
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(ui.getByTestId('enable'));
    }));
    expect(ui.getByTestId('enabled').props.children).toBe('true');
    expect(ui.getByTestId('locked').props.children).toBe('true');
    expect(Lock.enableLock).toHaveBeenCalled();
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJpc0VuYWJsZWQiLCJqZXN0IiwiZm4iLCJ2ZXJpZnlQaW4iLCJkaXNhYmxlTG9jayIsImVuYWJsZUxvY2siLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWFjdCIsIl9yZWFjdE5hdGl2ZSIsIl9Mb2NrQ29udGV4dCIsIl9qc3hSdW50aW1lIiwiX3JlcXVpcmUiLCJMb2NrIiwiQ29uc3VtZXIiLCJfdXNlTG9jayIsInVzZUxvY2siLCJpc0xvY2tlZCIsInVubG9ja1dpdGhQaW4iLCJkaXNhYmxlIiwiZW5hYmxlIiwiaXNMb2FkaW5nIiwianN4cyIsIkZyYWdtZW50IiwiY2hpbGRyZW4iLCJqc3giLCJ0ZXN0SUQiLCJTdHJpbmciLCJvblByZXNzIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwib2siLCJpdCIsImRlZmF1bHQiLCJ1aSIsInJlbmRlciIsIkxvY2tQcm92aWRlciIsIndhaXRGb3IiLCJleHBlY3QiLCJxdWVyeUJ5VGVzdElkIiwidG9CZU51bGwiLCJnZXRCeVRlc3RJZCIsInByb3BzIiwidG9CZSIsImFjdCIsImZpcmVFdmVudCIsInByZXNzIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwicmVzdWx0IiwidG9FcXVhbCIsInJlYXNvbiJdLCJzb3VyY2VzIjpbIkxvY2tDb250ZXh0LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgcmVuZGVyLCBhY3QsIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlJztcclxuaW1wb3J0IHsgTG9ja1Byb3ZpZGVyLCB1c2VMb2NrIH0gZnJvbSAnLi4vLi4vc3JjL2NvbnRleHRzL0xvY2tDb250ZXh0JztcclxuXHJcbi8vIDEuIE1vY2tleiBsZSBzZXJ2aWNlIGF1IHRvdXQgZMOpYnV0IGR1IGZpY2hpZXJcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvc2VydmljZXMvbG9ja1NlcnZpY2UnLCAoKSA9PiAoe1xyXG7CoCBpc0VuYWJsZWQ6IGplc3QuZm4oKSxcclxuwqAgdmVyaWZ5UGluOiBqZXN0LmZuKCksXHJcbsKgIGRpc2FibGVMb2NrOiBqZXN0LmZuKCksXHJcbsKgIGVuYWJsZUxvY2s6IGplc3QuZm4oKSxcclxufSkpO1xyXG5cclxuY29uc3QgTG9jayA9IHJlcXVpcmUoJy4uLy4uL3NyYy9zZXJ2aWNlcy9sb2NrU2VydmljZScpO1xyXG5cclxuLy8gVW4gY29tcG9zYW50IGRlIHRlc3QgcG91ciBjb25zb21tZXIgbGUgY29udGV4dGVcclxuY29uc3QgQ29uc3VtZXIgPSAoKSA9PiB7XHJcbsKgIGNvbnN0IHsgaXNFbmFibGVkLCBpc0xvY2tlZCwgdW5sb2NrV2l0aFBpbiwgZGlzYWJsZSwgZW5hYmxlLCBpc0xvYWRpbmcgfSA9IHVzZUxvY2soKTtcclxuwqAgcmV0dXJuIChcclxuwqAgwqAgPD5cclxuwqAgwqAgwqAge2lzTG9hZGluZyAmJiA8dGV4dCB0ZXN0SUQ9XCJsb2FkaW5nXCI+TG9hZGluZy4uLjwvdGV4dD59XHJcbsKgIMKgIMKgIDx0ZXh0IHRlc3RJRD1cImVuYWJsZWRcIj57U3RyaW5nKGlzRW5hYmxlZCl9PC90ZXh0PlxyXG7CoCDCoCDCoCA8dGV4dCB0ZXN0SUQ9XCJsb2NrZWRcIj57U3RyaW5nKGlzTG9ja2VkKX08L3RleHQ+XHJcbsKgIMKgIMKgIDxidXR0b24gdGVzdElEPVwidW5sb2NrLWNvcnJlY3QtcGluXCIgb25QcmVzcz17KCkgPT4gdW5sb2NrV2l0aFBpbignMTIzNCcpfSAvPlxyXG7CoCDCoCDCoCA8YnV0dG9uIHRlc3RJRD1cInVubG9jay13cm9uZy1waW5cIiBvblByZXNzPXsoKSA9PiB1bmxvY2tXaXRoUGluKCcwMDAwJyl9IC8+XHJcbsKgIMKgIMKgIDxidXR0b24gdGVzdElEPVwidW5sb2NrLWxvY2tvdXRcIiBvblByZXNzPXsoKSA9PiB1bmxvY2tXaXRoUGluKCcwMDAwJyl9IC8+XHJcbsKgIMKgIMKgIDxidXR0b24gdGVzdElEPVwiZGlzYWJsZVwiIG9uUHJlc3M9e2Rpc2FibGV9IC8+XHJcbsKgIMKgIMKgIDxidXR0b24gdGVzdElEPVwiZW5hYmxlXCIgb25QcmVzcz17ZW5hYmxlfSAvPlxyXG7CoCDCoCA8Lz5cclxuwqAgKTtcclxufTtcclxuXHJcbmRlc2NyaWJlKCdMb2NrQ29udGV4dCcsICgpID0+IHtcclxuwqAgLy8gUsOpaW5pdGlhbGlzZSB0b3VzIGxlcyBtb2NrcyBhdmFudCBjaGFxdWUgdGVzdFxyXG7CoCBiZWZvcmVFYWNoKCgpID0+IHtcclxuwqAgwqAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbsKgIMKgIExvY2suaXNFbmFibGVkLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xyXG7CoCDCoCBMb2NrLnZlcmlmeVBpbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG9rOiB0cnVlIH0pO1xyXG7CoCDCoCBMb2NrLmRpc2FibGVMb2NrLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xyXG7CoCDCoCBMb2NrLmVuYWJsZUxvY2subW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XHJcbsKgIH0pO1xyXG5cclxuwqAgLy8gVGVzdCAxOiBDb21wb3J0ZW1lbnQgaW5pdGlhbCwgZMOpdmVycm91aWxsYWdlIGV0IGTDqXNhY3RpdmF0aW9uXHJcbsKgIGl0KCdpbml0aWFsaXplcyBsb2NrZWQgd2hlbiBlbmFibGVkLCB1bmxvY2tzIHdpdGggY29ycmVjdCBQSU4sIGFuZCBjYW4gZGlzYWJsZScsIGFzeW5jICgpID0+IHtcclxuwqAgwqAgY29uc3QgdWkgPSByZW5kZXIoPExvY2tQcm92aWRlcj48Q29uc3VtZXIgLz48L0xvY2tQcm92aWRlcj4pO1xyXG7CoCDCoCBhd2FpdCB3YWl0Rm9yKCgpID0+IGV4cGVjdCh1aS5xdWVyeUJ5VGVzdElkKCdsb2FkaW5nJykpLnRvQmVOdWxsKCkpO1xyXG5cclxuwqAgwqAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdlbmFibGVkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ3RydWUnKTtcclxuwqAgwqAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdsb2NrZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgndHJ1ZScpO1xyXG5cclxuwqAgwqAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuwqAgwqAgwqAgZmlyZUV2ZW50LnByZXNzKHVpLmdldEJ5VGVzdElkKCd1bmxvY2stY29ycmVjdC1waW4nKSk7XHJcbsKgIMKgIH0pO1xyXG5cclxuwqAgwqAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdsb2NrZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgnZmFsc2UnKTtcclxuwqAgwqAgZXhwZWN0KExvY2sudmVyaWZ5UGluKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnMTIzNCcpO1xyXG5cclxuwqAgwqAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuwqAgwqAgwqAgZmlyZUV2ZW50LnByZXNzKHVpLmdldEJ5VGVzdElkKCdkaXNhYmxlJykpO1xyXG7CoCDCoCB9KTtcclxuwqAgwqAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdlbmFibGVkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ2ZhbHNlJyk7XHJcbsKgIMKgIGV4cGVjdChMb2NrLmRpc2FibGVMb2NrKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbsKgIH0pO1xyXG5cclxuwqAgLy8gVGVzdCAyOiBHw6lyZXIgbCfDqXRhdCBpbml0aWFsIGTDqXNhY3RpdsOpXHJcbsKgIGl0KCdpbml0aWFsaXplcyB1bmxvY2tlZCB3aGVuIG5vdCBlbmFibGVkJywgYXN5bmMgKCkgPT4ge1xyXG7CoCDCoCBMb2NrLmlzRW5hYmxlZC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZmFsc2UpO1xyXG7CoCDCoCBjb25zdCB1aSA9IHJlbmRlcig8TG9ja1Byb3ZpZGVyPjxDb25zdW1lciAvPjwvTG9ja1Byb3ZpZGVyPik7XHJcbsKgIMKgIGF3YWl0IHdhaXRGb3IoKCkgPT4gZXhwZWN0KHVpLnF1ZXJ5QnlUZXN0SWQoJ2xvYWRpbmcnKSkudG9CZU51bGwoKSk7XHJcblxyXG7CoCDCoCBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2VuYWJsZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgnZmFsc2UnKTtcclxuwqAgwqAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdsb2NrZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgnZmFsc2UnKTtcclxuwqAgfSk7XHJcblxyXG7CoCAvLyBUZXN0IDM6IMOJY2hlYyBzaW1wbGUgKGNvdXZyZSBsZSAncmV0dXJuIHsgb2s6IGZhbHNlIH07JylcclxuwqAgaXQoJ3Nob3VsZCBub3QgdW5sb2NrIHdpdGggYW4gaW5jb3JyZWN0IFBJTicsIGFzeW5jICgpID0+IHtcclxuwqAgwqAgTG9jay52ZXJpZnlQaW4ubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgb2s6IGZhbHNlIH0pO1xyXG7CoCDCoCBjb25zdCB1aSA9IHJlbmRlcig8TG9ja1Byb3ZpZGVyPjxDb25zdW1lciAvPjwvTG9ja1Byb3ZpZGVyPik7XHJcbsKgIMKgIGF3YWl0IHdhaXRGb3IoKCkgPT4gZXhwZWN0KHVpLnF1ZXJ5QnlUZXN0SWQoJ2xvYWRpbmcnKSkudG9CZU51bGwoKSk7XHJcblxyXG7CoCDCoCBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2xvY2tlZCcpLnByb3BzLmNoaWxkcmVuKS50b0JlKCd0cnVlJyk7XHJcblxyXG7CoCDCoCBsZXQgcmVzdWx0O1xyXG7CoCDCoCBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG7CoCDCoCDCoCByZXN1bHQgPSBhd2FpdCB1aS5nZXRCeVRlc3RJZCgndW5sb2NrLXdyb25nLXBpbicpLnByb3BzLm9uUHJlc3MoKTtcclxuwqAgwqAgfSk7XHJcbsKgIMKgIFxyXG7CoCDCoCBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2xvY2tlZCcpLnByb3BzLmNoaWxkcmVuKS50b0JlKCd0cnVlJyk7XHJcbsKgIMKgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoeyBvazogZmFsc2UgfSk7XHJcbsKgIMKgIGV4cGVjdChMb2NrLnZlcmlmeVBpbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJzAwMDAnKTtcclxuwqAgfSk7XHJcblxyXG7CoCAvLyBUZXN0IDQ6IMOJY2hlYyBhdmVjIHJhaXNvbiBkZSB2ZXJyb3VpbGxhZ2UgKGNvdXZyZSBsZSAnaWYgKHJlcy5yZWFzb24gPT09ICdsb2Nrb3V0JyknKVxyXG7CoCBpdCgnc2hvdWxkIHJldHVybiBsb2Nrb3V0IHJlYXNvbiB3aGVuIHBpbiB2ZXJpZmljYXRpb24gZmFpbHMgd2l0aCBsb2Nrb3V0JywgYXN5bmMgKCkgPT4ge1xyXG7CoCDCoCBMb2NrLnZlcmlmeVBpbi5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBvazogZmFsc2UsIHJlYXNvbjogJ2xvY2tvdXQnIH0pO1xyXG7CoCDCoCBjb25zdCB1aSA9IHJlbmRlcig8TG9ja1Byb3ZpZGVyPjxDb25zdW1lciAvPjwvTG9ja1Byb3ZpZGVyPik7XHJcbsKgIMKgIGF3YWl0IHdhaXRGb3IoKCkgPT4gZXhwZWN0KHVpLnF1ZXJ5QnlUZXN0SWQoJ2xvYWRpbmcnKSkudG9CZU51bGwoKSk7XHJcblxyXG7CoCDCoCBsZXQgcmVzdWx0O1xyXG7CoCDCoCBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG7CoCDCoCDCoCByZXN1bHQgPSBhd2FpdCB1aS5nZXRCeVRlc3RJZCgndW5sb2NrLWxvY2tvdXQnKS5wcm9wcy5vblByZXNzKCk7XHJcbsKgIMKgIH0pO1xyXG7CoCDCoCBcclxuwqAgwqAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdsb2NrZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgndHJ1ZScpO1xyXG7CoCDCoCBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgb2s6IGZhbHNlLCByZWFzb246ICdsb2Nrb3V0JyB9KTtcclxuwqAgwqAgZXhwZWN0KExvY2sudmVyaWZ5UGluKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnMDAwMCcpO1xyXG7CoCB9KTtcclxuXHJcbsKgIC8vIFRlc3QgNTogQWN0aXZhdGlvbiBkdSB2ZXJyb3VpbGxhZ2VcclxuwqAgaXQoJ3Nob3VsZCBlbmFibGUgdGhlIGxvY2snLCBhc3luYyAoKSA9PiB7XHJcbsKgIMKgIExvY2suaXNFbmFibGVkLm1vY2tSZXNvbHZlZFZhbHVlT25jZShmYWxzZSk7XHJcbsKgIMKgIGNvbnN0IHVpID0gcmVuZGVyKDxMb2NrUHJvdmlkZXI+PENvbnN1bWVyIC8+PC9Mb2NrUHJvdmlkZXI+KTtcclxuwqAgwqAgYXdhaXQgd2FpdEZvcigoKSA9PiBleHBlY3QodWkucXVlcnlCeVRlc3RJZCgnbG9hZGluZycpKS50b0JlTnVsbCgpKTtcclxuwqAgwqAgXHJcbsKgIMKgIGV4cGVjdCh1aS5nZXRCeVRlc3RJZCgnZW5hYmxlZCcpLnByb3BzLmNoaWxkcmVuKS50b0JlKCdmYWxzZScpO1xyXG7CoCDCoCBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2xvY2tlZCcpLnByb3BzLmNoaWxkcmVuKS50b0JlKCdmYWxzZScpO1xyXG5cclxuwqAgwqAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuwqAgwqAgwqAgZmlyZUV2ZW50LnByZXNzKHVpLmdldEJ5VGVzdElkKCdlbmFibGUnKSk7XHJcbsKgIMKgIH0pO1xyXG7CoCDCoCBcclxuwqAgwqAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdlbmFibGVkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ3RydWUnKTtcclxuwqAgwqAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdsb2NrZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgndHJ1ZScpO1xyXG7CoCDCoCBleHBlY3QoTG9jay5lbmFibGVMb2NrKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbsKgIH0pO1xyXG59KTsiXSwibWFwcGluZ3MiOiJBQUtBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRTtFQUFBLE9BQU87SUFDakRDLFNBQVMsRUFBRUMsSUFB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