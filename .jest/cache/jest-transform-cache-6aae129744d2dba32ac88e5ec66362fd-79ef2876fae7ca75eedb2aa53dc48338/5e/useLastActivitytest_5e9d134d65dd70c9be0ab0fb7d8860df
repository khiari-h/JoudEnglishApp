b2082e82a3f3b1f15786a11ebf4444de
_getJestObj().mock('@react-native-async-storage/async-storage', function () {
  return {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn()
  };
});
_getJestObj().mock('../../src/utils/constants', function () {
  return {
    STORAGE_KEYS: {
      LAST_ACTIVITY: 'last_activity'
    }
  };
});
_getJestObj().mock('../../src/utils/eventBus', function () {
  return {
    emit: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _reactNative = require("@testing-library/react-native");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _useLastActivity = _interopRequireDefault(require("../../src/hooks/useLastActivity"));
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('useLastActivity', function () {
  beforeEach(function () {
    jest.clearAllMocks();
    jest.spyOn(Date, 'now').mockReturnValue(1640995200000);
  });
  afterEach(function () {
    jest.restoreAllMocks();
  });
  it('devrait initialiser avec null', function () {
    _asyncStorage.default.getItem.mockResolvedValue(null);
    var _renderHook = (0, _reactNative.renderHook)(function () {
        return (0, _useLastActivity.default)();
      }),
      result = _renderHook.result;
    expect(result.current.lastActivity).toBeNull();
    expect(result.current.isLoading).toBe(true);
  });
  it('devrait charger une activit�� existante', (0, _asyncToGenerator2.default)(function* () {
    var mockActivity = {
      type: 'vocabulary',
      timestamp: 1640995200000 - 300000
    };
    _asyncStorage.default.getItem.mockResolvedValue(JSON.stringify(mockActivity));
    var _renderHook2 = (0, _reactNative.renderHook)(function () {
        return (0, _useLastActivity.default)();
      }),
      result = _renderHook2.result;
    yield (0, _reactNative.waitFor)(function () {
      expect(result.current.lastActivity).toBeDefined();
      expect(result.current.lastActivity.type).toBe('vocabulary');
      expect(result.current.isLoading).toBe(false);
    });
  }));
  it('devrait sauvegarder une nouvelle activité', (0, _asyncToGenerator2.default)(function* () {
    _asyncStorage.default.getItem.mockResolvedValue(null);
    var _renderHook3 = (0, _reactNative.renderHook)(function () {
        return (0, _useLastActivity.default)();
      }),
      result = _renderHook3.result;
    yield (0, _reactNative.waitFor)(function () {
      expect(result.current.isLoading).toBe(false);
    });
    var activityData = {
      type: 'grammar',
      score: 85
    };
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      yield result.current.saveActivity(activityData);
    }));
    expect(_asyncStorage.default.setItem).toHaveBeenCalled();
  }));
  it('devrait avoir toutes les fonctions nécessaires', function () {
    _asyncStorage.default.getItem.mockResolvedValue(null);
    var _renderHook4 = (0, _reactNative.renderHook)(function () {
        return (0, _useLastActivity.default)();
      }),
      result = _renderHook4.result;
    expect(typeof result.current.saveActivity).toBe('function');
    expect(typeof result.current.clearActivity).toBe('function');
    expect(typeof result.current.reload).toBe('function');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJnZXRJdGVtIiwiamVzdCIsImZuIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJTVE9SQUdFX0tFWVMiLCJMQVNUX0FDVElWSVRZIiwiZW1pdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3JlYWN0TmF0aXZlIiwiX2FzeW5jU3RvcmFnZSIsIl91c2VMYXN0QWN0aXZpdHkiLCJfcmVxdWlyZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJzcHlPbiIsIkRhdGUiLCJtb2NrUmV0dXJuVmFsdWUiLCJhZnRlckVhY2giLCJyZXN0b3JlQWxsTW9ja3MiLCJpdCIsIkFzeW5jU3RvcmFnZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiX3JlbmRlckhvb2siLCJyZW5kZXJIb29rIiwidXNlTGFzdEFjdGl2aXR5IiwicmVzdWx0IiwiZXhwZWN0IiwiY3VycmVudCIsImxhc3RBY3Rpdml0eSIsInRvQmVOdWxsIiwiaXNMb2FkaW5nIiwidG9CZSIsImRlZmF1bHQiLCJtb2NrQWN0aXZpdHkiLCJ0eXBlIiwidGltZXN0YW1wIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9yZW5kZXJIb29rMiIsIndhaXRGb3IiLCJ0b0JlRGVmaW5lZCIsIl9yZW5kZXJIb29rMyIsImFjdGl2aXR5RGF0YSIsInNjb3JlIiwiYWN0Iiwic2F2ZUFjdGl2aXR5IiwidG9IYXZlQmVlbkNhbGxlZCIsIl9yZW5kZXJIb29rNCIsImNsZWFyQWN0aXZpdHkiLCJyZWxvYWQiXSwic291cmNlcyI6WyJ1c2VMYXN0QWN0aXZpdHkudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBfX3Rlc3RzX18vaG9va3MvdXNlTGFzdEFjdGl2aXR5LnRlc3QuanNcbmltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlJztcbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xuaW1wb3J0IHVzZUxhc3RBY3Rpdml0eSBmcm9tICcuLi8uLi9zcmMvaG9va3MvdXNlTGFzdEFjdGl2aXR5JztcblxuamVzdC5tb2NrKCdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZScsICgpID0+ICh7XG4gIGdldEl0ZW06IGplc3QuZm4oKSxcbiAgc2V0SXRlbTogamVzdC5mbigpLFxuICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jaygnLi4vLi4vc3JjL3V0aWxzL2NvbnN0YW50cycsICgpID0+ICh7XG4gIFNUT1JBR0VfS0VZUzoge1xuICAgIExBU1RfQUNUSVZJVFk6ICdsYXN0X2FjdGl2aXR5J1xuICB9XG59KSk7XG5cbmplc3QubW9jaygnLi4vLi4vc3JjL3V0aWxzL2V2ZW50QnVzJywgKCkgPT4gKHtcbiAgZW1pdDogamVzdC5mbigpXG59KSk7XG5cbmRlc2NyaWJlKCd1c2VMYXN0QWN0aXZpdHknLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIGplc3Quc3B5T24oRGF0ZSwgJ25vdycpLm1vY2tSZXR1cm5WYWx1ZSgxNjQwOTk1MjAwMDAwKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnZGV2cmFpdCBpbml0aWFsaXNlciBhdmVjIG51bGwnLCAoKSA9PiB7XG4gICAgQXN5bmNTdG9yYWdlLmdldEl0ZW0ubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTGFzdEFjdGl2aXR5KCkpO1xuICAgIFxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sYXN0QWN0aXZpdHkpLnRvQmVOdWxsKCk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzTG9hZGluZykudG9CZSh0cnVlKTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgY2hhcmdlciB1bmUgYWN0aXZpdO+/ve+/vSBleGlzdGFudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0FjdGl2aXR5ID0ge1xuICAgICAgdHlwZTogJ3ZvY2FidWxhcnknLFxuICAgICAgdGltZXN0YW1wOiAxNjQwOTk1MjAwMDAwIC0gMzAwMDAwIC8vIElsIHkgYSA1IG1pbnV0ZXNcbiAgICB9O1xuXG4gICAgQXN5bmNTdG9yYWdlLmdldEl0ZW0ubW9ja1Jlc29sdmVkVmFsdWUoSlNPTi5zdHJpbmdpZnkobW9ja0FjdGl2aXR5KSk7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTGFzdEFjdGl2aXR5KCkpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQubGFzdEFjdGl2aXR5KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lmxhc3RBY3Rpdml0eS50eXBlKS50b0JlKCd2b2NhYnVsYXJ5Jyk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNMb2FkaW5nKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgc2F1dmVnYXJkZXIgdW5lIG5vdXZlbGxlIGFjdGl2aXTDqScsIGFzeW5jICgpID0+IHtcbiAgICBBc3luY1N0b3JhZ2UuZ2V0SXRlbS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VMYXN0QWN0aXZpdHkoKSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0xvYWRpbmcpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYWN0aXZpdHlEYXRhID0geyB0eXBlOiAnZ3JhbW1hcicsIHNjb3JlOiA4NSB9O1xuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNhdmVBY3Rpdml0eShhY3Rpdml0eURhdGEpO1xuICAgIH0pO1xuXG4gICAgZXhwZWN0KEFzeW5jU3RvcmFnZS5zZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCdkZXZyYWl0IGF2b2lyIHRvdXRlcyBsZXMgZm9uY3Rpb25zIG7DqWNlc3NhaXJlcycsICgpID0+IHtcbiAgICBBc3luY1N0b3JhZ2UuZ2V0SXRlbS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VMYXN0QWN0aXZpdHkoKSk7XG4gICAgXG4gICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5zYXZlQWN0aXZpdHkpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5jbGVhckFjdGl2aXR5KS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQucmVsb2FkKS50b0JlKCdmdW5jdGlvbicpO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBS0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLDJDQUEyQyxFQUFFO0VBQUEsT0FBTztJQUM1REMsT0FBTyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ2xCQyxPQUFPLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbEJFLFVBQVUsRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUM7RUFDdEIsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUVISixXQUFBLEdBQUtDLElBQUksQ0FBQywyQkFBMkIsRUFBRTtFQUFBLE9BQU87SUFDNUNNLFlBQVksRUFBRTtNQUNaQyxhQUFhLEVBQUU7SUFD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