2037625d3c48c5816d2e674fa4dc9e85
_getJestObj().mock('expo-router', function () {
  return {
    router: {
      push: jest.fn(),
      back: jest.fn(),
      replace: jest.fn()
    },
    useLocalSearchParams: function useLocalSearchParams() {
      return {
        level: '1'
      };
    },
    useRouter: function useRouter() {
      return {
        push: jest.fn(),
        back: jest.fn()
      };
    }
  };
});
_getJestObj().mock('@react-navigation/native', function () {
  return {
    useFocusEffect: jest.fn(function (callback) {
      return callback();
    }),
    useNavigation: function useNavigation() {
      return {
        navigate: jest.fn(),
        goBack: jest.fn()
      };
    }
  };
});
_getJestObj().mock('@react-native-async-storage/async-storage', function () {
  return {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn(),
    clear: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _Dashboard = _interopRequireDefault(require("../../src/screens/Dashboard"));
var _LevelSelection = _interopRequireDefault(require("../../src/screens/LevelSelection"));
var _ExerciseSelection = _interopRequireDefault(require("../../src/screens/ExerciseSelection"));
var _vocabulary = _interopRequireDefault(require("../../src/screens/exercises/vocabulary"));
var _ThemeContext = require("../../src/contexts/ThemeContext");
var _ProgressContext = require("../../src/contexts/ProgressContext");
var _CurrentLevelContext = require("../../src/contexts/CurrentLevelContext");
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require5 = require("@jest/globals"),
    jest = _require5.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockTheme = {
  colors: {
    background: '#F8FAFC',
    primary: '#3B82F6',
    surface: '#FFFFFF',
    text: '#1F2937',
    textSecondary: '#6B7280'
  }
};
var TestWrapper = function TestWrapper(_ref) {
  var children = _ref.children;
  return (0, _jsxRuntime.jsx)(_ThemeContext.ThemeContext.Provider, {
    value: mockTheme,
    children: (0, _jsxRuntime.jsx)(_ProgressContext.ProgressProvider, {
      children: (0, _jsxRuntime.jsx)(_CurrentLevelContext.CurrentLevelProvider, {
        children: children
      })
    })
  });
};
describe('User Journey Integration Tests', function () {
  beforeEach(function () {
    jest.clearAllMocks();
    _asyncStorage.default.getItem.mockResolvedValue(null);
  });
  describe('Complete Learning Journey', function () {
    it('should complete a full user journey from dashboard to exercise', (0, _asyncToGenerator2.default)(function* () {
      var _render = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_Dashboard.default, {})
        })),
        getByTestId = _render.getByTestId,
        getByText = _render.getByText,
        queryByTestId = _render.queryByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(queryByTestId('dashboard-container')).toBeTruthy();
      });
      var levelSelectionButton = queryByTestId('level-selection-button');
      if (levelSelectionButton) {
        _reactNative.fireEvent.press(levelSelectionButton);
        var _require = require('expo-router'),
          _router = _require.router;
        expect(_router.push).toHaveBeenCalledWith('/(tabs)/levelSelection');
      }
      var _render2 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_LevelSelection.default, {})
        })),
        getLevelTestId = _render2.getByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(getLevelTestId('level-selection-container')).toBeTruthy();
      });
      var level1Button = getLevelTestId('level-1');
      _reactNative.fireEvent.press(level1Button);
      expect(router.push).toHaveBeenCalledWith({
        pathname: '/tabs/exerciseSelection',
        params: {
          level: '1'
        }
      });
      var _render3 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_ExerciseSelection.default, {
            level: "1"
          })
        })),
        getExerciseTestId = _render3.getByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(getExerciseTestId('exercise-selection-container')).toBeTruthy();
      });
      var vocabularyButton = getExerciseTestId('vocabulary-exercise');
      _reactNative.fireEvent.press(vocabularyButton);
      expect(router.push).toHaveBeenCalledWith({
        pathname: expect.stringContaining('vocabulary'),
        params: expect.objectContaining({
          level: '1'
        })
      });
      var _render4 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_vocabulary.default, {})
        })),
        getVocabTestId = _render4.getByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(getVocabTestId('vocabulary-word')).toBeTruthy();
      });
      var revealButton = getVocabTestId('reveal-translation-button');
      _reactNative.fireEvent.press(revealButton);
      yield (0, _reactNative.waitFor)(function () {
        expect(getVocabTestId('vocabulary-translation')).toBeTruthy();
      });
      var nextButton = getVocabTestId('next-word-button');
      _reactNative.fireEvent.press(nextButton);
      yield (0, _reactNative.waitFor)(function () {
        expect(getByText('2/')).toBeTruthy();
      });
    }));
    it('should handle user progression and data persistence', (0, _asyncToGenerator2.default)(function* () {
      _asyncStorage.default.getItem.mockImplementation(function (key) {
        if (key === 'lastActivity') {
          return Promise.resolve(JSON.stringify({
            type: 'vocabulary',
            level: '1',
            timestamp: Date.now(),
            metadata: {
              word: 5,
              totalWords: 15
            }
          }));
        }
        if (key === 'progress_vocabulary_1') {
          return Promise.resolve(JSON.stringify({
            wordsLearned: 10,
            totalWords: 50,
            percentage: 20
          }));
        }
        return Promise.resolve(null);
      });
      var _render5 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_Dashboard.default, {})
        })),
        getByTestId = _render5.getByTestId,
        queryByTestId = _render5.queryByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(queryByTestId('continue-activity-button')).toBeTruthy();
      });
      var continueButton = queryByTestId('continue-activity-button');
      _reactNative.fireEvent.press(continueButton);
      var _require2 = require('expo-router'),
        router = _require2.router;
      expect(router.push).toHaveBeenCalledWith({
        pathname: expect.stringContaining('vocabulary'),
        params: expect.objectContaining({
          level: '1'
        })
      });
    }));
    it('should navigate between different exercise types', (0, _asyncToGenerator2.default)(function* () {
      var exerciseTypes = [{
        id: 'vocabulary-exercise',
        component: _vocabulary.default
      }, {
        id: 'spelling-exercise',
        component: _vocabulary.default
      }, {
        id: 'reading-exercise',
        component: _vocabulary.default
      }];
      var _loop = function* _loop() {
        var _render6 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
            children: (0, _jsxRuntime.jsx)(_ExerciseSelection.default, {
              level: "1"
            })
          })),
          getByTestId = _render6.getByTestId;
        yield (0, _reactNative.waitFor)(function () {
          expect(getByTestId('exercise-selection-container')).toBeTruthy();
        });
        var exerciseButton = getByTestId(exercise.id);
        _reactNative.fireEvent.press(exerciseButton);
        var _require3 = require('expo-router'),
          router = _require3.router;
        expect(router.push).toHaveBeenCalled();
        jest.clearAllMocks();
      };
      for (var exercise of exerciseTypes) {
        yield* _loop();
      }
    }));
  });
  describe('Error Handling and Edge Cases', function () {
    it('should handle loading states gracefully', (0, _asyncToGenerator2.default)(function* () {
      _asyncStorage.default.getItem.mockImplementation(function () {
        return new Promise(function (resolve) {
          return setTimeout(function () {
            return resolve(null);
          }, 100);
        });
      });
      var _render7 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_Dashboard.default, {})
        })),
        getByTestId = _render7.getByTestId,
        queryByTestId = _render7.queryByTestId;
      expect(queryByTestId('activity-indicator')).toBeTruthy();
      yield (0, _reactNative.waitFor)(function () {
        expect(queryByTestId('dashboard-container')).toBeTruthy();
      }, {
        timeout: 3000
      });
    }));
    it('should handle empty data states', (0, _asyncToGenerator2.default)(function* () {
      _asyncStorage.default.getItem.mockResolvedValue(null);
      var _render8 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_Dashboard.default, {})
        })),
        getByTestId = _render8.getByTestId,
        queryByTestId = _render8.queryByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(queryByTestId('dashboard-container')).toBeTruthy();
      });
      expect(queryByTestId('level-selection-button')).toBeTruthy();
    }));
    it('should handle navigation errors gracefully', (0, _asyncToGenerator2.default)(function* () {
      var _require4 = require('expo-router'),
        router = _require4.router;
      router.push.mockImplementation(function () {
        throw new Error('Navigation error');
      });
      var _render9 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_LevelSelection.default, {})
        })),
        getByTestId = _render9.getByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(getByTestId('level-selection-container')).toBeTruthy();
      });
      var level1Button = getByTestId('level-1');
      expect(function () {
        _reactNative.fireEvent.press(level1Button);
      }).not.toThrow();
    }));
  });
  describe('Performance and Responsiveness', function () {
    it('should render components within acceptable time', (0, _asyncToGenerator2.default)(function* () {
      var startTime = Date.now();
      var _render0 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_Dashboard.default, {})
        })),
        getByTestId = _render0.getByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(getByTestId('dashboard-container')).toBeTruthy();
      });
      var renderTime = Date.now() - startTime;
      expect(renderTime).toBeLessThan(1000);
    }));
    it('should handle rapid user interactions', (0, _asyncToGenerator2.default)(function* () {
      var _render1 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_LevelSelection.default, {})
        })),
        getByTestId = _render1.getByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(getByTestId('level-selection-container')).toBeTruthy();
      });
      var level1Button = getByTestId('level-1');
      for (var i = 0; i < 5; i++) {
        _reactNative.fireEvent.press(level1Button);
      }
      expect(getByTestId('level-selection-container')).toBeTruthy();
    }));
  });
  describe('Data Consistency', function () {
    it('should maintain data consistency across components', (0, _asyncToGenerator2.default)(function* () {
      var progressData = {
        vocabulary: {
          level1: 25,
          level2: 0
        },
        spelling: {
          level1: 15,
          level2: 0
        }
      };
      _asyncStorage.default.getItem.mockImplementation(function (key) {
        if (key.startsWith('progress_')) {
          var _progressData$exercis;
          var _key$split = key.split('_'),
            _key$split2 = (0, _slicedToArray2.default)(_key$split, 3),
            exercise = _key$split2[1],
            level = _key$split2[2];
          return Promise.resolve(JSON.stringify({
            percentage: ((_progressData$exercis = progressData[exercise]) == null ? void 0 : _progressData$exercis[`level${level}`]) || 0
          }));
        }
        return Promise.resolve(null);
      });
      var _render10 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_Dashboard.default, {})
        })),
        getDashboardTestId = _render10.getByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(getDashboardTestId('dashboard-container')).toBeTruthy();
      });
      var _render11 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestWrapper, {
          children: (0, _jsxRuntime.jsx)(_LevelSelection.default, {})
        })),
        getLevelTestId = _render11.getByTestId;
      yield (0, _reactNative.waitFor)(function () {
        expect(getLevelTestId('level-selection-container')).toBeTruthy();
      });
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJyb3V0ZXIiLCJwdXNoIiwiamVzdCIsImZuIiwiYmFjayIsInJlcGxhY2UiLCJ1c2VMb2NhbFNlYXJjaFBhcmFtcyIsImxldmVsIiwidXNlUm91dGVyIiwidXNlRm9jdXNFZmZlY3QiLCJjYWxsYmFjayIsInVzZU5hdmlnYXRpb24iLCJuYXZpZ2F0ZSIsImdvQmFjayIsImdldEl0ZW0iLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfc2xpY2VkVG9BcnJheTIiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVhY3QiLCJfcmVhY3ROYXRpdmUiLCJfYXN5bmNTdG9yYWdlIiwiX0Rhc2hib2FyZCIsIl9MZXZlbFNlbGVjdGlvbiIsIl9FeGVyY2lzZVNlbGVjdGlvbiIsIl92b2NhYnVsYXJ5IiwiX1RoZW1lQ29udGV4dCIsIl9Qcm9ncmVzc0NvbnRleHQiLCJfQ3VycmVudExldmVsQ29udGV4dCIsIl9qc3hSdW50aW1lIiwiX3JlcXVpcmU1IiwibW9ja1RoZW1lIiwiY29sb3JzIiwiYmFja2dyb3VuZCIsInByaW1hcnkiLCJzdXJmYWNlIiwidGV4dCIsInRleHRTZWNvbmRhcnkiLCJUZXN0V3JhcHBlciIsIl9yZWYiLCJjaGlsZHJlbiIsImpzeCIsIlRoZW1lQ29udGV4dCIsIlByb3ZpZGVyIiwidmFsdWUiLCJQcm9ncmVzc1Byb3ZpZGVyIiwiQ3VycmVudExldmVsUHJvdmlkZXIiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiQXN5bmNTdG9yYWdlIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJpdCIsImRlZmF1bHQiLCJfcmVuZGVyIiwicmVuZGVyIiwiZ2V0QnlUZXN0SWQiLCJnZXRCeVRleHQiLCJxdWVyeUJ5VGVzdElkIiwid2FpdEZvciIsImV4cGVjdCIsInRvQmVUcnV0aHkiLCJsZXZlbFNlbGVjdGlvbkJ1dHRvbiIsImZpcmVFdmVudCIsInByZXNzIiwiX3JlcXVpcmUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIl9yZW5kZXIyIiwiZ2V0TGV2ZWxUZXN0SWQiLCJsZXZlbDFCdXR0b24iLCJwYXRobmFtZSIsInBhcmFtcyIsIl9yZW5kZXIzIiwiZ2V0RXhlcmNpc2VUZXN0SWQiLCJ2b2NhYnVsYXJ5QnV0dG9uIiwic3RyaW5nQ29udGFpbmluZyIsIm9iamVjdENvbnRhaW5pbmciLCJfcmVuZGVyNCIsImdldFZvY2FiVGVzdElkIiwicmV2ZWFsQnV0dG9uIiwibmV4dEJ1dHRvbiIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImtleSIsIlByb21pc2UiLCJyZXNvbHZlIiwiSlNPTiIsInN0cmluZ2lmeSIsInR5cGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwibWV0YWRhdGEiLCJ3b3JkIiwidG90YWxXb3JkcyIsIndvcmRzTGVhcm5lZCIsInBlcmNlbnRhZ2UiLCJfcmVuZGVyNSIsImNvbnRpbnVlQnV0dG9uIiwiX3JlcXVpcmUyIiwiZXhlcmNpc2VUeXBlcyIsImlkIiwiY29tcG9uZW50IiwiVm9jYWJ1bGFyeUV4ZXJjaXNlIiwiX2xvb3AiLCJfcmVuZGVyNiIsImV4ZXJjaXNlQnV0dG9uIiwiZXhlcmNpc2UiLCJfcmVxdWlyZTMiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwic2V0VGltZW91dCIsIl9yZW5kZXI3IiwidGltZW91dCIsIl9yZW5kZXI4IiwiX3JlcXVpcmU0IiwiRXJyb3IiLCJfcmVuZGVyOSIsIm5vdCIsInRvVGhyb3ciLCJzdGFydFRpbWUiLCJfcmVuZGVyMCIsInJlbmRlclRpbWUiLCJ0b0JlTGVzc1RoYW4iLCJfcmVuZGVyMSIsImkiLCJwcm9ncmVzc0RhdGEiLCJ2b2NhYnVsYXJ5IiwibGV2ZWwxIiwibGV2ZWwyIiwic3BlbGxpbmciLCJzdGFydHNXaXRoIiwiX3Byb2dyZXNzRGF0YSRleGVyY2lzIiwiX2tleSRzcGxpdCIsInNwbGl0IiwiX2tleSRzcGxpdDIiLCJfcmVuZGVyMTAiLCJnZXREYXNoYm9hcmRUZXN0SWQiLCJfcmVuZGVyMTEiXSwic291cmNlcyI6WyJ1c2VyLWpvdXJuZXkudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBfX3Rlc3RzX18vaW50ZWdyYXRpb24vdXNlci1qb3VybmV5LnRlc3QuanNcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIGZpcmVFdmVudCwgd2FpdEZvciwgYWN0IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdC1uYXRpdmUnO1xuaW1wb3J0IEFzeW5jU3RvcmFnZSBmcm9tICdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZSc7XG5cbi8vIE1vY2tzXG5qZXN0Lm1vY2soJ2V4cG8tcm91dGVyJywgKCkgPT4gKHtcbiAgcm91dGVyOiB7XG4gICAgcHVzaDogamVzdC5mbigpLFxuICAgIGJhY2s6IGplc3QuZm4oKSxcbiAgICByZXBsYWNlOiBqZXN0LmZuKCksXG4gIH0sXG4gIHVzZUxvY2FsU2VhcmNoUGFyYW1zOiAoKSA9PiAoeyBsZXZlbDogJzEnIH0pLFxuICB1c2VSb3V0ZXI6ICgpID0+ICh7XG4gICAgcHVzaDogamVzdC5mbigpLFxuICAgIGJhY2s6IGplc3QuZm4oKSxcbiAgfSksXG59KSk7XG5cbmplc3QubW9jaygnQHJlYWN0LW5hdmlnYXRpb24vbmF0aXZlJywgKCkgPT4gKHtcbiAgdXNlRm9jdXNFZmZlY3Q6IGplc3QuZm4oKGNhbGxiYWNrKSA9PiBjYWxsYmFjaygpKSxcbiAgdXNlTmF2aWdhdGlvbjogKCkgPT4gKHtcbiAgICBuYXZpZ2F0ZTogamVzdC5mbigpLFxuICAgIGdvQmFjazogamVzdC5mbigpLFxuICB9KSxcbn0pKTtcblxuamVzdC5tb2NrKCdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZScsICgpID0+ICh7XG4gIGdldEl0ZW06IGplc3QuZm4oKSxcbiAgc2V0SXRlbTogamVzdC5mbigpLFxuICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG4gIGNsZWFyOiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIEltcG9ydCBkZXMgY29tcG9zYW50c1xuaW1wb3J0IERhc2hib2FyZCBmcm9tICcuLi8uLi9zcmMvc2NyZWVucy9EYXNoYm9hcmQnO1xuaW1wb3J0IExldmVsU2VsZWN0aW9uIGZyb20gJy4uLy4uL3NyYy9zY3JlZW5zL0xldmVsU2VsZWN0aW9uJztcbmltcG9ydCBFeGVyY2lzZVNlbGVjdGlvbiBmcm9tICcuLi8uLi9zcmMvc2NyZWVucy9FeGVyY2lzZVNlbGVjdGlvbic7XG5pbXBvcnQgVm9jYWJ1bGFyeUV4ZXJjaXNlIGZyb20gJy4uLy4uL3NyYy9zY3JlZW5zL2V4ZXJjaXNlcy92b2NhYnVsYXJ5JztcblxuLy8gUHJvdmlkZXJzXG5pbXBvcnQgeyBUaGVtZUNvbnRleHQgfSBmcm9tICcuLi8uLi9zcmMvY29udGV4dHMvVGhlbWVDb250ZXh0JztcbmltcG9ydCB7IFByb2dyZXNzUHJvdmlkZXIgfSBmcm9tICcuLi8uLi9zcmMvY29udGV4dHMvUHJvZ3Jlc3NDb250ZXh0JztcbmltcG9ydCB7IEN1cnJlbnRMZXZlbFByb3ZpZGVyIH0gZnJvbSAnLi4vLi4vc3JjL2NvbnRleHRzL0N1cnJlbnRMZXZlbENvbnRleHQnO1xuXG5jb25zdCBtb2NrVGhlbWUgPSB7XG4gIGNvbG9yczoge1xuICAgIGJhY2tncm91bmQ6ICcjRjhGQUZDJyxcbiAgICBwcmltYXJ5OiAnIzNCODJGNicsXG4gICAgc3VyZmFjZTogJyNGRkZGRkYnLFxuICAgIHRleHQ6ICcjMUYyOTM3JyxcbiAgICB0ZXh0U2Vjb25kYXJ5OiAnIzZCNzI4MCcsXG4gIH0sXG59O1xuXG5jb25zdCBUZXN0V3JhcHBlciA9ICh7IGNoaWxkcmVuIH0pID0+IChcbiAgPFRoZW1lQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17bW9ja1RoZW1lfT5cbiAgICA8UHJvZ3Jlc3NQcm92aWRlcj5cbiAgICAgIDxDdXJyZW50TGV2ZWxQcm92aWRlcj5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9DdXJyZW50TGV2ZWxQcm92aWRlcj5cbiAgICA8L1Byb2dyZXNzUHJvdmlkZXI+XG4gIDwvVGhlbWVDb250ZXh0LlByb3ZpZGVyPlxuKTtcblxuZGVzY3JpYmUoJ1VzZXIgSm91cm5leSBJbnRlZ3JhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgQXN5bmNTdG9yYWdlLmdldEl0ZW0ubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb21wbGV0ZSBMZWFybmluZyBKb3VybmV5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29tcGxldGUgYSBmdWxsIHVzZXIgam91cm5leSBmcm9tIGRhc2hib2FyZCB0byBleGVyY2lzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIDEuIFJlbmRlciBEYXNoYm9hcmRcbiAgICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQsIGdldEJ5VGV4dCwgcXVlcnlCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgPERhc2hib2FyZCAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgLy8gMi4gVsOpcmlmaWVyIHF1ZSBsZSBkYXNoYm9hcmQgc2UgY2hhcmdlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHF1ZXJ5QnlUZXN0SWQoJ2Rhc2hib2FyZC1jb250YWluZXInKSkudG9CZVRydXRoeSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIDMuIFNpbXVsZXIgY2xpYyBzdXIgXCJDb21tZW5jZXJcIiBwb3VyIG5vdXZlYXUgdXRpbGlzYXRldXJcbiAgICAgIGNvbnN0IGxldmVsU2VsZWN0aW9uQnV0dG9uID0gcXVlcnlCeVRlc3RJZCgnbGV2ZWwtc2VsZWN0aW9uLWJ1dHRvbicpO1xuICAgICAgaWYgKGxldmVsU2VsZWN0aW9uQnV0dG9uKSB7XG4gICAgICAgIGZpcmVFdmVudC5wcmVzcyhsZXZlbFNlbGVjdGlvbkJ1dHRvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBWw6lyaWZpZXIgcXVlIGxhIG5hdmlnYXRpb24gZXN0IGFwcGVsw6llXG4gICAgICAgIGNvbnN0IHsgcm91dGVyIH0gPSByZXF1aXJlKCdleHBvLXJvdXRlcicpO1xuICAgICAgICBleHBlY3Qocm91dGVyLnB1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvKHRhYnMpL2xldmVsU2VsZWN0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIDQuIFRlc3QgZGUgbGEgc8OpbGVjdGlvbiBkZSBuaXZlYXVcbiAgICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQ6IGdldExldmVsVGVzdElkIH0gPSByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8TGV2ZWxTZWxlY3Rpb24gLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2V0TGV2ZWxUZXN0SWQoJ2xldmVsLXNlbGVjdGlvbi1jb250YWluZXInKSkudG9CZVRydXRoeSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIDUuIFPDqWxlY3Rpb25uZXIgbml2ZWF1IDFcbiAgICAgIGNvbnN0IGxldmVsMUJ1dHRvbiA9IGdldExldmVsVGVzdElkKCdsZXZlbC0xJyk7XG4gICAgICBmaXJlRXZlbnQucHJlc3MobGV2ZWwxQnV0dG9uKTtcblxuICAgICAgLy8gVsOpcmlmaWVyIG5hdmlnYXRpb24gdmVycyBleGVyY2ljZXNcbiAgICAgIGV4cGVjdChyb3V0ZXIucHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBwYXRobmFtZTogJy90YWJzL2V4ZXJjaXNlU2VsZWN0aW9uJyxcbiAgICAgICAgcGFyYW1zOiB7IGxldmVsOiAnMScgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyA2LiBUZXN0IGRlIGxhIHPDqWxlY3Rpb24gZCdleGVyY2ljZXNcbiAgICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQ6IGdldEV4ZXJjaXNlVGVzdElkIH0gPSByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8RXhlcmNpc2VTZWxlY3Rpb24gbGV2ZWw9XCIxXCIgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2V0RXhlcmNpc2VUZXN0SWQoJ2V4ZXJjaXNlLXNlbGVjdGlvbi1jb250YWluZXInKSkudG9CZVRydXRoeSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIDcuIFPDqWxlY3Rpb25uZXIgZXhlcmNpY2UgZGUgdm9jYWJ1bGFpcmVcbiAgICAgIGNvbnN0IHZvY2FidWxhcnlCdXR0b24gPSBnZXRFeGVyY2lzZVRlc3RJZCgndm9jYWJ1bGFyeS1leGVyY2lzZScpO1xuICAgICAgZmlyZUV2ZW50LnByZXNzKHZvY2FidWxhcnlCdXR0b24pO1xuXG4gICAgICAvLyBWw6lyaWZpZXIgbmF2aWdhdGlvbiB2ZXJzIHZvY2FidWxhaXJlXG4gICAgICBleHBlY3Qocm91dGVyLnB1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgcGF0aG5hbWU6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCd2b2NhYnVsYXJ5JyksXG4gICAgICAgIHBhcmFtczogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBsZXZlbDogJzEnIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDguIFRlc3QgZGUgbCdleGVyY2ljZSBkZSB2b2NhYnVsYWlyZVxuICAgICAgY29uc3QgeyBnZXRCeVRlc3RJZDogZ2V0Vm9jYWJUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxWb2NhYnVsYXJ5RXhlcmNpc2UgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIEF0dGVuZHJlIGxlIGNoYXJnZW1lbnRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2V0Vm9jYWJUZXN0SWQoJ3ZvY2FidWxhcnktd29yZCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gOS4gSW50ZXJhZ2lyIGF2ZWMgbCdleGVyY2ljZVxuICAgICAgY29uc3QgcmV2ZWFsQnV0dG9uID0gZ2V0Vm9jYWJUZXN0SWQoJ3JldmVhbC10cmFuc2xhdGlvbi1idXR0b24nKTtcbiAgICAgIGZpcmVFdmVudC5wcmVzcyhyZXZlYWxCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdldFZvY2FiVGVzdElkKCd2b2NhYnVsYXJ5LXRyYW5zbGF0aW9uJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyAxMC4gUGFzc2VyIGF1IG1vdCBzdWl2YW50XG4gICAgICBjb25zdCBuZXh0QnV0dG9uID0gZ2V0Vm9jYWJUZXN0SWQoJ25leHQtd29yZC1idXR0b24nKTtcbiAgICAgIGZpcmVFdmVudC5wcmVzcyhuZXh0QnV0dG9uKTtcblxuICAgICAgLy8gVsOpcmlmaWVyIHF1ZSBsZSBjb21wdGV1ciBjaGFuZ2VcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2V0QnlUZXh0KCcyLycpKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVzZXIgcHJvZ3Jlc3Npb24gYW5kIGRhdGEgcGVyc2lzdGVuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTaW11bGVyIGRlcyBkb25uw6llcyBleGlzdGFudGVzXG4gICAgICBBc3luY1N0b3JhZ2UuZ2V0SXRlbS5tb2NrSW1wbGVtZW50YXRpb24oKGtleSkgPT4ge1xuICAgICAgICBpZiAoa2V5ID09PSAnbGFzdEFjdGl2aXR5Jykge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgdHlwZTogJ3ZvY2FidWxhcnknLFxuICAgICAgICAgICAgbGV2ZWw6ICcxJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7IHdvcmQ6IDUsIHRvdGFsV29yZHM6IDE1IH1cbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gJ3Byb2dyZXNzX3ZvY2FidWxhcnlfMScpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHdvcmRzTGVhcm5lZDogMTAsXG4gICAgICAgICAgICB0b3RhbFdvcmRzOiA1MCxcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDIwXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVuZGVyIERhc2hib2FyZCBhdmVjIGRvbm7DqWVzIGV4aXN0YW50ZXNcbiAgICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQsIHF1ZXJ5QnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxEYXNoYm9hcmQgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIFbDqXJpZmllciBxdWUgbGUgYm91dG9uIFwiQ29udGludWVyXCIgYXBwYXJhw650XG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHF1ZXJ5QnlUZXN0SWQoJ2NvbnRpbnVlLWFjdGl2aXR5LWJ1dHRvbicpKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpcXVlciBzdXIgY29udGludWVyXG4gICAgICBjb25zdCBjb250aW51ZUJ1dHRvbiA9IHF1ZXJ5QnlUZXN0SWQoJ2NvbnRpbnVlLWFjdGl2aXR5LWJ1dHRvbicpO1xuICAgICAgZmlyZUV2ZW50LnByZXNzKGNvbnRpbnVlQnV0dG9uKTtcblxuICAgICAgLy8gVsOpcmlmaWVyIHF1ZSBsYSBuYXZpZ2F0aW9uIHJlcHJlbmQgbCdhY3Rpdml0w6lcbiAgICAgIGNvbnN0IHsgcm91dGVyIH0gPSByZXF1aXJlKCdleHBvLXJvdXRlcicpO1xuICAgICAgZXhwZWN0KHJvdXRlci5wdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHBhdGhuYW1lOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygndm9jYWJ1bGFyeScpLFxuICAgICAgICBwYXJhbXM6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgbGV2ZWw6ICcxJyB9KSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBuYXZpZ2F0ZSBiZXR3ZWVuIGRpZmZlcmVudCBleGVyY2lzZSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlVHlwZXMgPSBbXG4gICAgICAgIHsgaWQ6ICd2b2NhYnVsYXJ5LWV4ZXJjaXNlJywgY29tcG9uZW50OiBWb2NhYnVsYXJ5RXhlcmNpc2UgfSxcbiAgICAgICAgeyBpZDogJ3NwZWxsaW5nLWV4ZXJjaXNlJywgY29tcG9uZW50OiBWb2NhYnVsYXJ5RXhlcmNpc2UgfSwgLy8gUGxhY2Vob2xkZXJcbiAgICAgICAgeyBpZDogJ3JlYWRpbmctZXhlcmNpc2UnLCBjb21wb25lbnQ6IFZvY2FidWxhcnlFeGVyY2lzZSB9LCAvLyBQbGFjZWhvbGRlclxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBleGVyY2lzZSBvZiBleGVyY2lzZVR5cGVzKSB7XG4gICAgICAgIC8vIFJlbmRlciBFeGVyY2lzZVNlbGVjdGlvblxuICAgICAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgICAgPEV4ZXJjaXNlU2VsZWN0aW9uIGxldmVsPVwiMVwiIC8+XG4gICAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICBleHBlY3QoZ2V0QnlUZXN0SWQoJ2V4ZXJjaXNlLXNlbGVjdGlvbi1jb250YWluZXInKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDbGlxdWVyIHN1ciBsJ2V4ZXJjaWNlXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlQnV0dG9uID0gZ2V0QnlUZXN0SWQoZXhlcmNpc2UuaWQpO1xuICAgICAgICBmaXJlRXZlbnQucHJlc3MoZXhlcmNpc2VCdXR0b24pO1xuXG4gICAgICAgIC8vIFbDqXJpZmllciBsYSBuYXZpZ2F0aW9uXG4gICAgICAgIGNvbnN0IHsgcm91dGVyIH0gPSByZXF1aXJlKCdleHBvLXJvdXRlcicpO1xuICAgICAgICBleHBlY3Qocm91dGVyLnB1c2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcblxuICAgICAgICAvLyBSZXNldCBtb2NrcyBwb3VyIGxlIHByb2NoYWluIHRlc3RcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZyBhbmQgRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsb2FkaW5nIHN0YXRlcyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxlciB1biBkw6lsYWkgZGUgY2hhcmdlbWVudFxuICAgICAgQXN5bmNTdG9yYWdlLmdldEl0ZW0ubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IFxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShudWxsKSwgMTAwKSlcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQsIHF1ZXJ5QnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxEYXNoYm9hcmQgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIFbDqXJpZmllciBsJ8OpdGF0IGRlIGNoYXJnZW1lbnRcbiAgICAgIGV4cGVjdChxdWVyeUJ5VGVzdElkKCdhY3Rpdml0eS1pbmRpY2F0b3InKSkudG9CZVRydXRoeSgpO1xuXG4gICAgICAvLyBBdHRlbmRyZSBsYSBmaW4gZHUgY2hhcmdlbWVudFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChxdWVyeUJ5VGVzdElkKCdkYXNoYm9hcmQtY29udGFpbmVyJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGRhdGEgc3RhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxlciBhdWN1bmUgZG9ubsOpZVxuICAgICAgQXN5bmNTdG9yYWdlLmdldEl0ZW0ubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQsIHF1ZXJ5QnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxEYXNoYm9hcmQgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocXVlcnlCeVRlc3RJZCgnZGFzaGJvYXJkLWNvbnRhaW5lcicpKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVsOpcmlmaWVyIHF1ZSBsZSBib3V0b24gcG91ciBjb21tZW5jZXIgZXN0IHByw6lzZW50XG4gICAgICBleHBlY3QocXVlcnlCeVRlc3RJZCgnbGV2ZWwtc2VsZWN0aW9uLWJ1dHRvbicpKS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuYXZpZ2F0aW9uIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxlciB1bmUgZXJyZXVyIGRlIG5hdmlnYXRpb25cbiAgICAgIGNvbnN0IHsgcm91dGVyIH0gPSByZXF1aXJlKCdleHBvLXJvdXRlcicpO1xuICAgICAgcm91dGVyLnB1c2gubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOYXZpZ2F0aW9uIGVycm9yJyk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgPExldmVsU2VsZWN0aW9uIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdldEJ5VGVzdElkKCdsZXZlbC1zZWxlY3Rpb24tY29udGFpbmVyJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUZW50ZXIgZGUgbmF2aWd1ZXIgKG5lIGRldnJhaXQgcGFzIGNyYXNoZXIpXG4gICAgICBjb25zdCBsZXZlbDFCdXR0b24gPSBnZXRCeVRlc3RJZCgnbGV2ZWwtMScpO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQucHJlc3MobGV2ZWwxQnV0dG9uKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBhbmQgUmVzcG9uc2l2ZW5lc3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgY29tcG9uZW50cyB3aXRoaW4gYWNjZXB0YWJsZSB0aW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgPERhc2hib2FyZCAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnZXRCeVRlc3RJZCgnZGFzaGJvYXJkLWNvbnRhaW5lcicpKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVuZGVyVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBleHBlY3QocmVuZGVyVGltZSkudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBNb2lucyBkJzEgc2Vjb25kZVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmFwaWQgdXNlciBpbnRlcmFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8TGV2ZWxTZWxlY3Rpb24gLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2V0QnlUZXN0SWQoJ2xldmVsLXNlbGVjdGlvbi1jb250YWluZXInKSkudG9CZVRydXRoeSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaXF1ZXIgcmFwaWRlbWVudCBwbHVzaWV1cnMgZm9pc1xuICAgICAgY29uc3QgbGV2ZWwxQnV0dG9uID0gZ2V0QnlUZXN0SWQoJ2xldmVsLTEnKTtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgZmlyZUV2ZW50LnByZXNzKGxldmVsMUJ1dHRvbik7XG4gICAgICB9XG5cbiAgICAgIC8vIEwnYXBwIG5lIGRldnJhaXQgcGFzIGNyYXNoZXJcbiAgICAgIGV4cGVjdChnZXRCeVRlc3RJZCgnbGV2ZWwtc2VsZWN0aW9uLWNvbnRhaW5lcicpKS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEYXRhIENvbnNpc3RlbmN5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gZGF0YSBjb25zaXN0ZW5jeSBhY3Jvc3MgY29tcG9uZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNpbXVsZXIgZGVzIGRvbm7DqWVzIGRlIHByb2dyZXNzaW9uXG4gICAgICBjb25zdCBwcm9ncmVzc0RhdGEgPSB7XG4gICAgICAgIHZvY2FidWxhcnk6IHsgbGV2ZWwxOiAyNSwgbGV2ZWwyOiAwIH0sXG4gICAgICAgIHNwZWxsaW5nOiB7IGxldmVsMTogMTUsIGxldmVsMjogMCB9LFxuICAgICAgfTtcblxuICAgICAgQXN5bmNTdG9yYWdlLmdldEl0ZW0ubW9ja0ltcGxlbWVudGF0aW9uKChrZXkpID0+IHtcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdwcm9ncmVzc18nKSkge1xuICAgICAgICAgIGNvbnN0IFssIGV4ZXJjaXNlLCBsZXZlbF0gPSBrZXkuc3BsaXQoJ18nKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHByb2dyZXNzRGF0YVtleGVyY2lzZV0/LltgbGV2ZWwke2xldmVsfWBdIHx8IDBcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUZXN0IERhc2hib2FyZFxuICAgICAgY29uc3QgeyBnZXRCeVRlc3RJZDogZ2V0RGFzaGJvYXJkVGVzdElkIH0gPSByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8RGFzaGJvYXJkIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdldERhc2hib2FyZFRlc3RJZCgnZGFzaGJvYXJkLWNvbnRhaW5lcicpKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVGVzdCBMZXZlbFNlbGVjdGlvblxuICAgICAgY29uc3QgeyBnZXRCeVRlc3RJZDogZ2V0TGV2ZWxUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxMZXZlbFNlbGVjdGlvbiAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnZXRMZXZlbFRlc3RJZCgnbGV2ZWwtc2VsZWN0aW9uLWNvbnRhaW5lcicpKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gTGVzIGRldXggY29tcG9zYW50cyBkZXZyYWllbnQgYWZmaWNoZXIgZGVzIGRvbm7DqWVzIGNvaMOpcmVudGVzXG4gICAgICAvLyAoVsOpcmlmaWNhdGlvbiBpbXBsaWNpdGUgdmlhIGxlIHJlbmR1IHNhbnMgZXJyZXVyKVxuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBTUFBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGFBQWEsRUFBRTtFQUFBLE9BQU87SUFDOUJDLE1BQU0sRUFBRTtNQUNOQyxJQUFJLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7TUFDZkMsSUFBSSxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ2ZFLE9BQU8sRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFDbkIsQ0FBQztJQUNERyxvQkFBb0IsRUFBRSxTQUF0QkEsb0JBQW9CQSxDQUFBO01BQUEsT0FBUztRQUFFQyxLQUFLLEVBQUU7TUFBSSxDQUFDO0lBQUEsQ0FBQztJ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