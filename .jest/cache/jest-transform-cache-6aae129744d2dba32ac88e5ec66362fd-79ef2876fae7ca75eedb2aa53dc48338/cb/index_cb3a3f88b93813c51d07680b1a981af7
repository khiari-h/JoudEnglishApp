7bbe50add211809b0145e23994bce60d
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _reactNative = require("react-native");
var _expoRouter = require("expo-router");
var _propTypes = _interopRequireDefault(require("prop-types"));
var _Container = _interopRequireWildcard(require("../../../components/layout/Container"));
var _ReadingHeader = _interopRequireDefault(require("./ReadingHeader"));
var _ReadingTextSelector = _interopRequireDefault(require("./ReadingTextSelector"));
var _ReadingProgress = _interopRequireDefault(require("./ReadingProgress"));
var _ReadingText = _interopRequireDefault(require("./ReadingText"));
var _ReadingQuestionCard = _interopRequireDefault(require("./ReadingQuestionCard"));
var _QuestionIndicators = _interopRequireDefault(require("./QuestionIndicators"));
var _ReadingNavigation = _interopRequireDefault(require("./ReadingNavigation"));
var _ExerciseFeedback = _interopRequireDefault(require("../../../components/exercise-common/ExerciseFeedback"));
var _InstructionBox = _interopRequireDefault(require("../../../components/exercise-common/InstructionBox"));
var _useReading2 = _interopRequireDefault(require("./hooks/useReading"));
var _useLastActivity2 = _interopRequireDefault(require("../../../hooks/useLastActivity"));
var _readingDataHelper = require("../../../utils/reading/readingDataHelper");
var _style = _interopRequireDefault(require("./style"));
var _react = require("react");
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
var ReadingExercise = function ReadingExercise(_ref) {
  var route = _ref.route;
  var _ref2 = (route == null ? void 0 : route.params) || {},
    _ref2$level = _ref2.level,
    level = _ref2$level === void 0 ? "A1" : _ref2$level;
  var styles = (0, _style.default)();
  var _useLastActivity = (0, _useLastActivity2.default)(),
    saveActivity = _useLastActivity.saveActivity;
  var levelColor = (0, _readingDataHelper.getLevelColor)(level);
  var _useState = (0, _react.useState)(process.env.JEST_WORKER_ID ? (0, _readingDataHelper.getReadingData)(level) : null),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    readingData = _useState2[0],
    setReadingData = _useState2[1];
  var exercises = (readingData == null ? void 0 : readingData.exercises) || [];
  (0, _react.useEffect)(function () {
    var isMounted = true;
    var load = function () {
      var _ref3 = (0, _asyncToGenerator2.default)(function* () {
        if (process.env.JEST_WORKER_ID) {
          var _data = (0, _readingDataHelper.getReadingData)(level);
          if (isMounted) setReadingData(_data);
          return;
        }
        var data = yield (0, _readingDataHelper.loadReadingData)(level);
        if (isMounted) setReadingData(data);
      });
      return function load() {
        return _ref3.apply(this, arguments);
      };
    }();
    load();
    return function () {
      isMounted = false;
    };
  }, [level]);
  var _useReading = (0, _useReading2.default)(exercises, level),
    selectedExerciseIndex = _useReading.selectedExerciseIndex,
    currentQuestionIndex = _useReading.currentQuestionIndex,
    selectedAnswer = _useReading.selectedAnswer,
    showFeedback = _useReading.showFeedback,
    textExpanded = _useReading.textExpanded,
    attempts = _useReading.attempts,
    completedQuestions = _useReading.completedQuestions,
    loaded = _useReading.loaded,
    showDetailedProgress = _useReading.showDetailedProgress,
    currentExercise = _useReading.currentExercise,
    currentQuestion = _useReading.currentQuestion,
    totalQuestions = _useReading.totalQuestions,
    isCorrect = _useReading.isCorrect,
    changeExercise = _useReading.changeExercise,
    changeQuestion = _useReading.changeQuestion,
    selectAnswer = _useReading.selectAnswer,
    submitAnswer = _useReading.submitAnswer,
    nextQuestion = _useReading.nextQuestion,
    previousQuestion = _useReading.previousQuestion,
    retryQuestion = _useReading.retryQuestion,
    toggleTextExpansion = _useReading.toggleTextExpansion,
    toggleDetailedProgress = _useReading.toggleDetailedProgress,
    scrollViewRef = _useReading.scrollViewRef,
    textsScrollViewRef = _useReading.textsScrollViewRef,
    fadeAnim = _useReading.fadeAnim,
    slideAnim = _useReading.slideAnim;
  (0, _react.useEffect)(function () {
    if (!loaded || exercises.length === 0 || !currentExercise || !currentQuestion) return;
    var saveActivityAsync = function () {
      var _ref4 = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield saveActivity({
            title: "Lecture",
            level: level,
            type: "reading",
            metadata: {
              word: selectedExerciseIndex,
              totalWords: exercises.length,
              exercise: selectedExerciseIndex,
              question: currentQuestionIndex,
              totalQuestions: totalQuestions,
              exerciseTitle: currentExercise.title || `Texte ${selectedExerciseIndex + 1}`,
              totalExercises: exercises.length
            }
          });
        } catch (error) {
          console.error('Error saving activity:', error);
        }
      });
      return function saveActivityAsync() {
        return _ref4.apply(this, arguments);
      };
    }();
    saveActivityAsync();
  }, [selectedExerciseIndex, currentQuestionIndex]);
  var handleBackPress = (0, _react.useCallback)(function () {
    _expoRouter.router.push({
      pathname: "/tabs/exerciseSelection",
      params: {
        level: level
      }
    });
  }, [level]);
  var handleNext = (0, _react.useCallback)(function () {
    if (showFeedback) {
      nextQuestion();
    } else {
      submitAnswer();
    }
  }, [showFeedback, nextQuestion, submitAnswer]);
  var handleExerciseProgressPress = (0, _react.useCallback)(function (index) {
    changeExercise(index);
  }, [changeExercise]);
  var handleToggleProgressDetails = (0, _react.useCallback)(function () {
    toggleDetailedProgress();
  }, [toggleDetailedProgress]);
  var getExplanationMessage = function getExplanationMessage() {
    if (isCorrect) return currentQuestion.explanation;
    if (attempts > 1) {
      return `ðŸ’¡ The correct answer is: ${currentQuestion.options[currentQuestion.correctAnswer]}`;
    }
    return "ðŸ’ª Try again!";
  };
  if (!loaded || !exercises.length) {
    return (0, _jsxRuntime.jsx)(_Container.default, {
      safeArea: true,
      safeAreaEdges: _Container.CONTAINER_SAFE_EDGES.ALL,
      backgroundColor: "#f8fafc",
      statusBarStyle: "dark-content",
      children: (0, _jsxRuntime.jsx)(_reactNative.View, {
        style: styles.loadingContainer,
        children: (0, _jsxRuntime.jsx)(_reactNative.ActivityIndicator, {
          size: "large",
          color: levelColor,
          testID: "activity-indicator"
        })
      })
    });
  }
  return (0, _jsxRuntime.jsxs)(_Container.default, {
    safeArea: true,
    safeAreaEdges: _Container.CONTAINER_SAFE_EDGES.ALL,
    withScrollView: true,
    backgroundColor: "#f8fafc",
    statusBarStyle: "dark-content",
    withPadding: false,
    scrollViewProps: {
      ref: scrollViewRef,
      showsVerticalScrollIndicator: false,
      contentContainerStyle: styles.scrollContent
    },
    children: [(0, _jsxRuntime.jsx)(_ReadingHeader.default, {
      level: level,
      onBackPress: handleBackPress
    }), (0, _jsxRuntime.jsx)(_ReadingProgress.default, {
      readingData: readingData,
      completedQuestions: completedQuestions,
      levelColor: levelColor,
      expanded: showDetailedProgress,
      onToggleExpand: handleToggleProgressDetails,
      onExercisePress: handleExerciseProgressPress
    }), (0, _jsxRuntime.jsx)(_ReadingTextSelector.default, {
      exercises: exercises,
      selectedIndex: selectedExerciseIndex,
      onSelectExercise: changeExercise,
      scrollViewRef: textsScrollViewRef,
      levelColor: levelColor
    }), (0, _jsxRuntime.jsx)(_InstructionBox.default, {
      title: "\uD83D\uDCD6 Reading Exercise",
      instructions: "Read the text carefully and answer the questions.",
      variant: "compact",
      primaryColor: levelColor,
      initiallyExpanded: false
    }), (0, _jsxRuntime.jsx)(_ReadingText.default, {
      exercise: currentExercise,
      textExpanded: textExpanded,
      onToggleExpand: toggleTextExpansion,
      levelColor: levelColor
    }), currentQuestion && (0, _jsxRuntime.jsx)(_ReadingQuestionCard.default, {
      question: currentQuestion,
      questionIndex: currentQuestionIndex,
      selectedAnswer: selectedAnswer,
      onSelectAnswer: selectAnswer,
      showFeedback: showFeedback,
      fadeAnim: fadeAnim,
      slideAnim: slideAnim,
      levelColor: levelColor
    }), showFeedback && currentQuestion && (0, _jsxRuntime.jsx)(_ExerciseFeedback.default, {
      type: isCorrect ? "success" : "error",
      message: isCorrect ? "ðŸŽ‰ Perfect!" : "ðŸ¤” Not quite...",
      explanation: getExplanationMessage(),
      showDismissButton: false
    }), (0, _jsxRuntime.jsx)(_QuestionIndicators.default, {
      totalQuestions: totalQuestions,
      currentQuestionIndex: currentQuestionIndex,
      completedQuestions: completedQuestions[selectedExerciseIndex] || [],
      onSelectQuestion: changeQuestion,
      levelColor: levelColor
    }), (0, _jsxRuntime.jsx)(_ReadingNavigation.default, {
      showFeedback: showFeedback,
      isCorrect: isCorrect,
      selectedAnswer: selectedAnswer,
      currentQuestionIndex: currentQuestionIndex,
      totalQuestions: totalQuestions,
      attempts: attempts,
      levelColor: levelColor,
      onNext: handleNext,
      onPrevious: previousQuestion,
      onRetry: retryQuestion
    })]
  });
};
var _default = exports.default = ReadingExercise;
ReadingExercise.propTypes = {
  route: _propTypes.default.shape({
    params: _propTypes.default.shape({
      level: _propTypes.default.string
    })
  }).isRequired
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX2V4cG9Sb3V0ZXIiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9Db250YWluZXIiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9SZWFkaW5nSGVhZGVyIiwiX1JlYWRpbmdUZXh0U2VsZWN0b3IiLCJfUmVhZGluZ1Byb2dyZXNzIiwiX1JlYWRpbmdUZXh0IiwiX1JlYWRpbmdRdWVzdGlvbkNhcmQiLCJfUXVlc3Rpb25JbmRpY2F0b3JzIiwiX1JlYWRpbmdOYXZpZ2F0aW9uIiwiX0V4ZXJjaXNlRmVlZGJhY2siLCJfSW5zdHJ1Y3Rpb25Cb3giLCJfdXNlUmVhZGluZzIiLCJfdXNlTGFzdEFjdGl2aXR5MiIsIl9yZWFkaW5nRGF0YUhlbHBlciIsIl9zdHlsZSIsIl9yZWFjdCIsIl9qc3hSdW50aW1lIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsIl90IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJSZWFkaW5nRXhlcmNpc2UiLCJfcmVmIiwicm91dGUiLCJfcmVmMiIsInBhcmFtcyIsIl9yZWYyJGxldmVsIiwibGV2ZWwiLCJzdHlsZXMiLCJjcmVhdGVTdHlsZXMiLCJfdXNlTGFzdEFjdGl2aXR5IiwidXNlTGFzdEFjdGl2aXR5Iiwic2F2ZUFjdGl2aXR5IiwibGV2ZWxDb2xvciIsImdldExldmVsQ29sb3IiLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJKRVNUX1dPUktFUl9JRCIsImdldFJlYWRpbmdEYXRhIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsInJlYWRpbmdEYXRhIiwic2V0UmVhZGluZ0RhdGEiLCJleGVyY2lzZXMiLCJ1c2VFZmZlY3QiLCJpc01vdW50ZWQiLCJsb2FkIiwiX3JlZjMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkYXRhIiwibG9hZFJlYWRpbmdEYXRhIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfdXNlUmVhZGluZyIsInVzZVJlYWRpbmciLCJzZWxlY3RlZEV4ZXJjaXNlSW5kZXgiLCJjdXJyZW50UXVlc3Rpb25JbmRleCIsInNlbGVjdGVkQW5zd2VyIiwic2hvd0ZlZWRiYWNrIiwidGV4dEV4cGFuZGVkIiwiYXR0ZW1wdHMiLCJjb21wbGV0ZWRRdWVzdGlvbnMiLCJsb2FkZWQiLCJzaG93RGV0YWlsZWRQcm9ncmVzcyIsImN1cnJlbnRFeGVyY2lzZSIsImN1cnJlbnRRdWVzdGlvbiIsInRvdGFsUXVlc3Rpb25zIiwiaXNDb3JyZWN0IiwiY2hhbmdlRXhlcmNpc2UiLCJjaGFuZ2VRdWVzdGlvbiIsInNlbGVjdEFuc3dlciIsInN1Ym1pdEFuc3dlciIsIm5leHRRdWVzdGlvbiIsInByZXZpb3VzUXVlc3Rpb24iLCJyZXRyeVF1ZXN0aW9uIiwidG9nZ2xlVGV4dEV4cGFuc2lvbiIsInRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MiLCJzY3JvbGxWaWV3UmVmIiwidGV4dHNTY3JvbGxWaWV3UmVmIiwiZmFkZUFuaW0iLCJzbGlkZUFuaW0iLCJsZW5ndGgiLCJzYXZlQWN0aXZpdHlBc3luYyIsIl9yZWY0IiwidGl0bGUiLCJ0eXBlIiwibWV0YWRhdGEiLCJ3b3JkIiwidG90YWxXb3JkcyIsImV4ZXJjaXNlIiwicXVlc3Rpb24iLCJleGVyY2lzZVRpdGxlIiwidG90YWxFeGVyY2lzZXMiLCJlcnJvciIsImNvbnNvbGUiLCJoYW5kbGVCYWNrUHJlc3MiLCJ1c2VDYWxsYmFjayIsInJvdXRlciIsInB1c2giLCJwYXRobmFtZSIsImhhbmRsZU5leHQiLCJoYW5kbGVFeGVyY2lzZVByb2dyZXNzUHJlc3MiLCJpbmRleCIsImhhbmRsZVRvZ2dsZVByb2dyZXNzRGV0YWlscyIsImdldEV4cGxhbmF0aW9uTWVzc2FnZSIsImV4cGxhbmF0aW9uIiwib3B0aW9ucyIsImNvcnJlY3RBbnN3ZXIiLCJqc3giLCJzYWZlQXJlYSIsInNhZmVBcmVhRWRnZXMiLCJDT05UQUlORVJfU0FGRV9FREdFUyIsIkFMTCIsImJhY2tncm91bmRDb2xvciIsInN0YXR1c0JhclN0eWxlIiwiY2hpbGRyZW4iLCJWaWV3Iiwic3R5bGUiLCJsb2FkaW5nQ29udGFpbmVyIiwiQWN0aXZpdHlJbmRpY2F0b3IiLCJzaXplIiwiY29sb3IiLCJ0ZXN0SUQiLCJqc3hzIiwid2l0aFNjcm9sbFZpZXciLCJ3aXRoUGFkZGluZyIsInNjcm9sbFZpZXdQcm9wcyIsInJlZiIsInNob3dzVmVydGljYWxTY3JvbGxJbmRpY2F0b3IiLCJjb250ZW50Q29udGFpbmVyU3R5bGUiLCJzY3JvbGxDb250ZW50Iiwib25CYWNrUHJlc3MiLCJleHBhbmRlZCIsIm9uVG9nZ2xlRXhwYW5kIiwib25FeGVyY2lzZVByZXNzIiwic2VsZWN0ZWRJbmRleCIsIm9uU2VsZWN0RXhlcmNpc2UiLCJpbnN0cnVjdGlvbnMiLCJ2YXJpYW50IiwicHJpbWFyeUNvbG9yIiwiaW5pdGlhbGx5RXhwYW5kZWQiLCJxdWVzdGlvbkluZGV4Iiwib25TZWxlY3RBbnN3ZXIiLCJtZXNzYWdlIiwic2hvd0Rpc21pc3NCdXR0b24iLCJvblNlbGVjdFF1ZXN0aW9uIiwib25OZXh0Iiwib25QcmV2aW91cyIsIm9uUmV0cnkiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJzaGFwZSIsInN0cmluZyIsImlzUmVxdWlyZWQiXSwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBSZWFkaW5nRXhlcmNpc2UvaW5kZXguanMgLSBTQU5TIEJPVUNMRVMgSU5GSU5JRVNcclxuXHJcbmltcG9ydCB7IFZpZXcsIEFjdGl2aXR5SW5kaWNhdG9yIH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiZXhwby1yb3V0ZXJcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmltcG9ydCBDb250YWluZXIsIHsgQ09OVEFJTkVSX1NBRkVfRURHRVMgfSBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQvQ29udGFpbmVyXCI7XHJcbmltcG9ydCBSZWFkaW5nSGVhZGVyIGZyb20gXCIuL1JlYWRpbmdIZWFkZXJcIjtcclxuaW1wb3J0IFJlYWRpbmdUZXh0U2VsZWN0b3IgZnJvbSBcIi4vUmVhZGluZ1RleHRTZWxlY3RvclwiO1xyXG5pbXBvcnQgUmVhZGluZ1Byb2dyZXNzIGZyb20gXCIuL1JlYWRpbmdQcm9ncmVzc1wiO1xyXG5pbXBvcnQgUmVhZGluZ1RleHQgZnJvbSBcIi4vUmVhZGluZ1RleHRcIjtcclxuaW1wb3J0IFJlYWRpbmdRdWVzdGlvbkNhcmQgZnJvbSBcIi4vUmVhZGluZ1F1ZXN0aW9uQ2FyZFwiO1xyXG5pbXBvcnQgUXVlc3Rpb25JbmRpY2F0b3JzIGZyb20gXCIuL1F1ZXN0aW9uSW5kaWNhdG9yc1wiO1xyXG5pbXBvcnQgUmVhZGluZ05hdmlnYXRpb24gZnJvbSBcIi4vUmVhZGluZ05hdmlnYXRpb25cIjtcclxuaW1wb3J0IEV4ZXJjaXNlRmVlZGJhY2sgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvZXhlcmNpc2UtY29tbW9uL0V4ZXJjaXNlRmVlZGJhY2tcIjtcclxuaW1wb3J0IEluc3RydWN0aW9uQm94IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2V4ZXJjaXNlLWNvbW1vbi9JbnN0cnVjdGlvbkJveFwiO1xyXG5cclxuaW1wb3J0IHVzZVJlYWRpbmcgZnJvbSBcIi4vaG9va3MvdXNlUmVhZGluZ1wiO1xyXG5pbXBvcnQgdXNlTGFzdEFjdGl2aXR5IGZyb20gXCIuLi8uLi8uLi9ob29rcy91c2VMYXN0QWN0aXZpdHlcIjtcclxuaW1wb3J0IHsgZ2V0UmVhZGluZ0RhdGEsIGxvYWRSZWFkaW5nRGF0YSwgZ2V0TGV2ZWxDb2xvciB9IGZyb20gXCIuLi8uLi8uLi91dGlscy9yZWFkaW5nL3JlYWRpbmdEYXRhSGVscGVyXCI7XHJcbmltcG9ydCBjcmVhdGVTdHlsZXMgZnJvbSBcIi4vc3R5bGVcIjtcclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcblxyXG5jb25zdCBSZWFkaW5nRXhlcmNpc2UgPSAoeyByb3V0ZSB9KSA9PiB7XHJcbiAgY29uc3QgeyBsZXZlbCA9IFwiQTFcIiB9ID0gcm91dGU/LnBhcmFtcyB8fCB7fTtcclxuICBjb25zdCBzdHlsZXMgPSBjcmVhdGVTdHlsZXMoKTtcclxuICBjb25zdCB7IHNhdmVBY3Rpdml0eSB9ID0gdXNlTGFzdEFjdGl2aXR5KCk7XHJcblxyXG4gIC8vIERhdGFcclxuICBjb25zdCBsZXZlbENvbG9yID0gZ2V0TGV2ZWxDb2xvcihsZXZlbCk7XHJcbiAgY29uc3QgW3JlYWRpbmdEYXRhLCBzZXRSZWFkaW5nRGF0YV0gPSB1c2VTdGF0ZShcclxuICAgIHByb2Nlc3MuZW52LkpFU1RfV09SS0VSX0lEID8gZ2V0UmVhZGluZ0RhdGEobGV2ZWwpIDogbnVsbFxyXG4gICk7XHJcbiAgY29uc3QgZXhlcmNpc2VzID0gcmVhZGluZ0RhdGE/LmV4ZXJjaXNlcyB8fCBbXTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlO1xyXG4gICAgY29uc3QgbG9hZCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKHByb2Nlc3MuZW52LkpFU1RfV09SS0VSX0lEKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGdldFJlYWRpbmdEYXRhKGxldmVsKTtcclxuICAgICAgICBpZiAoaXNNb3VudGVkKSBzZXRSZWFkaW5nRGF0YShkYXRhKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGxvYWRSZWFkaW5nRGF0YShsZXZlbCk7XHJcbiAgICAgIGlmIChpc01vdW50ZWQpIHNldFJlYWRpbmdEYXRhKGRhdGEpO1xyXG4gICAgfTtcclxuICAgIGxvYWQoKTtcclxuICAgIHJldHVybiAoKSA9PiB7IGlzTW91bnRlZCA9IGZhbHNlOyB9O1xyXG4gIH0sIFtsZXZlbF0pO1xyXG5cclxuICAvLyBIb29rIHVuaWZpw6lcclxuICBjb25zdCB7XHJcbiAgICBzZWxlY3RlZEV4ZXJjaXNlSW5kZXgsXHJcbiAgICBjdXJyZW50UXVlc3Rpb25JbmRleCxcclxuICAgIHNlbGVjdGVkQW5zd2VyLFxyXG4gICAgc2hvd0ZlZWRiYWNrLFxyXG4gICAgdGV4dEV4cGFuZGVkLFxyXG4gICAgYXR0ZW1wdHMsXHJcbiAgICBjb21wbGV0ZWRRdWVzdGlvbnMsXHJcbiAgICBsb2FkZWQsXHJcbiAgICBzaG93RGV0YWlsZWRQcm9ncmVzcyxcclxuICAgIGN1cnJlbnRFeGVyY2lzZSxcclxuICAgIGN1cnJlbnRRdWVzdGlvbixcclxuICAgIHRvdGFsUXVlc3Rpb25zLFxyXG4gICAgaXNDb3JyZWN0LFxyXG4gICAgY2hhbmdlRXhlcmNpc2UsXHJcbiAgICBjaGFuZ2VRdWVzdGlvbixcclxuICAgIHNlbGVjdEFuc3dlcixcclxuICAgIHN1Ym1pdEFuc3dlcixcclxuICAgIG5leHRRdWVzdGlvbixcclxuICAgIHByZXZpb3VzUXVlc3Rpb24sXHJcbiAgICByZXRyeVF1ZXN0aW9uLFxyXG4gICAgdG9nZ2xlVGV4dEV4cGFuc2lvbixcclxuICAgIHRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MsXHJcbiAgICBzY3JvbGxWaWV3UmVmLFxyXG4gICAgdGV4dHNTY3JvbGxWaWV3UmVmLFxyXG4gICAgZmFkZUFuaW0sXHJcbiAgICBzbGlkZUFuaW0sXHJcbiAgfSA9IHVzZVJlYWRpbmcoZXhlcmNpc2VzLCBsZXZlbCk7XHJcblxyXG4gIC8vIOKchSBTQVVWRUdBUkRFIFNJTVBMSUZJw4lFIC0gc2V1bGVtZW50IHF1YW5kIGV4ZXJjaWNlL3F1ZXN0aW9uIGNoYW5nZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWxvYWRlZCB8fCBleGVyY2lzZXMubGVuZ3RoID09PSAwIHx8ICFjdXJyZW50RXhlcmNpc2UgfHwgIWN1cnJlbnRRdWVzdGlvbikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHNhdmVBY3Rpdml0eUFzeW5jID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNhdmVBY3Rpdml0eSh7XHJcbiAgICAgICAgICB0aXRsZTogXCJMZWN0dXJlXCIsXHJcbiAgICAgICAgICBsZXZlbCxcclxuICAgICAgICAgIHR5cGU6IFwicmVhZGluZ1wiLFxyXG4gICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgd29yZDogc2VsZWN0ZWRFeGVyY2lzZUluZGV4LCAvLyDinIUgUG91ciBjb2jDqXJlbmNlIGF2ZWMgYXV0cmVzIGV4ZXJjaWNlc1xyXG4gICAgICAgICAgICB0b3RhbFdvcmRzOiBleGVyY2lzZXMubGVuZ3RoLCAvLyDinIUgUG91ciBjb2jDqXJlbmNlXHJcbiAgICAgICAgICAgIGV4ZXJjaXNlOiBzZWxlY3RlZEV4ZXJjaXNlSW5kZXgsXHJcbiAgICAgICAgICAgIHF1ZXN0aW9uOiBjdXJyZW50UXVlc3Rpb25JbmRleCxcclxuICAgICAgICAgICAgdG90YWxRdWVzdGlvbnMsXHJcbiAgICAgICAgICAgIGV4ZXJjaXNlVGl0bGU6IGN1cnJlbnRFeGVyY2lzZS50aXRsZSB8fCBgVGV4dGUgJHtzZWxlY3RlZEV4ZXJjaXNlSW5kZXggKyAxfWAsXHJcbiAgICAgICAgICAgIHRvdGFsRXhlcmNpc2VzOiBleGVyY2lzZXMubGVuZ3RoXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGFjdGl2aXR5OicsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBzYXZlQWN0aXZpdHlBc3luYygpO1xyXG4gIH0sIFtzZWxlY3RlZEV4ZXJjaXNlSW5kZXgsIGN1cnJlbnRRdWVzdGlvbkluZGV4XSk7IC8vIOKchSBTRVVMRU1FTlQgY2VzIDIgZMOpcGVuZGFuY2VzICFcclxuXHJcbiAgLy8gSGFuZGxlcnNcclxuICBjb25zdCBoYW5kbGVCYWNrUHJlc3MgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICByb3V0ZXIucHVzaCh7XHJcbiAgICAgIHBhdGhuYW1lOiBcIi90YWJzL2V4ZXJjaXNlU2VsZWN0aW9uXCIsXHJcbiAgICAgIHBhcmFtczogeyBsZXZlbCB9XHJcbiAgICB9KTtcclxuICB9LCBbbGV2ZWxdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlTmV4dCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmIChzaG93RmVlZGJhY2spIHtcclxuICAgICAgbmV4dFF1ZXN0aW9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdWJtaXRBbnN3ZXIoKTtcclxuICAgIH1cclxuICB9LCBbc2hvd0ZlZWRiYWNrLCBuZXh0UXVlc3Rpb24sIHN1Ym1pdEFuc3dlcl0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVFeGVyY2lzZVByb2dyZXNzUHJlc3MgPSB1c2VDYWxsYmFjaygoaW5kZXgpID0+IHtcclxuICAgIGNoYW5nZUV4ZXJjaXNlKGluZGV4KTtcclxuICB9LCBbY2hhbmdlRXhlcmNpc2VdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlVG9nZ2xlUHJvZ3Jlc3NEZXRhaWxzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgdG9nZ2xlRGV0YWlsZWRQcm9ncmVzcygpO1xyXG4gIH0sIFt0b2dnbGVEZXRhaWxlZFByb2dyZXNzXSk7XHJcblxyXG4gIC8vIOKchSBFeHRyYWN0aW9uIGRlIGxhIGxvZ2lxdWUgY29uZGl0aW9ubmVsbGUgcG91ciBhbcOpbGlvcmVyIGxhIGxpc2liaWxpdMOpXHJcbiAgY29uc3QgZ2V0RXhwbGFuYXRpb25NZXNzYWdlID0gKCkgPT4ge1xyXG4gICAgaWYgKGlzQ29ycmVjdCkgcmV0dXJuIGN1cnJlbnRRdWVzdGlvbi5leHBsYW5hdGlvbjtcclxuICAgIGlmIChhdHRlbXB0cyA+IDEpIHtcclxuICAgICAgcmV0dXJuIGDwn5KhIFRoZSBjb3JyZWN0IGFuc3dlciBpczogJHtjdXJyZW50UXVlc3Rpb24ub3B0aW9uc1tjdXJyZW50UXVlc3Rpb24uY29ycmVjdEFuc3dlcl19YDtcclxuICAgIH1cclxuICAgIHJldHVybiBcIvCfkqogVHJ5IGFnYWluIVwiO1xyXG4gIH07XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT0gTE9BRElORyBTVEFURSA9PT09PT09PT09PT09PT09PT09XHJcbiAgaWYgKCFsb2FkZWQgfHwgIWV4ZXJjaXNlcy5sZW5ndGgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxDb250YWluZXJcclxuICAgICAgICBzYWZlQXJlYVxyXG4gICAgICAgIHNhZmVBcmVhRWRnZXM9e0NPTlRBSU5FUl9TQUZFX0VER0VTLkFMTH1cclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCIjZjhmYWZjXCJcclxuICAgICAgICBzdGF0dXNCYXJTdHlsZT1cImRhcmstY29udGVudFwiXHJcbiAgICAgID5cclxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmxvYWRpbmdDb250YWluZXJ9PlxyXG4gICAgICAgICAgPEFjdGl2aXR5SW5kaWNhdG9yIHNpemU9XCJsYXJnZVwiIGNvbG9yPXtsZXZlbENvbG9yfSB0ZXN0SUQ9XCJhY3Rpdml0eS1pbmRpY2F0b3JcIiAvPlxyXG4gICAgICAgIDwvVmlldz5cclxuICAgICAgPC9Db250YWluZXI+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PSBNQUlOIFJFTkRFUiA9PT09PT09PT09PT09PT09PT09XHJcbiAgcmV0dXJuIChcclxuICAgIDxDb250YWluZXJcclxuICAgICAgc2FmZUFyZWFcclxuICAgICAgc2FmZUFyZWFFZGdlcz17Q09OVEFJTkVSX1NBRkVfRURHRVMuQUxMfVxyXG4gICAgICB3aXRoU2Nyb2xsVmlld1xyXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I9XCIjZjhmYWZjXCJcclxuICAgICAgc3RhdHVzQmFyU3R5bGU9XCJkYXJrLWNvbnRlbnRcIlxyXG4gICAgICB3aXRoUGFkZGluZz17ZmFsc2V9XHJcbiAgICAgIHNjcm9sbFZpZXdQcm9wcz17e1xyXG4gICAgICAgIHJlZjogc2Nyb2xsVmlld1JlZixcclxuICAgICAgICBzaG93c1ZlcnRpY2FsU2Nyb2xsSW5kaWNhdG9yOiBmYWxzZSxcclxuICAgICAgICBjb250ZW50Q29udGFpbmVyU3R5bGU6IHN0eWxlcy5zY3JvbGxDb250ZW50LFxyXG4gICAgICB9fVxyXG4gICAgPlxyXG4gICAgICA8UmVhZGluZ0hlYWRlclxyXG4gICAgICAgIGxldmVsPXtsZXZlbH1cclxuICAgICAgICBvbkJhY2tQcmVzcz17aGFuZGxlQmFja1ByZXNzfVxyXG4gICAgICAvPlxyXG5cclxuICAgICAgPFJlYWRpbmdQcm9ncmVzc1xyXG4gICAgICAgIHJlYWRpbmdEYXRhPXtyZWFkaW5nRGF0YX1cclxuICAgICAgICBjb21wbGV0ZWRRdWVzdGlvbnM9e2NvbXBsZXRlZFF1ZXN0aW9uc31cclxuICAgICAgICBsZXZlbENvbG9yPXtsZXZlbENvbG9yfVxyXG4gICAgICAgIGV4cGFuZGVkPXtzaG93RGV0YWlsZWRQcm9ncmVzc31cclxuICAgICAgICBvblRvZ2dsZUV4cGFuZD17aGFuZGxlVG9nZ2xlUHJvZ3Jlc3NEZXRhaWxzfVxyXG4gICAgICAgIG9uRXhlcmNpc2VQcmVzcz17aGFuZGxlRXhlcmNpc2VQcm9ncmVzc1ByZXNzfVxyXG4gICAgICAvPlxyXG5cclxuICAgICAgPFJlYWRpbmdUZXh0U2VsZWN0b3JcclxuICAgICAgICBleGVyY2lzZXM9e2V4ZXJjaXNlc31cclxuICAgICAgICBzZWxlY3RlZEluZGV4PXtzZWxlY3RlZEV4ZXJjaXNlSW5kZXh9XHJcbiAgICAgICAgb25TZWxlY3RFeGVyY2lzZT17Y2hhbmdlRXhlcmNpc2V9XHJcbiAgICAgICAgc2Nyb2xsVmlld1JlZj17dGV4dHNTY3JvbGxWaWV3UmVmfVxyXG4gICAgICAgIGxldmVsQ29sb3I9e2xldmVsQ29sb3J9XHJcbiAgICAgIC8+XHJcblxyXG4gICAgICA8SW5zdHJ1Y3Rpb25Cb3hcclxuICAgICAgICB0aXRsZT1cIvCfk5YgUmVhZGluZyBFeGVyY2lzZVwiXHJcbiAgICAgICAgaW5zdHJ1Y3Rpb25zPVwiUmVhZCB0aGUgdGV4dCBjYXJlZnVsbHkgYW5kIGFuc3dlciB0aGUgcXVlc3Rpb25zLlwiXHJcbiAgICAgICAgdmFyaWFudD1cImNvbXBhY3RcIlxyXG4gICAgICAgIHByaW1hcnlDb2xvcj17bGV2ZWxDb2xvcn1cclxuICAgICAgICBpbml0aWFsbHlFeHBhbmRlZD17ZmFsc2V9XHJcbiAgICAgIC8+XHJcblxyXG4gICAgICA8UmVhZGluZ1RleHRcclxuICAgICAgICBleGVyY2lzZT17Y3VycmVudEV4ZXJjaXNlfVxyXG4gICAgICAgIHRleHRFeHBhbmRlZD17dGV4dEV4cGFuZGVkfVxyXG4gICAgICAgIG9uVG9nZ2xlRXhwYW5kPXt0b2dnbGVUZXh0RXhwYW5zaW9ufVxyXG4gICAgICAgIGxldmVsQ29sb3I9e2xldmVsQ29sb3J9XHJcbiAgICAgIC8+XHJcblxyXG4gICAgICB7Y3VycmVudFF1ZXN0aW9uICYmIChcclxuICAgICAgICA8UmVhZGluZ1F1ZXN0aW9uQ2FyZFxyXG4gICAgICAgICAgcXVlc3Rpb249e2N1cnJlbnRRdWVzdGlvbn1cclxuICAgICAgICAgIHF1ZXN0aW9uSW5kZXg9e2N1cnJlbnRRdWVzdGlvbkluZGV4fVxyXG4gICAgICAgICAgc2VsZWN0ZWRBbnN3ZXI9e3NlbGVjdGVkQW5zd2VyfVxyXG4gICAgICAgICAgb25TZWxlY3RBbnN3ZXI9e3NlbGVjdEFuc3dlcn1cclxuICAgICAgICAgIHNob3dGZWVkYmFjaz17c2hvd0ZlZWRiYWNrfVxyXG4gICAgICAgICAgZmFkZUFuaW09e2ZhZGVBbmltfVxyXG4gICAgICAgICAgc2xpZGVBbmltPXtzbGlkZUFuaW19XHJcbiAgICAgICAgICBsZXZlbENvbG9yPXtsZXZlbENvbG9yfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcblxyXG4gICAgICB7c2hvd0ZlZWRiYWNrICYmIGN1cnJlbnRRdWVzdGlvbiAmJiAoXHJcbiAgICAgICAgPEV4ZXJjaXNlRmVlZGJhY2tcclxuICAgICAgICAgIHR5cGU9e2lzQ29ycmVjdCA/IFwic3VjY2Vzc1wiIDogXCJlcnJvclwifVxyXG4gICAgICAgICAgbWVzc2FnZT17aXNDb3JyZWN0ID8gXCLwn46JIFBlcmZlY3QhXCIgOiBcIvCfpJQgTm90IHF1aXRlLi4uXCJ9XHJcbiAgICAgICAgICBleHBsYW5hdGlvbj17Z2V0RXhwbGFuYXRpb25NZXNzYWdlKCl9XHJcbiAgICAgICAgICBzaG93RGlzbWlzc0J1dHRvbj17ZmFsc2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuXHJcbiAgICAgIDxRdWVzdGlvbkluZGljYXRvcnNcclxuICAgICAgICB0b3RhbFF1ZXN0aW9ucz17dG90YWxRdWVzdGlvbnN9XHJcbiAgICAgICAgY3VycmVudFF1ZXN0aW9uSW5kZXg9e2N1cnJlbnRRdWVzdGlvbkluZGV4fVxyXG4gICAgICAgIGNvbXBsZXRlZFF1ZXN0aW9ucz17Y29tcGxldGVkUXVlc3Rpb25zW3NlbGVjdGVkRXhlcmNpc2VJbmRleF0gfHwgW119XHJcbiAgICAgICAgb25TZWxlY3RRdWVzdGlvbj17Y2hhbmdlUXVlc3Rpb259XHJcbiAgICAgICAgbGV2ZWxDb2xvcj17bGV2ZWxDb2xvcn1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIDxSZWFkaW5nTmF2aWdhdGlvblxyXG4gICAgICAgIHNob3dGZWVkYmFjaz17c2hvd0ZlZWRiYWNrfVxyXG4gICAgICAgIGlzQ29ycmVjdD17aXNDb3JyZWN0fVxyXG4gICAgICAgIHNlbGVjdGVkQW5zd2VyPXtzZWxlY3RlZEFuc3dlcn1cclxuICAgICAgICBjdXJyZW50UXVlc3Rpb25JbmRleD17Y3VycmVudFF1ZXN0aW9uSW5kZXh9XHJcbiAgICAgICAgdG90YWxRdWVzdGlvbnM9e3RvdGFsUXVlc3Rpb25zfVxyXG4gICAgICAgIGF0dGVtcHRzPXthdHRlbXB0c31cclxuICAgICAgICBsZXZlbENvbG9yPXtsZXZlbENvbG9yfVxyXG4gICAgICAgIG9uTmV4dD17aGFuZGxlTmV4dH1cclxuICAgICAgICBvblByZXZpb3VzPXtwcmV2aW91c1F1ZXN0aW9ufVxyXG4gICAgICAgIG9uUmV0cnk9e3JldHJ5UXVlc3Rpb259XHJcbiAgICAgIC8+XHJcbiAgICA8L0NvbnRhaW5lcj5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVhZGluZ0V4ZXJjaXNlO1xyXG5cclxuLy8g4pyFIEFqb3V0IGRlIGxhIHZhbGlkYXRpb24gZGVzIHByb3BzXHJcblJlYWRpbmdFeGVyY2lzZS5wcm9wVHlwZXMgPSB7XHJcbiAgcm91dGU6IFByb3BUeXBlcy5zaGFwZSh7XHJcbiAgICBwYXJhbXM6IFByb3BUeXBlcy5zaGFwZSh7XHJcbiAgICAgIGxldmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgfSksXHJcbiAgfSkuaXNSZXF1aXJlZCxcclxufTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxJQUFBQSxZQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxXQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxVQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFFQSxJQUFBSSxVQUFBLEdBQUFDLHVCQUFBLENBQUFMLE9BQUE7QUFDQSxJQUFBTSxjQUFBLEdBQUFILHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBTyxvQkFBQSxHQUFBSixzQkFBQSxDQUFBSCxPQUFBO0FBQ0EsSUFBQVEsZ0JBQUEsR0FBQUwsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFTLFlBQUEsR0FBQU4sc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFVLG9CQUFBLEdBQUFQLHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBVyxtQkFBQSxHQUFBUixzQkFBQSxDQUFB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