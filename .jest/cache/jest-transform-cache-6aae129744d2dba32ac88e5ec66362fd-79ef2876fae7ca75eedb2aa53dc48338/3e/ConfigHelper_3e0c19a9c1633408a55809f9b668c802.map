{"version":3,"names":["Object","defineProperty","exports","value","adaptViewConfig","addWhitelistedNativeProps","addWhitelistedUIProps","configureProps","configureReanimatedLogger","_propsAllowlists","require","_core","_errors","_logger","_PlatformChecker","SHOULD_BE_USE_WEB","shouldBeUseWeb","assertNoOverlapInLists","key","PropsAllowlists","NATIVE_THREAD_PROPS_WHITELIST","UI_THREAD_PROPS_WHITELIST","ReanimatedError","jsiConfigureProps","keys","props","oldSize","length","assign","config","updateLoggerConfig","executeOnUIRuntimeSync","PROCESSED_VIEW_NAMES","Set","viewConfig","viewName","uiViewClassName","validAttributes","has","propsToAdd","forEach","add"],"sources":["ConfigHelper.ts"],"sourcesContent":["'use strict';\nimport { PropsAllowlists } from './propsAllowlists';\nimport { executeOnUIRuntimeSync, jsiConfigureProps } from './core';\nimport { ReanimatedError } from './errors';\nimport { updateLoggerConfig } from './logger';\nimport type { LoggerConfig } from './logger';\nimport { shouldBeUseWeb } from './PlatformChecker';\n\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\n\nfunction assertNoOverlapInLists() {\n  for (const key in PropsAllowlists.NATIVE_THREAD_PROPS_WHITELIST) {\n    if (key in PropsAllowlists.UI_THREAD_PROPS_WHITELIST) {\n      throw new ReanimatedError(\n        `Property \\`${key}\\` was whitelisted both as UI and native prop. Please remove it from one of the lists.`\n      );\n    }\n  }\n}\n\nexport function configureProps(): void {\n  assertNoOverlapInLists();\n  jsiConfigureProps(\n    Object.keys(PropsAllowlists.UI_THREAD_PROPS_WHITELIST),\n    Object.keys(PropsAllowlists.NATIVE_THREAD_PROPS_WHITELIST)\n  );\n}\n\nexport function addWhitelistedNativeProps(\n  props: Record<string, boolean>\n): void {\n  const oldSize = Object.keys(\n    PropsAllowlists.NATIVE_THREAD_PROPS_WHITELIST\n  ).length;\n  PropsAllowlists.NATIVE_THREAD_PROPS_WHITELIST = {\n    ...PropsAllowlists.NATIVE_THREAD_PROPS_WHITELIST,\n    ...props,\n  };\n  if (\n    oldSize !==\n    Object.keys(PropsAllowlists.NATIVE_THREAD_PROPS_WHITELIST).length\n  ) {\n    configureProps();\n  }\n}\n\nexport function addWhitelistedUIProps(props: Record<string, boolean>): void {\n  const oldSize = Object.keys(PropsAllowlists.UI_THREAD_PROPS_WHITELIST).length;\n  PropsAllowlists.UI_THREAD_PROPS_WHITELIST = {\n    ...PropsAllowlists.UI_THREAD_PROPS_WHITELIST,\n    ...props,\n  };\n  if (\n    oldSize !== Object.keys(PropsAllowlists.UI_THREAD_PROPS_WHITELIST).length\n  ) {\n    configureProps();\n  }\n}\n\n/**\n * Updates Reanimated logger config with the user-provided configuration. Will\n * affect Reanimated code executed after call to this function so it should be\n * called before any Reanimated code is executed to take effect. Each call to\n * this function will override the previous configuration (it's recommended to\n * call it only once).\n *\n * @param config - The new logger configuration to apply.\n */\nexport function configureReanimatedLogger(config: LoggerConfig) {\n  // Update the configuration object in the React runtime\n  updateLoggerConfig(config);\n  // Register the updated configuration in the UI runtime\n  if (!SHOULD_BE_USE_WEB) {\n    executeOnUIRuntimeSync(updateLoggerConfig)(config);\n  }\n}\n\nconst PROCESSED_VIEW_NAMES = new Set();\n\nexport interface ViewConfig {\n  uiViewClassName: string;\n  validAttributes: Record<string, unknown>;\n}\n/**\n * Updates UI props whitelist for given view host instance this will work just\n * once for every view name\n */\n\nexport function adaptViewConfig(viewConfig: ViewConfig): void {\n  const viewName = viewConfig.uiViewClassName;\n  const props = viewConfig.validAttributes;\n\n  // update whitelist of UI props for this view name only once\n  if (!PROCESSED_VIEW_NAMES.has(viewName)) {\n    const propsToAdd: Record<string, boolean> = {};\n    Object.keys(props).forEach((key) => {\n      // we don't want to add native props as they affect layout\n      // we also skip props which repeat here\n      if (\n        !(key in PropsAllowlists.NATIVE_THREAD_PROPS_WHITELIST) &&\n        !(key in PropsAllowlists.UI_THREAD_PROPS_WHITELIST)\n      ) {\n        propsToAdd[key] = true;\n      }\n    });\n    addWhitelistedUIProps(propsToAdd);\n\n    PROCESSED_VIEW_NAMES.add(viewName);\n  }\n}\n\nconfigureProps();\n"],"mappings":"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","ignoreList":[]}