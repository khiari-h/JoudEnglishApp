{"version":3,"names":["_reactNative","require","_reactNative2","_useModalAnimation","_interopRequireDefault","mockAnimatedValue","jest","fn","interpolate","addListener","removeAllListeners","_value","spyOn","Animated","mockImplementation","mockStart","start","stop","describe","beforeEach","clearAllMocks","it","_renderHook","renderHook","_ref","isVisible","useModalAnimation","initialProps","rerender","act","expect","timing","toHaveBeenCalledTimes","_renderHook2","_ref2","position","toHaveBeenCalledWith","any","Value","objectContaining","toValue","duration","_renderHook3","result","current","transformStyle","toEqual","transform","arrayContaining","translateY","Object"],"sources":["useModalAnimation.test.js"],"sourcesContent":["import { renderHook, act } from '@testing-library/react-native';\r\nimport { Animated } from 'react-native';\r\nimport useModalAnimation from '../../../../src/components/ui/Modal/useModalAnimation';\r\n\r\n// We create a mock for Animated.Value that behaves like a constructor\r\nconst mockAnimatedValue = jest.fn(() => ({\r\n  interpolate: jest.fn(),\r\n  addListener: jest.fn(),\r\n  removeAllListeners: jest.fn(),\r\n  _value: 0, // A crucial detail: give it a value property for some Animated functions\r\n}));\r\njest.spyOn(Animated, 'Value').mockImplementation(mockAnimatedValue);\r\n\r\n// We spy on Animated.timing and mock its behavior\r\nconst mockStart = jest.fn();\r\njest.spyOn(Animated, 'timing').mockImplementation(() => ({\r\n  start: mockStart,\r\n  stop: jest.fn(),\r\n}));\r\n\r\ndescribe('useModalAnimation', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  it('devrait dÃ©marrer l\\'animation si isVisible devient vrai', () => {\r\n    const { rerender } = renderHook(({ isVisible }) => useModalAnimation({ isVisible }), {\r\n      initialProps: { isVisible: false },\r\n    });\r\n\r\n    act(() => {\r\n      rerender({ isVisible: true });\r\n    });\r\n\r\n    expect(Animated.timing).toHaveBeenCalledTimes(1);\r\n    expect(mockStart).toHaveBeenCalledTimes(1);\r\n  });\r\n\r\n  it('devrait appeler Animated.timing avec les bonnes valeurs pour la position \"top\"', () => {\r\n    const { rerender } = renderHook(({ isVisible, position }) => useModalAnimation({ isVisible, position }), {\r\n      initialProps: { isVisible: false, position: 'top' },\r\n    });\r\n\r\n    act(() => {\r\n      rerender({ isVisible: true, position: 'top' });\r\n    });\r\n\r\n    expect(Animated.timing).toHaveBeenCalledWith(\r\n      expect.any(Animated.Value),\r\n      expect.objectContaining({\r\n        toValue: 1,\r\n        duration: 300,\r\n      })\r\n    );\r\n  });\r\n\r\n  it('devrait retourner les styles de transformation corrects pour la position \"top\"', () => {\r\n    const { result } = renderHook(() => useModalAnimation({ isVisible: true, position: 'top' }));\r\n    \r\n    // Asserting on the returned style object\r\n    expect(result.current.transformStyle).toEqual(\r\n      expect.objectContaining({\r\n        transform: expect.arrayContaining([\r\n          expect.objectContaining({\r\n            translateY: expect.any(Object),\r\n          }),\r\n        ]),\r\n      })\r\n    );\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}