{"version":3,"names":["Object","defineProperty","exports","value","getSwipeSimulator","_styleUpdater","require","_RNScreensTurboModule","BASE_VELOCITY","ADDITIONAL_VELOCITY_FACTOR_X","ADDITIONAL_VELOCITY_FACTOR_Y","ADDITIONAL_VELOCITY_FACTOR_XY","_worklet_3339184140838_init_data","code","location","sourceMap","version","computeEasingProgress","_e","global","Error","startingTimestamp","distance","velocity","Math","abs","elapsedTime","_getAnimationTimestamp","currentPosition","progress","__closure","__workletHash","__initData","__stackDetails","_worklet_558927583902_init_data","easing","x","pow","_worklet_11469122063489_init_data","computeProgress","screenTransitionConfig","event","isTransitionCanceled","screenDimensions","progressX","translationX","width","progressY","translationY","height","maxProgress","max","_worklet_14642652832736_init_data","maybeScheduleNextFrame","step","didScreenReachDestination","stackTag","RNScreensTurboModule","updateTransition","requestAnimationFrame","onFinishAnimation","_worklet_17409639634070_init_data","lockAxis","startTimestamp","startingPosition","y","direction","sign","finalPosition","euclideanDistance","sqrt","screenDiagonal","velocityVectorLength","didScreenReachDestinationCheck","restoreOriginalStyleForBelowTopScreen","applyStyleForBelowTopScreen","computeFrame","applyStyle","finished"],"sources":["swipeSimulator.ts"],"sourcesContent":["'use strict';\nimport type {\n  PanGestureHandlerEventPayload,\n  ScreenTransitionConfig,\n  LockAxis,\n} from './commonTypes';\nimport { applyStyle, applyStyleForBelowTopScreen } from './styleUpdater';\nimport { RNScreensTurboModule } from './RNScreensTurboModule';\n\nconst BASE_VELOCITY = 400;\nconst ADDITIONAL_VELOCITY_FACTOR_X = 400;\nconst ADDITIONAL_VELOCITY_FACTOR_Y = 500;\nconst ADDITIONAL_VELOCITY_FACTOR_XY = 600;\n\nfunction computeEasingProgress(\n  startingTimestamp: number,\n  distance: number,\n  velocity: number\n) {\n  'worklet';\n  if (Math.abs(distance) < 1) {\n    return 1;\n  }\n  const elapsedTime = (_getAnimationTimestamp() - startingTimestamp) / 1000;\n  const currentPosition = velocity * elapsedTime;\n  const progress = currentPosition / distance;\n  return progress;\n}\n\nfunction easing(x: number): number {\n  'worklet';\n  // based on https://easings.net/#easeOutQuart\n  return 1 - Math.pow(1 - x, 5);\n}\n\nfunction computeProgress(\n  screenTransitionConfig: ScreenTransitionConfig,\n  event: PanGestureHandlerEventPayload,\n  isTransitionCanceled: boolean\n) {\n  'worklet';\n  const screenDimensions = screenTransitionConfig.screenDimensions;\n  const progressX = Math.abs(event.translationX / screenDimensions.width);\n  const progressY = Math.abs(event.translationY / screenDimensions.height);\n  const maxProgress = Math.max(progressX, progressY);\n  const progress = isTransitionCanceled ? maxProgress / 2 : maxProgress;\n  return progress;\n}\n\nfunction maybeScheduleNextFrame(\n  step: () => void,\n  didScreenReachDestination: boolean,\n  screenTransitionConfig: ScreenTransitionConfig,\n  event: PanGestureHandlerEventPayload,\n  isTransitionCanceled: boolean\n) {\n  'worklet';\n  if (!didScreenReachDestination) {\n    const stackTag = screenTransitionConfig.stackTag;\n    const progress = computeProgress(\n      screenTransitionConfig,\n      event,\n      isTransitionCanceled\n    );\n    RNScreensTurboModule.updateTransition(stackTag, progress);\n    requestAnimationFrame(step);\n  } else {\n    screenTransitionConfig.onFinishAnimation?.();\n  }\n}\n\nexport function getSwipeSimulator(\n  event: PanGestureHandlerEventPayload,\n  screenTransitionConfig: ScreenTransitionConfig,\n  lockAxis?: LockAxis\n) {\n  'worklet';\n  const screenDimensions = screenTransitionConfig.screenDimensions;\n  const startTimestamp = _getAnimationTimestamp();\n  const { isTransitionCanceled } = screenTransitionConfig;\n  const startingPosition = {\n    x: event.translationX,\n    y: event.translationY,\n  };\n  const direction = {\n    x: Math.sign(event.translationX),\n    y: Math.sign(event.translationY),\n  };\n  const finalPosition = isTransitionCanceled\n    ? { x: 0, y: 0 }\n    : {\n        x: direction.x * screenDimensions.width,\n        y: direction.y * screenDimensions.height,\n      };\n  const distance = {\n    x: Math.abs(finalPosition.x - startingPosition.x),\n    y: Math.abs(finalPosition.y - startingPosition.y),\n  };\n  const didScreenReachDestination = {\n    x: false,\n    y: false,\n  };\n  const velocity = { x: BASE_VELOCITY, y: BASE_VELOCITY };\n  if (lockAxis === 'x') {\n    velocity.y = 0;\n    velocity.x +=\n      (ADDITIONAL_VELOCITY_FACTOR_X * distance.x) / screenDimensions.width;\n  } else if (lockAxis === 'y') {\n    velocity.x = 0;\n    velocity.y +=\n      (ADDITIONAL_VELOCITY_FACTOR_Y * distance.y) / screenDimensions.height;\n  } else {\n    const euclideanDistance = Math.sqrt(distance.x ** 2 + distance.y ** 2);\n    const screenDiagonal = Math.sqrt(\n      screenDimensions.width ** 2 + screenDimensions.height ** 2\n    );\n    const velocityVectorLength =\n      BASE_VELOCITY +\n      (ADDITIONAL_VELOCITY_FACTOR_XY * euclideanDistance) / screenDiagonal;\n    if (Math.abs(startingPosition.x) > Math.abs(startingPosition.y)) {\n      velocity.x = velocityVectorLength;\n      velocity.y =\n        velocityVectorLength *\n        Math.abs(startingPosition.y / startingPosition.x);\n    } else {\n      velocity.x =\n        velocityVectorLength *\n        Math.abs(startingPosition.x / startingPosition.y);\n      velocity.y = velocityVectorLength;\n    }\n  }\n\n  if (isTransitionCanceled) {\n    function didScreenReachDestinationCheck() {\n      if (lockAxis === 'x') {\n        return didScreenReachDestination.x;\n      } else if (lockAxis === 'y') {\n        return didScreenReachDestination.y;\n      } else {\n        return didScreenReachDestination.x && didScreenReachDestination.y;\n      }\n    }\n\n    function restoreOriginalStyleForBelowTopScreen() {\n      event.translationX = direction.x * screenDimensions.width;\n      event.translationY = direction.y * screenDimensions.height;\n      applyStyleForBelowTopScreen(screenTransitionConfig, event);\n    }\n\n    const computeFrame = () => {\n      const progress = {\n        x: computeEasingProgress(startTimestamp, distance.x, velocity.x),\n        y: computeEasingProgress(startTimestamp, distance.y, velocity.y),\n      };\n      event.translationX =\n        startingPosition.x - direction.x * distance.x * easing(progress.x);\n      event.translationY =\n        startingPosition.y - direction.y * distance.y * easing(progress.y);\n      if (direction.x > 0) {\n        if (event.translationX <= 0) {\n          didScreenReachDestination.x = true;\n          event.translationX = 0;\n        }\n      } else {\n        if (event.translationX >= 0) {\n          didScreenReachDestination.x = true;\n          event.translationX = 0;\n        }\n      }\n      if (direction.y > 0) {\n        if (event.translationY <= 0) {\n          didScreenReachDestination.y = true;\n          event.translationY = 0;\n        }\n      } else {\n        if (event.translationY >= 0) {\n          didScreenReachDestination.y = true;\n          event.translationY = 0;\n        }\n      }\n      applyStyle(screenTransitionConfig, event);\n      const finished = didScreenReachDestinationCheck();\n      if (finished) {\n        restoreOriginalStyleForBelowTopScreen();\n      }\n      maybeScheduleNextFrame(\n        computeFrame,\n        finished,\n        screenTransitionConfig,\n        event,\n        isTransitionCanceled\n      );\n    };\n    return computeFrame;\n  } else {\n    const computeFrame = () => {\n      const progress = {\n        x: computeEasingProgress(startTimestamp, distance.x, velocity.x),\n        y: computeEasingProgress(startTimestamp, distance.y, velocity.y),\n      };\n      event.translationX =\n        startingPosition.x + direction.x * distance.x * easing(progress.x);\n      event.translationY =\n        startingPosition.y + direction.y * distance.y * easing(progress.y);\n      if (direction.x > 0) {\n        if (event.translationX >= screenDimensions.width) {\n          didScreenReachDestination.x = true;\n          event.translationX = screenDimensions.width;\n        }\n      } else {\n        if (event.translationX <= -screenDimensions.width) {\n          didScreenReachDestination.x = true;\n          event.translationX = -screenDimensions.width;\n        }\n      }\n      if (direction.y > 0) {\n        if (event.translationY >= screenDimensions.height) {\n          didScreenReachDestination.y = true;\n          event.translationY = screenDimensions.height;\n        }\n      } else {\n        if (event.translationY <= -screenDimensions.height) {\n          didScreenReachDestination.y = true;\n          event.translationY = -screenDimensions.height;\n        }\n      }\n      applyStyle(screenTransitionConfig, event);\n      maybeScheduleNextFrame(\n        computeFrame,\n        didScreenReachDestination.x || didScreenReachDestination.y,\n        screenTransitionConfig,\n        event,\n        isTransitionCanceled\n      );\n    };\n    return computeFrame;\n  }\n}\n"],"mappings":"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","ignoreList":[]}