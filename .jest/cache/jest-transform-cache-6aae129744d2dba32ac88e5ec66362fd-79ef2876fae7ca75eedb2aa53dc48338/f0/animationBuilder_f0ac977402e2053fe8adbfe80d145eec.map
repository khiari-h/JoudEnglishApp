{"version":3,"names":["Object","defineProperty","exports","value","maybeBuild","_logger","require","mockTargetValues","targetOriginX","targetOriginY","targetWidth","targetHeight","targetGlobalOriginX","targetGlobalOriginY","targetBorderRadius","windowWidth","windowHeight","currentOriginX","currentOriginY","currentWidth","currentHeight","currentGlobalOriginX","currentGlobalOriginY","currentBorderRadius","getCommonProperties","layoutStyle","componentStyle","componentStyleFlat","Array","isArray","flat","filter","Boolean","map","style","initial","componentStylesKeys","flatMap","keys","commonKeys","key","includes","maybeReportOverwrittenProperties","layoutAnimationStyle","displayName","commonProperties","length","logger","warn","join","layoutAnimationOrBuilder","isAnimationBuilder","build","animationFactory","__DEV__","layoutAnimation","animations"],"sources":["animationBuilder.tsx"],"sourcesContent":["'use strict';\nimport type {\n  ILayoutAnimationBuilder,\n  LayoutAnimationFunction,\n  LayoutAnimationsValues,\n} from './layoutReanimation';\nimport type { StyleProps } from './commonTypes';\nimport type { NestedArray } from './createAnimatedComponent/commonTypes';\nimport { logger } from './logger';\n\nconst mockTargetValues: LayoutAnimationsValues = {\n  targetOriginX: 0,\n  targetOriginY: 0,\n  targetWidth: 0,\n  targetHeight: 0,\n  targetGlobalOriginX: 0,\n  targetGlobalOriginY: 0,\n  targetBorderRadius: 0,\n  windowWidth: 0,\n  windowHeight: 0,\n  currentOriginX: 0,\n  currentOriginY: 0,\n  currentWidth: 0,\n  currentHeight: 0,\n  currentGlobalOriginX: 0,\n  currentGlobalOriginY: 0,\n  currentBorderRadius: 0,\n};\n\nfunction getCommonProperties(\n  layoutStyle: StyleProps,\n  componentStyle: NestedArray<StyleProps>\n) {\n  let componentStyleFlat = Array.isArray(componentStyle)\n    ? componentStyle.flat()\n    : [componentStyle];\n\n  componentStyleFlat = componentStyleFlat.filter(Boolean);\n\n  componentStyleFlat = componentStyleFlat.map((style) =>\n    'initial' in style\n      ? style.initial.value // Include properties of animated style\n      : style\n  );\n\n  const componentStylesKeys = componentStyleFlat.flatMap((style) =>\n    Object.keys(style)\n  );\n\n  const commonKeys = Object.keys(layoutStyle).filter((key) =>\n    componentStylesKeys.includes(key)\n  );\n\n  return commonKeys;\n}\n\nfunction maybeReportOverwrittenProperties(\n  layoutAnimationStyle: StyleProps,\n  style: NestedArray<StyleProps>,\n  displayName: string\n) {\n  const commonProperties = getCommonProperties(layoutAnimationStyle, style);\n\n  if (commonProperties.length > 0) {\n    logger.warn(\n      `${\n        commonProperties.length === 1 ? 'Property' : 'Properties'\n      } \"${commonProperties.join(\n        ', '\n      )}\" of ${displayName} may be overwritten by a layout animation. Please wrap your component with an animated view and apply the layout animation on the wrapper.`\n    );\n  }\n}\n\nexport function maybeBuild(\n  layoutAnimationOrBuilder:\n    | ILayoutAnimationBuilder\n    | LayoutAnimationFunction\n    | Keyframe,\n  style: NestedArray<StyleProps> | undefined,\n  displayName: string\n): LayoutAnimationFunction | Keyframe {\n  const isAnimationBuilder = (\n    value: ILayoutAnimationBuilder | LayoutAnimationFunction | Keyframe\n  ): value is ILayoutAnimationBuilder =>\n    'build' in layoutAnimationOrBuilder &&\n    typeof layoutAnimationOrBuilder.build === 'function';\n\n  if (isAnimationBuilder(layoutAnimationOrBuilder)) {\n    const animationFactory = layoutAnimationOrBuilder.build();\n\n    if (__DEV__ && style) {\n      const layoutAnimation = animationFactory(mockTargetValues);\n      maybeReportOverwrittenProperties(\n        layoutAnimation.animations,\n        style,\n        displayName\n      );\n    }\n\n    return animationFactory;\n  } else {\n    return layoutAnimationOrBuilder;\n  }\n}\n"],"mappings":"AAAA,YAAY;;AAACA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,UAAA,GAAAA,UAAA;AAQb,IAAAC,OAAA,GAAAC,OAAA;AAEA,IAAMC,gBAAwC,GAAG;EAC/CC,aAAa,EAAE,CAAC;EAChBC,aAAa,EAAE,CAAC;EAChBC,WAAW,EAAE,CAAC;EACdC,YAAY,EAAE,CAAC;EACfC,mBAAmB,EAAE,CAAC;EACtBC,mBAAmB,EAAE,CAAC;EACtBC,kBAAkB,EAAE,CAAC;EACrBC,WAAW,EAAE,CAAC;EACdC,YAAY,EAAE,CAAC;EACfC,cAAc,EAAE,CAAC;EACjBC,cAAc,EAAE,CAAC;EACjBC,YAAY,EAAE,CAAC;EACfC,aAAa,EAAE,CAAC;EAChBC,oBAAoB,EAAE,CAAC;EACvBC,oBAAoB,EAAE,CAAC;EACvBC,mBAAmB,EAAE;AACvB,CAAC;AAED,SAASC,mBAAmBA,CAC1BC,WAAuB,EACvBC,cAAuC,EACvC;EACA,IAAIC,kBAAkB,GAAGC,KAAK,CAACC,OAAO,CAACH,cAAc,CAAC,GAClDA,cAAc,CAACI,IAAI,CAAC,CAAC,GACrB,CAACJ,cAAc,CAAC;EAEpBC,kBAAkB,GAAGA,kBAAkB,CAACI,MAAM,CAACC,OAAO,CAAC;EAEvDL,kBAAkB,GAAGA,kBAAkB,CAACM,GAAG,CAAC,UAACC,KAAK;IAAA,OAChD,SAAS,IAAIA,KAAK,GACdA,KAAK,CAACC,OAAO,CAAChC,KAAK,GACnB+B,KAAK;EAAA,CACX,CAAC;EAED,IAAME,mBAAmB,GAAGT,kBAAkB,CAACU,OAAO,CAAC,UAACH,KAAK;IAAA,OAC3DlC,MAAM,CAACsC,IAAI,CAACJ,KAAK,CAAC;EAAA,CACpB,CAAC;EAED,IAAMK,UAAU,GAAGvC,MAAM,CAACsC,IAAI,CAACb,WAAW,CAAC,CAACM,MAAM,CAAC,UAACS,GAAG;IAAA,OACrDJ,mBAAmB,CAACK,QAAQ,CAACD,GAAG,CAAC;EAAA,CACnC,CAAC;EAED,OAAOD,UAAU;AACnB;AAEA,SAASG,gCAAgCA,CACvCC,oBAAgC,EAChCT,KAA8B,EAC9BU,WAAmB,EACnB;EACA,IAAMC,gBAAgB,GAAGrB,mBAAmB,CAACmB,oBAAoB,EAAET,KAAK,CAAC;EAEzE,IAAIW,gBAAgB,CAACC,MAAM,GAAG,CAAC,EAAE;IAC/BC,cAAM,CAACC,IAAI,CACT,GACEH,gBAAgB,CAACC,MAAM,KAAK,CAAC,GAAG,UAAU,GAAG,YAAY,KACtDD,gBAAgB,CAACI,IAAI,CACxB,IACF,CAAC,QAAQL,WAAW,4IACtB,CAAC;EACH;AACF;AAEO,SAASxC,UAAUA,CACxB8C,wBAGY,EACZhB,KAA0C,EAC1CU,WAAmB,EACiB;EACpC,IAAMO,kBAAkB,GAAG,SAArBA,kBAAkBA,CACtBhD,KAAmE;IAAA,OAEnE,OAAO,IAAI+C,wBAAwB,IACnC,OAAOA,wBAAwB,CAACE,KAAK,KAAK,UAAU;EAAA;EAEtD,IAAID,kBAAkB,CAACD,wBAAwB,CAAC,EAAE;IAChD,IAAMG,gBAAgB,GAAGH,wBAAwB,CAACE,KAAK,CAAC,CAAC;IAEzD,IAAIE,OAAO,IAAIpB,KAAK,EAAE;MACpB,IAAMqB,eAAe,GAAGF,gBAAgB,CAAC9C,gBAAgB,CAAC;MAC1DmC,gCAAgC,CAC9Ba,eAAe,CAACC,UAAU,EAC1BtB,KAAK,EACLU,WACF,CAAC;IACH;IAEA,OAAOS,gBAAgB;EACzB,CAAC,MAAM;IACL,OAAOH,wBAAwB;EACjC;AACF","ignoreList":[]}