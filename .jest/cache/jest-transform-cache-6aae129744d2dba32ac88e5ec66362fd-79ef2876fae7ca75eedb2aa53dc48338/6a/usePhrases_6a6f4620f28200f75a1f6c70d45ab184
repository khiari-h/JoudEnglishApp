9b079b24fe282962ae486caf54c6927d
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _reactNative = require("react-native");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var usePhrases = function usePhrases(phrasesData, level) {
  var handleStorageError = function handleStorageError(error, operation) {
    var fallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    console.warn(`Phrases storage error in ${operation}:`, error);
    return fallback;
  };
  var STORAGE_KEY = `phrases_${level}`;
  var _useState = (0, _react.useState)(0),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    categoryIndex = _useState2[0],
    setCategoryIndex = _useState2[1];
  var _useState3 = (0, _react.useState)(0),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    phraseIndex = _useState4[0],
    setPhraseIndex = _useState4[1];
  var _useState5 = (0, _react.useState)(false),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    showTranslation = _useState6[0],
    setShowTranslation = _useState6[1];
  var _useState7 = (0, _react.useState)({}),
    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),
    completedPhrases = _useState8[0],
    setCompletedPhrases = _useState8[1];
  var _useState9 = (0, _react.useState)(false),
    _useState0 = (0, _slicedToArray2.default)(_useState9, 2),
    loaded = _useState0[0],
    setLoaded = _useState0[1];
  var _useState1 = (0, _react.useState)(false),
    _useState10 = (0, _slicedToArray2.default)(_useState1, 2),
    showDetailedProgress = _useState10[0],
    setShowDetailedProgress = _useState10[1];
  var isInitialized = (0, _react.useRef)(false);
  var categories = (phrasesData == null ? void 0 : phrasesData.categories) || [];
  var allPhrases = (phrasesData == null ? void 0 : phrasesData.phrases) || [];
  var currentCategory = categories[categoryIndex];
  var currentPhrases = allPhrases.filter(function (phrase) {
    return phrase.categoryId === (currentCategory == null ? void 0 : currentCategory.id);
  }) || [];
  var currentPhrase = currentPhrases[phraseIndex];
  var totalPhrasesInCategory = currentPhrases.length;
  var hasValidData = phrasesData && categories.length > 0 && allPhrases.length > 0;
  console.log('🔍 DEBUG usePhrases:', {
    categoryIndex: categoryIndex,
    phraseIndex: phraseIndex,
    categoriesLength: categories.length,
    currentCategory: !!currentCategory,
    currentCategoryName: currentCategory == null ? void 0 : currentCategory.name,
    currentPhrasesLength: currentPhrases.length,
    allPhrasesLength: allPhrases.length,
    hasValidData: hasValidData,
    phrasesData: !!phrasesData,
    categoriesWithPhrases: categories.filter(function (cat) {
      return allPhrases.some(function (phrase) {
        return phrase.categoryId === cat.id;
      });
    }).length
  });
  (0, _react.useEffect)(function () {
    var loadData = function () {
      var _ref = (0, _asyncToGenerator2.default)(function* () {
        try {
          var savedData = yield _asyncStorage.default.getItem(STORAGE_KEY);
          if (savedData) {
            var _JSON$parse = JSON.parse(savedData),
              savedCompleted = _JSON$parse.completedPhrases,
              lastPosition = _JSON$parse.lastPosition;
            setCompletedPhrases(savedCompleted || {});
          }
        } catch (error) {
          handleStorageError(error, 'loadData');
        } finally {
          setLoaded(true);
        }
      });
      return function loadData() {
        return _ref.apply(this, arguments);
      };
    }();
    loadData();
  }, [level]);
  (0, _react.useEffect)(function () {
    if (loaded && phrasesData && categories.length > 0 && !isInitialized.current) {
      var validCategoryIndex = 0;
      var validPhraseIndex = 0;
      setCategoryIndex(validCategoryIndex);
      setPhraseIndex(validPhraseIndex);
      var newCompletedPhrases = {};
      categories.forEach(function (_, index) {
        newCompletedPhrases[index] = [];
      });
      setCompletedPhrases(newCompletedPhrases);
      isInitialized.current = true;
    }
  }, [loaded, phrasesData, categories.length]);
  var saveData = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      var dataToSave = {
        completedPhrases: completedPhrases,
        lastPosition: {
          categoryIndex: categoryIndex,
          phraseIndex: phraseIndex
        }
      };
      yield _asyncStorage.default.setItem(STORAGE_KEY, JSON.stringify(dataToSave));
    } catch (error) {
      handleStorageError(error, 'saveData');
    }
  }), [completedPhrases, categoryIndex, phraseIndex, STORAGE_KEY]);
  (0, _react.useEffect)(function () {
    if (loaded && isInitialized.current) saveData();
  }, [loaded, isInitialized.current]);
  var changeCategory = (0, _react.useCallback)(function (newCategoryIndex) {
    if (newCategoryIndex !== categoryIndex && newCategoryIndex >= 0 && newCategoryIndex < categories.length && isInitialized.current) {
      setCategoryIndex(newCategoryIndex);
      setPhraseIndex(0);
      setShowTranslation(false);
    }
  }, [categoryIndex, categories.length, isInitialized.current]);
  var goToNextPhrase = (0, _react.useCallback)(function () {
    if (phraseIndex < totalPhrasesInCategory - 1 && isInitialized.current) {
      setPhraseIndex(function (prev) {
        return prev + 1;
      });
      setShowTranslation(false);
    }
  }, [phraseIndex, totalPhrasesInCategory, isInitialized.current]);
  var goToPreviousPhrase = (0, _react.useCallback)(function () {
    if (phraseIndex > 0 && isInitialized.current) {
      setPhraseIndex(function (prev) {
        return prev - 1;
      });
      setShowTranslation(false);
      return true;
    }
    return false;
  }, [phraseIndex, isInitialized.current]);
  var toggleTranslation = (0, _react.useCallback)(function () {
    setShowTranslation(function (prev) {
      return !prev;
    });
  }, []);
  var toggleDetailedProgress = (0, _react.useCallback)(function () {
    setShowDetailedProgress(function (prev) {
      return !prev;
    });
  }, []);
  var markPhraseAsCompleted = (0, _react.useCallback)(function (catIndex, pIndex) {
    if (!isInitialized.current) return;
    setCompletedPhrases(function (prev) {
      var categoryCompleted = prev[catIndex] || [];
      if (!categoryCompleted.includes(pIndex)) {
        return Object.assign({}, prev, (0, _defineProperty2.default)({}, catIndex, [].concat((0, _toConsumableArray2.default)(categoryCompleted), [pIndex])));
      }
      return prev;
    });
  }, [isInitialized.current]);
  var findNextUncompletedCategory = (0, _react.useCallback)(function () {
    var numCategories = categories.length;
    var _loop = function _loop() {
        var _completedPhrases$nex;
        var nextIndex = (categoryIndex + i) % numCategories;
        var category = categories[nextIndex];
        var categoryPhrases = allPhrases.filter(function (p) {
          return p.categoryId === category.id;
        });
        var completedInCategory = ((_completedPhrases$nex = completedPhrases[nextIndex]) == null ? void 0 : _completedPhrases$nex.length) || 0;
        if (completedInCategory < categoryPhrases.length) {
          return {
            v: nextIndex
          };
        }
      },
      _ret;
    for (var i = 1; i <= numCategories; i++) {
      _ret = _loop();
      if (_ret) return _ret.v;
    }
    return -1;
  }, [categories, categoryIndex, allPhrases, completedPhrases]);
  var handleNext = (0, _react.useCallback)(function () {
    if (!isInitialized.current) return {
      completed: false
    };
    markPhraseAsCompleted(categoryIndex, phraseIndex);
    if (phraseIndex < totalPhrasesInCategory - 1) {
      goToNextPhrase();
    } else {
      var nextCategoryIndex = findNextUncompletedCategory();
      if (nextCategoryIndex === -1) {
        _reactNative.Alert.alert("Félicitations", "Vous avez terminé tous les exercices de phrases !");
        return {
          completed: true
        };
      } else {
        changeCategory(nextCategoryIndex);
      }
    }
    return {
      completed: false
    };
  }, [categoryIndex, phraseIndex, totalPhrasesInCategory, markPhraseAsCompleted, goToNextPhrase, findNextUncompletedCategory, changeCategory, isInitialized.current]);
  var handlePrevious = (0, _react.useCallback)(function () {
    if (!isInitialized.current) return;
    goToPreviousPhrase();
  }, [goToPreviousPhrase, isInitialized.current]);
  var stats = (0, _react.useMemo)(function () {
    var _completedPhrases$cat;
    if (!isInitialized.current) {
      return {
        totalPhrases: 0,
        completedPhrasesCount: 0,
        totalProgress: 0,
        completionProgress: 0,
        completedInCurrentCategory: 0,
        totalInCurrentCategory: 0
      };
    }
    var totalPhrases = currentPhrases.length;
    var completedPhrasesCount = Object.values(completedPhrases).reduce(function (sum, completed) {
      return sum + ((completed == null ? void 0 : completed.length) || 0);
    }, 0);
    var totalProgress = totalPhrases > 0 ? Math.round(completedPhrasesCount / totalPhrases * 100) : 0;
    var completionProgress = totalPhrasesInCategory > 0 ? (phraseIndex + 1) / totalPhrasesInCategory * 100 : 0;
    return {
      totalPhrases: totalPhrases,
      completedPhrasesCount: completedPhrasesCount,
      totalProgress: totalProgress,
      completionProgress: completionProgress,
      completedInCurrentCategory: ((_completedPhrases$cat = completedPhrases[categoryIndex]) == null ? void 0 : _completedPhrases$cat.length) || 0,
      totalInCurrentCategory: totalPhrasesInCategory
    };
  }, [currentPhrases, completedPhrases, totalPhrasesInCategory, phraseIndex, categoryIndex, isInitialized.current]);
  var display = (0, _react.useMemo)(function () {
    if (!isInitialized.current) {
      return {
        phraseCounter: "0 / 0",
        categories: [],
        currentPhrase: null,
        currentCategory: null,
        currentPhrases: []
      };
    }
    var phraseCounter = `${phraseIndex + 1} / ${totalPhrasesInCategory || 0}`;
    var categoriesNames = categories.map(function (cat) {
      return cat.name;
    });
    return {
      phraseCounter: phraseCounter,
      categories: categoriesNames,
      currentPhrase: currentPhrase,
      currentCategory: currentCategory,
      currentPhrases: currentPhrases
    };
  }, [phraseIndex, totalPhrasesInCategory, categories, currentPhrase, currentCategory, currentPhrases, isInitialized.current]);
  var canGoToPrevious = phraseIndex > 0;
  var isLastPhraseInCategory = phraseIndex === totalPhrasesInCategory - 1;
  return {
    categoryIndex: categoryIndex,
    phraseIndex: phraseIndex,
    showTranslation: showTranslation,
    completedPhrases: completedPhrases,
    loaded: loaded,
    showDetailedProgress: showDetailedProgress,
    currentPhrase: currentPhrase,
    currentCategory: currentCategory,
    currentPhrases: currentPhrases,
    totalCategories: categories.length,
    totalPhrasesInCategory: totalPhrasesInCategory,
    hasValidData: hasValidData,
    changeCategory: changeCategory,
    toggleTranslation: toggleTranslation,
    toggleDetailedProgress: toggleDetailedProgress,
    handleNext: handleNext,
    handlePrevious: handlePrevious,
    canGoToPrevious: canGoToPrevious,
    isLastPhraseInCategory: isLastPhraseInCategory,
    stats: stats,
    display: display
  };
};
var _default = exports.default = usePhrases;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3JlYWN0TmF0aXZlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJ1c2VQaHJhc2VzIiwicGhyYXNlc0RhdGEiLCJsZXZlbCIsImhhbmRsZVN0b3JhZ2VFcnJvciIsImVycm9yIiwib3BlcmF0aW9uIiwiZmFsbGJhY2siLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwid2FybiIsIlNUT1JBR0VfS0VZIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsImNhdGVnb3J5SW5kZXgiLCJzZXRDYXRlZ29yeUluZGV4IiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJwaHJhc2VJbmRleCIsInNldFBocmFzZUluZGV4IiwiX3VzZVN0YXRlNSIsIl91c2VTdGF0ZTYiLCJzaG93VHJhbnNsYXRpb24iLCJzZXRTaG93VHJhbnNsYXRpb24iLCJfdXNlU3RhdGU3IiwiX3VzZVN0YXRlOCIsImNvbXBsZXRlZFBocmFzZXMiLCJzZXRDb21wbGV0ZWRQaHJhc2VzIiwiX3VzZVN0YXRlOSIsIl91c2VTdGF0ZTAiLCJsb2FkZWQiLCJzZXRMb2FkZWQiLCJfdXNlU3RhdGUxIiwiX3VzZVN0YXRlMTAiLCJzaG93RGV0YWlsZWRQcm9ncmVzcyIsInNldFNob3dEZXRhaWxlZFByb2dyZXNzIiwiaXNJbml0aWFsaXplZCIsInVzZVJlZiIsImNhdGVnb3JpZXMiLCJhbGxQaHJhc2VzIiwicGhyYXNlcyIsImN1cnJlbnRDYXRlZ29yeSIsImN1cnJlbnRQaHJhc2VzIiwiZmlsdGVyIiwicGhyYXNlIiwiY2F0ZWdvcnlJZCIsImlkIiwiY3VycmVudFBocmFzZSIsInRvdGFsUGhyYXNlc0luQ2F0ZWdvcnkiLCJoYXNWYWxpZERhdGEiLCJsb2ciLCJjYXRlZ29yaWVzTGVuZ3RoIiwiY3VycmVudENhdGVnb3J5TmFtZSIsIm5hbWUiLCJjdXJyZW50UGhyYXNlc0xlbmd0aCIsImFsbFBocmFzZXNMZW5ndGgiLCJjYXRlZ29yaWVzV2l0aFBocmFzZXMiLCJjYXQiLCJzb21lIiwidXNlRWZmZWN0IiwibG9hZERhdGEiLCJfcmVmIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwic2F2ZWREYXRhIiwiQXN5bmNTdG9yYWdlIiwiZ2V0SXRlbSIsIl9KU09OJHBhcnNlIiwiSlNPTiIsInBhcnNlIiwic2F2ZWRDb21wbGV0ZWQiLCJsYXN0UG9zaXRpb24iLCJhcHBseSIsImN1cnJlbnQiLCJ2YWxpZENhdGVnb3J5SW5kZXgiLCJ2YWxpZFBocmFzZUluZGV4IiwibmV3Q29tcGxldGVkUGhyYXNlcyIsImZvckVhY2giLCJfIiwiaW5kZXgiLCJzYXZlRGF0YSIsInVzZUNhbGxiYWNrIiwiZGF0YVRvU2F2ZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjaGFuZ2VDYXRlZ29yeSIsIm5ld0NhdGVnb3J5SW5kZXgiLCJnb1RvTmV4dFBocmFzZSIsInByZXYiLCJnb1RvUHJldmlvdXNQaHJhc2UiLCJ0b2dnbGVUcmFuc2xhdGlvbiIsInRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MiLCJtYXJrUGhyYXNlQXNDb21wbGV0ZWQiLCJjYXRJbmRleCIsInBJbmRleCIsImNhdGVnb3J5Q29tcGxldGVkIiwiaW5jbHVkZXMiLCJPYmplY3QiLCJhc3NpZ24iLCJfZGVmaW5lUHJvcGVydHkyIiwiY29uY2F0IiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsImZpbmROZXh0VW5jb21wbGV0ZWRDYXRlZ29yeSIsIm51bUNhdGVnb3JpZXMiLCJfbG9vcCIsIl9jb21wbGV0ZWRQaHJhc2VzJG5leCIsIm5leHRJbmRleCIsImkiLCJjYXRlZ29yeSIsImNhdGVnb3J5UGhyYXNlcyIsInAiLCJjb21wbGV0ZWRJbkNhdGVnb3J5IiwidiIsIl9yZXQiLCJoYW5kbGVOZXh0IiwiY29tcGxldGVkIiwibmV4dENhdGVnb3J5SW5kZXgiLCJBbGVydCIsImFsZXJ0IiwiaGFuZGxlUHJldmlvdXMiLCJzdGF0cyIsInVzZU1lbW8iLCJfY29tcGxldGVkUGhyYXNlcyRjYXQiLCJ0b3RhbFBocmFzZXMiLCJjb21wbGV0ZWRQaHJhc2VzQ291bnQiLCJ0b3RhbFByb2dyZXNzIiwiY29tcGxldGlvblByb2dyZXNzIiwiY29tcGxldGVkSW5DdXJyZW50Q2F0ZWdvcnkiLCJ0b3RhbEluQ3VycmVudENhdGVnb3J5IiwidmFsdWVzIiwicmVkdWNlIiwic3VtIiwiTWF0aCIsInJvdW5kIiwiZGlzcGxheSIsInBocmFzZUNvdW50ZXIiLCJjYXRlZ29yaWVzTmFtZXMiLCJtYXAiLCJjYW5Hb1RvUHJldmlvdXMiLCJpc0xhc3RQaHJhc2VJbkNhdGVnb3J5IiwidG90YWxDYXRlZ29yaWVzIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidXNlUGhyYXNlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2NyZWVucy9leGVyY2lzZXMvcGhyYXNlcy9ob29rcy91c2VQaHJhc2VzLmpzIC0gVkVSU0lPTiBDT1JSSUfDiUVcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEFsZXJ0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xuXG4vKipcbiAqIPCfjq8gSG9vayB1bmlmacOpIHBvdXIgUGhyYXNlcyBFeGVyY2lzZVxuICogUmVtcGxhY2UgdXNlUGhyYXNlc0V4ZXJjaXNlU3RhdGUgKyB1c2VQaHJhc2VzUHJvZ3Jlc3MgKyB1c2VQaHJhc2VzRGlzcGxheVxuICogU2ltcGxlLCBlZmZpY2FjZSwgbWFpbnRlbmFibGUgLSBwYXR0ZXJuIGlkZW50aXF1ZSDDoCB1c2VSZWFkaW5nLCB1c2VHcmFtbWFyIGV0IHVzZVZvY2FidWxhcnlcbiAqL1xuY29uc3QgdXNlUGhyYXNlcyA9IChwaHJhc2VzRGF0YSwgbGV2ZWwpID0+IHtcbiAgLy8gPT09PT09PT09PT09PT09PT09PSBFUlJPUiBIQU5ETElORyBIRUxQRVIgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBoYW5kbGVTdG9yYWdlRXJyb3IgPSAoZXJyb3IsIG9wZXJhdGlvbiwgZmFsbGJhY2sgPSBudWxsKSA9PiB7XG4gICAgY29uc29sZS53YXJuKGBQaHJhc2VzIHN0b3JhZ2UgZXJyb3IgaW4gJHtvcGVyYXRpb259OmAsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH07XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBTVE9SQUdFIEtFWSA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IFNUT1JBR0VfS0VZID0gYHBocmFzZXNfJHtsZXZlbH1gO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gU1RBVEUgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBbY2F0ZWdvcnlJbmRleCwgc2V0Q2F0ZWdvcnlJbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3BocmFzZUluZGV4LCBzZXRQaHJhc2VJbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3Nob3dUcmFuc2xhdGlvbiwgc2V0U2hvd1RyYW5zbGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbXBsZXRlZFBocmFzZXMsIHNldENvbXBsZXRlZFBocmFzZXNdID0gdXNlU3RhdGUoe30pO1xuICBjb25zdCBbbG9hZGVkLCBzZXRMb2FkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0RldGFpbGVkUHJvZ3Jlc3MsIHNldFNob3dEZXRhaWxlZFByb2dyZXNzXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBpc0luaXRpYWxpemVkID0gdXNlUmVmKGZhbHNlKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IENPTVBVVEVEIFZBTFVFUyA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGNhdGVnb3JpZXMgPSBwaHJhc2VzRGF0YT8uY2F0ZWdvcmllcyB8fCBbXTtcbiAgLy8g4pyFIENPUlJJR8OJIDogTGVzIHBocmFzZXMgc29udCBkYW5zIHBocmFzZXNEYXRhLnBocmFzZXMsIHBhcyBkYW5zIGxlcyBjYXTDqWdvcmllc1xuICBjb25zdCBhbGxQaHJhc2VzID0gcGhyYXNlc0RhdGE/LnBocmFzZXMgfHwgW107XG4gIGNvbnN0IGN1cnJlbnRDYXRlZ29yeSA9IGNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF07XG4gIFxuICAvLyDinIUgQ09SUklHw4kgOiBGaWx0cmVyIGxlcyBwaHJhc2VzIHBhciBjYXTDqWdvcmllIGFjdHVlbGxlXG4gIGNvbnN0IGN1cnJlbnRQaHJhc2VzID0gYWxsUGhyYXNlcy5maWx0ZXIocGhyYXNlID0+IHBocmFzZS5jYXRlZ29yeUlkID09PSBjdXJyZW50Q2F0ZWdvcnk/LmlkKSB8fCBbXTtcbiAgY29uc3QgY3VycmVudFBocmFzZSA9IGN1cnJlbnRQaHJhc2VzW3BocmFzZUluZGV4XTtcbiAgY29uc3QgdG90YWxQaHJhc2VzSW5DYXRlZ29yeSA9IGN1cnJlbnRQaHJhc2VzLmxlbmd0aDtcbiAgXG4gIC8vIOKchSBDT1JSSUfDiSA6IGhhc1ZhbGlkRGF0YSB2w6lyaWZpZSBxdWUgbm91cyBhdm9ucyBkZXMgZG9ubsOpZXMgZXQgZGVzIGNhdMOpZ29yaWVzIGF2ZWMgZGVzIHBocmFzZXNcbiAgY29uc3QgaGFzVmFsaWREYXRhID0gcGhyYXNlc0RhdGEgJiYgY2F0ZWdvcmllcy5sZW5ndGggPiAwICYmIGFsbFBocmFzZXMubGVuZ3RoID4gMDtcblxuICAvLyDinIUgQUpPVVTDiSA6IERlYnVnIHBvdXIgY29tcHJlbmRyZSBwb3VycXVvaSBoYXNWYWxpZERhdGEgZXN0IGZhbHNlXG4gIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHIHVzZVBocmFzZXM6Jywge1xuICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgcGhyYXNlSW5kZXgsXG4gICAgY2F0ZWdvcmllc0xlbmd0aDogY2F0ZWdvcmllcy5sZW5ndGgsXG4gICAgY3VycmVudENhdGVnb3J5OiAhIWN1cnJlbnRDYXRlZ29yeSxcbiAgICBjdXJyZW50Q2F0ZWdvcnlOYW1lOiBjdXJyZW50Q2F0ZWdvcnk/Lm5hbWUsXG4gICAgY3VycmVudFBocmFzZXNMZW5ndGg6IGN1cnJlbnRQaHJhc2VzLmxlbmd0aCxcbiAgICBhbGxQaHJhc2VzTGVuZ3RoOiBhbGxQaHJhc2VzLmxlbmd0aCxcbiAgICBoYXNWYWxpZERhdGEsXG4gICAgcGhyYXNlc0RhdGE6ICEhcGhyYXNlc0RhdGEsXG4gICAgLy8g4pyFIEFKT1VUw4kgOiBWw6lyaWZpZXIgbGEgc3RydWN0dXJlIGRlcyBkb25uw6llc1xuICAgIGNhdGVnb3JpZXNXaXRoUGhyYXNlczogY2F0ZWdvcmllcy5maWx0ZXIoY2F0ID0+IFxuICAgICAgYWxsUGhyYXNlcy5zb21lKHBocmFzZSA9PiBwaHJhc2UuY2F0ZWdvcnlJZCA9PT0gY2F0LmlkKVxuICAgICkubGVuZ3RoXG4gIH0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gREFUQSBMT0FESU5HID09PT09PT09PT09PT09PT09PT1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsb2FkRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNhdmVkRGF0YSA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKTtcbiAgICAgICAgaWYgKHNhdmVkRGF0YSkge1xuICAgICAgICAgIGNvbnN0IHsgY29tcGxldGVkUGhyYXNlczogc2F2ZWRDb21wbGV0ZWQsIGxhc3RQb3NpdGlvbiB9ID0gSlNPTi5wYXJzZShzYXZlZERhdGEpO1xuICAgICAgICAgIHNldENvbXBsZXRlZFBocmFzZXMoc2F2ZWRDb21wbGV0ZWQgfHwge30pO1xuICAgICAgICAgIC8vIOKchSBTVVBQUklNw4kgOiBJbml0aWFsaXNhdGlvbiBkZXMgaW5kaWNlcyBpY2kgY2FyIHBocmFzZXNEYXRhIG4nZXN0IHBhcyBlbmNvcmUgZGlzcG9uaWJsZVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyDinIUgR2VzdGlvbiBkJ2VycmV1ciBhcHByb3ByacOpZVxuICAgICAgICBoYW5kbGVTdG9yYWdlRXJyb3IoZXJyb3IsICdsb2FkRGF0YScpO1xuICAgICAgICAvLyBGYWxsYmFjazogdXRpbGlzZXIgbGVzIHZhbGV1cnMgcGFyIGTDqWZhdXRcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldExvYWRlZCh0cnVlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxvYWREYXRhKCk7XG4gIH0sIFtsZXZlbF0pOyAvLyDinIUgQ09SUklHw4kgOiBTdXBwcmltw6kgcGhyYXNlc0RhdGEgZGVzIGTDqXBlbmRhbmNlc1xuXG4gIC8vIOKchSBBSk9VVMOJIDogSW5pdGlhbGlzYXRpb24gZGVzIGluZGljZXMgcXVhbmQgcGhyYXNlc0RhdGEgZXN0IGRpc3BvbmlibGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobG9hZGVkICYmIHBocmFzZXNEYXRhICYmIGNhdGVnb3JpZXMubGVuZ3RoID4gMCAmJiAhaXNJbml0aWFsaXplZC5jdXJyZW50KSB7XG4gICAgICAvLyBJbml0aWFsaXNlciBsZXMgaW5kaWNlcyBhdmVjIGRlcyB2YWxldXJzIHZhbGlkZXNcbiAgICAgIGNvbnN0IHZhbGlkQ2F0ZWdvcnlJbmRleCA9IDA7IC8vIENvbW1lbmNlciBwYXIgbGEgcHJlbWnDqHJlIGNhdMOpZ29yaWVcbiAgICAgIGNvbnN0IHZhbGlkUGhyYXNlSW5kZXggPSAwOyAgIC8vIENvbW1lbmNlciBwYXIgbGEgcHJlbWnDqHJlIHBocmFzZVxuICAgICAgXG4gICAgICBzZXRDYXRlZ29yeUluZGV4KHZhbGlkQ2F0ZWdvcnlJbmRleCk7XG4gICAgICBzZXRQaHJhc2VJbmRleCh2YWxpZFBocmFzZUluZGV4KTtcbiAgICAgIFxuICAgICAgLy8g4pyFIENPUlJJR8OJIDogSW5pdGlhbGlzZXIgbGVzIHBocmFzZXMgY29tcGzDqXTDqWVzIGF2ZWMgdW4gb2JqZXQgdmlkZVxuICAgICAgY29uc3QgbmV3Q29tcGxldGVkUGhyYXNlcyA9IHt9O1xuICAgICAgY2F0ZWdvcmllcy5mb3JFYWNoKChfLCBpbmRleCkgPT4ge1xuICAgICAgICBuZXdDb21wbGV0ZWRQaHJhc2VzW2luZGV4XSA9IFtdO1xuICAgICAgfSk7XG4gICAgICBzZXRDb21wbGV0ZWRQaHJhc2VzKG5ld0NvbXBsZXRlZFBocmFzZXMpO1xuICAgICAgXG4gICAgICBpc0luaXRpYWxpemVkLmN1cnJlbnQgPSB0cnVlO1xuICAgIH1cbiAgfSwgW2xvYWRlZCwgcGhyYXNlc0RhdGEsIGNhdGVnb3JpZXMubGVuZ3RoXSk7IC8vIOKchSBDT1JSSUfDiSA6IETDqXBlbmRhbmNlcyBzaW1wbGlmacOpZXNcblxuICAvLyBTYXZlIGRhdGEgdG8gc3RvcmFnZVxuICBjb25zdCBzYXZlRGF0YSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YVRvU2F2ZSA9IHtcbiAgICAgICAgY29tcGxldGVkUGhyYXNlcyxcbiAgICAgICAgbGFzdFBvc2l0aW9uOiB7XG4gICAgICAgICAgY2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICBwaHJhc2VJbmRleFxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KGRhdGFUb1NhdmUpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8g4pyFIEdlc3Rpb24gZCdlcnJldXIgYXBwcm9wcmnDqWVcbiAgICAgIGhhbmRsZVN0b3JhZ2VFcnJvcihlcnJvciwgJ3NhdmVEYXRhJyk7XG4gICAgICAvLyBGYWxsYmFjazogY29udGludWVyIHNhbnMgc2F1dmVnYXJkZVxuICAgIH1cbiAgfSwgW2NvbXBsZXRlZFBocmFzZXMsIGNhdGVnb3J5SW5kZXgsIHBocmFzZUluZGV4LCBTVE9SQUdFX0tFWV0pO1xuXG4gIC8vIEF1dG8tc2F2ZSB3aGVuIGRhdGEgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChsb2FkZWQgJiYgaXNJbml0aWFsaXplZC5jdXJyZW50KSBzYXZlRGF0YSgpO1xuICB9LCBbbG9hZGVkLCBpc0luaXRpYWxpemVkLmN1cnJlbnRdKTsgLy8g4pyFIENPUlJJR8OJIDogQWpvdXTDqSBpc0luaXRpYWxpemVkLmN1cnJlbnRcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IE5BVklHQVRJT04gQUNUSU9OUyA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGNoYW5nZUNhdGVnb3J5ID0gdXNlQ2FsbGJhY2soKG5ld0NhdGVnb3J5SW5kZXgpID0+IHtcbiAgICBpZiAobmV3Q2F0ZWdvcnlJbmRleCAhPT0gY2F0ZWdvcnlJbmRleCAmJiBuZXdDYXRlZ29yeUluZGV4ID49IDAgJiYgbmV3Q2F0ZWdvcnlJbmRleCA8IGNhdGVnb3JpZXMubGVuZ3RoICYmIGlzSW5pdGlhbGl6ZWQuY3VycmVudCkge1xuICAgICAgc2V0Q2F0ZWdvcnlJbmRleChuZXdDYXRlZ29yeUluZGV4KTtcbiAgICAgIHNldFBocmFzZUluZGV4KDApO1xuICAgICAgc2V0U2hvd1RyYW5zbGF0aW9uKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtjYXRlZ29yeUluZGV4LCBjYXRlZ29yaWVzLmxlbmd0aCwgaXNJbml0aWFsaXplZC5jdXJyZW50XSk7XG5cbiAgY29uc3QgZ29Ub05leHRQaHJhc2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHBocmFzZUluZGV4IDwgdG90YWxQaHJhc2VzSW5DYXRlZ29yeSAtIDEgJiYgaXNJbml0aWFsaXplZC5jdXJyZW50KSB7XG4gICAgICBzZXRQaHJhc2VJbmRleChwcmV2ID0+IHByZXYgKyAxKTtcbiAgICAgIHNldFNob3dUcmFuc2xhdGlvbihmYWxzZSk7XG4gICAgfVxuICB9LCBbcGhyYXNlSW5kZXgsIHRvdGFsUGhyYXNlc0luQ2F0ZWdvcnksIGlzSW5pdGlhbGl6ZWQuY3VycmVudF0pO1xuXG4gIGNvbnN0IGdvVG9QcmV2aW91c1BocmFzZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAocGhyYXNlSW5kZXggPiAwICYmIGlzSW5pdGlhbGl6ZWQuY3VycmVudCkge1xuICAgICAgc2V0UGhyYXNlSW5kZXgocHJldiA9PiBwcmV2IC0gMSk7IC8vIOKchSBDT1JSSUfDiSA6IHByZXYgLSAxLCBwYXMgcHJldiArIDFcbiAgICAgIHNldFNob3dUcmFuc2xhdGlvbihmYWxzZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LCBbcGhyYXNlSW5kZXgsIGlzSW5pdGlhbGl6ZWQuY3VycmVudF0pO1xuXG4gIGNvbnN0IHRvZ2dsZVRyYW5zbGF0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dUcmFuc2xhdGlvbihwcmV2ID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd0RldGFpbGVkUHJvZ3Jlc3MocHJldiA9PiAhcHJldik7XG4gIH0sIFtdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IENPTVBMRVRJT04gTE9HSUMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBtYXJrUGhyYXNlQXNDb21wbGV0ZWQgPSB1c2VDYWxsYmFjaygoY2F0SW5kZXgsIHBJbmRleCkgPT4ge1xuICAgIGlmICghaXNJbml0aWFsaXplZC5jdXJyZW50KSByZXR1cm47IC8vIOKchSBBSk9VVMOJIDogUHJvdGVjdGlvbiBjb250cmUgbCdhY2PDqHMgYXZhbnQgaW5pdGlhbGlzYXRpb25cbiAgICBcbiAgICBzZXRDb21wbGV0ZWRQaHJhc2VzKHByZXYgPT4ge1xuICAgICAgY29uc3QgY2F0ZWdvcnlDb21wbGV0ZWQgPSBwcmV2W2NhdEluZGV4XSB8fCBbXTtcbiAgICAgIGlmICghY2F0ZWdvcnlDb21wbGV0ZWQuaW5jbHVkZXMocEluZGV4KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgW2NhdEluZGV4XTogWy4uLmNhdGVnb3J5Q29tcGxldGVkLCBwSW5kZXhdXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJldjtcbiAgICB9KTtcbiAgfSwgW2lzSW5pdGlhbGl6ZWQuY3VycmVudF0pO1xuXG4gIC8vIEZpbmQgbmV4dCB1bmNvbXBsZXRlZCBjYXRlZ29yeVxuICBjb25zdCBmaW5kTmV4dFVuY29tcGxldGVkQ2F0ZWdvcnkgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgbnVtQ2F0ZWdvcmllcyA9IGNhdGVnb3JpZXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG51bUNhdGVnb3JpZXM7IGkrKykge1xuICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGNhdGVnb3J5SW5kZXggKyBpKSAlIG51bUNhdGVnb3JpZXM7XG4gICAgICBjb25zdCBjYXRlZ29yeSA9IGNhdGVnb3JpZXNbbmV4dEluZGV4XTtcbiAgICAgIC8vIOKchSBDT1JSSUfDiSA6IFV0aWxpc2VyIGFsbFBocmFzZXMgYXUgbGlldSBkZSBjdXJyZW50UGhyYXNlc1xuICAgICAgY29uc3QgY2F0ZWdvcnlQaHJhc2VzID0gYWxsUGhyYXNlcy5maWx0ZXIocCA9PiBwLmNhdGVnb3J5SWQgPT09IGNhdGVnb3J5LmlkKTtcbiAgICAgIGNvbnN0IGNvbXBsZXRlZEluQ2F0ZWdvcnkgPSBjb21wbGV0ZWRQaHJhc2VzW25leHRJbmRleF0/Lmxlbmd0aCB8fCAwO1xuICAgICAgXG4gICAgICBpZiAoY29tcGxldGVkSW5DYXRlZ29yeSA8IGNhdGVnb3J5UGhyYXNlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5leHRJbmRleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9LCBbY2F0ZWdvcmllcywgY2F0ZWdvcnlJbmRleCwgYWxsUGhyYXNlcywgY29tcGxldGVkUGhyYXNlc10pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gTUFJTiBOQVZJR0FUSU9OID09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgaGFuZGxlTmV4dCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWlzSW5pdGlhbGl6ZWQuY3VycmVudCkgcmV0dXJuIHsgY29tcGxldGVkOiBmYWxzZSB9OyAvLyDinIUgQUpPVVTDiSA6IFByb3RlY3Rpb24gY29udHJlIGwnYWNjw6hzIGF2YW50IGluaXRpYWxpc2F0aW9uXG4gICAgXG4gICAgLy8gTWFyayBjdXJyZW50IHBocmFzZSBhcyBjb21wbGV0ZWRcbiAgICBtYXJrUGhyYXNlQXNDb21wbGV0ZWQoY2F0ZWdvcnlJbmRleCwgcGhyYXNlSW5kZXgpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIG1vcmUgcGhyYXNlcyBpbiBjdXJyZW50IGNhdGVnb3J5XG4gICAgaWYgKHBocmFzZUluZGV4IDwgdG90YWxQaHJhc2VzSW5DYXRlZ29yeSAtIDEpIHtcbiAgICAgIGdvVG9OZXh0UGhyYXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEVuZCBvZiBjYXRlZ29yeSAtIGZpbmQgbmV4dCB1bmNvbXBsZXRlZCBjYXRlZ29yeVxuICAgICAgY29uc3QgbmV4dENhdGVnb3J5SW5kZXggPSBmaW5kTmV4dFVuY29tcGxldGVkQ2F0ZWdvcnkoKTtcbiAgICAgIGlmIChuZXh0Q2F0ZWdvcnlJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgLy8gQWxsIGRvbmUhXG4gICAgICAgIEFsZXJ0LmFsZXJ0KFxuICAgICAgICAgIFwiRsOpbGljaXRhdGlvbnNcIixcbiAgICAgICAgICBcIlZvdXMgYXZleiB0ZXJtaW7DqSB0b3VzIGxlcyBleGVyY2ljZXMgZGUgcGhyYXNlcyAhXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHsgY29tcGxldGVkOiB0cnVlIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFuZ2VDYXRlZ29yeShuZXh0Q2F0ZWdvcnlJbmRleCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGNvbXBsZXRlZDogZmFsc2UgfTtcbiAgfSwgW2NhdGVnb3J5SW5kZXgsIHBocmFzZUluZGV4LCB0b3RhbFBocmFzZXNJbkNhdGVnb3J5LCBtYXJrUGhyYXNlQXNDb21wbGV0ZWQsIGdvVG9OZXh0UGhyYXNlLCBmaW5kTmV4dFVuY29tcGxldGVkQ2F0ZWdvcnksIGNoYW5nZUNhdGVnb3J5LCBpc0luaXRpYWxpemVkLmN1cnJlbnRdKTtcblxuICBjb25zdCBoYW5kbGVQcmV2aW91cyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWlzSW5pdGlhbGl6ZWQuY3VycmVudCkgcmV0dXJuOyAvLyDinIUgQUpPVVTDiSA6IFByb3RlY3Rpb24gY29udHJlIGwnYWNjw6hzIGF2YW50IGluaXRpYWxpc2F0aW9uXG4gICAgZ29Ub1ByZXZpb3VzUGhyYXNlKCk7XG4gIH0sIFtnb1RvUHJldmlvdXNQaHJhc2UsIGlzSW5pdGlhbGl6ZWQuY3VycmVudF0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gQ09NUFVURUQgU1RBVFMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBzdGF0cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghaXNJbml0aWFsaXplZC5jdXJyZW50KSB7IC8vIOKchSBBSk9VVMOJIDogUHJvdGVjdGlvbiBjb250cmUgbGUgY2FsY3VsIGF2YW50IGluaXRpYWxpc2F0aW9uXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbFBocmFzZXM6IDAsXG4gICAgICAgIGNvbXBsZXRlZFBocmFzZXNDb3VudDogMCxcbiAgICAgICAgdG90YWxQcm9ncmVzczogMCxcbiAgICAgICAgY29tcGxldGlvblByb2dyZXNzOiAwLFxuICAgICAgICBjb21wbGV0ZWRJbkN1cnJlbnRDYXRlZ29yeTogMCxcbiAgICAgICAgdG90YWxJbkN1cnJlbnRDYXRlZ29yeTogMFxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG90YWxQaHJhc2VzID0gY3VycmVudFBocmFzZXMubGVuZ3RoO1xuICAgIGNvbnN0IGNvbXBsZXRlZFBocmFzZXNDb3VudCA9IE9iamVjdC52YWx1ZXMoY29tcGxldGVkUGhyYXNlcykucmVkdWNlKChzdW0sIGNvbXBsZXRlZCkgPT4gc3VtICsgKGNvbXBsZXRlZD8ubGVuZ3RoIHx8IDApLCAwKTtcbiAgICBjb25zdCB0b3RhbFByb2dyZXNzID0gdG90YWxQaHJhc2VzID4gMCA/IE1hdGgucm91bmQoKGNvbXBsZXRlZFBocmFzZXNDb3VudCAvIHRvdGFsUGhyYXNlcykgKiAxMDApIDogMDtcbiAgICBjb25zdCBjb21wbGV0aW9uUHJvZ3Jlc3MgPSB0b3RhbFBocmFzZXNJbkNhdGVnb3J5ID4gMCA/ICgocGhyYXNlSW5kZXggKyAxKSAvIHRvdGFsUGhyYXNlc0luQ2F0ZWdvcnkpICogMTAwIDogMDtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFBocmFzZXMsXG4gICAgICBjb21wbGV0ZWRQaHJhc2VzQ291bnQsXG4gICAgICB0b3RhbFByb2dyZXNzLFxuICAgICAgY29tcGxldGlvblByb2dyZXNzLFxuICAgICAgY29tcGxldGVkSW5DdXJyZW50Q2F0ZWdvcnk6IGNvbXBsZXRlZFBocmFzZXNbY2F0ZWdvcnlJbmRleF0/Lmxlbmd0aCB8fCAwLFxuICAgICAgdG90YWxJbkN1cnJlbnRDYXRlZ29yeTogdG90YWxQaHJhc2VzSW5DYXRlZ29yeVxuICAgIH07XG4gIH0sIFtjdXJyZW50UGhyYXNlcywgY29tcGxldGVkUGhyYXNlcywgdG90YWxQaHJhc2VzSW5DYXRlZ29yeSwgcGhyYXNlSW5kZXgsIGNhdGVnb3J5SW5kZXgsIGlzSW5pdGlhbGl6ZWQuY3VycmVudF0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gQ09NUFVURUQgRElTUExBWSA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGRpc3BsYXkgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWlzSW5pdGlhbGl6ZWQuY3VycmVudCkgeyAvLyDinIUgQUpPVVTDiSA6IFByb3RlY3Rpb24gY29udHJlIGxlIGNhbGN1bCBhdmFudCBpbml0aWFsaXNhdGlvblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGhyYXNlQ291bnRlcjogXCIwIC8gMFwiLFxuICAgICAgICBjYXRlZ29yaWVzOiBbXSxcbiAgICAgICAgY3VycmVudFBocmFzZTogbnVsbCxcbiAgICAgICAgY3VycmVudENhdGVnb3J5OiBudWxsLFxuICAgICAgICBjdXJyZW50UGhyYXNlczogW11cbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHBocmFzZUNvdW50ZXIgPSBgJHtwaHJhc2VJbmRleCArIDF9IC8gJHt0b3RhbFBocmFzZXNJbkNhdGVnb3J5IHx8IDB9YDtcbiAgICBjb25zdCBjYXRlZ29yaWVzTmFtZXMgPSBjYXRlZ29yaWVzLm1hcChjYXQgPT4gY2F0Lm5hbWUpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBwaHJhc2VDb3VudGVyLFxuICAgICAgY2F0ZWdvcmllczogY2F0ZWdvcmllc05hbWVzLFxuICAgICAgY3VycmVudFBocmFzZSxcbiAgICAgIGN1cnJlbnRDYXRlZ29yeSxcbiAgICAgIGN1cnJlbnRQaHJhc2VzXG4gICAgfTtcbiAgfSwgW3BocmFzZUluZGV4LCB0b3RhbFBocmFzZXNJbkNhdGVnb3J5LCBjYXRlZ29yaWVzLCBjdXJyZW50UGhyYXNlLCBjdXJyZW50Q2F0ZWdvcnksIGN1cnJlbnRQaHJhc2VzLCBpc0luaXRpYWxpemVkLmN1cnJlbnRdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IFZBTElEQVRJT04gPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBjYW5Hb1RvUHJldmlvdXMgPSBwaHJhc2VJbmRleCA+IDA7XG4gIGNvbnN0IGlzTGFzdFBocmFzZUluQ2F0ZWdvcnkgPSBwaHJhc2VJbmRleCA9PT0gdG90YWxQaHJhc2VzSW5DYXRlZ29yeSAtIDE7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBTdGF0ZVxuICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgcGhyYXNlSW5kZXgsXG4gICAgc2hvd1RyYW5zbGF0aW9uLFxuICAgIGNvbXBsZXRlZFBocmFzZXMsXG4gICAgbG9hZGVkLFxuICAgIHNob3dEZXRhaWxlZFByb2dyZXNzLFxuICAgIFxuICAgIC8vIERhdGFcbiAgICBjdXJyZW50UGhyYXNlLFxuICAgIGN1cnJlbnRDYXRlZ29yeSxcbiAgICBjdXJyZW50UGhyYXNlcyxcbiAgICB0b3RhbENhdGVnb3JpZXM6IGNhdGVnb3JpZXMubGVuZ3RoLFxuICAgIHRvdGFsUGhyYXNlc0luQ2F0ZWdvcnksXG4gICAgaGFzVmFsaWREYXRhLFxuICAgIFxuICAgIC8vIEFjdGlvbnNcbiAgICBjaGFuZ2VDYXRlZ29yeSxcbiAgICB0b2dnbGVUcmFuc2xhdGlvbixcbiAgICB0b2dnbGVEZXRhaWxlZFByb2dyZXNzLFxuICAgIGhhbmRsZU5leHQsXG4gICAgaGFuZGxlUHJldmlvdXMsXG4gICAgXG4gICAgLy8gQ29tcHV0ZWRcbiAgICBjYW5Hb1RvUHJldmlvdXMsXG4gICAgaXNMYXN0UGhyYXNlSW5DYXRlZ29yeSxcbiAgICBzdGF0cywgLy8g4pyFIE9QVElNSVPDiSA6IE9iamV0IG3DqW1vcmlzw6lcbiAgICBkaXNwbGF5LCAvLyDinIUgT1BUSU1JU8OJIDogT2JqZXQgbcOpbW9yaXPDqVxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlUGhyYXNlczsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUVBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFlBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQU9BLElBQU1JLFVBQVUsR0FBRyxTQUFiQSxVQUFVQSxDQUFJQyxXQUFXLEVBQUVDLEtBQUssRUFBSztFQUV6QyxJQUFNQyxrQkFBa0IsR0FBRyxTQUFyQkEsa0JBQWtCQSxDQUFJQyxL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