0573c6b7e9551b9aa17e7fde1229e70d
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _arrayUtils = require("../utils/arrayUtils");
var REVISION_CONFIG = {
  TRIGGER_INTERVAL: 50,
  QUESTIONS_COUNT: 10,
  STORAGE_KEY: 'revision_manager_data'
};
var useRevisionManager = function useRevisionManager() {
  var _useState = (0, _react.useState)(0),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    totalWordsLearned = _useState2[0],
    setTotalWordsLearned = _useState2[1];
  var _useState3 = (0, _react.useState)(50),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    nextRevisionAt = _useState4[0],
    setNextRevisionAt = _useState4[1];
  var _useState5 = (0, _react.useState)([]),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    lastRevisionWords = _useState6[0],
    setLastRevisionWords = _useState6[1];
  var _useState7 = (0, _react.useState)([]),
    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),
    revisionHistory = _useState8[0],
    setRevisionHistory = _useState8[1];
  var _useState9 = (0, _react.useState)(false),
    _useState0 = (0, _slicedToArray2.default)(_useState9, 2),
    isRevisionDisabled = _useState0[0],
    setIsRevisionDisabled = _useState0[1];
  var _useState1 = (0, _react.useState)(true),
    _useState10 = (0, _slicedToArray2.default)(_useState1, 2),
    isLoading = _useState10[0],
    setIsLoading = _useState10[1];
  var lastCalculationRef = (0, _react.useRef)(0);
  var loadRevisionData = function () {
    var _ref = (0, _asyncToGenerator2.default)(function* () {
      try {
        var stored = yield _asyncStorage.default.getItem(REVISION_CONFIG.STORAGE_KEY);
        if (stored) {
          var data = JSON.parse(stored);
          setNextRevisionAt(data.nextRevisionAt || 50);
          setLastRevisionWords(data.lastRevisionWords || []);
          setRevisionHistory(data.revisionHistory || []);
          setIsRevisionDisabled(data.isRevisionDisabled || false);
        }
      } catch (error) {
        console.warn('Erreur chargement données révision:', error);
      } finally {
        setIsLoading(false);
      }
    });
    return function loadRevisionData() {
      return _ref.apply(this, arguments);
    };
  }();
  (0, _react.useEffect)(function () {
    loadRevisionData();
  }, []);
  var saveRevisionData = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    if (isLoading) return;
    try {
      var data = {
        nextRevisionAt: nextRevisionAt,
        lastRevisionWords: lastRevisionWords,
        revisionHistory: revisionHistory,
        isRevisionDisabled: isRevisionDisabled,
        lastUpdate: Date.now()
      };
      yield _asyncStorage.default.setItem(REVISION_CONFIG.STORAGE_KEY, JSON.stringify(data));
    } catch (error) {
      console.warn('Erreur sauvegarde données révision:', error);
    }
  }), [nextRevisionAt, lastRevisionWords, revisionHistory, isRevisionDisabled, isLoading]);
  (0, _react.useEffect)(function () {
    saveRevisionData();
  }, [saveRevisionData]);
  var calculateTotalWords = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    var now = Date.now();
    if (now - lastCalculationRef.current < 2000) return;
    lastCalculationRef.current = now;
    try {
      var total = 0;
      var levels = ['1', '2', '3', '4', '5', '6', 'bonus'];
      var modes = ['classic', 'fast'];
      for (var level of levels) {
        for (var mode of modes) {
          var stored = yield _asyncStorage.default.getItem(`vocabulary_${level}_${mode}`);
          if (stored) {
            var data = JSON.parse(stored);
            var completedWords = data.completedWords || {};
            total += Object.values(completedWords).reduce(function (acc, words) {
              if (Array.isArray(words)) {
                return acc + words.length;
              }
              return acc;
            }, 0);
          }
        }
      }
      setTotalWordsLearned(total);
    } catch (error) {
      console.warn('Erreur calcul mots appris:', error);
    }
  }), []);
  var getAllLearnedWords = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      var allWords = [];
      var levels = ['1', '2', '3', '4', '5', '6', 'bonus'];
      var modes = ['classic', 'fast'];
      var _loop = function* _loop(level) {
        var _loop2 = function* _loop2(mode) {
          var stored = yield _asyncStorage.default.getItem(`vocabulary_${level}_${mode}`);
          if (stored) {
            var data = JSON.parse(stored);
            var completedWords = data.completedWords || {};
            Object.entries(completedWords).forEach(function (_ref5) {
              var _ref6 = (0, _slicedToArray2.default)(_ref5, 2),
                categoryIndex = _ref6[0],
                words = _ref6[1];
              if (Array.isArray(words)) {
                words.forEach(function (word) {
                  if (typeof word === 'object' && word.word) {
                    allWords.push(Object.assign({}, word, {
                      fromLevel: level,
                      fromMode: mode,
                      categoryIndex: parseInt(categoryIndex)
                    }));
                  } else if (typeof word === 'string') {
                    allWords.push({
                      word: word,
                      translation: '?',
                      fromLevel: level,
                      fromMode: mode,
                      categoryIndex: parseInt(categoryIndex),
                      timestamp: null
                    });
                  }
                });
              }
            });
          }
        };
        for (var mode of modes) {
          yield* _loop2(mode);
        }
      };
      for (var level of levels) {
        yield* _loop(level);
      }
      return allWords;
    } catch (error) {
      console.warn('Erreur récupération mots appris:', error);
      return [];
    }
  }), []);
  var selectRevisionWords = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    var count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : REVISION_CONFIG.QUESTIONS_COUNT;
    var allWords = yield getAllLearnedWords();
    if (allWords.length === 0) return [];
    if (allWords.length <= count) return allWords;
    var lastWords = new Set(lastRevisionWords.map(function (w) {
      return w.word;
    }));
    var availableWords = allWords.filter(function (word) {
      return !lastWords.has(word.word);
    });
    var poolWords = availableWords.length >= count ? availableWords : allWords;
    var sortedByAge = poolWords.toSorted(function (a, b) {
      var aTime = a.timestamp ? new Date(a.timestamp).getTime() : 0;
      var bTime = b.timestamp ? new Date(b.timestamp).getTime() : 0;
      return aTime - bTime;
    });
    var oldCount = Math.floor(count * 0.6);
    var randomCount = count - oldCount;
    var oldWords = sortedByAge.slice(0, oldCount);
    var remainingWords = sortedByAge.slice(oldCount);
    var randomWords = (0, _arrayUtils.shuffleArray)(remainingWords).slice(0, randomCount);
    var selectedWords = (0, _arrayUtils.shuffleArray)([].concat((0, _toConsumableArray2.default)(oldWords), (0, _toConsumableArray2.default)(randomWords)));
    return selectedWords.slice(0, count);
  }), [lastRevisionWords, getAllLearnedWords]);
  var shouldShowRevision = !isRevisionDisabled && totalWordsLearned >= nextRevisionAt && totalWordsLearned > 0;
  var handleRevisionChoice = (0, _react.useCallback)(function () {
    var _ref8 = (0, _asyncToGenerator2.default)(function* (choice) {
      switch (choice) {
        case 'now':
          return {
            action: 'navigate',
            words: yield selectRevisionWords(),
            questionsCount: REVISION_CONFIG.QUESTIONS_COUNT
          };
        case 'later_50':
          {
            var newTarget50 = totalWordsLearned + 50;
            setNextRevisionAt(newTarget50);
            return {
              action: 'postponed',
              nextAt: newTarget50
            };
          }
        case 'later_100':
          {
            var newTarget100 = totalWordsLearned + 100;
            setNextRevisionAt(newTarget100);
            return {
              action: 'postponed',
              nextAt: newTarget100
            };
          }
        case 'disable':
          setIsRevisionDisabled(true);
          return {
            action: 'disabled'
          };
        default:
          return {
            action: 'cancelled'
          };
      }
    });
    return function (_x) {
      return _ref8.apply(this, arguments);
    };
  }(), [totalWordsLearned, selectRevisionWords]);
  var markRevisionCompleted = (0, _react.useCallback)(function (completedWords, score, questionsCount) {
    try {
      var revisionRecord = {
        timestamp: Date.now(),
        wordsCount: completedWords.length,
        score: score,
        questionsCount: questionsCount,
        percentage: Math.round(score / questionsCount * 100),
        totalWordsAtTime: totalWordsLearned
      };
      setRevisionHistory(function (prev) {
        return [].concat((0, _toConsumableArray2.default)(prev), [revisionRecord]);
      });
      setLastRevisionWords(completedWords);
      var nextTarget = totalWordsLearned + REVISION_CONFIG.TRIGGER_INTERVAL;
      setNextRevisionAt(nextTarget);
    } catch (error) {
      console.warn('Erreur enregistrement révision:', error);
    }
  }, [totalWordsLearned]);
  var enableRevisions = (0, _react.useCallback)(function () {
    setIsRevisionDisabled(false);
    var nextTarget = totalWordsLearned + REVISION_CONFIG.TRIGGER_INTERVAL;
    setNextRevisionAt(nextTarget);
  }, [totalWordsLearned]);
  (0, _react.useEffect)(function () {
    calculateTotalWords();
    var interval = setInterval(calculateTotalWords, 10000);
    return function () {
      return clearInterval(interval);
    };
  }, [calculateTotalWords]);
  var getRevisionStats = (0, _react.useCallback)(function () {
    if (revisionHistory.length === 0) {
      return {
        totalRevisions: 0,
        averageScore: 0,
        lastRevision: null,
        streak: 0
      };
    }
    var totalRevisions = revisionHistory.length;
    var averageScore = revisionHistory.reduce(function (sum, r) {
      return sum + r.percentage;
    }, 0) / totalRevisions;
    var lastRevision = revisionHistory[revisionHistory.length - 1];
    var streak = 0;
    for (var i = revisionHistory.length - 1; i >= 0; i--) {
      if (revisionHistory[i].percentage >= 70) {
        streak++;
      } else {
        break;
      }
    }
    return {
      totalRevisions: totalRevisions,
      averageScore: Math.round(averageScore),
      lastRevision: lastRevision,
      streak: streak
    };
  }, [revisionHistory]);
  return {
    totalWordsLearned: totalWordsLearned,
    nextRevisionAt: nextRevisionAt,
    shouldShowRevision: shouldShowRevision,
    isRevisionDisabled: isRevisionDisabled,
    isLoading: isLoading,
    handleRevisionChoice: handleRevisionChoice,
    markRevisionCompleted: markRevisionCompleted,
    enableRevisions: enableRevisions,
    calculateTotalWords: calculateTotalWords,
    selectRevisionWords: selectRevisionWords,
    getRevisionStats: getRevisionStats,
    config: REVISION_CONFIG
  };
};
var _default = exports.default = useRevisionManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfYXJyYXlVdGlscyIsIlJFVklTSU9OX0NPTkZJRyIsIlRSSUdHRVJfSU5URVJWQUwiLCJRVUVTVElPTlNfQ09VTlQiLCJTVE9SQUdFX0tFWSIsInVzZVJldmlzaW9uTWFuYWdlciIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJ0b3RhbFdvcmRzTGVhcm5lZCIsInNldFRvdGFsV29yZHNMZWFybmVkIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJuZXh0UmV2aXNpb25BdCIsInNldE5leHRSZXZpc2lvbkF0IiwiX3VzZVN0YXRlNSIsIl91c2VTdGF0ZTYiLCJsYXN0UmV2aXNpb25Xb3JkcyIsInNldExhc3RSZXZpc2lvbldvcmRzIiwiX3VzZVN0YXRlNyIsIl91c2VTdGF0ZTgiLCJyZXZpc2lvbkhpc3RvcnkiLCJzZXRSZXZpc2lvbkhpc3RvcnkiLCJfdXNlU3RhdGU5IiwiX3VzZVN0YXRlMCIsImlzUmV2aXNpb25EaXNhYmxlZCIsInNldElzUmV2aXNpb25EaXNhYmxlZCIsIl91c2VTdGF0ZTEiLCJfdXNlU3RhdGUxMCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImxhc3RDYWxjdWxhdGlvblJlZiIsInVzZVJlZiIsImxvYWRSZXZpc2lvbkRhdGEiLCJfcmVmIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwic3RvcmVkIiwiQXN5bmNTdG9yYWdlIiwiZ2V0SXRlbSIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ1c2VFZmZlY3QiLCJzYXZlUmV2aXNpb25EYXRhIiwidXNlQ2FsbGJhY2siLCJsYXN0VXBkYXRlIiwiRGF0ZSIsIm5vdyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjYWxjdWxhdGVUb3RhbFdvcmRzIiwiY3VycmVudCIsInRvdGFsIiwibGV2ZWxzIiwibW9kZXMiLCJsZXZlbCIsIm1vZGUiLCJjb21wbGV0ZWRXb3JkcyIsIk9iamVjdCIsInZhbHVlcyIsInJlZHVjZSIsImFjYyIsIndvcmRzIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiZ2V0QWxsTGVhcm5lZFdvcmRzIiwiYWxsV29yZHMiLCJfbG9vcCIsIl9sb29wMiIsImVudHJpZXMiLCJmb3JFYWNoIiwiX3JlZjUiLCJfcmVmNiIsImNhdGVnb3J5SW5kZXgiLCJ3b3JkIiwicHVzaCIsImFzc2lnbiIsImZyb21MZXZlbCIsImZyb21Nb2RlIiwicGFyc2VJbnQiLCJ0cmFuc2xhdGlvbiIsInRpbWVzdGFtcCIsInNlbGVjdFJldmlzaW9uV29yZHMiLCJjb3VudCIsInVuZGVmaW5lZCIsImxhc3RXb3JkcyIsIlNldCIsIm1hcCIsInciLCJhdmFpbGFibGVXb3JkcyIsImZpbHRlciIsImhhcyIsInBvb2xXb3JkcyIsInNvcnRlZEJ5QWdlIiwidG9Tb3J0ZWQiLCJhIiwiYiIsImFUaW1lIiwiZ2V0VGltZSIsImJUaW1lIiwib2xkQ291bnQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb21Db3VudCIsIm9sZFdvcmRzIiwic2xpY2UiLCJyZW1haW5pbmdXb3JkcyIsInJhbmRvbVdvcmRzIiwic2h1ZmZsZUFycmF5Iiwic2VsZWN0ZWRXb3JkcyIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJzaG91bGRTaG93UmV2aXNpb24iLCJoYW5kbGVSZXZpc2lvbkNob2ljZSIsIl9yZWY4IiwiY2hvaWNlIiwiYWN0aW9uIiwicXVlc3Rpb25zQ291bnQiLCJuZXdUYXJnZXQ1MCIsIm5leHRBdCIsIm5ld1RhcmdldDEwMCIsIl94IiwibWFya1JldmlzaW9uQ29tcGxldGVkIiwic2NvcmUiLCJyZXZpc2lvblJlY29yZCIsIndvcmRzQ291bnQiLCJwZXJjZW50YWdlIiwicm91bmQiLCJ0b3RhbFdvcmRzQXRUaW1lIiwicHJldiIsIm5leHRUYXJnZXQiLCJlbmFibGVSZXZpc2lvbnMiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImdldFJldmlzaW9uU3RhdHMiLCJ0b3RhbFJldmlzaW9ucyIsImF2ZXJhZ2VTY29yZSIsImxhc3RSZXZpc2lvbiIsInN0cmVhayIsInN1bSIsInIiLCJpIiwiY29uZmlnIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidXNlUmV2aXNpb25NYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9ob29rcy91c2VSZXZpc2lvbk1hbmFnZXIuanMgLSBTWVNUw4hNRSBJTlRFTExJR0VOVCBTSU1QTEVcclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEFzeW5jU3RvcmFnZSBmcm9tICdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZSc7XHJcblxyXG5pbXBvcnQgeyBzaHVmZmxlQXJyYXkgfSBmcm9tICcuLi91dGlscy9hcnJheVV0aWxzJztcclxuXHJcbmNvbnN0IFJFVklTSU9OX0NPTkZJRyA9IHtcclxuICBUUklHR0VSX0lOVEVSVkFMOiA1MCwgICAgLy8gVG91cyBsZXMgNTAgbW90c1xyXG4gIFFVRVNUSU9OU19DT1VOVDogMTAsICAgICAvLyBUb3Vqb3VycyAxMCBxdWVzdGlvbnNcclxuICBTVE9SQUdFX0tFWTogJ3JldmlzaW9uX21hbmFnZXJfZGF0YSdcclxufTtcclxuXHJcbmNvbnN0IHVzZVJldmlzaW9uTWFuYWdlciA9ICgpID0+IHtcclxuICAvLyA9PT09PT09PT09IMOJVEFUUyA9PT09PT09PT09XHJcbiAgY29uc3QgW3RvdGFsV29yZHNMZWFybmVkLCBzZXRUb3RhbFdvcmRzTGVhcm5lZF0gPSB1c2VTdGF0ZSgwKTtcclxuICBjb25zdCBbbmV4dFJldmlzaW9uQXQsIHNldE5leHRSZXZpc2lvbkF0XSA9IHVzZVN0YXRlKDUwKTtcclxuICBjb25zdCBbbGFzdFJldmlzaW9uV29yZHMsIHNldExhc3RSZXZpc2lvbldvcmRzXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbcmV2aXNpb25IaXN0b3J5LCBzZXRSZXZpc2lvbkhpc3RvcnldID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtpc1JldmlzaW9uRGlzYWJsZWQsIHNldElzUmV2aXNpb25EaXNhYmxlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIFxyXG4gIC8vIFJlZiBwb3VyIMOpdml0ZXIgbGVzIGNhbGN1bHMgdHJvcCBmcsOpcXVlbnRzXHJcbiAgY29uc3QgbGFzdENhbGN1bGF0aW9uUmVmID0gdXNlUmVmKDApO1xyXG5cclxuICBjb25zdCBsb2FkUmV2aXNpb25EYXRhID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3RvcmVkID0gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEl0ZW0oUkVWSVNJT05fQ09ORklHLlNUT1JBR0VfS0VZKTtcclxuICAgICAgaWYgKHN0b3JlZCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgc2V0TmV4dFJldmlzaW9uQXQoZGF0YS5uZXh0UmV2aXNpb25BdCB8fCA1MCk7XHJcbiAgICAgICAgc2V0TGFzdFJldmlzaW9uV29yZHMoZGF0YS5sYXN0UmV2aXNpb25Xb3JkcyB8fCBbXSk7XHJcbiAgICAgICAgc2V0UmV2aXNpb25IaXN0b3J5KGRhdGEucmV2aXNpb25IaXN0b3J5IHx8IFtdKTtcclxuICAgICAgICBzZXRJc1JldmlzaW9uRGlzYWJsZWQoZGF0YS5pc1JldmlzaW9uRGlzYWJsZWQgfHwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0VycmV1ciBjaGFyZ2VtZW50IGRvbm7DqWVzIHLDqXZpc2lvbjonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vID09PT09PT09PT0gQ0hBUkdFTUVOVCBJTklUSUFMID09PT09PT09PT1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbG9hZFJldmlzaW9uRGF0YSgpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PSBTQVVWRUdBUkRFIEFVVE8gPT09PT09PT09PVxyXG4gIGNvbnN0IHNhdmVSZXZpc2lvbkRhdGEgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSByZXR1cm47XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgbmV4dFJldmlzaW9uQXQsXHJcbiAgICAgICAgbGFzdFJldmlzaW9uV29yZHMsXHJcbiAgICAgICAgcmV2aXNpb25IaXN0b3J5LFxyXG4gICAgICAgIGlzUmV2aXNpb25EaXNhYmxlZCxcclxuICAgICAgICBsYXN0VXBkYXRlOiBEYXRlLm5vdygpXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5zZXRJdGVtKFJFVklTSU9OX0NPTkZJRy5TVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdFcnJldXIgc2F1dmVnYXJkZSBkb25uw6llcyByw6l2aXNpb246JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0sIFtuZXh0UmV2aXNpb25BdCwgbGFzdFJldmlzaW9uV29yZHMsIHJldmlzaW9uSGlzdG9yeSwgaXNSZXZpc2lvbkRpc2FibGVkLCBpc0xvYWRpbmddKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNhdmVSZXZpc2lvbkRhdGEoKTtcclxuICB9LCBbc2F2ZVJldmlzaW9uRGF0YV0pO1xyXG5cclxuICAvLyA9PT09PT09PT09IENPTVBUQUdFIERFUyBNT1RTIEFQUFJJUyA9PT09PT09PT09XHJcbiAgY29uc3QgY2FsY3VsYXRlVG90YWxXb3JkcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBpZiAobm93IC0gbGFzdENhbGN1bGF0aW9uUmVmLmN1cnJlbnQgPCAyMDAwKSByZXR1cm47IC8vIERlYm91bmNlIDJzXHJcbiAgICBsYXN0Q2FsY3VsYXRpb25SZWYuY3VycmVudCA9IG5vdztcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgdG90YWwgPSAwO1xyXG4gICAgICBjb25zdCBsZXZlbHMgPSBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJ2JvbnVzJ107XHJcbiAgICAgIGNvbnN0IG1vZGVzID0gWydjbGFzc2ljJywgJ2Zhc3QnXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgbGV2ZWwgb2YgbGV2ZWxzKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBtb2RlIG9mIG1vZGVzKSB7XHJcbiAgICAgICAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbShgdm9jYWJ1bGFyeV8ke2xldmVsfV8ke21vZGV9YCk7XHJcbiAgICAgICAgICBpZiAoc3RvcmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFdvcmRzID0gZGF0YS5jb21wbGV0ZWRXb3JkcyB8fCB7fTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENvbXB0ZXIgdG91cyBsZXMgbW90cyBhcHByaXNcclxuICAgICAgICAgICAgdG90YWwgKz0gT2JqZWN0LnZhbHVlcyhjb21wbGV0ZWRXb3JkcykucmVkdWNlKChhY2MsIHdvcmRzKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkod29yZHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjICsgd29yZHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFRvdGFsV29yZHNMZWFybmVkKHRvdGFsKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignRXJyZXVyIGNhbGN1bCBtb3RzIGFwcHJpczonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyA9PT09PT09PT09IFLDiUNVUMOJUkFUSU9OIERFUyBNT1RTIFBPVVIgUsOJVklTSU9OID09PT09PT09PT1cclxuICBjb25zdCBnZXRBbGxMZWFybmVkV29yZHMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBhbGxXb3JkcyA9IFtdO1xyXG4gICAgICBjb25zdCBsZXZlbHMgPSBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJ2JvbnVzJ107XHJcbiAgICAgIGNvbnN0IG1vZGVzID0gWydjbGFzc2ljJywgJ2Zhc3QnXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgbGV2ZWwgb2YgbGV2ZWxzKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBtb2RlIG9mIG1vZGVzKSB7XHJcbiAgICAgICAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbShgdm9jYWJ1bGFyeV8ke2xldmVsfV8ke21vZGV9YCk7XHJcbiAgICAgICAgICBpZiAoc3RvcmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFdvcmRzID0gZGF0YS5jb21wbGV0ZWRXb3JkcyB8fCB7fTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFLDqWN1cMOpcmVyIHRvdXMgbGVzIG1vdHMgYXZlYyBtw6l0YWRvbm7DqWVzXHJcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGNvbXBsZXRlZFdvcmRzKS5mb3JFYWNoKChbY2F0ZWdvcnlJbmRleCwgd29yZHNdKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkod29yZHMpKSB7XHJcbiAgICAgICAgICAgICAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyBTdXBwb3J0IGFuY2llbiBldCBub3V2ZWF1IGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdvcmQgPT09ICdvYmplY3QnICYmIHdvcmQud29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbFdvcmRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgLi4ud29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgIGZyb21MZXZlbDogbGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBmcm9tTW9kZTogbW9kZSxcclxuICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5SW5kZXg6IHBhcnNlSW50KGNhdGVnb3J5SW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdvcmQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQW5jaWVuIGZvcm1hdCAtIG9uIGZhaXQgZGUgbm90cmUgbWlldXhcclxuICAgICAgICAgICAgICAgICAgICBhbGxXb3Jkcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgIHdvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbjogJz8nLCAvLyBTZXJhIHLDqWN1cMOpcsOpIGRlcHVpcyBsZXMgZG9ubsOpZXMgb3JpZ2luYWxlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbUxldmVsOiBsZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAgIGZyb21Nb2RlOiBtb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJbmRleDogcGFyc2VJbnQoY2F0ZWdvcnlJbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBhbGxXb3JkcztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignRXJyZXVyIHLDqWN1cMOpcmF0aW9uIG1vdHMgYXBwcmlzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PSBBTEdPUklUSE1FIEFOVEktUsOJUMOJVElUSU9OID09PT09PT09PT1cclxuICBjb25zdCBzZWxlY3RSZXZpc2lvbldvcmRzID0gdXNlQ2FsbGJhY2soYXN5bmMgKGNvdW50ID0gUkVWSVNJT05fQ09ORklHLlFVRVNUSU9OU19DT1VOVCkgPT4ge1xyXG4gICAgY29uc3QgYWxsV29yZHMgPSBhd2FpdCBnZXRBbGxMZWFybmVkV29yZHMoKTtcclxuICAgIFxyXG4gICAgaWYgKGFsbFdvcmRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xyXG4gICAgaWYgKGFsbFdvcmRzLmxlbmd0aCA8PSBjb3VudCkgcmV0dXJuIGFsbFdvcmRzO1xyXG5cclxuICAgIC8vIEZpbHRyZXIgbGVzIG1vdHMgZGUgbGEgZGVybmnDqHJlIHLDqXZpc2lvbiAow6l2aXRlciByw6lww6l0aXRpb24gaW1tw6lkaWF0ZSlcclxuICAgIGNvbnN0IGxhc3RXb3JkcyA9IG5ldyBTZXQobGFzdFJldmlzaW9uV29yZHMubWFwKHcgPT4gdy53b3JkKSk7XHJcbiAgICBjb25zdCBhdmFpbGFibGVXb3JkcyA9IGFsbFdvcmRzLmZpbHRlcih3b3JkID0+ICFsYXN0V29yZHMuaGFzKHdvcmQud29yZCkpO1xyXG4gICAgXHJcbiAgICAvLyBTaSBwYXMgYXNzZXogZGUgbW90cyBkaWZmw6lyZW50cywgb24gcHJlbmQgcXVhbmQgbcOqbWUgZGFucyB0b3VzXHJcbiAgICBjb25zdCBwb29sV29yZHMgPSBhdmFpbGFibGVXb3Jkcy5sZW5ndGggPj0gY291bnQgPyBhdmFpbGFibGVXb3JkcyA6IGFsbFdvcmRzO1xyXG4gICAgXHJcbiAgICAvLyBBbGdvcml0aG1lIGRlIHPDqWxlY3Rpb24gaW50ZWxsaWdlbnQgOlxyXG4gICAgLy8gMS4gUHJpb3Jpc2VyIGxlcyBtb3RzIGxlcyBwbHVzIGFuY2llbnMgKG5vbiByw6l2aXPDqXMgcsOpY2VtbWVudClcclxuICAgIC8vIDIuIE3DqWxhbmdlciBsZXMgbml2ZWF1eCBldCBtb2Rlc1xyXG4gICAgLy8gMy4gw4l2aXRlciB0cm9wIGRlIG1vdHMgZHUgbcOqbWUgbml2ZWF1IGQnYWZmaWzDqWVcclxuXHJcbiAgICAvLyBUcmllciBwYXIgw6JnZSAocGx1cyBhbmNpZW4gZW4gcHJlbWllcilcclxuICAgIGNvbnN0IHNvcnRlZEJ5QWdlID0gcG9vbFdvcmRzLnRvU29ydGVkKChhLCBiKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFUaW1lID0gYS50aW1lc3RhbXAgPyBuZXcgRGF0ZShhLnRpbWVzdGFtcCkuZ2V0VGltZSgpIDogMDtcclxuICAgICAgY29uc3QgYlRpbWUgPSBiLnRpbWVzdGFtcCA/IG5ldyBEYXRlKGIudGltZXN0YW1wKS5nZXRUaW1lKCkgOiAwO1xyXG4gICAgICByZXR1cm4gYVRpbWUgLSBiVGltZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFByZW5kcmUgdW5lIG1peCA6IDYwJSBkZXMgcGx1cyBhbmNpZW5zICsgNDAlIGFsw6lhdG9pcmVcclxuICAgIGNvbnN0IG9sZENvdW50ID0gTWF0aC5mbG9vcihjb3VudCAqIDAuNik7XHJcbiAgICBjb25zdCByYW5kb21Db3VudCA9IGNvdW50IC0gb2xkQ291bnQ7XHJcbiAgICBcclxuICAgIGNvbnN0IG9sZFdvcmRzID0gc29ydGVkQnlBZ2Uuc2xpY2UoMCwgb2xkQ291bnQpO1xyXG4gICAgY29uc3QgcmVtYWluaW5nV29yZHMgPSBzb3J0ZWRCeUFnZS5zbGljZShvbGRDb3VudCk7XHJcbiAgICBjb25zdCByYW5kb21Xb3JkcyA9IHNodWZmbGVBcnJheShyZW1haW5pbmdXb3Jkcykuc2xpY2UoMCwgcmFuZG9tQ291bnQpO1xyXG5cclxuICAgIGNvbnN0IHNlbGVjdGVkV29yZHMgPSBzaHVmZmxlQXJyYXkoWy4uLm9sZFdvcmRzLCAuLi5yYW5kb21Xb3Jkc10pOyAvLyBNw6lsYW5nZXIgbGUgcsOpc3VsdGF0IGZpbmFsXHJcblxyXG4gICAgcmV0dXJuIHNlbGVjdGVkV29yZHMuc2xpY2UoMCwgY291bnQpO1xyXG4gIH0sIFtsYXN0UmV2aXNpb25Xb3JkcywgZ2V0QWxsTGVhcm5lZFdvcmRzXSk7XHJcblxyXG4gIC8vID09PT09PT09PT0gTE9HSVFVRSBERSBEw4lDTEVOQ0hFTUVOVCA9PT09PT09PT09XHJcbiAgY29uc3Qgc2hvdWxkU2hvd1JldmlzaW9uID0gIWlzUmV2aXNpb25EaXNhYmxlZCAmJiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxXb3Jkc0xlYXJuZWQgPj0gbmV4dFJldmlzaW9uQXQgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsV29yZHNMZWFybmVkID4gMDtcclxuXHJcbiAgLy8gPT09PT09PT09PSBIQU5ETEVSUyBEVSBQT1BVUCA9PT09PT09PT09XHJcbiAgY29uc3QgaGFuZGxlUmV2aXNpb25DaG9pY2UgPSB1c2VDYWxsYmFjayhhc3luYyAoY2hvaWNlKSA9PiB7XHJcbiAgICBzd2l0Y2ggKGNob2ljZSkge1xyXG4gICAgICBjYXNlICdub3cnOlxyXG4gICAgICAgIC8vIExhIG5hdmlnYXRpb24gc2VyYSBnw6lyw6llIHBhciBsZSBjb21wb3NhbnQgcGFyZW50XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGFjdGlvbjogJ25hdmlnYXRlJyxcclxuICAgICAgICAgIHdvcmRzOiBhd2FpdCBzZWxlY3RSZXZpc2lvbldvcmRzKCksXHJcbiAgICAgICAgICBxdWVzdGlvbnNDb3VudDogUkVWSVNJT05fQ09ORklHLlFVRVNUSU9OU19DT1VOVFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgIGNhc2UgJ2xhdGVyXzUwJzoge1xyXG4gICAgICAgIGNvbnN0IG5ld1RhcmdldDUwID0gdG90YWxXb3Jkc0xlYXJuZWQgKyA1MDtcclxuICAgICAgICBzZXROZXh0UmV2aXNpb25BdChuZXdUYXJnZXQ1MCk7XHJcbiAgICAgICAgcmV0dXJuIHsgYWN0aW9uOiAncG9zdHBvbmVkJywgbmV4dEF0OiBuZXdUYXJnZXQ1MCB9O1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2xhdGVyXzEwMCc6IHtcclxuICAgICAgICBjb25zdCBuZXdUYXJnZXQxMDAgPSB0b3RhbFdvcmRzTGVhcm5lZCArIDEwMDtcclxuICAgICAgICBzZXROZXh0UmV2aXNpb25BdChuZXdUYXJnZXQxMDApO1xyXG4gICAgICAgIHJldHVybiB7IGFjdGlvbjogJ3Bvc3Rwb25lZCcsIG5leHRBdDogbmV3VGFyZ2V0MTAwIH07XHJcbiAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgY2FzZSAnZGlzYWJsZSc6XHJcbiAgICAgICAgc2V0SXNSZXZpc2lvbkRpc2FibGVkKHRydWUpO1xyXG4gICAgICAgIHJldHVybiB7IGFjdGlvbjogJ2Rpc2FibGVkJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB7IGFjdGlvbjogJ2NhbmNlbGxlZCcgfTtcclxuICAgIH1cclxuICB9LCBbdG90YWxXb3Jkc0xlYXJuZWQsIHNlbGVjdFJldmlzaW9uV29yZHNdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PSBDT01QTEVUSU9OIEQnVU5FIFLDiVZJU0lPTiA9PT09PT09PT09XHJcbiAgY29uc3QgbWFya1JldmlzaW9uQ29tcGxldGVkID0gdXNlQ2FsbGJhY2soKGNvbXBsZXRlZFdvcmRzLCBzY29yZSwgcXVlc3Rpb25zQ291bnQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEVucmVnaXN0cmVyIGwnaGlzdG9yaXF1ZVxyXG4gICAgICBjb25zdCByZXZpc2lvblJlY29yZCA9IHtcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgd29yZHNDb3VudDogY29tcGxldGVkV29yZHMubGVuZ3RoLFxyXG4gICAgICAgIHNjb3JlLFxyXG4gICAgICAgIHF1ZXN0aW9uc0NvdW50LFxyXG4gICAgICAgIHBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKHNjb3JlIC8gcXVlc3Rpb25zQ291bnQpICogMTAwKSxcclxuICAgICAgICB0b3RhbFdvcmRzQXRUaW1lOiB0b3RhbFdvcmRzTGVhcm5lZFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2V0UmV2aXNpb25IaXN0b3J5KHByZXYgPT4gWy4uLnByZXYsIHJldmlzaW9uUmVjb3JkXSk7XHJcbiAgICAgIHNldExhc3RSZXZpc2lvbldvcmRzKGNvbXBsZXRlZFdvcmRzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFByb2dyYW1tZXIgbGEgcHJvY2hhaW5lIHLDqXZpc2lvblxyXG4gICAgICBjb25zdCBuZXh0VGFyZ2V0ID0gdG90YWxXb3Jkc0xlYXJuZWQgKyBSRVZJU0lPTl9DT05GSUcuVFJJR0dFUl9JTlRFUlZBTDtcclxuICAgICAgc2V0TmV4dFJldmlzaW9uQXQobmV4dFRhcmdldCk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdFcnJldXIgZW5yZWdpc3RyZW1lbnQgcsOpdmlzaW9uOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9LCBbdG90YWxXb3Jkc0xlYXJuZWRdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PSBSw4lBQ1RJVkFUSU9OIERFUyBSw4lWSVNJT05TID09PT09PT09PT1cclxuICBjb25zdCBlbmFibGVSZXZpc2lvbnMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBzZXRJc1JldmlzaW9uRGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgY29uc3QgbmV4dFRhcmdldCA9IHRvdGFsV29yZHNMZWFybmVkICsgUkVWSVNJT05fQ09ORklHLlRSSUdHRVJfSU5URVJWQUw7XHJcbiAgICBzZXROZXh0UmV2aXNpb25BdChuZXh0VGFyZ2V0KTtcclxuICB9LCBbdG90YWxXb3Jkc0xlYXJuZWRdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PSBDQUxDVUwgQVVUTyBEVSBUT1RBTCA9PT09PT09PT09XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNhbGN1bGF0ZVRvdGFsV29yZHMoKTtcclxuICAgIFxyXG4gICAgLy8gUmVjYWxjdWxlciBww6lyaW9kaXF1ZW1lbnRcclxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoY2FsY3VsYXRlVG90YWxXb3JkcywgMTAwMDApOyAvLyBUb3V0ZXMgbGVzIDEwc1xyXG4gICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gIH0sIFtjYWxjdWxhdGVUb3RhbFdvcmRzXSk7XHJcblxyXG4gIC8vID09PT09PT09PT0gU1RBVElTVElRVUVTID09PT09PT09PT1cclxuICBjb25zdCBnZXRSZXZpc2lvblN0YXRzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKHJldmlzaW9uSGlzdG9yeS5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0b3RhbFJldmlzaW9uczogMCxcclxuICAgICAgICBhdmVyYWdlU2NvcmU6IDAsXHJcbiAgICAgICAgbGFzdFJldmlzaW9uOiBudWxsLFxyXG4gICAgICAgIHN0cmVhazogMFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRvdGFsUmV2aXNpb25zID0gcmV2aXNpb25IaXN0b3J5Lmxlbmd0aDtcclxuICAgIGNvbnN0IGF2ZXJhZ2VTY29yZSA9IHJldmlzaW9uSGlzdG9yeS5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5wZXJjZW50YWdlLCAwKSAvIHRvdGFsUmV2aXNpb25zO1xyXG4gICAgY29uc3QgbGFzdFJldmlzaW9uID0gcmV2aXNpb25IaXN0b3J5W3JldmlzaW9uSGlzdG9yeS5sZW5ndGggLSAxXTtcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsZXIgbGUgc3RyZWFrIChyw6l2aXNpb25zIHLDqWNlbnRlcyBhdmVjID43MCUpXHJcbiAgICBsZXQgc3RyZWFrID0gMDtcclxuICAgIGZvciAobGV0IGkgPSByZXZpc2lvbkhpc3RvcnkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgaWYgKHJldmlzaW9uSGlzdG9yeVtpXS5wZXJjZW50YWdlID49IDcwKSB7XHJcbiAgICAgICAgc3RyZWFrKys7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3RhbFJldmlzaW9ucyxcclxuICAgICAgYXZlcmFnZVNjb3JlOiBNYXRoLnJvdW5kKGF2ZXJhZ2VTY29yZSksXHJcbiAgICAgIGxhc3RSZXZpc2lvbixcclxuICAgICAgc3RyZWFrXHJcbiAgICB9O1xyXG4gIH0sIFtyZXZpc2lvbkhpc3RvcnldKTtcclxuXHJcbiAgLy8gPT09PT09PT09PSBSRVRVUk4gPT09PT09PT09PVxyXG4gIHJldHVybiB7XHJcbiAgICAvLyDDiXRhdFxyXG4gICAgdG90YWxXb3Jkc0xlYXJuZWQsXHJcbiAgICBuZXh0UmV2aXNpb25BdCxcclxuICAgIHNob3VsZFNob3dSZXZpc2lvbixcclxuICAgIGlzUmV2aXNpb25EaXNhYmxlZCxcclxuICAgIGlzTG9hZGluZyxcclxuICAgIFxyXG4gICAgLy8gQWN0aW9uc1xyXG4gICAgaGFuZGxlUmV2aXNpb25DaG9pY2UsXHJcbiAgICBtYXJrUmV2aXNpb25Db21wbGV0ZWQsXHJcbiAgICBlbmFibGVSZXZpc2lvbnMsXHJcbiAgICBjYWxjdWxhdGVUb3RhbFdvcmRzLFxyXG4gICAgc2VsZWN0UmV2aXNpb25Xb3JkcyxcclxuICAgIFxyXG4gICAgLy8gVXRpbGl0YWlyZXNcclxuICAgIGdldFJldmlzaW9uU3RhdHMsXHJcbiAgICBcclxuICAgIC8vIENvbmZpZ3VyYXRpb25cclxuICAgIGNvbmZpZzogUkVWSVNJT05fQ09ORklHXHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZVJldmlzaW9uTWFuYWdlcjsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ0EsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBRUEsSUFBQUcsV0FBQSxHQUFBSCxPQUFBO0FBRUEsSUFBTUksZUFBZSxHQUFHO0VBQ3RCQyxnQkFBZ0IsRUFBRSxFQUFFO0VBQ3BCQyxlQUFlLEVBQUUsRUFBRTtFQUNuQkMsV0FBVyxFQUFFO0FBQ2YsQ0FBQztBQUVELElBQU1DLGtCQUFrQixHQUFHLFNBQXJCQSxrQkFBa0JBLENBQUEsRUFBUztFQUUvQixJQUFBQyxTQUFBLEdBQWtELElBQUFDLGVBQVEsRUFBQyxDQUFDLENBQUM7SUFBQUMsVUFBQSxPQUFBQyxlQUFBLENBQUFDLE9BQUEsRUFBQUosU0FBQTtJQUF0REssaUJBQWlCLEdBQUFILFVBQUE7SUFBRUksb0JBQW9CLEdBQUFKLFVBQUE7RUFDOUMsSUFBQUssVUFBQSxHQUE0QyxJQUFBTixlQUFRLEVBQUMsRUFBRSxDQUFDO0lBQUFPLFVB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