{"version":3,"names":["Object","defineProperty","exports","value","dispatchCommand","_PlatformChecker","require","_logger","_worklet_13960213792158_init_data","code","location","sourceMap","version","dispatchCommandFabric","_e","global","Error","animatedRef","commandName","args","arguments","length","undefined","_WORKLET","shadowNodeWrapper","_dispatchCommandFabric","__closure","__workletHash","__initData","__stackDetails","_worklet_12364817925533_init_data","dispatchCommandPaper","viewTag","_dispatchCommandPaper","dispatchCommandJest","logger","warn","dispatchCommandChromeDebugger","dispatchCommandDefault","shouldBeUseWeb","isFabric","isJest","isChromeDebugger"],"sources":["dispatchCommand.ts"],"sourcesContent":["'use strict';\nimport type { ShadowNodeWrapper } from '../commonTypes';\nimport {\n  isChromeDebugger,\n  isFabric,\n  isJest,\n  shouldBeUseWeb,\n} from '../PlatformChecker';\nimport type {\n  AnimatedRef,\n  AnimatedRefOnJS,\n  AnimatedRefOnUI,\n} from '../hook/commonTypes';\nimport type { Component } from 'react';\nimport { logger } from '../logger';\n\ntype DispatchCommand = <T extends Component>(\n  animatedRef: AnimatedRef<T>,\n  commandName: string,\n  args?: unknown[]\n) => void;\n\n/**\n * Lets you synchronously call a command of a native component.\n *\n * @param animatedRef - An [animated\n *   ref](https://docs.swmansion.com/react-native-reanimated/docs/core/useAnimatedRef#returns)\n *   connected to the component you'd want to call the command on.\n * @param commandName - The name of the command to dispatch (e.g. `\"focus\"` or\n *   `\"scrollToEnd\"`).\n * @param args - An optional array of arguments for the command.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/advanced/dispatchCommand\n */\nexport let dispatchCommand: DispatchCommand;\n\nfunction dispatchCommandFabric(\n  animatedRef: AnimatedRefOnJS | AnimatedRefOnUI,\n  commandName: string,\n  args: Array<unknown> = []\n) {\n  'worklet';\n  if (!_WORKLET) {\n    return;\n  }\n\n  const shadowNodeWrapper = animatedRef() as ShadowNodeWrapper;\n  global._dispatchCommandFabric!(shadowNodeWrapper, commandName, args);\n}\n\nfunction dispatchCommandPaper(\n  animatedRef: AnimatedRefOnJS | AnimatedRefOnUI,\n  commandName: string,\n  args: Array<unknown> = []\n) {\n  'worklet';\n  if (!_WORKLET) {\n    return;\n  }\n\n  const viewTag = animatedRef() as number;\n  global._dispatchCommandPaper!(viewTag, commandName, args);\n}\n\nfunction dispatchCommandJest() {\n  logger.warn('dispatchCommand() is not supported with Jest.');\n}\n\nfunction dispatchCommandChromeDebugger() {\n  logger.warn('dispatchCommand() is not supported with Chrome Debugger.');\n}\n\nfunction dispatchCommandDefault() {\n  logger.warn('dispatchCommand() is not supported on this configuration.');\n}\n\nif (!shouldBeUseWeb()) {\n  // Those assertions are actually correct since on Native platforms `AnimatedRef` is\n  // mapped as a different function in `shareableMappingCache` and\n  // TypeScript is not able to infer that.\n  if (isFabric()) {\n    dispatchCommand = dispatchCommandFabric as unknown as DispatchCommand;\n  } else {\n    dispatchCommand = dispatchCommandPaper as unknown as DispatchCommand;\n  }\n} else if (isJest()) {\n  dispatchCommand = dispatchCommandJest;\n} else if (isChromeDebugger()) {\n  dispatchCommand = dispatchCommandChromeDebugger;\n} else {\n  dispatchCommand = dispatchCommandDefault;\n}\n"],"mappings":"AAAA,YAAY;;AAACA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,eAAA;AAEb,IAAAC,gBAAA,GAAAC,OAAA;AAYA,IAAAC,OAAA,GAAAD,OAAA;AAmBO,IAAIF,eAAgC;AAAC,IAAAI,iCAAA;EAAAC,IAAA;EAAAC,QAAA;EAAAC,SAAA;EAAAC,OAAA;AAAA;AAAA,IAAAC,qBAAA,GAE5C;EAAA,IAAAC,EAAA,QAAAC,MAAA,CAAAC,KAAA;EAAA,IAAAH,qBAAA,YAAAA,sBACEI,WAA8C,EAC9CC,WAAmB,EAEnB;IAAA,IADAC,IAAoB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAGzB,IAAI,CAACG,QAAQ,EAAE;MACb;IACF;IAEA,IAAMC,iBAAiB,GAAGP,WAAW,CAAC,CAAsB;IAC5DF,MAAM,CAACU,sBAAsB,CAAED,iBAAiB,EAAEN,WAAW,EAAEC,IAAI,CAAC;EACtE,CAAC;EAAAN,qBAAA,CAAAa,SAAA;EAAAb,qBAAA,CAAAc,aAAA;EAAAd,qBAAA,CAAAe,UAAA,GAAApB,iCAAA;EAAAK,qBAAA,CAAAgB,cAAA,GAAAf,EAAA;EAAA,OAAAD,qBAAA;AAAA,CAZD;AAAA,IAAAiB,iCAAA;EAAArB,IAAA;EAAAC,QAAA;EAAAC,SAAA;EAAAC,OAAA;AAAA;AAAA,IAAAmB,oBAAA,GAcA;EAAA,IAAAjB,EAAA,QAAAC,MAAA,CAAAC,KAAA;EAAA,IAAAe,oBAAA,YAAAA,qBACEd,WAA8C,EAC9CC,WAAmB,EAEnB;IAAA,IADAC,IAAoB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAGzB,IAAI,CAACG,QAAQ,EAAE;MACb;IACF;IAEA,IAAMS,OAAO,GAAGf,WAAW,CAAC,CAAW;IACvCF,MAAM,CAACkB,qBAAqB,CAAED,OAAO,EAAEd,WAAW,EAAEC,IAAI,CAAC;EAC3D,CAAC;EAAAY,oBAAA,CAAAL,SAAA;EAAAK,oBAAA,CAAAJ,aAAA;EAAAI,oBAAA,CAAAH,UAAA,GAAAE,iCAAA;EAAAC,oBAAA,CAAAF,cAAA,GAAAf,EAAA;EAAA,OAAAiB,oBAAA;AAAA,CAZD;AAcA,SAASG,mBAAmBA,CAAA,EAAG;EAC7BC,cAAM,CAACC,IAAI,CAAC,+CAA+C,CAAC;AAC9D;AAEA,SAASC,6BAA6BA,CAAA,EAAG;EACvCF,cAAM,CAACC,IAAI,CAAC,0DAA0D,CAAC;AACzE;AAEA,SAASE,sBAAsBA,CAAA,EAAG;EAChCH,cAAM,CAACC,IAAI,CAAC,2DAA2D,CAAC;AAC1E;AAEA,IAAI,CAAC,IAAAG,+BAAc,EAAC,CAAC,EAAE;EAIrB,IAAI,IAAAC,yBAAQ,EAAC,CAAC,EAAE;IACdtC,OAAA,CAAAE,eAAA,GAAAA,eAAe,GAAGS,qBAAmD;EACvE,CAAC,MAAM;IACLX,OAAA,CAAAE,eAAA,GAAAA,eAAe,GAAG2B,oBAAkD;EACtE;AACF,CAAC,MAAM,IAAI,IAAAU,uBAAM,EAAC,CAAC,EAAE;EACnBvC,OAAA,CAAAE,eAAA,GAAAA,eAAe,GAAG8B,mBAAmB;AACvC,CAAC,MAAM,IAAI,IAAAQ,iCAAgB,EAAC,CAAC,EAAE;EAC7BxC,OAAA,CAAAE,eAAA,GAAAA,eAAe,GAAGiC,6BAA6B;AACjD,CAAC,MAAM;EACLnC,OAAA,CAAAE,eAAA,GAAAA,eAAe,GAAGkC,sBAAsB;AAC1C","ignoreList":[]}