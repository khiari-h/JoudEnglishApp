{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","createWorkletRuntime","runOnRuntime","_commonTypes","_errors","_initializers","_logger","_NativeReanimated","_PlatformChecker","_shareables","SHOULD_BE_USE_WEB","shouldBeUseWeb","_worklet_12161089332428_init_data","code","location","sourceMap","version","name","initializer","config","__reanimatedLoggerConfig","NativeReanimatedModule","makeShareableCloneRecursive","_e","global","Error","runtimesTs1","registerReanimatedError","registerLoggerConfig","setupCallGuard","setupConsole","__closure","__workletHash","__initData","__stackDetails","_worklet_14611986191884_init_data","_worklet_15070092744509_init_data","_worklet_7258315072090_init_data","workletRuntime","worklet","__DEV__","isWorkletFunction","ReanimatedError","_WORKLET","_len","arguments","length","args","Array","_key","_scheduleOnRuntime","makeShareableCloneOnUIRecursive","runtimesTs3","apply","_len2","_key2","scheduleOnRuntime","runtimesTs4"],"sources":["runtimes.ts"],"sourcesContent":["'use strict';\nimport { isWorkletFunction } from './commonTypes';\nimport type { WorkletFunction } from './commonTypes';\nimport { ReanimatedError, registerReanimatedError } from './errors';\nimport { setupCallGuard, setupConsole } from './initializers';\nimport { registerLoggerConfig } from './logger';\nimport NativeReanimatedModule from './NativeReanimated';\nimport { shouldBeUseWeb } from './PlatformChecker';\nimport {\n  makeShareableCloneOnUIRecursive,\n  makeShareableCloneRecursive,\n} from './shareables';\n\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\n\nexport type WorkletRuntime = {\n  __hostObjectWorkletRuntime: never;\n  readonly name: string;\n};\n\n/**\n * Lets you create a new JS runtime which can be used to run worklets possibly\n * on different threads than JS or UI thread.\n *\n * @param name - A name used to identify the runtime which will appear in\n *   devices list in Chrome DevTools.\n * @param initializer - An optional worklet that will be run synchronously on\n *   the same thread immediately after the runtime is created.\n * @returns WorkletRuntime which is a\n *   `jsi::HostObject<reanimated::WorkletRuntime>` - {@link WorkletRuntime}\n * @see https://docs.swmansion.com/react-native-reanimated/docs/threading/createWorkletRuntime\n */\n// @ts-expect-error Check `runOnUI` overload.\nexport function createWorkletRuntime(\n  name: string,\n  initializer?: () => void\n): WorkletRuntime;\n\nexport function createWorkletRuntime(\n  name: string,\n  initializer?: WorkletFunction<[], void>\n): WorkletRuntime {\n  // Assign to a different variable as __reanimatedLoggerConfig is not a captured\n  // identifier in the Worklet runtime.\n  const config = __reanimatedLoggerConfig;\n  return NativeReanimatedModule.createWorkletRuntime(\n    name,\n    makeShareableCloneRecursive(() => {\n      'worklet';\n      registerReanimatedError();\n      registerLoggerConfig(config);\n      setupCallGuard();\n      setupConsole();\n      initializer?.();\n    })\n  );\n}\n\n// @ts-expect-error Check `runOnUI` overload.\nexport function runOnRuntime<Args extends unknown[], ReturnValue>(\n  workletRuntime: WorkletRuntime,\n  worklet: (...args: Args) => ReturnValue\n): WorkletFunction<Args, ReturnValue>;\n/** Schedule a worklet to execute on the background queue. */\nexport function runOnRuntime<Args extends unknown[], ReturnValue>(\n  workletRuntime: WorkletRuntime,\n  worklet: WorkletFunction<Args, ReturnValue>\n): (...args: Args) => void {\n  'worklet';\n  if (__DEV__ && !SHOULD_BE_USE_WEB && !isWorkletFunction(worklet)) {\n    throw new ReanimatedError(\n      'The function passed to `runOnRuntime` is not a worklet.' +\n        (_WORKLET\n          ? ' Please make sure that `processNestedWorklets` option in Reanimated Babel plugin is enabled.'\n          : '')\n    );\n  }\n  if (_WORKLET) {\n    return (...args) =>\n      global._scheduleOnRuntime(\n        workletRuntime,\n        makeShareableCloneOnUIRecursive(() => {\n          'worklet';\n          worklet(...args);\n        })\n      );\n  }\n  return (...args) =>\n    NativeReanimatedModule.scheduleOnRuntime(\n      workletRuntime,\n      makeShareableCloneRecursive(() => {\n        'worklet';\n        worklet(...args);\n      })\n    );\n}\n"],"mappings":"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","ignoreList":[]}