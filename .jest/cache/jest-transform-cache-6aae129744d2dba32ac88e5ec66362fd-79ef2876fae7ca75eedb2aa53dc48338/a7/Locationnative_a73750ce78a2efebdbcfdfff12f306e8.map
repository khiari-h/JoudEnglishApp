{"version":3,"names":["DOMException","_Error","message","name","_this","_classCallCheck2","default","_callSuper","_inherits2","_createClass2","_wrapNativeSuper2","Error","Location","href","arguments","length","undefined","url","URL","username","_unused","password","Object","defineProperties","_defineProperty2","hash","get","set","enumerable","host","hostname","origin","pathname","port","protocol","search","ancestorOrigins","item","contains","assign","value","reload","process","env","NODE_ENV","DevSettings","require","globalThis","expo","reloadAppAsync","replace","toString","Symbol","for","inspect","object","constructor","prototype","configurable","location","setLocationHref","install","defineProperty","global","writable","window"],"sources":["Location.native.ts"],"sourcesContent":["// Copyright Â© 2023 650 Industries.\n// Copyright 2018-2023 the Deno authors. All rights reserved. MIT license.\n\nclass DOMException extends Error {\n  constructor(message: string, name: string) {\n    super(message);\n    this.name = name;\n  }\n}\n\n// The differences between the definitions of `Location` and `WorkerLocation`\n// are because of the `LegacyUnforgeable` attribute only specified upon\n// `Location`'s properties. See:\n// - https://html.spec.whatwg.org/multipage/history.html#the-location-interface\n// - https://heycam.github.io/webidl/#LegacyUnforgeable\nclass Location {\n  constructor(href: string | null = null) {\n    const url = new URL(\n      // @ts-expect-error\n      href\n    );\n\n    try {\n      url.username = '';\n    } catch {\n      throw new Error(\n        'Attempting to use the window.location polyfill before the URL built-in has been polyfilled.'\n      );\n    }\n    url.password = '';\n    Object.defineProperties(this, {\n      hash: {\n        get() {\n          return url.hash;\n        },\n        set() {\n          throw new DOMException(`Cannot set \"location.hash\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      host: {\n        get() {\n          return url.host;\n        },\n        set() {\n          throw new DOMException(`Cannot set \"location.host\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      hostname: {\n        get() {\n          return url.hostname;\n        },\n        set() {\n          throw new DOMException(`Cannot set \"location.hostname\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      href: {\n        get() {\n          return url.href;\n        },\n        set() {\n          throw new DOMException(`Cannot set \"location.href\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      origin: {\n        get() {\n          return url.origin;\n        },\n        enumerable: true,\n      },\n      pathname: {\n        get() {\n          return url.pathname;\n        },\n        set() {\n          throw new DOMException(`Cannot set \"location.pathname\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      port: {\n        get() {\n          return url.port;\n        },\n        set() {\n          throw new DOMException(`Cannot set \"location.port\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      protocol: {\n        get() {\n          return url.protocol;\n        },\n        set() {\n          throw new DOMException(`Cannot set \"location.protocol\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      search: {\n        get() {\n          return url.search;\n        },\n        set() {\n          throw new DOMException(`Cannot set \"location.search\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      ancestorOrigins: {\n        get() {\n          return {\n            length: 0,\n            item: () => null,\n            contains: () => false,\n          };\n        },\n        enumerable: true,\n      },\n      assign: {\n        value: function assign() {\n          throw new DOMException(`Cannot call \"location.assign()\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      reload: {\n        value: function reload() {\n          if (process.env.NODE_ENV !== 'production') {\n            // NOTE: This does change how native fast refresh works. The upstream metro-runtime will check\n            // if `location.reload` exists before falling back on an implementation that is nearly identical to\n            // this. The main difference is that on iOS there is a \"reason\" message sent, but at the time of writing\n            // this, that message is unused (ref: `RCTTriggerReloadCommandNotification`).\n            const DevSettings = (require('react-native') as typeof import('react-native'))\n              .DevSettings;\n\n            return DevSettings.reload();\n          } else if (\n            typeof globalThis.expo !== 'undefined' &&\n            'reloadAppAsync' in globalThis.expo\n          ) {\n            // Expo SDK 51 and above.\n            globalThis.expo.reloadAppAsync('');\n          } else {\n            throw new DOMException(`Cannot call \"location.reload()\".`, 'NotSupportedError');\n          }\n        },\n        enumerable: true,\n      },\n      replace: {\n        value: function replace() {\n          throw new DOMException(`Cannot call \"location.replace()\".`, 'NotSupportedError');\n        },\n        enumerable: true,\n      },\n      toString: {\n        value: function toString() {\n          return url.href;\n        },\n        enumerable: true,\n      },\n      [Symbol.for('Expo.privateCustomInspect')]: {\n        value(inspect: any) {\n          const object = {\n            hash: this.hash,\n            host: this.host,\n            hostname: this.hostname,\n            href: this.href,\n            origin: this.origin,\n            pathname: this.pathname,\n            port: this.port,\n            protocol: this.protocol,\n            search: this.search,\n          };\n          return `${this.constructor.name} ${inspect(object)}`;\n        },\n      },\n    });\n  }\n}\n\nObject.defineProperties(Location.prototype, {\n  [Symbol.toString()]: {\n    value: 'Location',\n    configurable: true,\n  },\n});\n\nlet location: Location | undefined = undefined;\n\nexport function setLocationHref(href: string) {\n  location = new Location(href);\n}\n\nexport function install() {\n  Object.defineProperty(global, 'Location', {\n    value: Location,\n    configurable: true,\n    writable: true,\n  });\n\n  Object.defineProperty(window, 'location', {\n    get() {\n      return location;\n    },\n    set() {\n      throw new DOMException(`Cannot set \"location\".`, 'NotSupportedError');\n    },\n    enumerable: true,\n  });\n}\n"],"mappings":"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","ignoreList":[]}