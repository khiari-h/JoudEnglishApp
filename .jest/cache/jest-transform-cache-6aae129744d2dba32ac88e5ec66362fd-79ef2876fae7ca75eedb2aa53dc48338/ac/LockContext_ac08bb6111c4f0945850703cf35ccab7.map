{"version":3,"names":["_react","require","_propTypes","_interopRequireDefault","Lock","_interopRequireWildcard","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","LockContext","createContext","LockProvider","_ref","children","_useState","useState","_useState2","_slicedToArray2","isEnabled","setIsEnabled","_useState3","_useState4","isLocked","setIsLocked","_useState5","_useState6","isLoading","setIsLoading","useEffect","_asyncToGenerator2","enabled","lockNow","useCallback","unlockWithPin","_ref3","pin","res","verifyPin","ok","reason","_x","apply","arguments","disable","disableLock","enable","enableLock","value","jsx","Provider","propTypes","PropTypes","node","isRequired","useLock","ctx","useContext","Error"],"sources":["LockContext.js"],"sourcesContent":["// src/contexts/LockContext.js\r\nimport { createContext, useCallback, useContext, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as Lock from '../services/lockService';\r\n\r\nconst LockContext = createContext(null);\r\n\r\nexport function LockProvider({ children }) {\r\n  const [isEnabled, setIsEnabled] = useState(false);\r\n  const [isLocked, setIsLocked] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const enabled = await Lock.isEnabled();\r\n        setIsEnabled(enabled);\r\n        setIsLocked(enabled);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const lockNow = useCallback(() => {\r\n    if (isEnabled) setIsLocked(true);\r\n  }, [isEnabled]);\r\n\r\n  const unlockWithPin = useCallback(async (pin) => {\r\n    const res = await Lock.verifyPin(pin);\r\n    if (res.ok) {\r\n      setIsLocked(false);\r\n      return { ok: true };\r\n    }\r\n    if (res.reason === 'lockout') return { ok: false, reason: 'lockout' };\r\n    return { ok: false };\r\n  }, []);\r\n\r\n  const disable = useCallback(async () => {\r\n    await Lock.disableLock();\r\n    setIsEnabled(false);\r\n    setIsLocked(false);\r\n  }, []);\r\n\r\n  const enable = useCallback(async () => {\r\n    await Lock.enableLock();\r\n    setIsEnabled(true);\r\n    setIsLocked(true);\r\n  }, []);\r\n\r\n  const value = {\r\n    isEnabled,\r\n    isLocked,\r\n    isLoading,\r\n    lockNow,\r\n    unlockWithPin,\r\n    enable,\r\n    disable,\r\n  };\r\n\r\n  return (\r\n    <LockContext.Provider value={value}>{children}</LockContext.Provider>\r\n  );\r\n}\r\n\r\nLockProvider.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport function useLock() {\r\n  const ctx = useContext(LockContext);\r\n  if (!ctx) throw new Error('useLock must be used within LockProvider');\r\n  return ctx;\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}