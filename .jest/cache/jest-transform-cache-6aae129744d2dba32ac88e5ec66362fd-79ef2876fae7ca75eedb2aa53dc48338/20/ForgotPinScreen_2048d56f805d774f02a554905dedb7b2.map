{"version":3,"names":["_react","require","_reactNative","Lock","_interopRequireWildcard","_propTypes","_interopRequireDefault","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","cov_j9hn4jcv1","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","s","b","_coverageSchema","coverage","actualCoverage","ForgotPinScreen","_ref","onReset","_ref2","useState","_ref3","_slicedToArray2","code","setCode","_ref4","_ref5","error","setError","handleBiometric","useCallback","_asyncToGenerator2","res","unlockWithBiometrics","ok","handleRecovery","verifyRecovery","jsxs","View","style","flex","alignItems","justifyContent","padding","testID","children","jsx","Text","fontSize","fontWeight","marginBottom","color","TouchableOpacity","onPress","backgroundColor","borderRadius","TextInput","value","onChangeText","placeholder","autoCapitalize","width","borderWidth","borderColor","propTypes","PropTypes","func","isRequired","_default","exports"],"sources":["ForgotPinScreen.js"],"sourcesContent":["// src/screens/Lock/ForgotPinScreen.js\r\nimport { useState, useCallback } from 'react';\r\nimport { View, Text, TextInput, TouchableOpacity } from 'react-native';\r\nimport * as Lock from '../../services/lockService';import PropTypes from 'prop-types';\n\r\n\r\nconst ForgotPinScreen = ({ onReset }) => {\r\n  const [code, setCode] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const handleBiometric = useCallback(async () => {\r\n    const res = await Lock.unlockWithBiometrics();\r\n    if (res.ok) {\r\n      onReset?.();\r\n    } else {\r\n      setError('Biométrie indisponible ou refusée.');\r\n    }\r\n  }, [onReset]);\r\n\r\n  const handleRecovery = useCallback(async () => {\r\n    const ok = await Lock.verifyRecovery(code);\r\n    if (ok) {\r\n      onReset?.();\r\n    } else {\r\n      setError('Code de récupération invalide');\r\n    }\r\n  }, [code, onReset]);\r\n\r\n  return (\r\n    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center', padding: 24 }} testID=\"forgot-pin-screen\">\r\n      <Text style={{ fontSize: 20, fontWeight: '700', marginBottom: 12 }}>PIN oublié</Text>\r\n      {!!error && <Text style={{ color: '#DC2626', marginBottom: 12 }}>{error}</Text>}\r\n      <TouchableOpacity testID=\"biometric-button\" onPress={handleBiometric} style={{ backgroundColor: '#10B981', padding: 12, borderRadius: 8, marginBottom: 12 }}>\r\n        <Text style={{ color: 'white', fontWeight: '700' }}>Utiliser la biométrie</Text>\r\n      </TouchableOpacity>\r\n      <TextInput\r\n        value={code}\r\n        onChangeText={setCode}\r\n        placeholder=\"Code de récupération\"\r\n        autoCapitalize=\"characters\"\r\n        style={{ width: '80%', borderWidth: 1, borderColor: '#E5E7EB', borderRadius: 8, padding: 12, marginBottom: 8 }}\r\n        testID=\"recovery-input\"\r\n      />\r\n      <TouchableOpacity testID=\"recovery-submit\" onPress={handleRecovery} style={{ backgroundColor: '#3B82F6', padding: 12, borderRadius: 8 }}>\r\n        <Text style={{ color: 'white', fontWeight: '700' }}>Valider</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\n\nForgotPinScreen.propTypes = {\n  onReset: PropTypes.func.isRequired,\n};\n\nexport default ForgotPinScreen;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}