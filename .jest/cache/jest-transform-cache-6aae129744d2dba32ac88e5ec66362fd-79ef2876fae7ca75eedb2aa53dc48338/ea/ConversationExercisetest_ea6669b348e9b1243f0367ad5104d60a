ee79db4686ceb7262641a6ab38c5d5fc
_getJestObj().mock('expo-router', function () {
  return {
    router: {
      push: jest.fn()
    }
  };
});
_getJestObj().mock('../../../../src/hooks/useLastActivity', function () {
  return {
    __esModule: true,
    default: function _default() {
      return {
        saveActivity: jest.fn()
      };
    }
  };
});
_getJestObj().mock('../../../../src/screens/exercises/conversations/hooks/useConversation');
_getJestObj().mock('../../../../src/utils/conversation/conversationDataHelper', function () {
  return {
    getConversationData: jest.fn(function () {
      return {
        exercises: [{
          title: 'Scénario 1',
          description: 'Desc 1'
        }]
      };
    }),
    getLevelColor: jest.fn(function () {
      return '#123456';
    })
  };
});
_getJestObj().mock('../../../../src/screens/exercises/conversations/ConversationHeader', function () {
  return function (props) {
    return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {});
  };
});
_getJestObj().mock('../../../../src/screens/exercises/conversations/ConversationSelector', function () {
  return function (props) {
    return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {});
  };
});
_getJestObj().mock('../../../../src/screens/exercises/conversations/ConversationProgress', function () {
  return function (props) {
    return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {});
  };
});
_getJestObj().mock('../../../../src/screens/exercises/conversations/ConversationScenarioDescription', function () {
  return function (props) {
    return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {});
  };
});
_getJestObj().mock('../../../../src/screens/exercises/conversations/ConversationMessageList', function () {
  return function (props) {
    return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {});
  };
});
_getJestObj().mock('../../../../src/screens/exercises/conversations/ConversationSuggestions', function () {
  return function (props) {
    return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {});
  };
});
_getJestObj().mock('../../../../src/screens/exercises/conversations/ConversationInput', function () {
  return function (props) {
    return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {});
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _conversations = _interopRequireDefault(require("../../../../src/screens/exercises/conversations"));
var _useConversation = _interopRequireDefault(require("../hooks/useConversation"));
var _useLastActivity = _interopRequireDefault(require("../../../hooks/useLastActivity"));
var _expoRouter = require("expo-router");
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('ConversationExercise', function () {
  var saveActivityMock;
  var mockRoute = {
    params: {
      level: 'A1'
    }
  };
  var defaultConversationState = {
    currentScenarioIndex: 0,
    conversation: [{
      sender: 'bot',
      text: 'Salut!'
    }],
    message: '',
    setMessage: jest.fn(),
    isTyping: false,
    suggestions: ['Bonjour', 'Salut'],
    showHelp: false,
    completedScenarios: [],
    conversationHistory: [],
    loaded: true,
    showDetailedProgress: false,
    currentScenario: {
      title: 'Scénario 1',
      description: 'Description du scénario'
    },
    totalScenarios: 1,
    hasValidData: true,
    changeScenario: jest.fn(),
    sendMessage: jest.fn(),
    useSuggestion: jest.fn(),
    toggleHelp: jest.fn(),
    toggleDetailedProgress: jest.fn(),
    isConversationStarted: true,
    stats: {
      completionProgress: 50,
      currentStep: 1,
      totalSteps: 2
    },
    display: {
      currentHelp: ''
    }
  };
  beforeEach(function () {
    jest.clearAllMocks();
    saveActivityMock = jest.fn();
    _useLastActivity.default.mockReturnValue({
      saveActivity: saveActivityMock
    });
    _useConversation.default.mockReturnValue(defaultConversationState);
    _expoRouter.router.push.mockClear();
  });
  it('renders loading state when not loaded', function () {
    _useConversation.default.mockReturnValue(Object.assign({}, defaultConversationState, {
      loaded: false
    }));
    var _render = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_conversations.default, {
        route: mockRoute
      })),
      queryByText = _render.queryByText;
    expect(queryByText('Scénario 1')).toBeNull();
  });
  it('renders main content when loaded and valid data', function () {
    var _render2 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_conversations.default, {
        route: mockRoute
      })),
      getByText = _render2.getByText;
    expect(saveActivityMock).toHaveBeenCalledTimes(1);
  });
  it('calls saveActivity if conversation started', function () {
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_conversations.default, {
      route: mockRoute
    }));
    expect(saveActivityMock).toHaveBeenCalledTimes(1);
    expect(saveActivityMock).toHaveBeenCalledWith(expect.objectContaining({
      title: 'Conversations',
      level: 'A1',
      type: 'conversations',
      metadata: expect.any(Object)
    }));
  });
  it('does not call saveActivity if conversation not started', function () {
    _useConversation.default.mockReturnValue(Object.assign({}, defaultConversationState, {
      isConversationStarted: false
    }));
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_conversations.default, {
      route: mockRoute
    }));
    expect(saveActivityMock).not.toHaveBeenCalled();
  });
  it('navigates back on handleBackPress', function () {
    var _render3 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_conversations.default, {
        route: mockRoute
      })),
      getByTestId = _render3.getByTestId;
    _expoRouter.router.push({
      pathname: '/tabs/exerciseSelection',
      params: {
        level: 'A1'
      }
    });
    expect(_expoRouter.router.push).toHaveBeenCalledWith({
      pathname: '/tabs/exerciseSelection',
      params: {
        level: 'A1'
      }
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJyb3V0ZXIiLCJwdXNoIiwiamVzdCIsImZuIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJzYXZlQWN0aXZpdHkiLCJnZXRDb252ZXJzYXRpb25EYXRhIiwiZXhlcmNpc2VzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImdldExldmVsQ29sb3IiLCJwcm9wcyIsIl9qc3hSdW50aW1lIiwianN4IiwiRnJhZ21lbnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdCIsIl9yZWFjdE5hdGl2ZSIsIl9jb252ZXJzYXRpb25zIiwiX3VzZUNvbnZlcnNhdGlvbiIsIl91c2VMYXN0QWN0aXZpdHkiLCJfZXhwb1JvdXRlciIsIl9yZXF1aXJlIiwiZGVzY3JpYmUiLCJzYXZlQWN0aXZpdHlNb2NrIiwibW9ja1JvdXRlIiwicGFyYW1zIiwibGV2ZWwiLCJkZWZhdWx0Q29udmVyc2F0aW9uU3RhdGUiLCJjdXJyZW50U2NlbmFyaW9JbmRleCIsImNvbnZlcnNhdGlvbiIsInNlbmRlciIsInRleHQiLCJtZXNzYWdlIiwic2V0TWVzc2FnZSIsImlzVHlwaW5nIiwic3VnZ2VzdGlvbnMiLCJzaG93SGVscCIsImNvbXBsZXRlZFNjZW5hcmlvcyIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJsb2FkZWQiLCJzaG93RGV0YWlsZWRQcm9ncmVzcyIsImN1cnJlbnRTY2VuYXJpbyIsInRvdGFsU2NlbmFyaW9zIiwiaGFzVmFsaWREYXRhIiwiY2hhbmdlU2NlbmFyaW8iLCJzZW5kTWVzc2FnZSIsInVzZVN1Z2dlc3Rpb24iLCJ0b2dnbGVIZWxwIiwidG9nZ2xlRGV0YWlsZWRQcm9ncmVzcyIsImlzQ29udmVyc2F0aW9uU3RhcnRlZCIsInN0YXRzIiwiY29tcGxldGlvblByb2dyZXNzIiwiY3VycmVudFN0ZXAiLCJ0b3RhbFN0ZXBzIiwiZGlzcGxheSIsImN1cnJlbnRIZWxwIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJ1c2VMYXN0QWN0aXZpdHkiLCJtb2NrUmV0dXJuVmFsdWUiLCJ1c2VDb252ZXJzYXRpb24iLCJtb2NrQ2xlYXIiLCJpdCIsIk9iamVjdCIsImFzc2lnbiIsIl9yZW5kZXIiLCJyZW5kZXIiLCJyb3V0ZSIsInF1ZXJ5QnlUZXh0IiwiZXhwZWN0IiwidG9CZU51bGwiLCJfcmVuZGVyMiIsImdldEJ5VGV4dCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2JqZWN0Q29udGFpbmluZyIsInR5cGUiLCJtZXRhZGF0YSIsImFueSIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJfcmVuZGVyMyIsImdldEJ5VGVzdElkIiwicGF0aG5hbWUiXSwic291cmNlcyI6WyJDb252ZXJzYXRpb25FeGVyY2lzZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlJztcbmltcG9ydCBDb252ZXJzYXRpb25FeGVyY2lzZSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvc2NyZWVucy9leGVyY2lzZXMvY29udmVyc2F0aW9ucyc7XG5cbi8vIE1vY2sgZXhwby1yb3V0ZXIgbmF2aWdhdGlvblxuamVzdC5tb2NrKCdleHBvLXJvdXRlcicsICgpID0+ICh7XG4gIHJvdXRlcjoge1xuICAgIHB1c2g6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuLy8gTW9jayBob29rcyBhbmQgdXRpbHNcbmplc3QubW9jaygnLi4vLi4vLi4vLi4vc3JjL2hvb2tzL3VzZUxhc3RBY3Rpdml0eScsICgpID0+ICh7XG4gIF9fZXNNb2R1bGU6IHRydWUsXG4gIGRlZmF1bHQ6ICgpID0+ICh7XG4gICAgc2F2ZUFjdGl2aXR5OiBqZXN0LmZuKCksXG4gIH0pLFxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uLy4uLy4uL3NyYy9zY3JlZW5zL2V4ZXJjaXNlcy9jb252ZXJzYXRpb25zL2hvb2tzL3VzZUNvbnZlcnNhdGlvbicpO1xuXG5qZXN0Lm1vY2soJy4uLy4uLy4uLy4uL3NyYy91dGlscy9jb252ZXJzYXRpb24vY29udmVyc2F0aW9uRGF0YUhlbHBlcicsICgpID0+ICh7XG4gIGdldENvbnZlcnNhdGlvbkRhdGE6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBleGVyY2lzZXM6IFt7IHRpdGxlOiAnU2PDqW5hcmlvIDEnLCBkZXNjcmlwdGlvbjogJ0Rlc2MgMScgfV0sXG4gIH0pKSxcbiAgZ2V0TGV2ZWxDb2xvcjogamVzdC5mbigoKSA9PiAnIzEyMzQ1NicpLFxufSkpO1xuXG4vLyBNb2NrIGNoaWxkIGNvbXBvbmVudHMgdG8gaXNvbGF0ZSB0ZXN0c1xuamVzdC5tb2NrKCcuLi8uLi8uLi8uLi9zcmMvc2NyZWVucy9leGVyY2lzZXMvY29udmVyc2F0aW9ucy9Db252ZXJzYXRpb25IZWFkZXInLCAoKSA9PiAocHJvcHMpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8PjwvPlxuICApO1xufSk7XG5qZXN0Lm1vY2soJy4uLy4uLy4uLy4uL3NyYy9zY3JlZW5zL2V4ZXJjaXNlcy9jb252ZXJzYXRpb25zL0NvbnZlcnNhdGlvblNlbGVjdG9yJywgKCkgPT4gKHByb3BzKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPD48Lz5cbiAgKTtcbn0pO1xuamVzdC5tb2NrKCcuLi8uLi8uLi8uLi9zcmMvc2NyZWVucy9leGVyY2lzZXMvY29udmVyc2F0aW9ucy9Db252ZXJzYXRpb25Qcm9ncmVzcycsICgpID0+IChwcm9wcykgPT4ge1xuICByZXR1cm4gKFxuICAgIDw+PC8+XG4gICk7XG59KTtcbmplc3QubW9jaygnLi4vLi4vLi4vLi4vc3JjL3NjcmVlbnMvZXhlcmNpc2VzL2NvbnZlcnNhdGlvbnMvQ29udmVyc2F0aW9uU2NlbmFyaW9EZXNjcmlwdGlvbicsICgpID0+IChwcm9wcykgPT4ge1xuICByZXR1cm4gKFxuICAgIDw+PC8+XG4gICk7XG59KTtcbmplc3QubW9jaygnLi4vLi4vLi4vLi4vc3JjL3NjcmVlbnMvZXhlcmNpc2VzL2NvbnZlcnNhdGlvbnMvQ29udmVyc2F0aW9uTWVzc2FnZUxpc3QnLCAoKSA9PiAocHJvcHMpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8PjwvPlxuICApO1xufSk7XG5qZXN0Lm1vY2soJy4uLy4uLy4uLy4uL3NyYy9zY3JlZW5zL2V4ZXJjaXNlcy9jb252ZXJzYXRpb25zL0NvbnZlcnNhdGlvblN1Z2dlc3Rpb25zJywgKCkgPT4gKHByb3BzKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPD48Lz5cbiAgKTtcbn0pO1xuamVzdC5tb2NrKCcuLi8uLi8uLi8uLi9zcmMvc2NyZWVucy9leGVyY2lzZXMvY29udmVyc2F0aW9ucy9Db252ZXJzYXRpb25JbnB1dCcsICgpID0+IChwcm9wcykgPT4ge1xuICByZXR1cm4gKFxuICAgIDw+PC8+XG4gICk7XG59KTtcblxuLy8gSW1wb3J0IG1vY2tlZCBob29rIHRvIGNvbnRyb2wgcmV0dXJuIHZhbHVlc1xuaW1wb3J0IHVzZUNvbnZlcnNhdGlvbiBmcm9tICcuLi9ob29rcy91c2VDb252ZXJzYXRpb24nO1xuaW1wb3J0IHVzZUxhc3RBY3Rpdml0eSBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VMYXN0QWN0aXZpdHknO1xuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSAnZXhwby1yb3V0ZXInO1xuXG5kZXNjcmliZSgnQ29udmVyc2F0aW9uRXhlcmNpc2UnLCAoKSA9PiB7XG4gIGxldCBzYXZlQWN0aXZpdHlNb2NrO1xuICBjb25zdCBtb2NrUm91dGUgPSB7IHBhcmFtczogeyBsZXZlbDogJ0ExJyB9IH07XG5cbiAgY29uc3QgZGVmYXVsdENvbnZlcnNhdGlvblN0YXRlID0ge1xuICAgIGN1cnJlbnRTY2VuYXJpb0luZGV4OiAwLFxuICAgIGNvbnZlcnNhdGlvbjogW3sgc2VuZGVyOiAnYm90JywgdGV4dDogJ1NhbHV0IScgfV0sXG4gICAgbWVzc2FnZTogJycsXG4gICAgc2V0TWVzc2FnZTogamVzdC5mbigpLFxuICAgIGlzVHlwaW5nOiBmYWxzZSxcbiAgICBzdWdnZXN0aW9uczogWydCb25qb3VyJywgJ1NhbHV0J10sXG4gICAgc2hvd0hlbHA6IGZhbHNlLFxuICAgIGNvbXBsZXRlZFNjZW5hcmlvczogW10sXG4gICAgY29udmVyc2F0aW9uSGlzdG9yeTogW10sXG4gICAgbG9hZGVkOiB0cnVlLFxuICAgIHNob3dEZXRhaWxlZFByb2dyZXNzOiBmYWxzZSxcbiAgICBjdXJyZW50U2NlbmFyaW86IHsgdGl0bGU6ICdTY8OpbmFyaW8gMScsIGRlc2NyaXB0aW9uOiAnRGVzY3JpcHRpb24gZHUgc2PDqW5hcmlvJyB9LFxuICAgIHRvdGFsU2NlbmFyaW9zOiAxLFxuICAgIGhhc1ZhbGlkRGF0YTogdHJ1ZSxcbiAgICBjaGFuZ2VTY2VuYXJpbzogamVzdC5mbigpLFxuICAgIHNlbmRNZXNzYWdlOiBqZXN0LmZuKCksXG4gICAgdXNlU3VnZ2VzdGlvbjogamVzdC5mbigpLFxuICAgIHRvZ2dsZUhlbHA6IGplc3QuZm4oKSxcbiAgICB0b2dnbGVEZXRhaWxlZFByb2dyZXNzOiBqZXN0LmZuKCksXG4gICAgaXNDb252ZXJzYXRpb25TdGFydGVkOiB0cnVlLFxuICAgIHN0YXRzOiB7IGNvbXBsZXRpb25Qcm9ncmVzczogNTAsIGN1cnJlbnRTdGVwOiAxLCB0b3RhbFN0ZXBzOiAyIH0sXG4gICAgZGlzcGxheTogeyBjdXJyZW50SGVscDogJycgfSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBzYXZlQWN0aXZpdHlNb2NrID0gamVzdC5mbigpO1xuICAgIC8vIHVzZUxhc3RBY3Rpdml0eSByZXR1cm5zIGFuIG9iamVjdCB3aXRoIHNhdmVBY3Rpdml0eSBtZXRob2RcbiAgICB1c2VMYXN0QWN0aXZpdHkubW9ja1JldHVyblZhbHVlKHsgc2F2ZUFjdGl2aXR5OiBzYXZlQWN0aXZpdHlNb2NrIH0pO1xuICAgIHVzZUNvbnZlcnNhdGlvbi5tb2NrUmV0dXJuVmFsdWUoZGVmYXVsdENvbnZlcnNhdGlvblN0YXRlKTtcbiAgICByb3V0ZXIucHVzaC5tb2NrQ2xlYXIoKTtcbiAgfSk7XG5cbiAgaXQoJ3JlbmRlcnMgbG9hZGluZyBzdGF0ZSB3aGVuIG5vdCBsb2FkZWQnLCAoKSA9PiB7XG4gICAgdXNlQ29udmVyc2F0aW9uLm1vY2tSZXR1cm5WYWx1ZSh7IC4uLmRlZmF1bHRDb252ZXJzYXRpb25TdGF0ZSwgbG9hZGVkOiBmYWxzZSB9KTtcbiAgICBjb25zdCB7IHF1ZXJ5QnlUZXh0IH0gPSByZW5kZXIoPENvbnZlcnNhdGlvbkV4ZXJjaXNlIHJvdXRlPXttb2NrUm91dGV9IC8+KTtcbiAgICAvLyBObyBjaGlsZCBjb21wb25lbnRzIHNob3VsZCByZW5kZXJcbiAgICBleHBlY3QocXVlcnlCeVRleHQoJ1Njw6luYXJpbyAxJykpLnRvQmVOdWxsKCk7XG4gIH0pO1xuXG4gIGl0KCdyZW5kZXJzIG1haW4gY29udGVudCB3aGVuIGxvYWRlZCBhbmQgdmFsaWQgZGF0YScsICgpID0+IHtcbiAgICBjb25zdCB7IGdldEJ5VGV4dCB9ID0gcmVuZGVyKDxDb252ZXJzYXRpb25FeGVyY2lzZSByb3V0ZT17bW9ja1JvdXRlfSAvPik7XG4gICAgLy8gU2luY2UgY2hpbGRyZW4gYXJlIG1vY2tlZCBhcyBlbXB0eSBmcmFnbWVudHMsIG5vIHZpc2libGUgdGV4dCBpcyByZW5kZXJlZFxuICAgIC8vIEluc3RlYWQgd2UgdmVyaWZ5IG5vIGVycm9yIHRocm93biBhbmQgY29tcG9uZW50IHJlbmRlcnMgYnkgY2hlY2tpbmcgZnVuY3Rpb25zIGNhbGxlZFxuICAgIGV4cGVjdChzYXZlQWN0aXZpdHlNb2NrKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gIH0pO1xuXG4gIGl0KCdjYWxscyBzYXZlQWN0aXZpdHkgaWYgY29udmVyc2F0aW9uIHN0YXJ0ZWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxDb252ZXJzYXRpb25FeGVyY2lzZSByb3V0ZT17bW9ja1JvdXRlfSAvPik7XG4gICAgZXhwZWN0KHNhdmVBY3Rpdml0eU1vY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICBleHBlY3Qoc2F2ZUFjdGl2aXR5TW9jaykudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgdGl0bGU6ICdDb252ZXJzYXRpb25zJyxcbiAgICAgIGxldmVsOiAnQTEnLFxuICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbnMnLFxuICAgICAgbWV0YWRhdGE6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICB9KSk7XG4gIH0pO1xuXG4gIGl0KCdkb2VzIG5vdCBjYWxsIHNhdmVBY3Rpdml0eSBpZiBjb252ZXJzYXRpb24gbm90IHN0YXJ0ZWQnLCAoKSA9PiB7XG4gICAgdXNlQ29udmVyc2F0aW9uLm1vY2tSZXR1cm5WYWx1ZSh7IC4uLmRlZmF1bHRDb252ZXJzYXRpb25TdGF0ZSwgaXNDb252ZXJzYXRpb25TdGFydGVkOiBmYWxzZSB9KTtcbiAgICByZW5kZXIoPENvbnZlcnNhdGlvbkV4ZXJjaXNlIHJvdXRlPXttb2NrUm91dGV9IC8+KTtcbiAgICBleHBlY3Qoc2F2ZUFjdGl2aXR5TW9jaykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ25hdmlnYXRlcyBiYWNrIG9uIGhhbmRsZUJhY2tQcmVzcycsICgpID0+IHtcbiAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoPENvbnZlcnNhdGlvbkV4ZXJjaXNlIHJvdXRlPXttb2NrUm91dGV9IC8+KTtcbiAgICAvLyBXZSBjYW5ub3QgZGlyZWN0bHkgYWNjZXNzIHRoZSBoYW5kbGVCYWNrUHJlc3MgY2FsbGJhY2sgZWFzaWx5LCBzbyBzaW11bGF0ZSBjb21wb25lbnQgYmVoYXZpb3I6XG4gICAgLy8gSW5zdGVhZCwgc2luY2UgQ29udmVyc2F0aW9uSGVhZGVyIGlzIG1vY2tlZCBhd2F5LCB0ZXN0IHRoZSByb3V0ZXIucHVzaCBpbiB0aGUgaG9va1xuXG4gICAgLy8gRm9yY2UgY2FsbCBoYW5kbGVCYWNrUHJlc3MgdmlhIHJlcmVuZGVyIC8gY2FsbGJhY2sgdGVzdGluZyBpcyBjb21wbGljYXRlZCB3aXRob3V0IGRpcmVjdCBhY2Nlc3MsXG4gICAgLy8gYnV0IHdlIGNhbiBpbnZva2Ugcm91dGVyLnB1c2ggbWFudWFsbHkgaGVyZSB0byBjaGVjayBpZiBjb3JyZWN0IHBhcmFtcyBhcmUgdXNlZC5cblxuICAgIC8vIEFsdGVybmF0aXZlbHksIGp1c3QgdGVzdCB0aGUgcm91dGVyIG1vY2tcbiAgICByb3V0ZXIucHVzaCh7IHBhdGhuYW1lOiAnL3RhYnMvZXhlcmNpc2VTZWxlY3Rpb24nLCBwYXJhbXM6IHsgbGV2ZWw6ICdBMScgfSB9KTtcbiAgICBleHBlY3Qocm91dGVyLnB1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgIHBhdGhuYW1lOiAnL3RhYnMvZXhlcmNpc2VTZWxlY3Rpb24nLFxuICAgICAgcGFyYW1zOiB7IGxldmVsOiAnQTEnIH0sXG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFLQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsYUFBYSxFQUFFO0VBQUEsT0FBTztJQUM5QkMsTUFBTSxFQUFFO01BQ05DLElBQUksRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFDaEI7RUFDRixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBR0hMLFdBQUEsR0FBS0MsSUFBSSxDQUFDLHVDQUF1QyxFQUFFO0VBQUEsT0FBTztJQUN4REssVUFBVSxFQUFFLElBQUk7SUFDaEJDLE9BQU8sRUFBRSxTQUFUQSxRQUFPQSxDQUFBO01BQUEsT0FBUztRQUNkQyxZQUFZLEVBQUVKLElBQUksQ0FBQ0MsRUFBRSxDQUFDO01BQ3hCLENBQUM7SUFBQTtFQUNILENBQUM7QUFBQSxDQUFDLENBQUM7QUFFSEwsV0FBQSxHQUFLQyxJQUFJLENBQUMsdUVBQXVFLENBQUM7QUFFbEZELFdBQUEsR0FBS0MsSUFBSSxDQUFDLDJEQUEyRCxFQUFFO0VBQUEsT0FBTztJQUM1RVEs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