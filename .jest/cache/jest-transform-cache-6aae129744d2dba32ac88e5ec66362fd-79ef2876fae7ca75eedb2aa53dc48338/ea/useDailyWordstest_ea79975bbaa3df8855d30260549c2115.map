{"version":3,"names":["_getJestObj","mock","getItem","jest","fn","_interopRequireDefault","require","_asyncToGenerator2","_reactNative","_asyncStorage","_useDailyWords","_require","describe","beforeEach","clearAllMocks","spyOn","Date","mockReturnValue","prototype","afterEach","restoreAllMocks","it","AsyncStorage","mockResolvedValue","_renderHook","renderHook","useDailyWords","result","expect","current","wordsToday","toBe","isLoading","default","mockData","completedWords","word","timestamp","mockImplementation","key","includes","Promise","resolve","JSON","stringify","_renderHook2","waitFor","toBeGreaterThan","_renderHook3","refresh"],"sources":["useDailyWords.test.js"],"sourcesContent":["// __tests__/hooks/useDailyWords.test.js\nimport { renderHook, waitFor } from '@testing-library/react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport useDailyWords from '../../src/hooks/useDailyWords';\n\njest.mock('@react-native-async-storage/async-storage', () => ({\n  getItem: jest.fn(),\n}));\n\ndescribe('useDailyWords', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    jest.spyOn(Date, 'now').mockReturnValue(1640995200000);\n    jest.spyOn(Date.prototype, 'toDateString').mockReturnValue('Sat Jan 01 2022');\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  it('devrait initialiser avec 0 mots', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useDailyWords());\n    \n    expect(result.current.wordsToday).toBe(0);\n    expect(result.current.isLoading).toBe(true);\n  });\n\n  it('devrait compter les mots d\\'aujourd\\'hui', async () => {\n    const mockData = {\n      completedWords: {\n        '0': [\n          { word: 'hello', timestamp: 1640995200000 },\n          { word: 'world', timestamp: 1640995200000 }\n        ]\n      }\n    };\n\n    AsyncStorage.getItem.mockImplementation((key) => {\n      if (key.includes('vocabulary_') && key.includes('_classic')) {\n        return Promise.resolve(JSON.stringify(mockData));\n      }\n      return Promise.resolve(null);\n    });\n\n    const { result } = renderHook(() => useDailyWords());\n\n    await waitFor(() => {\n      expect(result.current.wordsToday).toBeGreaterThan(0);\n      expect(result.current.isLoading).toBe(false);\n    });\n  });\n\n  it('devrait avoir une fonction refresh', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useDailyWords());\n    \n    expect(typeof result.current.refresh).toBe('function');\n  });\n});"],"mappings":"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","ignoreList":[]}