06d9fa5a9fbe44a665bb39fed14ab476
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _reactNative = require("react-native");
var _native = require("@react-navigation/native");
var _expoRouter = require("expo-router");
var _react = require("react");
var _propTypes = _interopRequireDefault(require("prop-types"));
var _Container = _interopRequireWildcard(require("../../../components/layout/Container"));
var _VocabularyHeader = _interopRequireDefault(require("./VocabularyHeader"));
var _VocabularyCategorySelector = _interopRequireDefault(require("./VocabularyCategorySelector"));
var _VocabularyProgress = _interopRequireDefault(require("./VocabularyProgress"));
var _VocabularyWordSection = _interopRequireDefault(require("./VocabularyWordSection"));
var _VocabularyNavigation = _interopRequireDefault(require("./VocabularyNavigation"));
var _useVocabulary2 = _interopRequireDefault(require("./hooks/useVocabulary"));
var _useLastActivity2 = _interopRequireDefault(require("../../../hooks/useLastActivity"));
var _vocabularyDataHelper = require("../../../utils/vocabulary/vocabularyDataHelper");
var _style = _interopRequireDefault(require("./style"));
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
var VocabularyExercise = function VocabularyExercise(_ref) {
  var route = _ref.route;
  var _ref2 = route.params || {},
    level = _ref2.level,
    mode = _ref2.mode;
  var navigation = (0, _native.useNavigation)();
  var styles = (0, _style.default)();
  var _useLastActivity = (0, _useLastActivity2.default)(),
    saveActivity = _useLastActivity.saveActivity;
  var finalMode = mode || ((0, _vocabularyDataHelper.isBonusLevel)(level) ? "fast" : "classic");
  var levelColor = (0, _vocabularyDataHelper.getLevelColor)(level);
  var _useState = (0, _react.useState)(null),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    vocabularyData = _useState2[0],
    setVocabularyData = _useState2[1];
  (0, _react.useEffect)(function () {
    var isMounted = true;
    var load = function () {
      var _ref3 = (0, _asyncToGenerator2.default)(function* () {
        var data = yield (0, _vocabularyDataHelper.loadVocabularyData)(level, finalMode);
        if (isMounted) setVocabularyData(data);
      });
      return function load() {
        return _ref3.apply(this, arguments);
      };
    }();
    load();
    return function () {
      isMounted = false;
    };
  }, [level, finalMode]);
  var _useVocabulary = (0, _useVocabulary2.default)(vocabularyData, level, finalMode),
    categoryIndex = _useVocabulary.categoryIndex,
    wordIndex = _useVocabulary.wordIndex,
    showTranslation = _useVocabulary.showTranslation,
    completedWords = _useVocabulary.completedWords,
    loaded = _useVocabulary.loaded,
    showDetailedProgress = _useVocabulary.showDetailedProgress,
    currentWord = _useVocabulary.currentWord,
    currentCategory = _useVocabulary.currentCategory,
    changeCategory = _useVocabulary.changeCategory,
    toggleTranslation = _useVocabulary.toggleTranslation,
    toggleDetailedProgress = _useVocabulary.toggleDetailedProgress,
    handleNext = _useVocabulary.handleNext,
    handlePrevious = _useVocabulary.handlePrevious,
    canGoToPrevious = _useVocabulary.canGoToPrevious,
    isLastWordInExercise = _useVocabulary.isLastWordInExercise,
    display = _useVocabulary.display,
    saveData = _useVocabulary.saveData;
  (0, _react.useEffect)(function () {
    if (!loaded || !vocabularyData || !currentWord) return;
    var totalWords = 15;
    if (vocabularyData.categories && Array.isArray(vocabularyData.categories)) {
      totalWords = vocabularyData.categories.reduce(function (total, cat) {
        var _cat$words;
        return total + (((_cat$words = cat.words) == null ? void 0 : _cat$words.length) || 0);
      }, 0);
    } else if (vocabularyData.exercises && Array.isArray(vocabularyData.exercises)) {
      totalWords = vocabularyData.exercises.reduce(function (total, ex) {
        var _ex$words;
        return total + (((_ex$words = ex.words) == null ? void 0 : _ex$words.length) || 0);
      }, 0);
    } else if (vocabularyData.words && Array.isArray(vocabularyData.words)) {
      totalWords = vocabularyData.words.length;
    }
    var activityData = {
      title: `Vocabulaire ${finalMode === "fast" ? "Fast" : ""}`,
      level: level,
      type: "vocabulary",
      mode: finalMode,
      metadata: {
        word: wordIndex,
        totalWords: totalWords,
        category: (currentCategory == null ? void 0 : currentCategory.name) || "Général",
        categoryIndex: categoryIndex,
        wordIndex: wordIndex
      }
    };
    saveActivity(activityData);
  }, [wordIndex]);
  (0, _react.useEffect)(function () {
    if (!loaded || !vocabularyData || !currentWord) return;
    var totalWords = 15;
    if (vocabularyData.categories && Array.isArray(vocabularyData.categories)) {
      totalWords = vocabularyData.categories.reduce(function (total, cat) {
        var _cat$words2;
        return total + (((_cat$words2 = cat.words) == null ? void 0 : _cat$words2.length) || 0);
      }, 0);
    } else if (vocabularyData.exercises && Array.isArray(vocabularyData.exercises)) {
      totalWords = vocabularyData.exercises.reduce(function (total, ex) {
        var _ex$words2;
        return total + (((_ex$words2 = ex.words) == null ? void 0 : _ex$words2.length) || 0);
      }, 0);
    } else if (vocabularyData.words && Array.isArray(vocabularyData.words)) {
      totalWords = vocabularyData.words.length;
    }
    var activityData = {
      title: `Vocabulaire ${finalMode === "fast" ? "Fast" : ""}`,
      level: level,
      type: "vocabulary",
      mode: finalMode,
      metadata: {
        word: wordIndex,
        totalWords: totalWords,
        category: (currentCategory == null ? void 0 : currentCategory.name) || "Général",
        categoryIndex: categoryIndex,
        wordIndex: wordIndex
      }
    };
    saveActivity(activityData);
  }, [loaded, vocabularyData]);
  var handleBackPress = (0, _react.useCallback)(function () {
    _expoRouter.router.push({
      pathname: "/tabs/exerciseSelection",
      params: {
        level: level
      }
    });
  }, [level]);
  var handleCategoryChange = (0, _react.useCallback)(function (index) {
    return changeCategory(index);
  }, [changeCategory]);
  var handleCategoryProgressPress = (0, _react.useCallback)(function (index) {
    return changeCategory(index);
  }, [changeCategory]);
  var handleToggleProgressDetails = (0, _react.useCallback)(function () {
    return toggleDetailedProgress();
  }, [toggleDetailedProgress]);
  var handleNextWord = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    var result = handleNext();
    if (typeof saveData === 'function') {
      yield saveData();
    }
    if (result.completed) {
      navigation.goBack();
    }
  }), [handleNext, navigation, saveData]);
  var handlePreviousWord = (0, _react.useCallback)(function () {
    return handlePrevious();
  }, [handlePrevious]);
  if (!loaded || !vocabularyData) {
    return (0, _jsxRuntime.jsx)(_Container.default, {
      safeArea: true,
      safeAreaEdges: _Container.CONTAINER_SAFE_EDGES.ALL,
      backgroundColor: "#f8fafc",
      statusBarStyle: "dark-content",
      children: (0, _jsxRuntime.jsx)(_reactNative.View, {
        style: styles.loadingContainer,
        children: (0, _jsxRuntime.jsx)(_reactNative.ActivityIndicator, {
          testID: "activity-indicator",
          size: "large",
          color: levelColor
        })
      })
    });
  }
  return (0, _jsxRuntime.jsxs)(_Container.default, {
    safeArea: true,
    safeAreaEdges: _Container.CONTAINER_SAFE_EDGES.ALL,
    withScrollView: true,
    backgroundColor: "#f8fafc",
    statusBarStyle: "dark-content",
    withPadding: false,
    scrollViewProps: {
      showsVerticalScrollIndicator: false,
      contentContainerStyle: styles.scrollContent
    },
    children: [(0, _jsxRuntime.jsx)(_VocabularyHeader.default, {
      level: level,
      mode: finalMode,
      onBackPress: handleBackPress
    }), (0, _jsxRuntime.jsx)(_VocabularyProgress.default, {
      vocabularyData: vocabularyData,
      completedWords: completedWords,
      levelColor: levelColor,
      expanded: showDetailedProgress,
      onToggleExpand: handleToggleProgressDetails,
      onCategoryPress: handleCategoryProgressPress
    }), (0, _jsxRuntime.jsx)(_VocabularyCategorySelector.default, {
      categories: display.categories,
      selectedIndex: categoryIndex,
      onSelectCategory: handleCategoryChange,
      levelColor: levelColor
    }), (0, _jsxRuntime.jsx)(_VocabularyWordSection.default, {
      currentWord: currentWord,
      wordCounter: display.wordCounter,
      mode: finalMode,
      level: level,
      levelColor: levelColor,
      showTranslation: showTranslation,
      onToggleTranslation: toggleTranslation
    }), (0, _jsxRuntime.jsx)(_VocabularyNavigation.default, {
      onNext: handleNextWord,
      onPrevious: handlePreviousWord,
      canGoPrevious: canGoToPrevious,
      isLast: isLastWordInExercise,
      levelColor: levelColor
    })]
  });
};
var _default = exports.default = VocabularyExercise;
VocabularyExercise.propTypes = {
  route: _propTypes.default.shape({
    params: _propTypes.default.shape({
      level: _propTypes.default.string,
      mode: _propTypes.default.string
    })
  }).isRequired
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX25hdGl2ZSIsIl9leHBvUm91dGVyIiwiX3JlYWN0IiwiX3Byb3BUeXBlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfQ29udGFpbmVyIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfVm9jYWJ1bGFyeUhlYWRlciIsIl9Wb2NhYnVsYXJ5Q2F0ZWdvcnlTZWxlY3RvciIsIl9Wb2NhYnVsYXJ5UHJvZ3Jlc3MiLCJfVm9jYWJ1bGFyeVdvcmRTZWN0aW9uIiwiX1ZvY2FidWxhcnlOYXZpZ2F0aW9uIiwiX3VzZVZvY2FidWxhcnkyIiwiX3VzZUxhc3RBY3Rpdml0eTIiLCJfdm9jYWJ1bGFyeURhdGFIZWxwZXIiLCJfc3R5bGUiLCJfanN4UnVudGltZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiVm9jYWJ1bGFyeUV4ZXJjaXNlIiwiX3JlZiIsInJvdXRlIiwiX3JlZjIiLCJwYXJhbXMiLCJsZXZlbCIsIm1vZGUiLCJuYXZpZ2F0aW9uIiwidXNlTmF2aWdhdGlvbiIsInN0eWxlcyIsImNyZWF0ZVN0eWxlcyIsIl91c2VMYXN0QWN0aXZpdHkiLCJ1c2VMYXN0QWN0aXZpdHkiLCJzYXZlQWN0aXZpdHkiLCJmaW5hbE1vZGUiLCJpc0JvbnVzTGV2ZWwiLCJsZXZlbENvbG9yIiwiZ2V0TGV2ZWxDb2xvciIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsInZvY2FidWxhcnlEYXRhIiwic2V0Vm9jYWJ1bGFyeURhdGEiLCJ1c2VFZmZlY3QiLCJpc01vdW50ZWQiLCJsb2FkIiwiX3JlZjMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkYXRhIiwibG9hZFZvY2FidWxhcnlEYXRhIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfdXNlVm9jYWJ1bGFyeSIsInVzZVZvY2FidWxhcnkiLCJjYXRlZ29yeUluZGV4Iiwid29yZEluZGV4Iiwic2hvd1RyYW5zbGF0aW9uIiwiY29tcGxldGVkV29yZHMiLCJsb2FkZWQiLCJzaG93RGV0YWlsZWRQcm9ncmVzcyIsImN1cnJlbnRXb3JkIiwiY3VycmVudENhdGVnb3J5IiwiY2hhbmdlQ2F0ZWdvcnkiLCJ0b2dnbGVUcmFuc2xhdGlvbiIsInRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MiLCJoYW5kbGVOZXh0IiwiaGFuZGxlUHJldmlvdXMiLCJjYW5Hb1RvUHJldmlvdXMiLCJpc0xhc3RXb3JkSW5FeGVyY2lzZSIsImRpc3BsYXkiLCJzYXZlRGF0YSIsInRvdGFsV29yZHMiLCJjYXRlZ29yaWVzIiwiQXJyYXkiLCJpc0FycmF5IiwicmVkdWNlIiwidG90YWwiLCJjYXQiLCJfY2F0JHdvcmRzIiwid29yZHMiLCJsZW5ndGgiLCJleGVyY2lzZXMiLCJleCIsIl9leCR3b3JkcyIsImFjdGl2aXR5RGF0YSIsInRpdGxlIiwidHlwZSIsIm1ldGFkYXRhIiwid29yZCIsImNhdGVnb3J5IiwibmFtZSIsIl9jYXQkd29yZHMyIiwiX2V4JHdvcmRzMiIsImhhbmRsZUJhY2tQcmVzcyIsInVzZUNhbGxiYWNrIiwicm91dGVyIiwicHVzaCIsInBhdGhuYW1lIiwiaGFuZGxlQ2F0ZWdvcnlDaGFuZ2UiLCJpbmRleCIsImhhbmRsZUNhdGVnb3J5UHJvZ3Jlc3NQcmVzcyIsImhhbmRsZVRvZ2dsZVByb2dyZXNzRGV0YWlscyIsImhhbmRsZU5leHRXb3JkIiwicmVzdWx0IiwiY29tcGxldGVkIiwiZ29CYWNrIiwiaGFuZGxlUHJldmlvdXNXb3JkIiwianN4Iiwic2FmZUFyZWEiLCJzYWZlQXJlYUVkZ2VzIiwiQ09OVEFJTkVSX1NBRkVfRURHRVMiLCJBTEwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJzdGF0dXNCYXJTdHlsZSIsImNoaWxkcmVuIiwiVmlldyIsInN0eWxlIiwibG9hZGluZ0NvbnRhaW5lciIsIkFjdGl2aXR5SW5kaWNhdG9yIiwidGVzdElEIiwic2l6ZSIsImNvbG9yIiwianN4cyIsIndpdGhTY3JvbGxWaWV3Iiwid2l0aFBhZGRpbmciLCJzY3JvbGxWaWV3UHJvcHMiLCJzaG93c1ZlcnRpY2FsU2Nyb2xsSW5kaWNhdG9yIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwic2Nyb2xsQ29udGVudCIsIm9uQmFja1ByZXNzIiwiZXhwYW5kZWQiLCJvblRvZ2dsZUV4cGFuZCIsIm9uQ2F0ZWdvcnlQcmVzcyIsInNlbGVjdGVkSW5kZXgiLCJvblNlbGVjdENhdGVnb3J5Iiwid29yZENvdW50ZXIiLCJvblRvZ2dsZVRyYW5zbGF0aW9uIiwib25OZXh0Iiwib25QcmV2aW91cyIsImNhbkdvUHJldmlvdXMiLCJpc0xhc3QiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJzaGFwZSIsInN0cmluZyIsImlzUmVxdWlyZWQiXSwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBWb2NhYnVsYXJ5RXhlcmNpc2UvaW5kZXguanMgLSBCT1VDTEUgSU5GSU5JRSBDT1JSSUfDiUVcclxuXHJcbmltcG9ydCB7IFZpZXcsIEFjdGl2aXR5SW5kaWNhdG9yIH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiO1xyXG5pbXBvcnQgeyB1c2VOYXZpZ2F0aW9uIH0gZnJvbSBcIkByZWFjdC1uYXZpZ2F0aW9uL25hdGl2ZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiZXhwby1yb3V0ZXJcIjtcclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmltcG9ydCBDb250YWluZXIsIHsgQ09OVEFJTkVSX1NBRkVfRURHRVMgfSBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQvQ29udGFpbmVyXCI7XHJcbmltcG9ydCBWb2NhYnVsYXJ5SGVhZGVyIGZyb20gXCIuL1ZvY2FidWxhcnlIZWFkZXJcIjtcclxuaW1wb3J0IFZvY2FidWxhcnlDYXRlZ29yeVNlbGVjdG9yIGZyb20gXCIuL1ZvY2FidWxhcnlDYXRlZ29yeVNlbGVjdG9yXCI7XHJcbmltcG9ydCBWb2NhYnVsYXJ5UHJvZ3Jlc3MgZnJvbSBcIi4vVm9jYWJ1bGFyeVByb2dyZXNzXCI7XHJcbmltcG9ydCBWb2NhYnVsYXJ5V29yZFNlY3Rpb24gZnJvbSBcIi4vVm9jYWJ1bGFyeVdvcmRTZWN0aW9uXCI7XHJcbmltcG9ydCBWb2NhYnVsYXJ5TmF2aWdhdGlvbiBmcm9tIFwiLi9Wb2NhYnVsYXJ5TmF2aWdhdGlvblwiO1xyXG5cclxuaW1wb3J0IHVzZVZvY2FidWxhcnkgZnJvbSBcIi4vaG9va3MvdXNlVm9jYWJ1bGFyeVwiO1xyXG5pbXBvcnQgdXNlTGFzdEFjdGl2aXR5IGZyb20gXCIuLi8uLi8uLi9ob29rcy91c2VMYXN0QWN0aXZpdHlcIjtcclxuaW1wb3J0IHsgaXNCb251c0xldmVsLCBnZXRMZXZlbENvbG9yLCBsb2FkVm9jYWJ1bGFyeURhdGEgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdm9jYWJ1bGFyeS92b2NhYnVsYXJ5RGF0YUhlbHBlclwiO1xyXG5pbXBvcnQgY3JlYXRlU3R5bGVzIGZyb20gXCIuL3N0eWxlXCI7XHJcblxyXG5jb25zdCBWb2NhYnVsYXJ5RXhlcmNpc2UgPSAoeyByb3V0ZSB9KSA9PiB7XHJcbiAgY29uc3QgeyBsZXZlbCwgbW9kZSB9ID0gcm91dGUucGFyYW1zIHx8IHt9O1xyXG4gIGNvbnN0IG5hdmlnYXRpb24gPSB1c2VOYXZpZ2F0aW9uKCk7XHJcbiAgY29uc3Qgc3R5bGVzID0gY3JlYXRlU3R5bGVzKCk7XHJcbiAgY29uc3QgeyBzYXZlQWN0aXZpdHkgfSA9IHVzZUxhc3RBY3Rpdml0eSgpO1xyXG5cclxuICAvLyBEYXRhXHJcbiAgY29uc3QgZmluYWxNb2RlID0gbW9kZSB8fCAoaXNCb251c0xldmVsKGxldmVsKSA/IFwiZmFzdFwiIDogXCJjbGFzc2ljXCIpO1xyXG4gIGNvbnN0IGxldmVsQ29sb3IgPSBnZXRMZXZlbENvbG9yKGxldmVsKTtcclxuICBjb25zdCBbdm9jYWJ1bGFyeURhdGEsIHNldFZvY2FidWxhcnlEYXRhXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IGlzTW91bnRlZCA9IHRydWU7XHJcbiAgICBjb25zdCBsb2FkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgbG9hZFZvY2FidWxhcnlEYXRhKGxldmVsLCBmaW5hbE1vZGUpO1xyXG4gICAgICBpZiAoaXNNb3VudGVkKSBzZXRWb2NhYnVsYXJ5RGF0YShkYXRhKTtcclxuICAgIH07XHJcbiAgICBsb2FkKCk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpc01vdW50ZWQgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgfSwgW2xldmVsLCBmaW5hbE1vZGVdKTtcclxuXHJcbiAgLy8gSG9vayB1bmlmacOpXHJcbiAgY29uc3Qge1xyXG4gICAgY2F0ZWdvcnlJbmRleCxcclxuICAgIHdvcmRJbmRleCxcclxuICAgIHNob3dUcmFuc2xhdGlvbixcclxuICAgIGNvbXBsZXRlZFdvcmRzLFxyXG4gICAgbG9hZGVkLFxyXG4gICAgc2hvd0RldGFpbGVkUHJvZ3Jlc3MsXHJcbiAgICBjdXJyZW50V29yZCxcclxuICAgIGN1cnJlbnRDYXRlZ29yeSxcclxuICAgIGNoYW5nZUNhdGVnb3J5LFxyXG4gICAgdG9nZ2xlVHJhbnNsYXRpb24sXHJcbiAgICB0b2dnbGVEZXRhaWxlZFByb2dyZXNzLFxyXG4gICAgaGFuZGxlTmV4dCxcclxuICAgIGhhbmRsZVByZXZpb3VzLFxyXG4gICAgY2FuR29Ub1ByZXZpb3VzLFxyXG4gICAgaXNMYXN0V29yZEluRXhlcmNpc2UsXHJcbiAgICBkaXNwbGF5LFxyXG4gICAgc2F2ZURhdGEsIC8vIEFqb3V0w6kgaWNpXHJcbiAgfSA9IHVzZVZvY2FidWxhcnkodm9jYWJ1bGFyeURhdGEsIGxldmVsLCBmaW5hbE1vZGUpO1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09IFNBVVZFR0FSREUgQUNUSVZJVMOJIFNJTVBMSUZJw4lFID09PT09PT09PT09PT09PT09PT1cclxuICBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8g4pyFIENPTkRJVElPTiBTSU1QTElGScOJRSBwb3VyIMOpdml0ZXIgYm91Y2xlIGluZmluaWVcclxuICAgIGlmICghbG9hZGVkIHx8ICF2b2NhYnVsYXJ5RGF0YSB8fCAhY3VycmVudFdvcmQpIHJldHVybjtcclxuXHJcbiAgICAvLyDinIUgRMOJUEVOREFOQ0VTIExJTUlUw4lFUyAtIHNldWxlbWVudCB3b3JkSW5kZXggY2hhbmdlXHJcbiAgICBsZXQgdG90YWxXb3JkcyA9IDE1OyAvLyBmYWxsYmFja1xyXG4gICAgXHJcbiAgICBpZiAodm9jYWJ1bGFyeURhdGEuY2F0ZWdvcmllcyAmJiBBcnJheS5pc0FycmF5KHZvY2FidWxhcnlEYXRhLmNhdGVnb3JpZXMpKSB7XHJcbiAgICAgIHRvdGFsV29yZHMgPSB2b2NhYnVsYXJ5RGF0YS5jYXRlZ29yaWVzLnJlZHVjZSgodG90YWwsIGNhdCkgPT4gdG90YWwgKyAoY2F0LndvcmRzPy5sZW5ndGggfHwgMCksIDApO1xyXG4gICAgfSBlbHNlIGlmICh2b2NhYnVsYXJ5RGF0YS5leGVyY2lzZXMgJiYgQXJyYXkuaXNBcnJheSh2b2NhYnVsYXJ5RGF0YS5leGVyY2lzZXMpKSB7XHJcbiAgICAgIHRvdGFsV29yZHMgPSB2b2NhYnVsYXJ5RGF0YS5leGVyY2lzZXMucmVkdWNlKCh0b3RhbCwgZXgpID0+IHRvdGFsICsgKGV4LndvcmRzPy5sZW5ndGggfHwgMCksIDApO1xyXG4gICAgfSBlbHNlIGlmICh2b2NhYnVsYXJ5RGF0YS53b3JkcyAmJiBBcnJheS5pc0FycmF5KHZvY2FidWxhcnlEYXRhLndvcmRzKSkge1xyXG4gICAgICB0b3RhbFdvcmRzID0gdm9jYWJ1bGFyeURhdGEud29yZHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFjdGl2aXR5RGF0YSA9IHtcclxuICAgICAgdGl0bGU6IGBWb2NhYnVsYWlyZSAke2ZpbmFsTW9kZSA9PT0gXCJmYXN0XCIgPyBcIkZhc3RcIiA6IFwiXCJ9YCxcclxuICAgICAgbGV2ZWwsXHJcbiAgICAgIHR5cGU6IFwidm9jYWJ1bGFyeVwiLFxyXG4gICAgICBtb2RlOiBmaW5hbE1vZGUsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgd29yZDogd29yZEluZGV4LCAvLyDinIUgSW5kZXggcG91ciBwcm9ncmVzc2lvbiAoMC1iYXNlZClcclxuICAgICAgICB0b3RhbFdvcmRzLFxyXG4gICAgICAgIGNhdGVnb3J5OiBjdXJyZW50Q2F0ZWdvcnk/Lm5hbWUgfHwgXCJHw6luw6lyYWxcIixcclxuICAgICAgICBjYXRlZ29yeUluZGV4LFxyXG4gICAgICAgIHdvcmRJbmRleFxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHNhdmVBY3Rpdml0eShhY3Rpdml0eURhdGEpO1xyXG4gIH0sIFt3b3JkSW5kZXhdKTsgLy8g4pyFIFNFVUxFTUVOVCB3b3JkSW5kZXggLSBwbHVzIGRlIGJvdWNsZSAhXHJcblxyXG4gIC8vIEFwcGVsIGluaXRpYWwgcG91ciBlbnJlZ2lzdHJlciBsJ2FjdGl2aXTDqSBkw6hzIHF1ZSBsZXMgZG9ubsOpZXMgc29udCBwcsOqdGVzXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghbG9hZGVkIHx8ICF2b2NhYnVsYXJ5RGF0YSB8fCAhY3VycmVudFdvcmQpIHJldHVybjtcclxuXHJcbiAgICBsZXQgdG90YWxXb3JkcyA9IDE1O1xyXG4gICAgaWYgKHZvY2FidWxhcnlEYXRhLmNhdGVnb3JpZXMgJiYgQXJyYXkuaXNBcnJheSh2b2NhYnVsYXJ5RGF0YS5jYXRlZ29yaWVzKSkge1xyXG4gICAgICB0b3RhbFdvcmRzID0gdm9jYWJ1bGFyeURhdGEuY2F0ZWdvcmllcy5yZWR1Y2UoKHRvdGFsLCBjYXQpID0+IHRvdGFsICsgKGNhdC53b3Jkcz8ubGVuZ3RoIHx8IDApLCAwKTtcclxuICAgIH0gZWxzZSBpZiAodm9jYWJ1bGFyeURhdGEuZXhlcmNpc2VzICYmIEFycmF5LmlzQXJyYXkodm9jYWJ1bGFyeURhdGEuZXhlcmNpc2VzKSkge1xyXG4gICAgICB0b3RhbFdvcmRzID0gdm9jYWJ1bGFyeURhdGEuZXhlcmNpc2VzLnJlZHVjZSgodG90YWwsIGV4KSA9PiB0b3RhbCArIChleC53b3Jkcz8ubGVuZ3RoIHx8IDApLCAwKTtcclxuICAgIH0gZWxzZSBpZiAodm9jYWJ1bGFyeURhdGEud29yZHMgJiYgQXJyYXkuaXNBcnJheSh2b2NhYnVsYXJ5RGF0YS53b3JkcykpIHtcclxuICAgICAgdG90YWxXb3JkcyA9IHZvY2FidWxhcnlEYXRhLndvcmRzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY3Rpdml0eURhdGEgPSB7XHJcbiAgICAgIHRpdGxlOiBgVm9jYWJ1bGFpcmUgJHtmaW5hbE1vZGUgPT09IFwiZmFzdFwiID8gXCJGYXN0XCIgOiBcIlwifWAsXHJcbiAgICAgIGxldmVsLFxyXG4gICAgICB0eXBlOiBcInZvY2FidWxhcnlcIixcclxuICAgICAgbW9kZTogZmluYWxNb2RlLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHdvcmQ6IHdvcmRJbmRleCxcclxuICAgICAgICB0b3RhbFdvcmRzLFxyXG4gICAgICAgIGNhdGVnb3J5OiBjdXJyZW50Q2F0ZWdvcnk/Lm5hbWUgfHwgXCJHw6luw6lyYWxcIixcclxuICAgICAgICBjYXRlZ29yeUluZGV4LFxyXG4gICAgICAgIHdvcmRJbmRleCxcclxuICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgc2F2ZUFjdGl2aXR5KGFjdGl2aXR5RGF0YSk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgfSwgW2xvYWRlZCwgdm9jYWJ1bGFyeURhdGFdKTtcclxuXHJcbiAgLy8gSGFuZGxlcnNcclxuICBjb25zdCBoYW5kbGVCYWNrUHJlc3MgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICByb3V0ZXIucHVzaCh7XHJcbiAgICAgIHBhdGhuYW1lOiBcIi90YWJzL2V4ZXJjaXNlU2VsZWN0aW9uXCIsXHJcbiAgICAgIHBhcmFtczogeyBsZXZlbCB9XHJcbiAgICB9KTtcclxuICB9LCBbbGV2ZWxdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2F0ZWdvcnlDaGFuZ2UgPSB1c2VDYWxsYmFjaygoaW5kZXgpID0+IGNoYW5nZUNhdGVnb3J5KGluZGV4KSwgW2NoYW5nZUNhdGVnb3J5XSk7XHJcbiAgY29uc3QgaGFuZGxlQ2F0ZWdvcnlQcm9ncmVzc1ByZXNzID0gdXNlQ2FsbGJhY2soKGluZGV4KSA9PiBjaGFuZ2VDYXRlZ29yeShpbmRleCksIFtjaGFuZ2VDYXRlZ29yeV0pO1xyXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZVByb2dyZXNzRGV0YWlscyA9IHVzZUNhbGxiYWNrKCgpID0+IHRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MoKSwgW3RvZ2dsZURldGFpbGVkUHJvZ3Jlc3NdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlTmV4dFdvcmQgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBoYW5kbGVOZXh0KCk7XHJcbiAgICAvLyBBdHRlbmRyZSBsYSBzYXV2ZWdhcmRlIGF2YW50IGRlIG5hdmlndWVyXHJcbiAgICBpZiAodHlwZW9mIHNhdmVEYXRhID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGF3YWl0IHNhdmVEYXRhKCk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzdWx0LmNvbXBsZXRlZCkge1xyXG4gICAgICBuYXZpZ2F0aW9uLmdvQmFjaygpO1xyXG4gICAgfVxyXG4gIH0sIFtoYW5kbGVOZXh0LCBuYXZpZ2F0aW9uLCBzYXZlRGF0YV0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVQcmV2aW91c1dvcmQgPSB1c2VDYWxsYmFjaygoKSA9PiBoYW5kbGVQcmV2aW91cygpLCBbaGFuZGxlUHJldmlvdXNdKTtcclxuXHJcbiAgLy8gTG9hZGluZyBzdGF0ZVxyXG4gIGlmICghbG9hZGVkIHx8ICF2b2NhYnVsYXJ5RGF0YSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPENvbnRhaW5lclxyXG4gICAgICAgIHNhZmVBcmVhXHJcbiAgICAgICAgc2FmZUFyZWFFZGdlcz17Q09OVEFJTkVSX1NBRkVfRURHRVMuQUxMfVxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcj1cIiNmOGZhZmNcIlxyXG4gICAgICAgIHN0YXR1c0JhclN0eWxlPVwiZGFyay1jb250ZW50XCJcclxuICAgICAgPlxyXG4gICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMubG9hZGluZ0NvbnRhaW5lcn0+XHJcbiAgICAgICAgICA8QWN0aXZpdHlJbmRpY2F0b3IgdGVzdElEPVwiYWN0aXZpdHktaW5kaWNhdG9yXCIgc2l6ZT1cImxhcmdlXCIgY29sb3I9e2xldmVsQ29sb3J9IC8+XHJcbiAgICAgICAgPC9WaWV3PlxyXG4gICAgICA8L0NvbnRhaW5lcj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPENvbnRhaW5lclxyXG4gICAgICBzYWZlQXJlYVxyXG4gICAgICBzYWZlQXJlYUVkZ2VzPXtDT05UQUlORVJfU0FGRV9FREdFUy5BTEx9XHJcbiAgICAgIHdpdGhTY3JvbGxWaWV3XHJcbiAgICAgIGJhY2tncm91bmRDb2xvcj1cIiNmOGZhZmNcIlxyXG4gICAgICBzdGF0dXNCYXJTdHlsZT1cImRhcmstY29udGVudFwiXHJcbiAgICAgIHdpdGhQYWRkaW5nPXtmYWxzZX1cclxuICAgICAgc2Nyb2xsVmlld1Byb3BzPXt7XHJcbiAgICAgICAgc2hvd3NWZXJ0aWNhbFNjcm9sbEluZGljYXRvcjogZmFsc2UsXHJcbiAgICAgICAgY29udGVudENvbnRhaW5lclN0eWxlOiBzdHlsZXMuc2Nyb2xsQ29udGVudCxcclxuICAgICAgfX1cclxuICAgID5cclxuICAgICAgPFZvY2FidWxhcnlIZWFkZXJcclxuICAgICAgICBsZXZlbD17bGV2ZWx9XHJcbiAgICAgICAgbW9kZT17ZmluYWxNb2RlfVxyXG4gICAgICAgIG9uQmFja1ByZXNzPXtoYW5kbGVCYWNrUHJlc3N9XHJcbiAgICAgIC8+XHJcblxyXG4gICAgICA8Vm9jYWJ1bGFyeVByb2dyZXNzXHJcbiAgICAgICAgdm9jYWJ1bGFyeURhdGE9e3ZvY2FidWxhcnlEYXRhfVxyXG4gICAgICAgIGNvbXBsZXRlZFdvcmRzPXtjb21wbGV0ZWRXb3Jkc31cclxuICAgICAgICBsZXZlbENvbG9yPXtsZXZlbENvbG9yfVxyXG4gICAgICAgIGV4cGFuZGVkPXtzaG93RGV0YWlsZWRQcm9ncmVzc31cclxuICAgICAgICBvblRvZ2dsZUV4cGFuZD17aGFuZGxlVG9nZ2xlUHJvZ3Jlc3NEZXRhaWxzfVxyXG4gICAgICAgIG9uQ2F0ZWdvcnlQcmVzcz17aGFuZGxlQ2F0ZWdvcnlQcm9ncmVzc1ByZXNzfVxyXG4gICAgICAvPlxyXG5cclxuICAgICAgPFZvY2FidWxhcnlDYXRlZ29yeVNlbGVjdG9yXHJcbiAgICAgICAgY2F0ZWdvcmllcz17ZGlzcGxheS5jYXRlZ29yaWVzfVxyXG4gICAgICAgIHNlbGVjdGVkSW5kZXg9e2NhdGVnb3J5SW5kZXh9XHJcbiAgICAgICAgb25TZWxlY3RDYXRlZ29yeT17aGFuZGxlQ2F0ZWdvcnlDaGFuZ2V9XHJcbiAgICAgICAgbGV2ZWxDb2xvcj17bGV2ZWxDb2xvcn1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIDxWb2NhYnVsYXJ5V29yZFNlY3Rpb25cclxuICAgICAgICBjdXJyZW50V29yZD17Y3VycmVudFdvcmR9XHJcbiAgICAgICAgd29yZENvdW50ZXI9e2Rpc3BsYXkud29yZENvdW50ZXJ9XHJcbiAgICAgICAgbW9kZT17ZmluYWxNb2RlfVxyXG4gICAgICAgIGxldmVsPXtsZXZlbH1cclxuICAgICAgICBsZXZlbENvbG9yPXtsZXZlbENvbG9yfVxyXG4gICAgICAgIHNob3dUcmFuc2xhdGlvbj17c2hvd1RyYW5zbGF0aW9ufVxyXG4gICAgICAgIG9uVG9nZ2xlVHJhbnNsYXRpb249e3RvZ2dsZVRyYW5zbGF0aW9ufVxyXG4gICAgICAvPlxyXG5cclxuICAgICAgPFZvY2FidWxhcnlOYXZpZ2F0aW9uXHJcbiAgICAgICAgb25OZXh0PXtoYW5kbGVOZXh0V29yZH1cclxuICAgICAgICBvblByZXZpb3VzPXtoYW5kbGVQcmV2aW91c1dvcmR9XHJcbiAgICAgICAgY2FuR29QcmV2aW91cz17Y2FuR29Ub1ByZXZpb3VzfVxyXG4gICAgICAgIGlzTGFzdD17aXNMYXN0V29yZEluRXhlcmNpc2V9XHJcbiAgICAgICAgbGV2ZWxDb2xvcj17bGV2ZWxDb2xvcn1cclxuICAgICAgLz5cclxuICAgIDwvQ29udGFpbmVyPlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWb2NhYnVsYXJ5RXhlcmNpc2U7XHJcblxyXG4vLyDinIUgQWpvdXQgZGUgbGEgdmFsaWRhdGlvbiBkZXMgcHJvcHNcclxuVm9jYWJ1bGFyeUV4ZXJjaXNlLnByb3BUeXBlcyA9IHtcclxuICByb3V0ZTogUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgIHBhcmFtczogUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgICAgbGV2ZWw6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgIG1vZGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICB9KSxcclxuICB9KS5pc1JlcXVpcmVkLFxyXG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBLElBQUFBLFlBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFdBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFVBQUEs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