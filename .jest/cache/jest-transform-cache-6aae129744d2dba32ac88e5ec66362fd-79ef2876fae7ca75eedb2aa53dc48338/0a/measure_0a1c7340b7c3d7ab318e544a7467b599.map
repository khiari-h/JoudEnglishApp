{"version":3,"names":["Object","defineProperty","exports","value","measure","_PlatformChecker","require","_logger","_worklet_10147140729772_init_data","code","location","sourceMap","version","measureFabric","_e","global","Error","animatedRef","_WORKLET","viewTag","logger","warn","measured","_measureFabric","x","isNaN","__closure","__workletHash","__initData","__stackDetails","_worklet_16650190976416_init_data","measurePaper","_measurePaper","measureJest","measureChromeDebugger","measureDefault","shouldBeUseWeb","isFabric","isJest","isChromeDebugger"],"sources":["measure.ts"],"sourcesContent":["'use strict';\nimport type { MeasuredDimensions, ShadowNodeWrapper } from '../commonTypes';\nimport {\n  isChromeDebugger,\n  isFabric,\n  isJest,\n  shouldBeUseWeb,\n} from '../PlatformChecker';\nimport type {\n  AnimatedRef,\n  AnimatedRefOnJS,\n  AnimatedRefOnUI,\n} from '../hook/commonTypes';\nimport type { Component } from 'react';\nimport { logger } from '../logger';\n\ntype Measure = <T extends Component>(\n  animatedRef: AnimatedRef<T>\n) => MeasuredDimensions | null;\n\n/**\n * Lets you synchronously get the dimensions and position of a view on the\n * screen.\n *\n * @param animatedRef - An [animated\n *   ref](https://docs.swmansion.com/react-native-reanimated/docs/core/useAnimatedRef#returns)\n *   connected to the component you'd want to get the measurements from.\n * @returns An object containing component measurements or null when the\n *   measurement couldn't be performed- {@link MeasuredDimensions}.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/advanced/measure/\n */\nexport let measure: Measure;\n\nfunction measureFabric(animatedRef: AnimatedRefOnJS | AnimatedRefOnUI) {\n  'worklet';\n  if (!_WORKLET) {\n    return null;\n  }\n\n  const viewTag = animatedRef();\n  if (viewTag === -1) {\n    logger.warn(\n      `The view with tag ${viewTag} is not a valid argument for measure(). This may be because the view is not currently rendered, which may not be a bug (e.g. an off-screen FlatList item).`\n    );\n    return null;\n  }\n\n  const measured = global._measureFabric!(viewTag as ShadowNodeWrapper);\n  if (measured === null) {\n    logger.warn(\n      `The view has some undefined, not-yet-computed or meaningless value of \\`LayoutMetrics\\` type. This may be because the view is not currently rendered, which may not be a bug (e.g. an off-screen FlatList item).`\n    );\n    return null;\n  } else if (measured.x === -1234567) {\n    logger.warn(\n      `The view returned an invalid measurement response. Please make sure the view is currently rendered.`\n    );\n    return null;\n  } else if (isNaN(measured.x)) {\n    logger.warn(\n      `The view gets view-flattened on Android. To disable view-flattening, set \\`collapsable={false}\\` on this component.`\n    );\n    return null;\n  } else {\n    return measured;\n  }\n}\n\nfunction measurePaper(animatedRef: AnimatedRefOnJS | AnimatedRefOnUI) {\n  'worklet';\n  if (!_WORKLET) {\n    return null;\n  }\n\n  const viewTag = animatedRef();\n  if (viewTag === -1) {\n    logger.warn(\n      `The view with tag ${viewTag} is not a valid argument for measure(). This may be because the view is not currently rendered, which may not be a bug (e.g. an off-screen FlatList item).`\n    );\n    return null;\n  }\n\n  const measured = global._measurePaper!(viewTag as number);\n  if (measured === null) {\n    logger.warn(\n      `The view with tag ${\n        viewTag as number\n      } has some undefined, not-yet-computed or meaningless value of \\`LayoutMetrics\\` type. This may be because the view is not currently rendered, which may not be a bug (e.g. an off-screen FlatList item).`\n    );\n    return null;\n  } else if (measured.x === -1234567) {\n    logger.warn(\n      `The view with tag ${\n        viewTag as number\n      } returned an invalid measurement response. Please make sure the view is currently rendered.`\n    );\n    return null;\n  } else if (isNaN(measured.x)) {\n    logger.warn(\n      `The view with tag ${\n        viewTag as number\n      } gets view-flattened on Android. To disable view-flattening, set \\`collapsable={false}\\` on this component.`\n    );\n    return null;\n  } else {\n    return measured;\n  }\n}\n\nfunction measureJest() {\n  logger.warn('measure() cannot be used with Jest.');\n  return null;\n}\n\nfunction measureChromeDebugger() {\n  logger.warn('measure() cannot be used with Chrome Debugger.');\n  return null;\n}\n\nfunction measureDefault() {\n  logger.warn('measure() is not supported on this configuration.');\n  return null;\n}\n\nif (!shouldBeUseWeb()) {\n  // Those assertions are actually correct since on Native platforms `AnimatedRef` is\n  // mapped as a different function in `shareableMappingCache` and\n  // TypeScript is not able to infer that.\n  if (isFabric()) {\n    measure = measureFabric as unknown as Measure;\n  } else {\n    measure = measurePaper as unknown as Measure;\n  }\n} else if (isJest()) {\n  measure = measureJest;\n} else if (isChromeDebugger()) {\n  measure = measureChromeDebugger;\n} else {\n  measure = measureDefault;\n}\n"],"mappings":"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","ignoreList":[]}