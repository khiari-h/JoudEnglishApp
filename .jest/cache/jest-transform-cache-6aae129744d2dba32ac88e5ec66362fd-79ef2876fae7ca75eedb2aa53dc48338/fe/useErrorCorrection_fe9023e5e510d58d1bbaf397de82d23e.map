{"version":3,"names":["_react","require","_reactNative","_asyncStorage","_interopRequireDefault","useErrorCorrection","errorCorrectionData","level","handleStorageError","error","operation","fallback","arguments","length","undefined","console","warn","STORAGE_KEY","_useState","useState","_useState2","_slicedToArray2","default","selectedCategory","setSelectedCategory","_useState3","_useState4","currentExerciseIndex","setCurrentExerciseIndex","_useState5","_useState6","correctionMode","setCorrectionMode","_useState7","_useState8","showFeedback","setShowFeedback","_useState9","_useState0","isCorrect","setIsCorrect","_useState1","_useState10","showResults","setShowResults","_useState11","_useState12","loaded","setLoaded","_useState13","_useState14","showDetailedProgress","setShowDetailedProgress","_useState15","_useState16","filteredExercises","setFilteredExercises","_useState17","_useState18","isFinished","setIsFinished","_useState19","_useState20","completedExercises","setCompletedExercises","_useState21","_useState22","userCorrection","setUserCorrection","_useState23","_useState24","selectedErrorIndices","setSelectedErrorIndices","_useState25","_useState26","selectedChoiceIndex","setSelectedChoiceIndex","_useState27","_useState28","score","setScore","_useState29","_useState30","showHint","setShowHint","isInitialized","useRef","categories","exercises","currentExercises","filter","ex","categoryId","currentExercise","totalCategories","totalExercisesInCategory","currentCategory","find","cat","id","useEffect","loadData","_ref","_asyncToGenerator2","saved","AsyncStorage","getItem","_JSON$parse","JSON","parse","savedCompleted","lastPosition","exerciseIndex","apply","saveData","useCallback","dataToSave","setItem","stringify","current","newCompletedExercises","Object","assign","forEach","category","resetExerciseState","changeCategory","newCategoryId","startExercise","mode","exercisesOfType","type","firstExercise","text","toggleDetailedProgress","prev","handleWordPress","wordIndex","includes","i","concat","_toConsumableArray2","handleChoiceSelect","choiceIndex","markExerciseAsCompleted","catId","exIndex","categoryCompleted","_defineProperty2","findNextUncompletedCategory","numCategories","_loop","_errorCorrectionData$","_completedExercises$n","nextIndex","findIndex","nextCategory","exercisesInCategory","completedInCategory","v","_ret","checkAnswer","answerCorrect","trim","toLowerCase","correctedText","errorPositions","every","index","correctChoiceIndex","tryAgain","handleNext","exercisesToUse","nextExercise","nextCategoryId","completionMessage","Alert","alert","completed","handlePrevious","prevIndex","prevExercise","currentCategoryIndex","_errorCorrectionData$2","previousCategory","exercisesInPreviousCategory","lastExerciseIndex","getStats","_completedExercises$s","totalExercises","reduce","sum","_errorCorrectionData$3","exercisesInCat","completedExercisesCount","values","totalProgress","Math","round","completedInCurrentCategory","totalInCurrentCategory","getDisplayData","exerciseCounter","categoryNames","map","name","canGoToPrevious","_errorCorrectionData$4","isLastExerciseInCategory","hasValidData","Array","isArray","stats","display","_default","exports"],"sources":["useErrorCorrection.js"],"sourcesContent":["// src/screens/exercises/errorCorrection/hooks/useErrorCorrection.js - VERSION CORRIGÃ‰E\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { Alert } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n/**\n * ðŸŽ¯ Hook unifiÃ© pour Error Correction Exercise\n * Remplace useErrorCorrectionExerciseState + useErrorCorrectionProgress\n * Simple, efficace, maintenable - pattern identique Ã  useVocabulary\n */\nconst useErrorCorrection = (errorCorrectionData, level) => {\n  // =================== ERROR HANDLING HELPER ===================\n  const handleStorageError = (error, operation, fallback = null) => {\n    console.warn(`Error correction storage error in ${operation}:`, error);\n    return fallback;\n  };\n\n  // =================== STORAGE KEY ===================\n  const STORAGE_KEY = `errorCorrection_${level}`;\n\n  // =================== STATE ===================\n  const [selectedCategory, setSelectedCategory] = useState(1);\n  const [currentExerciseIndex, setCurrentExerciseIndex] = useState(0);\n  const [correctionMode, setCorrectionMode] = useState('full'); // 'full', 'identify', 'multiple_choice'\n  const [showFeedback, setShowFeedback] = useState(false);\n  const [isCorrect, setIsCorrect] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n  const [showDetailedProgress, setShowDetailedProgress] = useState(false);\n  \n  // âœ… AJOUTÃ‰ : Exercices filtrÃ©s par type pour la navigation\n  const [filteredExercises, setFilteredExercises] = useState([]);\n  const [isFinished, setIsFinished] = useState(false);\n  const [completedExercises, setCompletedExercises] = useState({});\n\n  // =================== MODE-SPECIFIC STATE ===================\n  const [userCorrection, setUserCorrection] = useState('');\n  const [selectedErrorIndices, setSelectedErrorIndices] = useState([]);\n  const [selectedChoiceIndex, setSelectedChoiceIndex] = useState(null);\n  const [score, setScore] = useState(0);\n  const [showHint, setShowHint] = useState(false);\n\n  // =================== REFS ===================\n  const isInitialized = useRef(false);\n\n  // =================== COMPUTED VALUES ===================\n  const categories = errorCorrectionData?.categories || [];\n  const exercises = errorCorrectionData?.exercises || [];\n  const currentExercises = exercises.filter(ex => ex.categoryId === selectedCategory);\n  const currentExercise = currentExercises[currentExerciseIndex];\n  const totalCategories = categories.length;\n  const totalExercisesInCategory = currentExercises.length;\n  \n  // âœ… AJOUTÃ‰ : DÃ©finition manquante de currentCategory\n  const currentCategory = categories.find(cat => cat.id === selectedCategory);\n  \n  // =================== PERSISTENCE ===================\n  // âœ… Variable lastPosition supprimÃ©e car inutilisÃ©e\n\n  // Load data from storage\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        const saved = await AsyncStorage.getItem(STORAGE_KEY);\n        if (saved) {\n          const { completedExercises: savedCompleted, lastPosition } = JSON.parse(saved);\n          setCompletedExercises(savedCompleted || {});\n          if (lastPosition) {\n            setSelectedCategory(lastPosition.categoryId || null);\n            setCurrentExerciseIndex(lastPosition.exerciseIndex || 0);\n          }\n        }\n      } catch (error) {\n        // âœ… Gestion d'erreur appropriÃ©e\n        handleStorageError(error, 'loadData');\n        // Fallback: utiliser les valeurs par dÃ©faut\n      } finally {\n        setLoaded(true);\n      }\n    };\n    loadData();\n  }, [STORAGE_KEY]); // DÃ©pendance plus explicite et cohÃ©rente\n\n  // Save data to storage\n  const saveData = useCallback(async () => {\n    try {\n      const dataToSave = {\n        completedExercises,\n        lastPosition: {\n          categoryId: selectedCategory,\n          exerciseIndex: currentExerciseIndex\n        }\n      };\n      await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(dataToSave));\n    } catch (error) {\n      // âœ… Gestion d'erreur appropriÃ©e\n      handleStorageError(error, 'saveData');\n      // Fallback: continuer sans sauvegarde\n    }\n  }, [completedExercises, selectedCategory, currentExerciseIndex, STORAGE_KEY]);\n\n  // Auto-save when data changes\n  useEffect(() => {\n    if (loaded) saveData();\n  }, [saveData, loaded]);\n\n  // Initialize progress for new categories\n  useEffect(() => {\n    if (loaded && errorCorrectionData && !isInitialized.current) {\n      const newCompletedExercises = { ...completedExercises };\n      categories.forEach((category) => {\n        if (!newCompletedExercises[category.id]) {\n          newCompletedExercises[category.id] = [];\n        }\n      });\n      setCompletedExercises(newCompletedExercises);\n      isInitialized.current = true;\n    }\n  }, [loaded, errorCorrectionData, categories, completedExercises]);\n\n  // Initialize first category\n  useEffect(() => {\n    if (loaded && categories.length > 0 && !selectedCategory) {\n      setSelectedCategory(categories[0].id);\n    }\n  }, [loaded, categories, selectedCategory]);\n\n  // =================== NAVIGATION ACTIONS ===================\n  const resetExerciseState = useCallback(() => {\n    setSelectedErrorIndices([]);\n    setShowFeedback(false);\n    setIsCorrect(false);\n    setShowHint(false);\n    setUserCorrection('');\n  }, []);\n\n  const changeCategory = useCallback((newCategoryId) => {\n    setSelectedCategory(newCategoryId);\n    setCurrentExerciseIndex(0);\n    resetExerciseState();\n    // âœ… CORRECTION : RÃ©initialiser les exercices filtrÃ©s quand on change de catÃ©gorie\n    setFilteredExercises([]);\n  }, [resetExerciseState]);\n\n  const startExercise = useCallback((mode = 'full') => {\n    setCorrectionMode(mode);\n    resetExerciseState();\n    setShowResults(false);\n    setScore(0);\n\n    // âœ… CORRECTION : Filtrer les exercices par type\n    if (currentExercises.length > 0) {\n      // Filtrer les exercices du type demandÃ©\n      const exercisesOfType = currentExercises.filter(ex => ex.type === mode);\n      \n      if (exercisesOfType.length === 0) {\n        console.error(`âŒ Aucun exercice de type '${mode}' trouvÃ© dans la catÃ©gorie ${selectedCategory}`);\n        return;\n      }\n      \n      // âœ… CORRECTION : CrÃ©er une liste d'exercices filtrÃ©s pour ce mode\n      setFilteredExercises(exercisesOfType);\n      \n      // Prendre le premier exercice du bon type\n      const firstExercise = exercisesOfType[0];\n      setCurrentExerciseIndex(0); // Commencer Ã  l'index 0 de la liste filtrÃ©e\n      \n      // Initialize based on mode\n      switch(mode) {\n        case 'full':\n          setUserCorrection(firstExercise.text || '');\n          break;\n        case 'identify':\n          setSelectedErrorIndices([]);\n          break;\n        case 'multiple_choice':\n          setSelectedChoiceIndex(null);\n          break;\n        default:\n          // No default action needed\n          break;\n      }\n    }\n  }, [currentExercises, selectedCategory, resetExerciseState]);\n\n  const toggleDetailedProgress = useCallback(() => {\n    setShowDetailedProgress(prev => !prev);\n  }, []);\n\n  // =================== MODE-SPECIFIC ACTIONS ===================\n  const handleWordPress = useCallback((wordIndex) => {\n    if (showFeedback || correctionMode !== 'identify') return;\n\n    setSelectedErrorIndices(prev => \n      prev.includes(wordIndex) \n        ? prev.filter(i => i !== wordIndex)\n        : [...prev, wordIndex]\n    );\n  }, [showFeedback, correctionMode]);\n\n  const handleChoiceSelect = useCallback((choiceIndex) => {\n    if (showFeedback) return;\n    setSelectedChoiceIndex(choiceIndex);\n  }, [showFeedback]);\n\n  // =================== COMPLETION LOGIC ===================\n  const markExerciseAsCompleted = useCallback((catId, exIndex) => {\n    setCompletedExercises(prev => {\n      const categoryCompleted = prev[catId] || [];\n      if (!categoryCompleted.includes(exIndex)) {\n        return {\n          ...prev,\n          [catId]: [...categoryCompleted, exIndex]\n        };\n      }\n      return prev;\n    });\n  }, []);\n\n  // Find next uncompleted category\n  const findNextUncompletedCategory = useCallback(() => {\n    const numCategories = categories.length;\n    for (let i = 1; i <= numCategories; i++) {\n      const nextIndex = (categories.findIndex(cat => cat.id === selectedCategory) + i) % numCategories;\n      const nextCategory = categories[nextIndex];\n      const exercisesInCategory = errorCorrectionData?.exercises?.filter(\n        ex => ex.categoryId === nextCategory.id\n      )?.length || 0;\n      const completedInCategory = completedExercises[nextCategory.id]?.length || 0;\n      \n      if (completedInCategory < exercisesInCategory) {\n        return nextCategory.id;\n      }\n    }\n    return null;\n  }, [categories, selectedCategory, completedExercises, errorCorrectionData]);\n\n  // =================== ANSWER CHECKING ===================\n  const checkAnswer = useCallback(() => {\n    if (showFeedback) return false;\n\n    let answerCorrect = false;\n\n    switch(correctionMode) {\n      case 'full':\n        if (!userCorrection.trim()) return false;\n        answerCorrect = userCorrection.trim().toLowerCase() === \n                       (currentExercise.correctedText || '').trim().toLowerCase();\n        break;\n\n      case 'identify': {\n        const errorPositions = currentExercise.errorPositions || [];\n        answerCorrect = selectedErrorIndices.length === errorPositions.length &&\n          selectedErrorIndices.every(index => errorPositions.includes(index));\n        break;\n      }\n\n      case 'multiple_choice':\n        answerCorrect = selectedChoiceIndex === currentExercise.correctChoiceIndex;\n        break;\n\n      default:\n        return false;\n    }\n\n    setIsCorrect(answerCorrect);\n    setShowFeedback(true);\n\n    if (answerCorrect) {\n      setScore(prev => prev + 1);\n    }\n\n    return answerCorrect;\n  }, [showFeedback, correctionMode, userCorrection, selectedErrorIndices, selectedChoiceIndex, currentExercise]);\n\n  // âœ… AJOUTÃ‰ : Fonction pour rÃ©essayer l'exercice\n  const tryAgain = useCallback(() => {\n    setShowFeedback(false);\n    setIsCorrect(false);\n    setShowHint(false);\n    \n    // RÃ©initialiser selon le mode\n    switch(correctionMode) {\n      case 'full':\n        setUserCorrection(currentExercise.text || '');\n        break;\n      case 'identify':\n        setSelectedErrorIndices([]);\n        break;\n      case 'multiple_choice':\n        setSelectedChoiceIndex(null);\n        break;\n      default:\n        break;\n    }\n  }, [correctionMode, currentExercise]);\n\n  // =================== MAIN NAVIGATION ===================\n  const handleNext = useCallback(() => {\n    // Mark current exercise as completed\n    markExerciseAsCompleted(selectedCategory, currentExerciseIndex);\n\n    // âœ… CORRECTION : Utiliser filteredExercises pour la navigation\n    const exercisesToUse = filteredExercises.length > 0 ? filteredExercises : currentExercises;\n    \n    // Check if there are more exercises in current category\n    if (currentExerciseIndex < exercisesToUse.length - 1) {\n      const nextIndex = currentExerciseIndex + 1;\n      setCurrentExerciseIndex(nextIndex);\n      resetExerciseState();\n\n      // Initialize next exercise based on mode\n      const nextExercise = exercisesToUse[nextIndex];\n      switch(correctionMode) {\n        case 'full':\n          setUserCorrection(nextExercise.text || '');\n          break;\n        case 'identify':\n          setSelectedErrorIndices([]);\n          break;\n        case 'multiple_choice':\n          setSelectedChoiceIndex(null);\n          break;\n        default:\n          // No default action needed\n          break;\n      }\n    } else {\n      // End of category - find next uncompleted category\n      const nextCategoryId = findNextUncompletedCategory();\n      if (nextCategoryId === null) {\n        // All done!\n        setIsFinished(true);\n        const completionMessage = `FÃ©licitations ! Vous avez terminÃ© tous les exercices de correction d'erreurs ${level} !`;\n        Alert.alert(\"FÃ©licitations\", completionMessage);\n        return { completed: true };\n      } else {\n        changeCategory(nextCategoryId);\n      }\n    }\n    return { completed: false };\n  }, [selectedCategory, currentExerciseIndex, filteredExercises, markExerciseAsCompleted, \n      resetExerciseState, currentExercises, correctionMode, findNextUncompletedCategory, changeCategory, level]);\n\n  const handlePrevious = useCallback(() => {\n    // âœ… CORRECTION : Utiliser filteredExercises pour la navigation\n    const exercisesToUse = filteredExercises.length > 0 ? filteredExercises : currentExercises;\n    \n    // Case 1: Not first exercise in category\n    if (currentExerciseIndex > 0) {\n      const prevIndex = currentExerciseIndex - 1;\n      setCurrentExerciseIndex(prevIndex);\n      resetExerciseState();\n\n      // Initialize previous exercise based on mode\n      const prevExercise = exercisesToUse[prevIndex];\n      switch(correctionMode) {\n        case 'full':\n          setUserCorrection(prevExercise.text || '');\n          break;\n        case 'identify':\n          setSelectedErrorIndices([]);\n          break;\n        case 'multiple_choice':\n          setSelectedChoiceIndex(null);\n          break;\n        default:\n          // No default action needed\n          break;\n      }\n      return;\n    }\n    \n    // Case 2: First exercise in category - go to previous category\n    const currentCategoryIndex = categories.findIndex(cat => cat.id === selectedCategory);\n    if (currentCategoryIndex > 0) {\n      const previousCategory = categories[currentCategoryIndex - 1];\n      const exercisesInPreviousCategory = errorCorrectionData?.exercises?.filter(\n        ex => ex.categoryId === previousCategory.id\n      ) || [];\n      const lastExerciseIndex = exercisesInPreviousCategory.length - 1;\n      \n      changeCategory(previousCategory.id);\n      setCurrentExerciseIndex(lastExerciseIndex);\n    }\n  }, [currentExerciseIndex, filteredExercises, currentExercises, correctionMode, resetExerciseState, \n      categories, selectedCategory, errorCorrectionData, changeCategory]);\n\n  // =================== COMPUTED STATS ===================\n  const getStats = useCallback(() => {\n    const totalExercises = categories.reduce((sum, cat) => {\n      const exercisesInCat = errorCorrectionData?.exercises?.filter(\n        ex => ex.categoryId === cat.id\n      )?.length || 0;\n      return sum + exercisesInCat;\n    }, 0);\n    \n    const completedExercisesCount = Object.values(completedExercises).reduce(\n      (sum, completed) => sum + (completed?.length || 0), 0\n    );\n    \n    const totalProgress = totalExercises > 0 ? Math.round((completedExercisesCount / totalExercises) * 100) : 0;\n\n    return {\n      totalExercises,\n      completedExercisesCount,\n      totalProgress,\n      completedInCurrentCategory: completedExercises[selectedCategory]?.length || 0,\n      totalInCurrentCategory: totalExercisesInCategory,\n      completedExercises,\n      score\n    };\n  }, [categories, errorCorrectionData, completedExercises, selectedCategory, totalExercisesInCategory, score]);\n\n  // =================== COMPUTED DISPLAY ===================\n  const getDisplayData = useCallback(() => {\n    const exerciseCounter = `${currentExerciseIndex + 1} / ${totalExercisesInCategory}`;\n    const categoryNames = categories.map(cat => cat.name);\n    \n    return {\n      exerciseCounter,\n      categories: categoryNames,\n      currentExercise,\n      currentCategory\n    };\n  }, [currentExerciseIndex, totalExercisesInCategory, categories, currentExercise, currentCategory]);\n\n  // =================== VALIDATION ===================\n  const canGoToPrevious = useCallback(() => {\n    if (currentExerciseIndex > 0) return true;\n    const currentCategoryIndex = categories.findIndex(cat => cat.id === selectedCategory);\n    if (currentCategoryIndex > 0) {\n      const previousCategory = categories[currentCategoryIndex - 1];\n      const exercisesInPreviousCategory = errorCorrectionData?.exercises?.filter(\n        ex => ex.categoryId === previousCategory.id\n      ) || [];\n      return exercisesInPreviousCategory.length > 0;\n    }\n    return false;\n  }, [currentExerciseIndex, categories, selectedCategory, errorCorrectionData]);\n\n  const isLastExerciseInCategory = useCallback(() => {\n    return currentExerciseIndex === totalExercisesInCategory - 1;\n  }, [currentExerciseIndex, totalExercisesInCategory]);\n\n  const hasValidData = errorCorrectionData?.categories && \n                      Array.isArray(errorCorrectionData.categories) && \n                      errorCorrectionData.categories.length > 0;\n\n  return {\n    // State\n    selectedCategory,\n    currentExerciseIndex,\n    correctionMode,\n    showFeedback,\n    isCorrect,\n    showResults,\n    isFinished,\n    completedExercises,\n    loaded,\n    showDetailedProgress,\n    \n    // Mode-specific state\n    userCorrection,\n    selectedErrorIndices,\n    selectedChoiceIndex,\n    score,\n    showHint,\n    \n    // Data\n    currentExercise,\n    currentCategory,\n    totalCategories,\n    totalExercisesInCategory,\n    exercises,\n    filteredExercises, // âœ… AJOUTÃ‰ : Exercices filtrÃ©s par type\n    \n    // Actions\n    changeCategory,\n    startExercise,\n    resetExerciseState,\n    toggleDetailedProgress,\n    handleNext,\n    handlePrevious,\n    checkAnswer,\n    handleWordPress,\n    handleChoiceSelect,\n    setUserCorrection,\n    setShowHint,\n    setShowResults,\n    tryAgain,\n    \n    // Computed\n    canGoToPrevious: canGoToPrevious(),\n    isLastExerciseInCategory: isLastExerciseInCategory(),\n    hasValidData,\n    stats: getStats(),\n    display: getDisplayData(),\n  };\n};\n\nexport default useErrorCorrection;"],"mappings":"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","ignoreList":[]}