{"version":3,"names":["_ensureNativeModulesAreInstalled","require","registerWebModule","moduleImplementation","_globalThis$expo","ensureNativeModulesAreInstalled","moduleName","name","Error","globalThis","expo","modules"],"sources":["registerWebModule.ts"],"sourcesContent":["import { ensureNativeModulesAreInstalled } from './ensureNativeModulesAreInstalled';\nimport type { NativeModule } from './ts-declarations/NativeModule';\n\n/**\n * Registers a web module.\n * @param moduleImplementation â€“ a class that extends `NativeModule`. The class is registered under `globalThis.expo.modules[className]`.\n * @returns A singleton instance of the class passed into arguments.\n */\n\nexport function registerWebModule<\n  EventsMap extends Record<never, never>,\n  ModuleType extends typeof NativeModule<EventsMap>,\n>(moduleImplementation: ModuleType): ModuleType {\n  ensureNativeModulesAreInstalled();\n\n  const moduleName = moduleImplementation.name;\n  if (!moduleName) {\n    throw new Error('Module implementation must be a class');\n  }\n  if (!globalThis?.expo?.modules) {\n    globalThis.expo.modules = {};\n  }\n  if (globalThis.expo.modules[moduleName]) {\n    return globalThis.expo.modules[moduleName];\n  }\n  globalThis.expo.modules[moduleName] = new moduleImplementation();\n  return globalThis.expo.modules[moduleName];\n}\n"],"mappings":";;;;AAAA,IAAAA,gCAAA,GAAAC,OAAA;AASO,SAASC,iBAAiBA,CAG/BC,oBAAgC,EAAc;EAAA,IAAAC,gBAAA;EAC9C,IAAAC,gEAA+B,EAAC,CAAC;EAEjC,IAAMC,UAAU,GAAGH,oBAAoB,CAACI,IAAI;EAC5C,IAAI,CAACD,UAAU,EAAE;IACf,MAAM,IAAIE,KAAK,CAAC,uCAAuC,CAAC;EAC1D;EACA,IAAI,EAACC,UAAU,aAAAL,gBAAA,GAAVK,UAAU,CAAEC,IAAI,aAAhBN,gBAAA,CAAkBO,OAAO,GAAE;IAC9BF,UAAU,CAACC,IAAI,CAACC,OAAO,GAAG,CAAC,CAAC;EAC9B;EACA,IAAIF,UAAU,CAACC,IAAI,CAACC,OAAO,CAACL,UAAU,CAAC,EAAE;IACvC,OAAOG,UAAU,CAACC,IAAI,CAACC,OAAO,CAACL,UAAU,CAAC;EAC5C;EACAG,UAAU,CAACC,IAAI,CAACC,OAAO,CAACL,UAAU,CAAC,GAAG,IAAIH,oBAAoB,CAAC,CAAC;EAChE,OAAOM,UAAU,CAACC,IAAI,CAACC,OAAO,CAACL,UAAU,CAAC;AAC5C","ignoreList":[]}