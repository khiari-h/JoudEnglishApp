{"version":3,"names":["_getJestObj","mock","getItem","jest","fn","setItem","emit","_interopRequireDefault","require","_asyncToGenerator2","_reactNative","_asyncStorage","_useRevisionSettings","_require","describe","beforeEach","clearAllMocks","it","AsyncStorage","mockResolvedValue","_renderHook","renderHook","useRevisionSettings","result","expect","current","isLoading","toBe","default","mockPreferences","isDisabled","nextRevisionAt","frequency","questionsCount","JSON","stringify","_renderHook2","waitFor","preferences","_renderHook3","newPrefs","act","success","updatePreferences","toHaveBeenCalled","_renderHook4","enableRevisions","disableRevisions","updateFrequency","resetToNextTarget","_renderHook5","_renderHook6"],"sources":["useRevisionSettings.test.js"],"sourcesContent":["// __tests__/hooks/useRevisionSettings.test.js\nimport { renderHook, act, waitFor } from '@testing-library/react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useRevisionSettings } from '../../src/hooks/useRevisionSettings';\n\njest.mock('@react-native-async-storage/async-storage', () => ({\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n}));\n\njest.mock('../../src/utils/eventBus', () => ({\n  emit: jest.fn()\n}));\n\ndescribe('useRevisionSettings', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('devrait initialiser avec les préférences par défaut', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionSettings());\n\n    expect(result.current.isLoading).toBe(true);\n  });\n\n  it('devrait charger les préférences sauvegardées', async () => {\n    const mockPreferences = {\n      isDisabled: true,\n      nextRevisionAt: 100,\n      frequency: 75,\n      questionsCount: 15\n    };\n\n    AsyncStorage.getItem.mockResolvedValue(JSON.stringify(mockPreferences));\n    const { result } = renderHook(() => useRevisionSettings());\n\n    await waitFor(() => {\n      expect(result.current.preferences.isDisabled).toBe(true);\n      expect(result.current.preferences.nextRevisionAt).toBe(100);\n      expect(result.current.preferences.frequency).toBe(75);\n      expect(result.current.preferences.questionsCount).toBe(15);\n      expect(result.current.isLoading).toBe(false);\n    });\n  });\n\n  it('devrait mettre à jour les préférences', async () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionSettings());\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    const newPrefs = { frequency: 100 };\n\n    await act(async () => {\n      const success = await result.current.updatePreferences(newPrefs);\n      expect(success).toBe(true);\n    });\n\n    expect(result.current.preferences.frequency).toBe(100);\n    expect(AsyncStorage.setItem).toHaveBeenCalled();\n  });\n\n  it('devrait avoir toutes les fonctions nécessaires', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionSettings());\n\n    expect(typeof result.current.enableRevisions).toBe('function');\n    expect(typeof result.current.disableRevisions).toBe('function');\n    expect(typeof result.current.updateFrequency).toBe('function');\n    expect(typeof result.current.updatePreferences).toBe('function');\n    expect(typeof result.current.resetToNextTarget).toBe('function');\n  });\n\n  it('devrait activer les révisions', async () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionSettings());\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    await act(async () => {\n      const success = await result.current.enableRevisions(75, 12);\n      expect(success).toBe(true);\n    });\n\n    expect(result.current.preferences.isDisabled).toBe(false);\n    expect(result.current.preferences.frequency).toBe(75);\n    expect(result.current.preferences.questionsCount).toBe(12);\n  });\n\n  it('devrait désactiver les révisions', async () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionSettings());\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    await act(async () => {\n      const success = await result.current.disableRevisions();\n      expect(success).toBe(true);\n    });\n\n    expect(result.current.preferences.isDisabled).toBe(true);\n  });\n});"],"mappings":"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","ignoreList":[]}