bdd3ee88afd3ef7e3d3dd75e7295d6cc
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Asset = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _registry = require("@react-native/assets-registry/registry");
var _expoModulesCore = require("expo-modules-core");
var _AssetSources = require("./AssetSources");
var AssetUris = _interopRequireWildcard(require("./AssetUris"));
var _ExpoAsset = require("./ExpoAsset");
var ImageAssets = _interopRequireWildcard(require("./ImageAssets"));
var _LocalAssets = require("./LocalAssets");
var _PlatformUtils = require("./PlatformUtils");
var _resolveAssetSource2 = _interopRequireDefault(require("./resolveAssetSource"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
var Asset = exports.Asset = function () {
  function Asset(_ref) {
    var name = _ref.name,
      type = _ref.type,
      _ref$hash = _ref.hash,
      hash = _ref$hash === void 0 ? null : _ref$hash,
      uri = _ref.uri,
      width = _ref.width,
      height = _ref.height;
    (0, _classCallCheck2.default)(this, Asset);
    this.hash = null;
    this.localUri = null;
    this.width = null;
    this.height = null;
    this.downloading = false;
    this.downloaded = false;
    this._downloadCallbacks = [];
    this.name = name;
    this.type = type;
    this.hash = hash;
    this.uri = uri;
    if (typeof width === 'number') {
      this.width = width;
    }
    if (typeof height === 'number') {
      this.height = height;
    }
    if (hash) {
      this.localUri = (0, _LocalAssets.getLocalAssetUri)(hash, type);
      if (this.localUri) {
        this.downloaded = true;
      }
    }
    if (_expoModulesCore.Platform.OS === 'web') {
      if (!name) {
        this.name = AssetUris.getFilename(uri);
      }
      if (!type) {
        this.type = AssetUris.getFileExtension(uri);
      }
    }
  }
  return (0, _createClass2.default)(Asset, [{
    key: "downloadAsync",
    value: function () {
      var _downloadAsync2 = (0, _asyncToGenerator2.default)(function* () {
        var _this = this;
        if (this.downloaded) {
          return this;
        }
        if (this.downloading) {
          yield new Promise(function (resolve, reject) {
            _this._downloadCallbacks.push({
              resolve: resolve,
              reject: reject
            });
          });
          return this;
        }
        this.downloading = true;
        try {
          if (_expoModulesCore.Platform.OS === 'web') {
            if (ImageAssets.isImageType(this.type)) {
              var _yield$ImageAssets$ge = yield ImageAssets.getImageInfoAsync(this.uri),
                width = _yield$ImageAssets$ge.width,
                height = _yield$ImageAssets$ge.height,
                name = _yield$ImageAssets$ge.name;
              this.width = width;
              this.height = height;
              this.name = name;
            } else {
              this.name = AssetUris.getFilename(this.uri);
            }
          }
          this.localUri = yield (0, _ExpoAsset.downloadAsync)(this.uri, this.hash, this.type);
          this.downloaded = true;
          this._downloadCallbacks.forEach(function (_ref2) {
            var resolve = _ref2.resolve;
            return resolve();
          });
        } catch (e) {
          this._downloadCallbacks.forEach(function (_ref3) {
            var reject = _ref3.reject;
            return reject(e);
          });
          throw e;
        } finally {
          this.downloading = false;
          this._downloadCallbacks = [];
        }
        return this;
      });
      function downloadAsync() {
        return _downloadAsync2.apply(this, arguments);
      }
      return downloadAsync;
    }()
  }], [{
    key: "loadAsync",
    value: function loadAsync(moduleId) {
      var moduleIds = Array.isArray(moduleId) ? moduleId : [moduleId];
      return Promise.all(moduleIds.map(function (moduleId) {
        return Asset.fromModule(moduleId).downloadAsync();
      }));
    }
  }, {
    key: "fromModule",
    value: function fromModule(virtualAssetModule) {
      if (typeof virtualAssetModule === 'string') {
        return Asset.fromURI(virtualAssetModule);
      }
      if (typeof virtualAssetModule === 'object' && 'uri' in virtualAssetModule && typeof virtualAssetModule.uri === 'string') {
        var extension = AssetUris.getFileExtension(virtualAssetModule.uri);
        return new Asset({
          name: '',
          type: extension.startsWith('.') ? extension.substring(1) : extension,
          hash: null,
          uri: virtualAssetModule.uri,
          width: virtualAssetModule.width,
          height: virtualAssetModule.height
        });
      }
      var meta = (0, _registry.getAssetByID)(virtualAssetModule);
      if (!meta) {
        throw new Error(`Module "${virtualAssetModule}" is missing from the asset registry`);
      }
      if (!_PlatformUtils.IS_ENV_WITH_LOCAL_ASSETS) {
        var _resolveAssetSource = (0, _resolveAssetSource2.default)(virtualAssetModule),
          uri = _resolveAssetSource.uri;
        var asset = new Asset({
          name: meta.name,
          type: meta.type,
          hash: meta.hash,
          uri: uri,
          width: meta.width,
          height: meta.height
        });
        if (_expoModulesCore.Platform.OS === 'android' && !uri.includes(':') && (meta.width || meta.height)) {
          asset.localUri = asset.uri;
          asset.downloaded = true;
        }
        Asset.byHash[meta.hash] = asset;
        return asset;
      }
      return Asset.fromMetadata(meta);
    }
  }, {
    key: "fromMetadata",
    value: function fromMetadata(meta) {
      var metaHash = meta.hash;
      if (Asset.byHash[metaHash]) {
        return Asset.byHash[metaHash];
      }
      var _selectAssetSource = (0, _AssetSources.selectAssetSource)(meta),
        uri = _selectAssetSource.uri,
        hash = _selectAssetSource.hash;
      var asset = new Asset({
        name: meta.name,
        type: meta.type,
        hash: hash,
        uri: uri,
        width: meta.width,
        height: meta.height
      });
      Asset.byHash[metaHash] = asset;
      return asset;
    }
  }, {
    key: "fromURI",
    value: function fromURI(uri) {
      if (Asset.byUri[uri]) {
        return Asset.byUri[uri];
      }
      var type = '';
      if (uri.indexOf(';base64') > -1) {
        type = uri.split(';')[0].split('/')[1];
      } else {
        var extension = AssetUris.getFileExtension(uri);
        type = extension.startsWith('.') ? extension.substring(1) : extension;
      }
      var asset = new Asset({
        name: '',
        type: type,
        hash: null,
        uri: uri
      });
      Asset.byUri[uri] = asset;
      return asset;
    }
  }]);
}();
Asset.byHash = {};
Asset.byUri = {};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVnaXN0cnkiLCJyZXF1aXJlIiwiX2V4cG9Nb2R1bGVzQ29yZSIsIl9Bc3NldFNvdXJjZXMiLCJBc3NldFVyaXMiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9FeHBvQXNzZXQiLCJJbWFnZUFzc2V0cyIsIl9Mb2NhbEFzc2V0cyIsIl9QbGF0Zm9ybVV0aWxzIiwiX3Jlc29sdmVBc3NldFNvdXJjZTIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsIl90IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJBc3NldCIsImV4cG9ydHMiLCJfcmVmIiwibmFtZSIsInR5cGUiLCJfcmVmJGhhc2giLCJoYXNoIiwidXJpIiwid2lkdGgiLCJoZWlnaHQiLCJfY2xhc3NDYWxsQ2hlY2syIiwibG9jYWxVcmkiLCJkb3dubG9hZGluZyIsImRvd25sb2FkZWQiLCJfZG93bmxvYWRDYWxsYmFja3MiLCJnZXRMb2NhbEFzc2V0VXJpIiwiUGxhdGZvcm0iLCJPUyIsImdldEZpbGVuYW1lIiwiZ2V0RmlsZUV4dGVuc2lvbiIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsIl9kb3dubG9hZEFzeW5jMiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl90aGlzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwdXNoIiwiaXNJbWFnZVR5cGUiLCJfeWllbGQkSW1hZ2VBc3NldHMkZ2UiLCJnZXRJbWFnZUluZm9Bc3luYyIsImRvd25sb2FkQXN5bmMiLCJmb3JFYWNoIiwiX3JlZjIiLCJfcmVmMyIsImFwcGx5IiwiYXJndW1lbnRzIiwibG9hZEFzeW5jIiwibW9kdWxlSWQiLCJtb2R1bGVJZHMiLCJBcnJheSIsImlzQXJyYXkiLCJhbGwiLCJtYXAiLCJmcm9tTW9kdWxlIiwidmlydHVhbEFzc2V0TW9kdWxlIiwiZnJvbVVSSSIsImV4dGVuc2lvbiIsInN0YXJ0c1dpdGgiLCJzdWJzdHJpbmciLCJtZXRhIiwiZ2V0QXNzZXRCeUlEIiwiRXJyb3IiLCJJU19FTlZfV0lUSF9MT0NBTF9BU1NFVFMiLCJfcmVzb2x2ZUFzc2V0U291cmNlIiwicmVzb2x2ZUFzc2V0U291cmNlIiwiYXNzZXQiLCJpbmNsdWRlcyIsImJ5SGFzaCIsImZyb21NZXRhZGF0YSIsIm1ldGFIYXNoIiwiX3NlbGVjdEFzc2V0U291cmNlIiwic2VsZWN0QXNzZXRTb3VyY2UiLCJieVVyaSIsImluZGV4T2YiLCJzcGxpdCJdLCJzb3VyY2VzIjpbIi4uL3NyYy9Bc3NldC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBc3NldEJ5SUQgfSBmcm9tICdAcmVhY3QtbmF0aXZlL2Fzc2V0cy1yZWdpc3RyeS9yZWdpc3RyeSc7XG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ2V4cG8tbW9kdWxlcy1jb3JlJztcblxuaW1wb3J0IHsgQXNzZXRNZXRhZGF0YSwgc2VsZWN0QXNzZXRTb3VyY2UgfSBmcm9tICcuL0Fzc2V0U291cmNlcyc7XG5pbXBvcnQgKiBhcyBBc3NldFVyaXMgZnJvbSAnLi9Bc3NldFVyaXMnO1xuaW1wb3J0IHsgZG93bmxvYWRBc3luYyB9IGZyb20gJy4vRXhwb0Fzc2V0JztcbmltcG9ydCAqIGFzIEltYWdlQXNzZXRzIGZyb20gJy4vSW1hZ2VBc3NldHMnO1xuaW1wb3J0IHsgZ2V0TG9jYWxBc3NldFVyaSB9IGZyb20gJy4vTG9jYWxBc3NldHMnO1xuaW1wb3J0IHsgSVNfRU5WX1dJVEhfTE9DQUxfQVNTRVRTIH0gZnJvbSAnLi9QbGF0Zm9ybVV0aWxzJztcbmltcG9ydCByZXNvbHZlQXNzZXRTb3VyY2UgZnJvbSAnLi9yZXNvbHZlQXNzZXRTb3VyY2UnO1xuXG4vLyBAZG9jc01pc3NpbmdcbmV4cG9ydCB0eXBlIEFzc2V0RGVzY3JpcHRvciA9IHtcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIGhhc2g/OiBzdHJpbmcgfCBudWxsO1xuICB1cmk6IHN0cmluZztcbiAgd2lkdGg/OiBudW1iZXIgfCBudWxsO1xuICBoZWlnaHQ/OiBudW1iZXIgfCBudWxsO1xufTtcblxudHlwZSBEb3dubG9hZFByb21pc2VDYWxsYmFja3MgPSB7XG4gIHJlc29sdmU6ICgpID0+IHZvaWQ7XG4gIHJlamVjdDogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCB7IEFzc2V0TWV0YWRhdGEgfTtcblxuLyoqXG4gKiBUaGUgYEFzc2V0YCBjbGFzcyByZXByZXNlbnRzIGFuIGFzc2V0IGluIHlvdXIgYXBwLiBJdCBnaXZlcyBtZXRhZGF0YSBhYm91dCB0aGUgYXNzZXQgKHN1Y2ggYXMgaXRzXG4gKiBuYW1lIGFuZCB0eXBlKSBhbmQgcHJvdmlkZXMgZmFjaWxpdGllcyB0byBsb2FkIHRoZSBhc3NldCBkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgQXNzZXQge1xuICBwcml2YXRlIHN0YXRpYyBieUhhc2ggPSB7fTtcbiAgcHJpdmF0ZSBzdGF0aWMgYnlVcmkgPSB7fTtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGFzc2V0IGZpbGUgd2l0aG91dCB0aGUgZXh0ZW5zaW9uLiBBbHNvIHdpdGhvdXQgdGhlIHBhcnQgZnJvbSBgQGAgb253YXJkIGluIHRoZVxuICAgKiBmaWxlbmFtZSAodXNlZCB0byBzcGVjaWZ5IHNjYWxlIGZhY3RvciBmb3IgaW1hZ2VzKS5cbiAgICovXG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgZXh0ZW5zaW9uIG9mIHRoZSBhc3NldCBmaWxlbmFtZS5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgTUQ1IGhhc2ggb2YgdGhlIGFzc2V0J3MgZGF0YS5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBoYXNoOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgLyoqXG4gICAqIEEgVVJJIHRoYXQgcG9pbnRzIHRvIHRoZSBhc3NldCdzIGRhdGEgb24gdGhlIHJlbW90ZSBzZXJ2ZXIuIFdoZW4gcnVubmluZyB0aGUgcHVibGlzaGVkIHZlcnNpb25cbiAgICogb2YgeW91ciBhcHAsIHRoaXMgcmVmZXJzIHRvIHRoZSBsb2NhdGlvbiBvbiBFeHBvJ3MgYXNzZXQgc2VydmVyIHdoZXJlIEV4cG8gaGFzIHN0b3JlZCB5b3VyXG4gICAqIGFzc2V0LiBXaGVuIHJ1bm5pbmcgdGhlIGFwcCBmcm9tIEV4cG8gQ0xJIGR1cmluZyBkZXZlbG9wbWVudCwgdGhpcyBVUkkgcG9pbnRzIHRvIEV4cG8gQ0xJJ3NcbiAgICogc2VydmVyIHJ1bm5pbmcgb24geW91ciBjb21wdXRlciBhbmQgdGhlIGFzc2V0IGlzIHNlcnZlZCBkaXJlY3RseSBmcm9tIHlvdXIgY29tcHV0ZXIuIElmIHlvdVxuICAgKiBhcmUgbm90IHVzaW5nIENsYXNzaWMgVXBkYXRlcyAobGVnYWN5KSwgdGhpcyBmaWVsZCBzaG91bGQgYmUgaWdub3JlZCBhcyB3ZSBlbnN1cmUgeW91ciBhc3NldHNcbiAgICogYXJlIG9uIGRldmljZSBiZWZvcmUgcnVubmluZyB5b3VyIGFwcGxpY2F0aW9uIGxvZ2ljLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IHVyaTogc3RyaW5nO1xuICAvKipcbiAgICogSWYgdGhlIGFzc2V0IGhhcyBiZWVuIGRvd25sb2FkZWQgKGJ5IGNhbGxpbmcgW2Bkb3dubG9hZEFzeW5jKClgXSgjZG93bmxvYWRhc3luYykpLCB0aGVcbiAgICogYGZpbGU6Ly9gIFVSSSBwb2ludGluZyB0byB0aGUgbG9jYWwgZmlsZSBvbiB0aGUgZGV2aWNlIHRoYXQgY29udGFpbnMgdGhlIGFzc2V0IGRhdGEuXG4gICAqL1xuICBwdWJsaWMgbG9jYWxVcmk6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAvKipcbiAgICogSWYgdGhlIGFzc2V0IGlzIGFuIGltYWdlLCB0aGUgd2lkdGggb2YgdGhlIGltYWdlIGRhdGEgZGl2aWRlZCBieSB0aGUgc2NhbGUgZmFjdG9yLiBUaGUgc2NhbGVcbiAgICogZmFjdG9yIGlzIHRoZSBudW1iZXIgYWZ0ZXIgYEBgIGluIHRoZSBmaWxlbmFtZSwgb3IgYDFgIGlmIG5vdCBwcmVzZW50LlxuICAgKi9cbiAgcHVibGljIHdpZHRoOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgLyoqXG4gICAqIElmIHRoZSBhc3NldCBpcyBhbiBpbWFnZSwgdGhlIGhlaWdodCBvZiB0aGUgaW1hZ2UgZGF0YSBkaXZpZGVkIGJ5IHRoZSBzY2FsZSBmYWN0b3IuIFRoZSBzY2FsZSBmYWN0b3IgaXMgdGhlIG51bWJlciBhZnRlciBgQGAgaW4gdGhlIGZpbGVuYW1lLCBvciBgMWAgaWYgbm90IHByZXNlbnQuXG4gICAqL1xuICBwdWJsaWMgaGVpZ2h0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIGRvd25sb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGFzc2V0IGhhcyBmaW5pc2hlZCBkb3dubG9hZGluZyBmcm9tIGEgY2FsbCB0byBbYGRvd25sb2FkQXN5bmMoKWBdKCNkb3dubG9hZGFzeW5jKS5cbiAgICovXG4gIHB1YmxpYyBkb3dubG9hZGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfZG93bmxvYWRDYWxsYmFja3M6IERvd25sb2FkUHJvbWlzZUNhbGxiYWNrc1tdID0gW107XG5cbiAgY29uc3RydWN0b3IoeyBuYW1lLCB0eXBlLCBoYXNoID0gbnVsbCwgdXJpLCB3aWR0aCwgaGVpZ2h0IH06IEFzc2V0RGVzY3JpcHRvcikge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmhhc2ggPSBoYXNoO1xuICAgIHRoaXMudXJpID0gdXJpO1xuXG4gICAgaWYgKHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBoZWlnaHQgPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG5cbiAgICBpZiAoaGFzaCkge1xuICAgICAgdGhpcy5sb2NhbFVyaSA9IGdldExvY2FsQXNzZXRVcmkoaGFzaCwgdHlwZSk7XG4gICAgICBpZiAodGhpcy5sb2NhbFVyaSkge1xuICAgICAgICB0aGlzLmRvd25sb2FkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ3dlYicpIHtcbiAgICAgIGlmICghbmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBBc3NldFVyaXMuZ2V0RmlsZW5hbWUodXJpKTtcbiAgICAgIH1cbiAgICAgIGlmICghdHlwZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSBBc3NldFVyaXMuZ2V0RmlsZUV4dGVuc2lvbih1cmkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEBuZWVkc0F1ZGl0XG4gIC8qKlxuICAgKiBBIGhlbHBlciB0aGF0IHdyYXBzIGBBc3NldC5mcm9tTW9kdWxlKG1vZHVsZSkuZG93bmxvYWRBc3luY2AgZm9yIGNvbnZlbmllbmNlLlxuICAgKiBAcGFyYW0gbW9kdWxlSWQgQW4gYXJyYXkgb2YgYHJlcXVpcmUoJ3BhdGgvdG8vZmlsZScpYCBvciBleHRlcm5hbCBuZXR3b3JrIFVSTHMuIENhbiBhbHNvIGJlXG4gICAqIGp1c3Qgb25lIG1vZHVsZSBvciBVUkwgd2l0aG91dCBhbiBBcnJheS5cbiAgICogQHJldHVybiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpdGggYW4gYXJyYXkgb2YgYEFzc2V0YHMgd2hlbiB0aGUgYXNzZXQocykgaGFzIGJlZW5cbiAgICogc2F2ZWQgdG8gZGlzay5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgW3sgbG9jYWxVcmkgfV0gPSBhd2FpdCBBc3NldC5sb2FkQXN5bmMocmVxdWlyZSgnLi9hc3NldHMvc25hY2staWNvbi5wbmcnKSk7XG4gICAqIGBgYFxuICAgKi9cbiAgc3RhdGljIGxvYWRBc3luYyhtb2R1bGVJZDogbnVtYmVyIHwgbnVtYmVyW10gfCBzdHJpbmcgfCBzdHJpbmdbXSk6IFByb21pc2U8QXNzZXRbXT4ge1xuICAgIGNvbnN0IG1vZHVsZUlkcyA9IEFycmF5LmlzQXJyYXkobW9kdWxlSWQpID8gbW9kdWxlSWQgOiBbbW9kdWxlSWRdO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChtb2R1bGVJZHMubWFwKChtb2R1bGVJZCkgPT4gQXNzZXQuZnJvbU1vZHVsZShtb2R1bGVJZCkuZG93bmxvYWRBc3luYygpKSk7XG4gIH1cblxuICAvLyBAbmVlZHNBdWRpdFxuICAvKipcbiAgICogUmV0dXJucyB0aGUgW2BBc3NldGBdKCNhc3NldCkgaW5zdGFuY2UgcmVwcmVzZW50aW5nIGFuIGFzc2V0IGdpdmVuIGl0cyBtb2R1bGUgb3IgVVJMLlxuICAgKiBAcGFyYW0gdmlydHVhbEFzc2V0TW9kdWxlIFRoZSB2YWx1ZSBvZiBgcmVxdWlyZSgncGF0aC90by9maWxlJylgIGZvciB0aGUgYXNzZXQgb3IgZXh0ZXJuYWxcbiAgICogbmV0d29yayBVUkxcbiAgICogQHJldHVybiBUaGUgW2BBc3NldGBdKCNhc3NldCkgaW5zdGFuY2UgZm9yIHRoZSBhc3NldC5cbiAgICovXG4gIHN0YXRpYyBmcm9tTW9kdWxlKFxuICAgIHZpcnR1YWxBc3NldE1vZHVsZTogbnVtYmVyIHwgc3RyaW5nIHwgeyB1cmk6IHN0cmluZzsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfVxuICApOiBBc3NldCB7XG4gICAgaWYgKHR5cGVvZiB2aXJ0dWFsQXNzZXRNb2R1bGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gQXNzZXQuZnJvbVVSSSh2aXJ0dWFsQXNzZXRNb2R1bGUpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdmlydHVhbEFzc2V0TW9kdWxlID09PSAnb2JqZWN0JyAmJlxuICAgICAgJ3VyaScgaW4gdmlydHVhbEFzc2V0TW9kdWxlICYmXG4gICAgICB0eXBlb2YgdmlydHVhbEFzc2V0TW9kdWxlLnVyaSA9PT0gJ3N0cmluZydcbiAgICApIHtcbiAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IEFzc2V0VXJpcy5nZXRGaWxlRXh0ZW5zaW9uKHZpcnR1YWxBc3NldE1vZHVsZS51cmkpO1xuICAgICAgcmV0dXJuIG5ldyBBc3NldCh7XG4gICAgICAgIG5hbWU6ICcnLFxuICAgICAgICB0eXBlOiBleHRlbnNpb24uc3RhcnRzV2l0aCgnLicpID8gZXh0ZW5zaW9uLnN1YnN0cmluZygxKSA6IGV4dGVuc2lvbixcbiAgICAgICAgaGFzaDogbnVsbCxcbiAgICAgICAgdXJpOiB2aXJ0dWFsQXNzZXRNb2R1bGUudXJpLFxuICAgICAgICB3aWR0aDogdmlydHVhbEFzc2V0TW9kdWxlLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHZpcnR1YWxBc3NldE1vZHVsZS5oZWlnaHQsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBtZXRhID0gZ2V0QXNzZXRCeUlEKHZpcnR1YWxBc3NldE1vZHVsZSk7XG4gICAgaWYgKCFtZXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1vZHVsZSBcIiR7dmlydHVhbEFzc2V0TW9kdWxlfVwiIGlzIG1pc3NpbmcgZnJvbSB0aGUgYXNzZXQgcmVnaXN0cnlgKTtcbiAgICB9XG5cbiAgICAvLyBPdXRzaWRlIG9mIHRoZSBtYW5hZ2VkIGVudiB3ZSBuZWVkIHRoZSBtb2R1bGVJZCB0byBpbml0aWFsaXplIHRoZSBhc3NldFxuICAgIC8vIGJlY2F1c2UgcmVzb2x2ZUFzc2V0U291cmNlIGRlcGVuZHMgb24gaXRcbiAgICBpZiAoIUlTX0VOVl9XSVRIX0xPQ0FMX0FTU0VUUykge1xuICAgICAgLy8gbnVsbC1jaGVjayBpcyBwZXJmb3JtZWQgYWJvdmUgd2l0aCBgZ2V0QXNzZXRCeUlEYC5cbiAgICAgIGNvbnN0IHsgdXJpIH0gPSByZXNvbHZlQXNzZXRTb3VyY2UodmlydHVhbEFzc2V0TW9kdWxlKSE7XG5cbiAgICAgIGNvbnN0IGFzc2V0ID0gbmV3IEFzc2V0KHtcbiAgICAgICAgbmFtZTogbWV0YS5uYW1lLFxuICAgICAgICB0eXBlOiBtZXRhLnR5cGUsXG4gICAgICAgIGhhc2g6IG1ldGEuaGFzaCxcbiAgICAgICAgdXJpLFxuICAgICAgICB3aWR0aDogbWV0YS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBtZXRhLmhlaWdodCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGb3IgaW1hZ2VzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksXG4gICAgICAvLyBrZWVwcyBsb2NhbFVyaSB0aGUgc2FtZSBhcyB1cmkgZm9yIFJlYWN0IE5hdGl2ZSdzIEltYWdlIHRoYXRcbiAgICAgIC8vIHdvcmtzIGZpbmUgd2l0aCBkcmF3YWJsZSByZXNvdXJjZSBuYW1lcy5cbiAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnICYmICF1cmkuaW5jbHVkZXMoJzonKSAmJiAobWV0YS53aWR0aCB8fCBtZXRhLmhlaWdodCkpIHtcbiAgICAgICAgYXNzZXQubG9jYWxVcmkgPSBhc3NldC51cmk7XG4gICAgICAgIGFzc2V0LmRvd25sb2FkZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBBc3NldC5ieUhhc2hbbWV0YS5oYXNoXSA9IGFzc2V0O1xuICAgICAgcmV0dXJuIGFzc2V0O1xuICAgIH1cblxuICAgIHJldHVybiBBc3NldC5mcm9tTWV0YWRhdGEobWV0YSk7XG4gIH1cblxuICAvLyBAZG9jc01pc3NpbmdcbiAgc3RhdGljIGZyb21NZXRhZGF0YShtZXRhOiBBc3NldE1ldGFkYXRhKTogQXNzZXQge1xuICAgIC8vIFRoZSBoYXNoIG9mIHRoZSB3aG9sZSBhc3NldCwgbm90IHRvIGJlIGNvbmZ1c2VkIHdpdGggdGhlIGhhc2ggb2YgYSBzcGVjaWZpYyBmaWxlIHJldHVybmVkXG4gICAgLy8gZnJvbSBgc2VsZWN0QXNzZXRTb3VyY2VgXG4gICAgY29uc3QgbWV0YUhhc2ggPSBtZXRhLmhhc2g7XG4gICAgaWYgKEFzc2V0LmJ5SGFzaFttZXRhSGFzaF0pIHtcbiAgICAgIHJldHVybiBBc3NldC5ieUhhc2hbbWV0YUhhc2hdO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXJpLCBoYXNoIH0gPSBzZWxlY3RBc3NldFNvdXJjZShtZXRhKTtcbiAgICBjb25zdCBhc3NldCA9IG5ldyBBc3NldCh7XG4gICAgICBuYW1lOiBtZXRhLm5hbWUsXG4gICAgICB0eXBlOiBtZXRhLnR5cGUsXG4gICAgICBoYXNoLFxuICAgICAgdXJpLFxuICAgICAgd2lkdGg6IG1ldGEud2lkdGgsXG4gICAgICBoZWlnaHQ6IG1ldGEuaGVpZ2h0LFxuICAgIH0pO1xuICAgIEFzc2V0LmJ5SGFzaFttZXRhSGFzaF0gPSBhc3NldDtcbiAgICByZXR1cm4gYXNzZXQ7XG4gIH1cblxuICAvLyBAZG9jc01pc3NpbmdcbiAgc3RhdGljIGZyb21VUkkodXJpOiBzdHJpbmcpOiBBc3NldCB7XG4gICAgaWYgKEFzc2V0LmJ5VXJpW3VyaV0pIHtcbiAgICAgIHJldHVybiBBc3NldC5ieVVyaVt1cmldO1xuICAgIH1cblxuICAgIC8vIFBvc3NpYmx5IGEgQmFzZTY0LWVuY29kZWQgVVJJXG4gICAgbGV0IHR5cGUgPSAnJztcbiAgICBpZiAodXJpLmluZGV4T2YoJztiYXNlNjQnKSA+IC0xKSB7XG4gICAgICB0eXBlID0gdXJpLnNwbGl0KCc7JylbMF0uc3BsaXQoJy8nKVsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXh0ZW5zaW9uID0gQXNzZXRVcmlzLmdldEZpbGVFeHRlbnNpb24odXJpKTtcbiAgICAgIHR5cGUgPSBleHRlbnNpb24uc3RhcnRzV2l0aCgnLicpID8gZXh0ZW5zaW9uLnN1YnN0cmluZygxKSA6IGV4dGVuc2lvbjtcbiAgICB9XG5cbiAgICBjb25zdCBhc3NldCA9IG5ldyBBc3NldCh7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIHR5cGUsXG4gICAgICBoYXNoOiBudWxsLFxuICAgICAgdXJpLFxuICAgIH0pO1xuXG4gICAgQXNzZXQuYnlVcmlbdXJpXSA9IGFzc2V0O1xuXG4gICAgcmV0dXJuIGFzc2V0O1xuICB9XG5cbiAgLy8gQG5lZWRzQXVkaXRcbiAgLyoqXG4gICAqIERvd25sb2FkcyB0aGUgYXNzZXQgZGF0YSB0byBhIGxvY2FsIGZpbGUgaW4gdGhlIGRldmljZSdzIGNhY2hlIGRpcmVjdG9yeS4gT25jZSB0aGUgcmV0dXJuZWRcbiAgICogcHJvbWlzZSBpcyBmdWxmaWxsZWQgd2l0aG91dCBlcnJvciwgdGhlIFtgbG9jYWxVcmlgXSgjbG9jYWx1cmkpIGZpZWxkIG9mIHRoaXMgYXNzZXQgcG9pbnRzXG4gICAqIHRvIGEgbG9jYWwgZmlsZSBjb250YWluaW5nIHRoZSBhc3NldCBkYXRhLiBUaGUgYXNzZXQgaXMgb25seSBkb3dubG9hZGVkIGlmIGFuIHVwLXRvLWRhdGUgbG9jYWxcbiAgICogZmlsZSBmb3IgdGhlIGFzc2V0IGlzbid0IGFscmVhZHkgcHJlc2VudCBkdWUgdG8gYW4gZWFybGllciBkb3dubG9hZC4gVGhlIGRvd25sb2FkZWQgYEFzc2V0YFxuICAgKiB3aWxsIGJlIHJldHVybmVkIHdoZW4gdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQuXG4gICAqIEByZXR1cm4gUmV0dXJucyBhIFByb21pc2Ugd2hpY2ggZnVsZmlsbHMgd2l0aCBhbiBgQXNzZXRgIGluc3RhbmNlLlxuICAgKi9cbiAgYXN5bmMgZG93bmxvYWRBc3luYygpOiBQcm9taXNlPHRoaXM+IHtcbiAgICBpZiAodGhpcy5kb3dubG9hZGVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKHRoaXMuZG93bmxvYWRpbmcpIHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdGhpcy5fZG93bmxvYWRDYWxsYmFja3MucHVzaCh7IHJlc29sdmUsIHJlamVjdCB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHRoaXMuZG93bmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ3dlYicpIHtcbiAgICAgICAgaWYgKEltYWdlQXNzZXRzLmlzSW1hZ2VUeXBlKHRoaXMudHlwZSkpIHtcbiAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIG5hbWUgfSA9IGF3YWl0IEltYWdlQXNzZXRzLmdldEltYWdlSW5mb0FzeW5jKHRoaXMudXJpKTtcbiAgICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm5hbWUgPSBBc3NldFVyaXMuZ2V0RmlsZW5hbWUodGhpcy51cmkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmxvY2FsVXJpID0gYXdhaXQgZG93bmxvYWRBc3luYyh0aGlzLnVyaSwgdGhpcy5oYXNoLCB0aGlzLnR5cGUpO1xuXG4gICAgICB0aGlzLmRvd25sb2FkZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fZG93bmxvYWRDYWxsYmFja3MuZm9yRWFjaCgoeyByZXNvbHZlIH0pID0+IHJlc29sdmUoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5fZG93bmxvYWRDYWxsYmFja3MuZm9yRWFjaCgoeyByZWplY3QgfSkgPT4gcmVqZWN0KGUpKTtcbiAgICAgIHRocm93IGU7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuZG93bmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2Rvd25sb2FkQ2FsbGJhY2tzID0gW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxP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