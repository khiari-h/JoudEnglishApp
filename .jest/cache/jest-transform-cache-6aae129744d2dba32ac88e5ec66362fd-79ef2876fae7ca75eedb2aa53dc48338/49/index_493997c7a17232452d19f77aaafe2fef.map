{"version":3,"names":["View","Text","TouchableOpacity","Animated","useCallback","useEffect","useRef","useState","PropTypes","Ionicons","HeroCard","ContentSection","createStyles","jsx","_jsx","jsxs","_jsxs","cov_223zem7yt0","s","IdentifyErrorsMode","_ref","_exercise$errorPositi","exercise","selectedErrorIndices","onToggleErrorIndex","showFeedback","_ref$levelColor","levelColor","b","f","styles","fadeAnim","Value","current","slideAnim","handleToggleErrorIndex","index","text","words","split","expectedErrors","errorPositions","length","style","container","children","title","content","backgroundColor","instructionSection","showUnderline","heroCard","wordsContainer","map","word","isSelected","includes","isError","isCorrectSelection","isIncorrectSelection","onPress","disabled","borderColor","correctWord","incorrectWord","missedErrorWord","wordText","color","fontWeight","correctWordText","incorrectWordText","missedErrorWordText","helpSection","explanation","feedbackSection","propTypes","shape","string","isRequired","arrayOf","number","func","bool"],"sources":["index.js"],"sourcesContent":["// src/screens/exercises/errorCorrection/modes/IdentifyErrorsMode/index.js - AVEC PROPTYPES\r\n\r\nimport { View, Text, TouchableOpacity, Animated } from \"react-native\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport HeroCard from \"../../../../../components/ui/HeroCard\";\r\nimport ContentSection from \"../../../../../components/ui/ContentSection\";\r\nimport createStyles from \"./style\";\r\n\r\n/**\r\n * üîç IdentifyErrorsMode - Version Refactoris√©e avec composants g√©n√©riques\r\n * Remplace Card par HeroCard + ContentSection + logique simplifi√©e\r\n * \r\n * @param {Object} exercise - Exercice actuel\r\n * @param {Array} selectedErrorIndices - Indices des mots s√©lectionn√©s\r\n * @param {function} onToggleErrorIndex - Callback pour toggle un mot\r\n * @param {boolean} showFeedback - Afficher le feedback\r\n * @param {string} levelColor - Couleur du niveau\r\n */\r\nconst IdentifyErrorsMode = ({\r\n  exercise,\r\n  selectedErrorIndices,\r\n  onToggleErrorIndex,\r\n  showFeedback,\r\n  levelColor = \"#3b82f6\",\r\n}) => {\r\n  const styles = createStyles(levelColor);\r\n  const fadeAnim = useRef(new Animated.Value(0)).current;\r\n  const slideAnim = useRef(new Animated.Value(50)).current;\r\n\r\n  // Hook AVANT tout return conditionnel ‚úÖ\r\n  const handleToggleErrorIndex = useCallback(\r\n    (index) => () => {\r\n      onToggleErrorIndex(index);\r\n    },\r\n    [onToggleErrorIndex]\r\n  );\r\n\r\n  if (!exercise || !exercise.text) return null;\r\n\r\n  // Diviser le texte en mots\r\n  const words = exercise.text.split(\" \");\r\n  const expectedErrors = exercise.errorPositions?.length || 0;\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* üìù SECTION INSTRUCTIONS */}\r\n      <ContentSection\r\n        title=\"Instructions\"\r\n        content={`Touchez les mots qui contiennent des erreurs. Vous devez trouver ${expectedErrors} erreur(s).`}\r\n        levelColor={levelColor}\r\n        backgroundColor=\"#F8F9FA\"\r\n        style={styles.instructionSection}\r\n      />\r\n\r\n      {/* üéØ HERO SECTION - Zone de mots cliquables */}\r\n      <HeroCard \r\n        content=\"\"\r\n        levelColor={levelColor}\r\n        showUnderline={false}\r\n        style={styles.heroCard}\r\n      >\r\n        <View style={styles.wordsContainer}>\r\n          {words.map((word, index) => {\r\n            const isSelected = selectedErrorIndices.includes(index);\r\n            const isError = showFeedback && (exercise.errorPositions || []).includes(index);\r\n            const isCorrectSelection = showFeedback && isSelected && isError;\r\n            const isIncorrectSelection = showFeedback && isSelected && !isError;\r\n\r\n            return (\r\n              <TouchableOpacity\r\n                key={`${word}-${index}`} // eslint-disable-next-line react/no-array-index-key\r\n                onPress={handleToggleErrorIndex(index)}\r\n                disabled={showFeedback}\r\n                style={[\r\n                  styles.word,\r\n                  isSelected && !showFeedback && {\r\n                    backgroundColor: `${levelColor}20`,\r\n                    borderColor: levelColor,\r\n                  },\r\n                  isCorrectSelection && styles.correctWord,\r\n                  isIncorrectSelection && styles.incorrectWord,\r\n                  isError && !isSelected && showFeedback && styles.missedErrorWord,\r\n                ]}\r\n              >\r\n                <Text\r\n                  style={[\r\n                    styles.wordText,\r\n                    isSelected && !showFeedback && { \r\n                      color: levelColor, \r\n                      fontWeight: \"600\" \r\n                    },\r\n                    isCorrectSelection && styles.correctWordText,\r\n                    isIncorrectSelection && styles.incorrectWordText,\r\n                    isError && !isSelected && showFeedback && styles.missedErrorWordText,\r\n                  ]}\r\n                >\r\n                  {word}\r\n                </Text>\r\n              </TouchableOpacity>\r\n            );\r\n          })}\r\n        </View>\r\n      </HeroCard>\r\n\r\n      {/* üìä AIDE CONTEXTUELLE */}\r\n      {!showFeedback && (\r\n        <ContentSection\r\n          title=\"Aide\"\r\n          content={`S√©lectionn√©s: ${selectedErrorIndices.length}/${expectedErrors} erreurs`}\r\n          levelColor={levelColor}\r\n          backgroundColor=\"#FAFBFC\"\r\n          style={styles.helpSection}\r\n        />\r\n      )}\r\n\r\n      {/* üí° FEEDBACK SI N√âCESSAIRE */}\r\n      {showFeedback && exercise.explanation && (\r\n        <ContentSection\r\n          title=\"Explication\"\r\n          content={exercise.explanation}\r\n          levelColor=\"#ef4444\"\r\n          backgroundColor=\"#fef2f2\"\r\n          style={styles.feedbackSection}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\n// PropTypes pour le composant IdentifyErrorsMode\r\nIdentifyErrorsMode.propTypes = {\r\n  exercise: PropTypes.shape({\r\n    text: PropTypes.string.isRequired,\r\n    errorPositions: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n    explanation: PropTypes.string,\r\n  }).isRequired,\r\n  selectedErrorIndices: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n  onToggleErrorIndex: PropTypes.func.isRequired,\r\n  showFeedback: PropTypes.bool.isRequired,\r\n  levelColor: PropTypes.string,\r\n};\r\n\r\nexport default IdentifyErrorsMode;"],"mappings":"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","ignoreList":[]}