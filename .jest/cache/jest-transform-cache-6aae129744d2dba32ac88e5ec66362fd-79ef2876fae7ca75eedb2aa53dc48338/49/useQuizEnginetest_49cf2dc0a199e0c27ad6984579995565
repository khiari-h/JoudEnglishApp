72db576ccef96551cb98b225a81c1dfd
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _reactNative = require("@testing-library/react-native");
var _useQuizEngine = _interopRequireDefault(require("../../src/hooks/useQuizEngine"));
describe('useQuizEngine', function () {
  var mockQuestions = [{
    word: 'hello',
    choices: ['bonjour', 'au revoir', 'merci', 'salut'],
    correctAnswer: 'bonjour'
  }, {
    word: 'goodbye',
    choices: ['au revoir', 'bonjour', 'merci', 'salut'],
    correctAnswer: 'au revoir'
  }];
  it('devrait initialiser correctement avec des questions', function () {
    var _renderHook = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)(mockQuestions);
      }),
      result = _renderHook.result;
    expect(result.current.currentQuestionIndex).toBe(0);
    expect(result.current.score).toBe(0);
    expect(result.current.selectedChoice).toBeNull();
    expect(result.current.showResult).toBe(false);
    expect(result.current.isFinished).toBe(false);
    expect(result.current.totalQuestions).toBe(2);
    expect(result.current.currentQuestion).toEqual(mockQuestions[0]);
    expect(result.current.progress).toBe(0);
    expect(result.current.userAnswers).toEqual([]);
  });
  it('devrait gérer correctement un quiz vide', function () {
    var _renderHook2 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)([]);
      }),
      result = _renderHook2.result;
    expect(result.current.totalQuestions).toBe(0);
    expect(result.current.currentQuestion).toBeNull();
    expect(result.current.progress).toBe(0);
    expect(result.current.isFinished).toBe(false);
  });
  it('devrait traiter une réponse correcte', function () {
    var _renderHook3 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)(mockQuestions);
      }),
      result = _renderHook3.result;
    (0, _reactNative.act)(function () {
      var isCorrect = result.current.handleAnswer('bonjour');
      expect(isCorrect).toBe(true);
    });
    expect(result.current.score).toBe(1);
    expect(result.current.selectedChoice).toBe('bonjour');
    expect(result.current.showResult).toBe(true);
    expect(result.current.userAnswers).toHaveLength(1);
    expect(result.current.userAnswers[0].isCorrect).toBe(true);
  });
  it('devrait traiter une réponse incorrecte', function () {
    var _renderHook4 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)(mockQuestions);
      }),
      result = _renderHook4.result;
    (0, _reactNative.act)(function () {
      var isCorrect = result.current.handleAnswer('au revoir');
      expect(isCorrect).toBe(false);
    });
    expect(result.current.score).toBe(0);
    expect(result.current.selectedChoice).toBe('au revoir');
    expect(result.current.showResult).toBe(true);
    expect(result.current.userAnswers).toHaveLength(1);
    expect(result.current.userAnswers[0].isCorrect).toBe(false);
  });
  it('devrait passer à la question suivante', function () {
    var _renderHook5 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)(mockQuestions);
      }),
      result = _renderHook5.result;
    (0, _reactNative.act)(function () {
      result.current.handleAnswer('bonjour');
      result.current.goToNextQuestion();
    });
    expect(result.current.currentQuestionIndex).toBe(1);
    expect(result.current.currentQuestion).toEqual(mockQuestions[1]);
    expect(result.current.selectedChoice).toBeNull();
    expect(result.current.showResult).toBe(false);
  });
  it('devrait marquer le quiz comme terminé après la dernière question', function () {
    var _renderHook6 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)(mockQuestions);
      }),
      result = _renderHook6.result;
    (0, _reactNative.act)(function () {
      result.current.handleAnswer('bonjour');
      result.current.goToNextQuestion();
    });
    (0, _reactNative.act)(function () {
      result.current.handleAnswer('au revoir');
      result.current.goToNextQuestion();
    });
    expect(result.current.isFinished).toBe(true);
    expect(result.current.currentQuestion).toBeNull();
  });
  it('devrait retourner false si handleAnswer est appelé avec un quiz vide', function () {
    var _renderHook7 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)([]);
      }),
      result = _renderHook7.result;
    var isCorrect = result.current.handleAnswer('bonjour');
    expect(isCorrect).toBe(false);
  });
  it('devrait retourner false si handleAnswer est appelé après la dernière question', function () {
    var _renderHook8 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)(mockQuestions);
      }),
      result = _renderHook8.result;
    (0, _reactNative.act)(function () {
      result.current.handleAnswer('bonjour');
      result.current.goToNextQuestion();
      result.current.handleAnswer('au revoir');
      result.current.goToNextQuestion();
    });
    var isCorrect = result.current.handleAnswer('merci');
    expect(isCorrect).toBe(false);
  });
  it('devrait redémarrer le quiz correctement', function () {
    var _renderHook9 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)(mockQuestions);
      }),
      result = _renderHook9.result;
    (0, _reactNative.act)(function () {
      result.current.handleAnswer('bonjour');
      result.current.goToNextQuestion();
      result.current.handleRestart();
    });
    expect(result.current.currentQuestionIndex).toBe(0);
    expect(result.current.score).toBe(0);
    expect(result.current.selectedChoice).toBeNull();
    expect(result.current.showResult).toBe(false);
    expect(result.current.isFinished).toBe(false);
    expect(result.current.userAnswers).toEqual([]);
    expect(result.current.currentQuestion).toEqual(mockQuestions[0]);
  });
  it('devrait empêcher les réponses multiples sur la même question', function () {
    var _renderHook0 = (0, _reactNative.renderHook)(function () {
        return (0, _useQuizEngine.default)(mockQuestions);
      }),
      result = _renderHook0.result;
    (0, _reactNative.act)(function () {
      result.current.handleAnswer('bonjour');
    });
    expect(result.current.showResult).toBe(true);
    (0, _reactNative.act)(function () {
      var secondAttempt = result.current.handleAnswer('salut');
      expect(secondAttempt).toBe(false);
    });
    expect(result.current.userAnswers).toHaveLength(1);
    expect(result.current.score).toBe(1);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX3VzZVF1aXpFbmdpbmUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiZGVzY3JpYmUiLCJtb2NrUXVlc3Rpb25zIiwid29yZCIsImNob2ljZXMiLCJjb3JyZWN0QW5zd2VyIiwiaXQiLCJfcmVuZGVySG9vayIsInJlbmRlckhvb2siLCJ1c2VRdWl6RW5naW5lIiwicmVzdWx0IiwiZXhwZWN0IiwiY3VycmVudCIsImN1cnJlbnRRdWVzdGlvbkluZGV4IiwidG9CZSIsInNjb3JlIiwic2VsZWN0ZWRDaG9pY2UiLCJ0b0JlTnVsbCIsInNob3dSZXN1bHQiLCJpc0ZpbmlzaGVkIiwidG90YWxRdWVzdGlvbnMiLCJjdXJyZW50UXVlc3Rpb24iLCJ0b0VxdWFsIiwicHJvZ3Jlc3MiLCJ1c2VyQW5zd2VycyIsIl9yZW5kZXJIb29rMiIsIl9yZW5kZXJIb29rMyIsImFjdCIsImlzQ29ycmVjdCIsImhhbmRsZUFuc3dlciIsInRvSGF2ZUxlbmd0aCIsIl9yZW5kZXJIb29rNCIsIl9yZW5kZXJIb29rNSIsImdvVG9OZXh0UXVlc3Rpb24iLCJfcmVuZGVySG9vazYiLCJfcmVuZGVySG9vazciLCJfcmVuZGVySG9vazgiLCJfcmVuZGVySG9vazkiLCJoYW5kbGVSZXN0YXJ0IiwiX3JlbmRlckhvb2swIiwic2Vjb25kQXR0ZW1wdCJdLCJzb3VyY2VzIjpbInVzZVF1aXpFbmdpbmUudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBfX3Rlc3RzX18vaG9va3MvdXNlUXVpekVuZ2luZS50ZXN0LmpzXG5pbXBvcnQgeyByZW5kZXJIb29rLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgdXNlUXVpekVuZ2luZSBmcm9tICcuLi8uLi9zcmMvaG9va3MvdXNlUXVpekVuZ2luZSc7XG5cbmRlc2NyaWJlKCd1c2VRdWl6RW5naW5lJywgKCkgPT4ge1xuICBjb25zdCBtb2NrUXVlc3Rpb25zID0gW1xuICAgIHtcbiAgICAgIHdvcmQ6ICdoZWxsbycsXG4gICAgICBjaG9pY2VzOiBbJ2JvbmpvdXInLCAnYXUgcmV2b2lyJywgJ21lcmNpJywgJ3NhbHV0J10sXG4gICAgICBjb3JyZWN0QW5zd2VyOiAnYm9uam91cicsXG4gICAgfSxcbiAgICB7XG4gICAgICB3b3JkOiAnZ29vZGJ5ZScsXG4gICAgICBjaG9pY2VzOiBbJ2F1IHJldm9pcicsICdib25qb3VyJywgJ21lcmNpJywgJ3NhbHV0J10sXG4gICAgICBjb3JyZWN0QW5zd2VyOiAnYXUgcmV2b2lyJyxcbiAgICB9LFxuICBdO1xuXG4gIGl0KCdkZXZyYWl0IGluaXRpYWxpc2VyIGNvcnJlY3RlbWVudCBhdmVjIGRlcyBxdWVzdGlvbnMnLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlUXVpekVuZ2luZShtb2NrUXVlc3Rpb25zKSk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmN1cnJlbnRRdWVzdGlvbkluZGV4KS50b0JlKDApO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zY29yZSkudG9CZSgwKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2VsZWN0ZWRDaG9pY2UpLnRvQmVOdWxsKCk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNob3dSZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0ZpbmlzaGVkKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudG90YWxRdWVzdGlvbnMpLnRvQmUoMik7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmN1cnJlbnRRdWVzdGlvbikudG9FcXVhbChtb2NrUXVlc3Rpb25zWzBdKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQucHJvZ3Jlc3MpLnRvQmUoMCk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnVzZXJBbnN3ZXJzKS50b0VxdWFsKFtdKTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgZ8OpcmVyIGNvcnJlY3RlbWVudCB1biBxdWl6IHZpZGUnLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlUXVpekVuZ2luZShbXSkpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC50b3RhbFF1ZXN0aW9ucykudG9CZSgwKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY3VycmVudFF1ZXN0aW9uKS50b0JlTnVsbCgpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5wcm9ncmVzcykudG9CZSgwKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNGaW5pc2hlZCkudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIGl0KCdkZXZyYWl0IHRyYWl0ZXIgdW5lIHLDqXBvbnNlIGNvcnJlY3RlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVF1aXpFbmdpbmUobW9ja1F1ZXN0aW9ucykpO1xuICAgIGFjdCgoKSA9PiB7XG4gICAgICBjb25zdCBpc0NvcnJlY3QgPSByZXN1bHQuY3VycmVudC5oYW5kbGVBbnN3ZXIoJ2JvbmpvdXInKTtcbiAgICAgIGV4cGVjdChpc0NvcnJlY3QpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNjb3JlKS50b0JlKDEpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zZWxlY3RlZENob2ljZSkudG9CZSgnYm9uam91cicpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zaG93UmVzdWx0KS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VyQW5zd2VycykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VyQW5zd2Vyc1swXS5pc0NvcnJlY3QpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIGl0KCdkZXZyYWl0IHRyYWl0ZXIgdW5lIHLDqXBvbnNlIGluY29ycmVjdGUnLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlUXVpekVuZ2luZShtb2NrUXVlc3Rpb25zKSk7XG4gICAgYWN0KCgpID0+IHtcbiAgICAgIGNvbnN0IGlzQ29ycmVjdCA9IHJlc3VsdC5jdXJyZW50LmhhbmRsZUFuc3dlcignYXUgcmV2b2lyJyk7XG4gICAgICBleHBlY3QoaXNDb3JyZWN0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2NvcmUpLnRvQmUoMCk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNlbGVjdGVkQ2hvaWNlKS50b0JlKCdhdSByZXZvaXInKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2hvd1Jlc3VsdCkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlckFuc3dlcnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlckFuc3dlcnNbMF0uaXNDb3JyZWN0KS50b0JlKGZhbHNlKTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgcGFzc2VyIMOgIGxhIHF1ZXN0aW9uIHN1aXZhbnRlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVF1aXpFbmdpbmUobW9ja1F1ZXN0aW9ucykpO1xuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBbnN3ZXIoJ2JvbmpvdXInKTtcbiAgICAgIHJlc3VsdC5jdXJyZW50LmdvVG9OZXh0UXVlc3Rpb24oKTtcbiAgICB9KTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY3VycmVudFF1ZXN0aW9uSW5kZXgpLnRvQmUoMSk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmN1cnJlbnRRdWVzdGlvbikudG9FcXVhbChtb2NrUXVlc3Rpb25zWzFdKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2VsZWN0ZWRDaG9pY2UpLnRvQmVOdWxsKCk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNob3dSZXN1bHQpLnRvQmUoZmFsc2UpO1xuICB9KTtcblxuICAvLyDinIUgVEVTVCBDT1JSSUfDiVxuICBpdCgnZGV2cmFpdCBtYXJxdWVyIGxlIHF1aXogY29tbWUgdGVybWluw6kgYXByw6hzIGxhIGRlcm5pw6hyZSBxdWVzdGlvbicsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VRdWl6RW5naW5lKG1vY2tRdWVzdGlvbnMpKTtcbiAgICBcbiAgICAvLyBSw6lwb25kcmUgw6AgbGEgcHJlbWnDqHJlIHF1ZXN0aW9uIGV0IHBhc3NlciDDoCBsYSBzdWl2YW50ZVxuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBbnN3ZXIoJ2JvbmpvdXInKTtcbiAgICAgIHJlc3VsdC5jdXJyZW50LmdvVG9OZXh0UXVlc3Rpb24oKTtcbiAgICB9KTtcblxuICAgIC8vIFLDqXBvbmRyZSDDoCBsYSBkZXJuacOocmUgcXVlc3Rpb24gZXQgcGFzc2VyIMOgIGxhIGZpbiBkdSBxdWl6XG4gICAgYWN0KCgpID0+IHtcbiAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZUFuc3dlcignYXUgcmV2b2lyJyk7XG4gICAgICByZXN1bHQuY3VycmVudC5nb1RvTmV4dFF1ZXN0aW9uKCk7XG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNGaW5pc2hlZCkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY3VycmVudFF1ZXN0aW9uKS50b0JlTnVsbCgpO1xuICB9KTtcblxuICBpdCgnZGV2cmFpdCByZXRvdXJuZXIgZmFsc2Ugc2kgaGFuZGxlQW5zd2VyIGVzdCBhcHBlbMOpIGF2ZWMgdW4gcXVpeiB2aWRlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVF1aXpFbmdpbmUoW10pKTtcbiAgICBjb25zdCBpc0NvcnJlY3QgPSByZXN1bHQuY3VycmVudC5oYW5kbGVBbnN3ZXIoJ2JvbmpvdXInKTtcbiAgICBleHBlY3QoaXNDb3JyZWN0KS50b0JlKGZhbHNlKTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgcmV0b3VybmVyIGZhbHNlIHNpIGhhbmRsZUFuc3dlciBlc3QgYXBwZWzDqSBhcHLDqHMgbGEgZGVybmnDqHJlIHF1ZXN0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVF1aXpFbmdpbmUobW9ja1F1ZXN0aW9ucykpO1xuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBbnN3ZXIoJ2JvbmpvdXInKTtcbiAgICAgIHJlc3VsdC5jdXJyZW50LmdvVG9OZXh0UXVlc3Rpb24oKTtcbiAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZUFuc3dlcignYXUgcmV2b2lyJyk7XG4gICAgICByZXN1bHQuY3VycmVudC5nb1RvTmV4dFF1ZXN0aW9uKCk7IC8vIEZpbiBkdSBxdWl6XG4gICAgfSk7XG4gICAgY29uc3QgaXNDb3JyZWN0ID0gcmVzdWx0LmN1cnJlbnQuaGFuZGxlQW5zd2VyKCdtZXJjaScpO1xuICAgIGV4cGVjdChpc0NvcnJlY3QpLnRvQmUoZmFsc2UpO1xuICB9KTtcblxuICBpdCgnZGV2cmFpdCByZWTDqW1hcnJlciBsZSBxdWl6IGNvcnJlY3RlbWVudCcsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VRdWl6RW5naW5lKG1vY2tRdWVzdGlvbnMpKTtcbiAgICBhY3QoKCkgPT4ge1xuICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlQW5zd2VyKCdib25qb3VyJyk7XG4gICAgICByZXN1bHQuY3VycmVudC5nb1RvTmV4dFF1ZXN0aW9uKCk7XG4gICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVSZXN0YXJ0KCk7XG4gICAgfSk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmN1cnJlbnRRdWVzdGlvbkluZGV4KS50b0JlKDApO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zY29yZSkudG9CZSgwKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2VsZWN0ZWRDaG9pY2UpLnRvQmVOdWxsKCk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNob3dSZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0ZpbmlzaGVkKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlckFuc3dlcnMpLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5jdXJyZW50UXVlc3Rpb24pLnRvRXF1YWwobW9ja1F1ZXN0aW9uc1swXSk7XG4gIH0pO1xuXG4gIGl0KCdkZXZyYWl0IGVtcMOqY2hlciBsZXMgcsOpcG9uc2VzIG11bHRpcGxlcyBzdXIgbGEgbcOqbWUgcXVlc3Rpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlUXVpekVuZ2luZShtb2NrUXVlc3Rpb25zKSk7XG4gICAgYWN0KCgpID0+IHtcbiAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZUFuc3dlcignYm9uam91cicpOyAvLyBQcmVtacOocmUgcsOpcG9uc2VcbiAgICB9KTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2hvd1Jlc3VsdCkudG9CZSh0cnVlKTtcbiAgICBhY3QoKCkgPT4ge1xuICAgICAgY29uc3Qgc2Vjb25kQXR0ZW1wdCA9IHJlc3VsdC5jdXJyZW50LmhhbmRsZUFuc3dlcignc2FsdXQnKTtcbiAgICAgIGV4cGVjdChzZWNvbmRBdHRlbXB0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlckFuc3dlcnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2NvcmUpLnRvQmUoMSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiO0FBQ0EsSUFBQUEsWUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsY0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBRUFHLFFBQVEsQ0FBQyxlQUFlLEVBQUUsWUFBTTtFQUM5QixJQUFNQyxhQUFhLEdBQUcsQ0FDcEI7SUFDRUMsSUFBSSxFQUFFLE9BQU87SUFDYkMsT0FBTyxFQUFFLENBQUMsU0FBUyxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQ25EQyxhQUFhLEVBQUU7RUFDakIsQ0FBQyxFQUNEO0lBQ0VGLElBQUksRUFBRSxTQUFTO0lBQ2ZDLE9BQU8sRUFBRSxDQUFDLFdBQVcsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUNuREMsYUFBYSxFQUFFO0VBQ2pCLENBQUMsQ0FDRjtFQUVEQyxFQUFFLENBQUMscURBQXFELEVBQUUsWUFBTTtJQUM5RCxJQUFBQyxXQUFBLEdBQW1CLElBQUFDLHVCQUFVLEVBQUM7UUFBQSxPQUFNLElBQUFDLHNCQUFhLEVBQUNQLGFBQWEsQ0FBQztNQUFBLEVBQUM7TUFBekRRLE1BQU0sR0FBQUgsV0FBQSxDQUFORyxNQUFNO0lBQ2RDLE1BQU0sQ0FBQ0QsTUFBTSxDQUFDRSxPQUFPLENBQUNDLG9CQUFvQixDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbkRILE1BQU0sQ0FBQ0QsTUFBTSxDQUFDRSxPQUFPLENBQUNHLEtBQUssQ0FBQyxDQUFDRCxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3BDSCxNQUFNLENBQUNELE1BQU0sQ0FBQ0UsT0FBTyxDQUFDSSxjQUFjLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUM7SUFDaEROLE1BQU0sQ0FBQ0QsTUFBTSxDQUFDRSxPQUFPLENBQUNNLFVBQVUsQ0FBQyxDQUFDSixJQUFJLENBQUMsS0FBSyxDQUFD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