613c18cb40b7ecd2ffaa15b023a4d2f7
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _ProgressCard = _interopRequireDefault(require("../../../../components/ui/ProgressCard"));
var _readingStats = require("../../../../utils/reading/readingStats.js");
var _propTypes = _interopRequireDefault(require("prop-types"));
var _jsxRuntime = require("react/jsx-runtime");
var ReadingProgress = function ReadingProgress(_ref) {
  var readingData = _ref.readingData,
    completedQuestions = _ref.completedQuestions,
    levelColor = _ref.levelColor,
    _ref$expanded = _ref.expanded,
    expanded = _ref$expanded === void 0 ? false : _ref$expanded,
    onToggleExpand = _ref.onToggleExpand,
    onExercisePress = _ref.onExercisePress;
  var getDataArray = function getDataArray() {
    if (!readingData) return [];
    if (Array.isArray(readingData)) {
      return readingData;
    }
    if (typeof readingData === 'object') {
      return readingData.exercises || readingData.texts || readingData.passages || readingData.readings || readingData.items || [];
    }
    return [];
  };
  var dataArray = getDataArray();
  var totalQuestionsCount = (0, _readingStats.calculateTotalQuestions)(dataArray);
  var completedQuestionsCount = (0, _readingStats.calculateCompletedQuestionsCount)(completedQuestions);
  var totalProgress = (0, _readingStats.calculateTotalProgress)(dataArray, completedQuestions);
  var exerciseProgressData = (0, _readingStats.calculateExerciseProgress)(dataArray, completedQuestions);
  var formattedExerciseData = exerciseProgressData.map(function (exercise) {
    return {
      title: exercise.title,
      completed: exercise.completedQuestions,
      total: exercise.totalQuestions,
      progress: exercise.progress
    };
  });
  return (0, _jsxRuntime.jsx)(_ProgressCard.default, {
    title: "Progression",
    progress: totalProgress,
    completed: completedQuestionsCount,
    total: totalQuestionsCount,
    unit: "questions",
    levelColor: levelColor,
    expandable: true,
    expanded: expanded,
    onToggleExpand: onToggleExpand,
    categoryData: formattedExerciseData,
    onCategoryPress: onExercisePress
  });
};
ReadingProgress.propTypes = {
  readingData: _propTypes.default.oneOfType([_propTypes.default.array, _propTypes.default.shape({
    exercises: _propTypes.default.array,
    texts: _propTypes.default.array,
    passages: _propTypes.default.array,
    readings: _propTypes.default.array,
    items: _propTypes.default.array
  })]).isRequired,
  completedQuestions: _propTypes.default.object,
  levelColor: _propTypes.default.string,
  expanded: _propTypes.default.bool,
  onToggleExpand: _propTypes.default.func,
  onExercisePress: _propTypes.default.func
};
var _default = exports.default = ReadingProgress;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfUHJvZ3Jlc3NDYXJkIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcmVhZGluZ1N0YXRzIiwiX3Byb3BUeXBlcyIsIl9qc3hSdW50aW1lIiwiUmVhZGluZ1Byb2dyZXNzIiwiX3JlZiIsInJlYWRpbmdEYXRhIiwiY29tcGxldGVkUXVlc3Rpb25zIiwibGV2ZWxDb2xvciIsIl9yZWYkZXhwYW5kZWQiLCJleHBhbmRlZCIsIm9uVG9nZ2xlRXhwYW5kIiwib25FeGVyY2lzZVByZXNzIiwiZ2V0RGF0YUFycmF5IiwiQXJyYXkiLCJpc0FycmF5IiwiZXhlcmNpc2VzIiwidGV4dHMiLCJwYXNzYWdlcyIsInJlYWRpbmdzIiwiaXRlbXMiLCJkYXRhQXJyYXkiLCJ0b3RhbFF1ZXN0aW9uc0NvdW50IiwiY2FsY3VsYXRlVG90YWxRdWVzdGlvbnMiLCJjb21wbGV0ZWRRdWVzdGlvbnNDb3VudCIsImNhbGN1bGF0ZUNvbXBsZXRlZFF1ZXN0aW9uc0NvdW50IiwidG90YWxQcm9ncmVzcyIsImNhbGN1bGF0ZVRvdGFsUHJvZ3Jlc3MiLCJleGVyY2lzZVByb2dyZXNzRGF0YSIsImNhbGN1bGF0ZUV4ZXJjaXNlUHJvZ3Jlc3MiLCJmb3JtYXR0ZWRFeGVyY2lzZURhdGEiLCJtYXAiLCJleGVyY2lzZSIsInRpdGxlIiwiY29tcGxldGVkIiwidG90YWwiLCJ0b3RhbFF1ZXN0aW9ucyIsInByb2dyZXNzIiwianN4IiwiZGVmYXVsdCIsInVuaXQiLCJleHBhbmRhYmxlIiwiY2F0ZWdvcnlEYXRhIiwib25DYXRlZ29yeVByZXNzIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwib25lT2ZUeXBlIiwiYXJyYXkiLCJzaGFwZSIsImlzUmVxdWlyZWQiLCJvYmplY3QiLCJzdHJpbmciLCJib29sIiwiZnVuYyIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWRpbmdQcm9ncmVzcy9pbmRleC5qcyAtIFZFUlNJT04gQ09SUklHw4lFIEFWRUMgRMOJVEVDVElPTiBBVVRPXHJcblxyXG5pbXBvcnQgUHJvZ3Jlc3NDYXJkIGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL3VpL1Byb2dyZXNzQ2FyZFwiO1xyXG5pbXBvcnQge1xyXG4gIGNhbGN1bGF0ZVRvdGFsUXVlc3Rpb25zLFxyXG4gIGNhbGN1bGF0ZUNvbXBsZXRlZFF1ZXN0aW9uc0NvdW50LFxyXG4gIGNhbGN1bGF0ZVRvdGFsUHJvZ3Jlc3MsXHJcbiAgY2FsY3VsYXRlRXhlcmNpc2VQcm9ncmVzcyxcclxufSBmcm9tIFwiLi4vLi4vLi4vLi4vdXRpbHMvcmVhZGluZy9yZWFkaW5nU3RhdHMuanNcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbi8qKlxyXG4gKiDwn5OKIFJlYWRpbmdQcm9ncmVzcyAtIFZlcnNpb24gQ29ycmlnw6llIGF2ZWMgZMOpdGVjdGlvbiBhdXRvbWF0aXF1ZVxyXG4gKiDinIUgRMOpdGVjdGUgYXV0b21hdGlxdWVtZW50IGxhIHN0cnVjdHVyZSBkZXMgZG9ubsOpZXNcclxuICog4pyFIEfDqHJlIGV4ZXJjaXNlcywgdGV4dHMsIHBhc3NhZ2VzLCBldGMuXHJcbiAqL1xyXG5jb25zdCBSZWFkaW5nUHJvZ3Jlc3MgPSAoe1xyXG4gIHJlYWRpbmdEYXRhLFxyXG4gIGNvbXBsZXRlZFF1ZXN0aW9ucyxcclxuICBsZXZlbENvbG9yLFxyXG4gIGV4cGFuZGVkID0gZmFsc2UsXHJcbiAgb25Ub2dnbGVFeHBhbmQsXHJcbiAgb25FeGVyY2lzZVByZXNzLFxyXG59KSA9PiB7XHJcbiAgXHJcbiAgLy8g4pyFIETDiVRFQ1RJT04gQVVUT01BVElRVUUgZGUgbGEgc3RydWN0dXJlXHJcbiAgY29uc3QgZ2V0RGF0YUFycmF5ID0gKCkgPT4ge1xyXG4gICAgaWYgKCFyZWFkaW5nRGF0YSkgcmV0dXJuIFtdO1xyXG4gICAgXHJcbiAgICAvLyBTaSBjJ2VzdCBkw6lqw6AgdW4gdGFibGVhdSBkaXJlY3RlbWVudFxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVhZGluZ0RhdGEpKSB7XHJcbiAgICAgIHJldHVybiByZWFkaW5nRGF0YTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU2kgYydlc3QgdW4gb2JqZXQgYXZlYyBkaWZmw6lyZW50ZXMgcHJvcHJpw6l0w6lzIHBvc3NpYmxlc1xyXG4gICAgaWYgKHR5cGVvZiByZWFkaW5nRGF0YSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgcmV0dXJuIHJlYWRpbmdEYXRhLmV4ZXJjaXNlcyB8fCBcclxuICAgICAgICAgICAgIHJlYWRpbmdEYXRhLnRleHRzIHx8IFxyXG4gICAgICAgICAgICAgcmVhZGluZ0RhdGEucGFzc2FnZXMgfHwgXHJcbiAgICAgICAgICAgICByZWFkaW5nRGF0YS5yZWFkaW5ncyB8fCBcclxuICAgICAgICAgICAgIHJlYWRpbmdEYXRhLml0ZW1zIHx8IFxyXG4gICAgICAgICAgICAgW107XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBbXTtcclxuICB9O1xyXG5cclxuICBjb25zdCBkYXRhQXJyYXkgPSBnZXREYXRhQXJyYXkoKTtcclxuICBcclxuICAvLyDinIUgVVRJTElTRSBsYSB2cmFpZSBzdHJ1Y3R1cmUgZMOpdGVjdMOpZVxyXG4gIGNvbnN0IHRvdGFsUXVlc3Rpb25zQ291bnQgPSBjYWxjdWxhdGVUb3RhbFF1ZXN0aW9ucyhkYXRhQXJyYXkpO1xyXG4gIGNvbnN0IGNvbXBsZXRlZFF1ZXN0aW9uc0NvdW50ID0gY2FsY3VsYXRlQ29tcGxldGVkUXVlc3Rpb25zQ291bnQoY29tcGxldGVkUXVlc3Rpb25zKTtcclxuICBjb25zdCB0b3RhbFByb2dyZXNzID0gY2FsY3VsYXRlVG90YWxQcm9ncmVzcyhkYXRhQXJyYXksIGNvbXBsZXRlZFF1ZXN0aW9ucyk7XHJcbiAgY29uc3QgZXhlcmNpc2VQcm9ncmVzc0RhdGEgPSBjYWxjdWxhdGVFeGVyY2lzZVByb2dyZXNzKGRhdGFBcnJheSwgY29tcGxldGVkUXVlc3Rpb25zKTtcclxuXHJcbiAgLy8gVHJhbnNmb3JtYXRpb24gcG91ciBsZSBmb3JtYXQgUHJvZ3Jlc3NDYXJkXHJcbiAgY29uc3QgZm9ybWF0dGVkRXhlcmNpc2VEYXRhID0gZXhlcmNpc2VQcm9ncmVzc0RhdGEubWFwKChleGVyY2lzZSkgPT4gKHtcclxuICAgIHRpdGxlOiBleGVyY2lzZS50aXRsZSxcclxuICAgIGNvbXBsZXRlZDogZXhlcmNpc2UuY29tcGxldGVkUXVlc3Rpb25zLFxyXG4gICAgdG90YWw6IGV4ZXJjaXNlLnRvdGFsUXVlc3Rpb25zLFxyXG4gICAgcHJvZ3Jlc3M6IGV4ZXJjaXNlLnByb2dyZXNzLFxyXG4gIH0pKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxQcm9ncmVzc0NhcmRcclxuICAgICAgdGl0bGU9XCJQcm9ncmVzc2lvblwiIC8vIOKchSBUaXRyZSB1bmlmb3JtZVxyXG4gICAgICBwcm9ncmVzcz17dG90YWxQcm9ncmVzc31cclxuICAgICAgY29tcGxldGVkPXtjb21wbGV0ZWRRdWVzdGlvbnNDb3VudH1cclxuICAgICAgdG90YWw9e3RvdGFsUXVlc3Rpb25zQ291bnR9XHJcbiAgICAgIHVuaXQ9XCJxdWVzdGlvbnNcIlxyXG4gICAgICBsZXZlbENvbG9yPXtsZXZlbENvbG9yfVxyXG4gICAgICBleHBhbmRhYmxlXHJcbiAgICAgIGV4cGFuZGVkPXtleHBhbmRlZH1cclxuICAgICAgb25Ub2dnbGVFeHBhbmQ9e29uVG9nZ2xlRXhwYW5kfVxyXG4gICAgICBjYXRlZ29yeURhdGE9e2Zvcm1hdHRlZEV4ZXJjaXNlRGF0YX1cclxuICAgICAgb25DYXRlZ29yeVByZXNzPXtvbkV4ZXJjaXNlUHJlc3N9XHJcbiAgICAvPlxyXG4gICk7XHJcbn07XHJcblxyXG4vLyDinIUgQWpvdXQgZGUgbGEgdmFsaWRhdGlvbiBkZXMgcHJvcHNcclxuUmVhZGluZ1Byb2dyZXNzLnByb3BUeXBlcyA9IHtcclxuICAvLyAncmVhZGluZ0RhdGEnIGVzdCBtYW5xdWFudCBkYW5zIGxhIHZhbGlkYXRpb25cclxuICByZWFkaW5nRGF0YTogUHJvcFR5cGVzLm9uZU9mVHlwZShbXHJcbiAgICBQcm9wVHlwZXMuYXJyYXksXHJcbiAgICBQcm9wVHlwZXMuc2hhcGUoe1xyXG4gICAgICBleGVyY2lzZXM6IFByb3BUeXBlcy5hcnJheSxcclxuICAgICAgdGV4dHM6IFByb3BUeXBlcy5hcnJheSxcclxuICAgICAgcGFzc2FnZXM6IFByb3BUeXBlcy5hcnJheSxcclxuICAgICAgcmVhZGluZ3M6IFByb3BUeXBlcy5hcnJheSxcclxuICAgICAgaXRlbXM6IFByb3BUeXBlcy5hcnJheSxcclxuICAgIH0pXHJcbiAgXSkuaXNSZXF1aXJlZCxcclxuICAvLyAnY29tcGxldGVkUXVlc3Rpb25zJyBlc3QgbWFucXVhbnQgZGFucyBsYSB2YWxpZGF0aW9uXHJcbiAgY29tcGxldGVkUXVlc3Rpb25zOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIC8vICdsZXZlbENvbG9yJyBlc3QgbWFucXVhbnQgZGFucyBsYSB2YWxpZGF0aW9uXHJcbiAgbGV2ZWxDb2xvcjogUHJvcFR5cGVzLnN0cmluZyxcclxuICAvLyAnZXhwYW5kZWQnIGVzdCBtYW5xdWFudCBkYW5zIGxhIHZhbGlkYXRpb25cclxuICBleHBhbmRlZDogUHJvcFR5cGVzLmJvb2wsXHJcbiAgLy8gJ29uVG9nZ2xlRXhwYW5kJyBlc3QgbWFucXVhbnQgZGFucyBsYSB2YWxpZGF0aW9uXHJcbiAgb25Ub2dnbGVFeHBhbmQ6IFByb3BUeXBlcy5mdW5jLFxyXG4gIC8vICdvbkV4ZXJjaXNlUHJlc3MnIGVzdCBtYW5xdWFudCBkYW5zIGxhIHZhbGlkYXRpb25cclxuICBvbkV4ZXJjaXNlUHJlc3M6IFByb3BUeXBlcy5mdW5jLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVhZGluZ1Byb2dyZXNzOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFELE9BQUE7QUFN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