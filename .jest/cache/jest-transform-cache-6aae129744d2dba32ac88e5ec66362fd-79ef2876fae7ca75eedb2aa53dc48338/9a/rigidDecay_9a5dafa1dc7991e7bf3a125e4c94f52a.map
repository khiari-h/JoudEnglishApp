{"version":3,"names":["Object","defineProperty","exports","value","rigidDecay","_utils","require","_worklet_17136436146384_init_data","code","location","sourceMap","version","_e","global","Error","animation","now","config","lastTimestamp","startTimestamp","initialVelocity","current","velocity","deltaTime","Math","min","v","exp","deceleration","SLOPE_FACTOR","velocityFactor","clamp","abs","VELOCITY_EPS","__closure","__workletHash","__initData","__stackDetails"],"sources":["rigidDecay.ts"],"sourcesContent":["'use strict';\nimport { SLOPE_FACTOR, VELOCITY_EPS } from './utils';\nimport type { DefaultDecayConfig, InnerDecayAnimation } from './utils';\n\nexport function rigidDecay(\n  animation: InnerDecayAnimation,\n  now: number,\n  config: DefaultDecayConfig\n): boolean {\n  'worklet';\n  const { lastTimestamp, startTimestamp, initialVelocity, current, velocity } =\n    animation;\n\n  const deltaTime = Math.min(now - lastTimestamp, 64);\n  const v =\n    velocity *\n    Math.exp(\n      -(1 - config.deceleration) * (now - startTimestamp) * SLOPE_FACTOR\n    );\n  animation.current = current + (v * config.velocityFactor * deltaTime) / 1000;\n  animation.velocity = v;\n  animation.lastTimestamp = now;\n\n  if (config.clamp) {\n    if (initialVelocity < 0 && animation.current <= config.clamp[0]) {\n      animation.current = config.clamp[0];\n      return true;\n    } else if (initialVelocity > 0 && animation.current >= config.clamp[1]) {\n      animation.current = config.clamp[1];\n      return true;\n    }\n  }\n  return Math.abs(v) < VELOCITY_EPS;\n}\n"],"mappings":"AAAA,YAAY;;AAACA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,UAAA;AACb,IAAAC,MAAA,GAAAC,OAAA;AAAqD,IAAAC,iCAAA;EAAAC,IAAA;EAAAC,QAAA;EAAAC,SAAA;EAAAC,OAAA;AAAA;AAAA,IAAAP,UAAA,GAAAF,OAAA,CAAAE,UAAA,GAG9C;EAAA,IAAAQ,EAAA,QAAAC,MAAA,CAAAC,KAAA;EAAA,IAAAV,UAAA,YAAAA,WACLW,SAA8B,EAC9BC,GAAW,EACXC,MAA0B,EACjB;IAET,IAAQC,aAAa,GACnBH,SAAS,CADHG,aAAa;MAAEC,cAAc,GACnCJ,SAAS,CADYI,cAAc;MAAEC,eAAe,GACpDL,SAAS,CAD4BK,eAAe;MAAEC,OAAO,GAC7DN,SAAS,CAD6CM,OAAO;MAAEC,QAAQ,GACvEP,SAAS,CADsDO,QAAQ;IAGzE,IAAMC,SAAS,GAAGC,IAAI,CAACC,GAAG,CAACT,GAAG,GAAGE,aAAa,EAAE,EAAE,CAAC;IACnD,IAAMQ,CAAC,GACLJ,QAAQ,GACRE,IAAI,CAACG,GAAG,CACN,EAAE,CAAC,GAAGV,MAAM,CAACW,YAAY,CAAC,IAAIZ,GAAG,GAAGG,cAAc,CAAC,GAAGU,mBACxD,CAAC;IACHd,SAAS,CAACM,OAAO,GAAGA,OAAO,GAAIK,CAAC,GAAGT,MAAM,CAACa,cAAc,GAAGP,SAAS,GAAI,IAAI;IAC5ER,SAAS,CAACO,QAAQ,GAAGI,CAAC;IACtBX,SAAS,CAACG,aAAa,GAAGF,GAAG;IAE7B,IAAIC,MAAM,CAACc,KAAK,EAAE;MAChB,IAAIX,eAAe,GAAG,CAAC,IAAIL,SAAS,CAACM,OAAO,IAAIJ,MAAM,CAACc,KAAK,CAAC,CAAC,CAAC,EAAE;QAC/DhB,SAAS,CAACM,OAAO,GAAGJ,MAAM,CAACc,KAAK,CAAC,CAAC,CAAC;QACnC,OAAO,IAAI;MACb,CAAC,MAAM,IAAIX,eAAe,GAAG,CAAC,IAAIL,SAAS,CAACM,OAAO,IAAIJ,MAAM,CAACc,KAAK,CAAC,CAAC,CAAC,EAAE;QACtEhB,SAAS,CAACM,OAAO,GAAGJ,MAAM,CAACc,KAAK,CAAC,CAAC,CAAC;QACnC,OAAO,IAAI;MACb;IACF;IACA,OAAOP,IAAI,CAACQ,GAAG,CAACN,CAAC,CAAC,GAAGO,mBAAY;EACnC,CAAC;EAAA7B,UAAA,CAAA8B,SAAA;IAAAL,YAAA,EAhB2DA,mBAAY;IAAAI,YAAA,EAejDA;EAAY;EAAA7B,UAAA,CAAA+B,aAAA;EAAA/B,UAAA,CAAAgC,UAAA,GAAA7B,iCAAA;EAAAH,UAAA,CAAAiC,cAAA,GAAAzB,EAAA;EAAA,OAAAR,UAAA;AAAA,CA5B5B","ignoreList":[]}