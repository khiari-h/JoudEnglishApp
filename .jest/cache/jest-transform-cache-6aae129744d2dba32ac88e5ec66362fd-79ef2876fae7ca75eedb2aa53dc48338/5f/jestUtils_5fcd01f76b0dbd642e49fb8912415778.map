{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","withReanimatedTimer","setUpTests","getAnimatedStyle","advanceAnimationByTime","advanceAnimationByFrame","_slicedToArray2","_PlatformChecker","_errors","defaultFramerateConfig","fps","isEmpty","obj","keys","length","getStylesFromObject","undefined","fromEntries","entries","map","_ref","_ref2","default","property","_isReanimatedSharedValue","getCurrentStyle","component","_component$props$jest","styleObject","props","style","currentStyle","Array","isArray","forEach","assign","jestInlineStyles","jestInlineStyle","jestAnimatedStyleValue","jestAnimatedStyle","inlineStyles","checkEqual","current","expected","i","findStyleDiff","shouldMatchAllProps","diffs","isEqual","push","expect","compareStyle","expectedStyle","config","message","pass","_findStyleDiff","currentStyleStr","JSON","stringify","expectedStyleStr","differences","diff","join","frameTime","Math","round","beforeTest","jest","useFakeTimers","afterTest","runOnlyPendingTimers","useRealTimers","animationTest","console","warn","time","arguments","advanceTimersByTime","count","requireFunction","isJest","ReanimatedError","userFramerateConfig","global","expectModule","jestGlobals","extend","framerateConfig","toHaveAnimatedStyle"],"sources":["jestUtils.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-namespace */\n'use strict';\n\nimport type { ReactTestInstance } from 'react-test-renderer';\nimport type {\n  AnimatedComponentProps,\n  IAnimatedComponentInternal,\n  InitialComponentProps,\n} from './createAnimatedComponent/commonTypes';\nimport { isJest } from './PlatformChecker';\nimport type { DefaultStyle } from './hook/commonTypes';\nimport { ReanimatedError } from './errors';\n\ndeclare global {\n  namespace jest {\n    interface Matchers<R> {\n      toHaveAnimatedStyle(\n        style: Record<string, unknown>[] | Record<string, unknown>,\n        config?: {\n          shouldMatchAllProps?: boolean;\n        }\n      ): R;\n    }\n  }\n}\n\nconst defaultFramerateConfig = {\n  fps: 60,\n};\n\nconst isEmpty = (obj: object) => Object.keys(obj).length === 0;\nconst getStylesFromObject = (obj: object) => {\n  return obj === undefined\n    ? {}\n    : Object.fromEntries(\n        Object.entries(obj).map(([property, value]) => [\n          property,\n          value._isReanimatedSharedValue ? value.value : value,\n        ])\n      );\n};\n\ntype StyleValue = { value: unknown };\ntype JestInlineStyle =\n  | {\n      [s: string]: StyleValue;\n    }\n  | ArrayLike<StyleValue>;\n\nconst getCurrentStyle = (component: TestComponent): DefaultStyle => {\n  const styleObject = component.props.style;\n\n  let currentStyle = {};\n\n  if (Array.isArray(styleObject)) {\n    // It is possible that style may contain nested arrays. Currently, neither `StyleSheet.flatten` nor `flattenArray` solve this issue.\n    // Hence, we're not handling nested arrays at the moment - this is a known limitation of the current implementation.\n    styleObject.forEach((style) => {\n      currentStyle = {\n        ...currentStyle,\n        ...style,\n      };\n    });\n\n    return currentStyle;\n  }\n\n  const jestInlineStyles = component.props.jestInlineStyle as JestInlineStyle;\n  const jestAnimatedStyleValue = component.props.jestAnimatedStyle?.value;\n\n  if (Array.isArray(jestInlineStyles)) {\n    for (const obj of jestInlineStyles) {\n      if ('jestAnimatedStyle' in obj) {\n        continue;\n      }\n\n      const inlineStyles = getStylesFromObject(obj);\n\n      currentStyle = {\n        ...currentStyle,\n        ...inlineStyles,\n      };\n    }\n\n    currentStyle = {\n      ...styleObject,\n      ...currentStyle,\n      ...jestAnimatedStyleValue,\n    };\n\n    return currentStyle;\n  }\n\n  const inlineStyles = getStylesFromObject(jestInlineStyles);\n\n  currentStyle = isEmpty(jestAnimatedStyleValue as object)\n    ? { ...styleObject, ...inlineStyles }\n    : { ...styleObject, ...jestAnimatedStyleValue };\n\n  return currentStyle;\n};\n\nconst checkEqual = <Value>(current: Value, expected: Value) => {\n  if (Array.isArray(expected)) {\n    if (!Array.isArray(current) || expected.length !== current.length) {\n      return false;\n    }\n    for (let i = 0; i < current.length; i++) {\n      if (!checkEqual(current[i], expected[i])) {\n        return false;\n      }\n    }\n  } else if (typeof current === 'object' && current) {\n    if (typeof expected !== 'object' || !expected) {\n      return false;\n    }\n    for (const property in expected) {\n      if (!checkEqual(current[property], expected[property])) {\n        return false;\n      }\n    }\n  } else {\n    return current === expected;\n  }\n  return true;\n};\n\nconst findStyleDiff = (\n  current: DefaultStyle,\n  expected: DefaultStyle,\n  shouldMatchAllProps?: boolean\n) => {\n  const diffs = [];\n  let isEqual = true;\n  let property: keyof DefaultStyle;\n  for (property in expected) {\n    if (!checkEqual(current[property], expected[property])) {\n      isEqual = false;\n      diffs.push({\n        property,\n        current: current[property],\n        expect: expected[property],\n      });\n    }\n  }\n\n  if (\n    shouldMatchAllProps &&\n    Object.keys(current).length !== Object.keys(expected).length\n  ) {\n    isEqual = false;\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    let property: keyof DefaultStyle;\n    for (property in current) {\n      if (expected[property] === undefined) {\n        diffs.push({\n          property,\n          current: current[property],\n          expect: expected[property],\n        });\n      }\n    }\n  }\n\n  return { isEqual, diffs };\n};\n\nconst compareStyle = (\n  component: TestComponent,\n  expectedStyle: DefaultStyle,\n  config: ToHaveAnimatedStyleConfig\n) => {\n  if (!component.props.style) {\n    return { message: () => `Component doesn't have a style.`, pass: false };\n  }\n  const { shouldMatchAllProps } = config;\n  const currentStyle = getCurrentStyle(component);\n  const { isEqual, diffs } = findStyleDiff(\n    currentStyle,\n    expectedStyle,\n    shouldMatchAllProps\n  );\n\n  if (isEqual) {\n    return { message: () => 'ok', pass: true };\n  }\n\n  const currentStyleStr = JSON.stringify(currentStyle);\n  const expectedStyleStr = JSON.stringify(expectedStyle);\n  const differences = diffs\n    .map(\n      (diff) =>\n        `- '${diff.property}' should be ${JSON.stringify(\n          diff.expect\n        )}, but is ${JSON.stringify(diff.current)}`\n    )\n    .join('\\n');\n\n  return {\n    message: () =>\n      `Expected: ${expectedStyleStr}\\nReceived: ${currentStyleStr}\\n\\nDifferences:\\n${differences}`,\n    pass: false,\n  };\n};\n\nlet frameTime = Math.round(1000 / defaultFramerateConfig.fps);\n\nconst beforeTest = () => {\n  jest.useFakeTimers();\n};\n\nconst afterTest = () => {\n  jest.runOnlyPendingTimers();\n  jest.useRealTimers();\n};\n\nexport const withReanimatedTimer = (animationTest: () => void) => {\n  console.warn(\n    'This method is deprecated, you should define your own before and after test hooks to enable jest.useFakeTimers(). Check out the documentation for details on testing'\n  );\n  beforeTest();\n  animationTest();\n  afterTest();\n};\n\nexport const advanceAnimationByTime = (time = frameTime) => {\n  console.warn(\n    'This method is deprecated, use jest.advanceTimersByTime directly'\n  );\n  jest.advanceTimersByTime(time);\n  jest.runOnlyPendingTimers();\n};\n\nexport const advanceAnimationByFrame = (count: number) => {\n  console.warn(\n    'This method is deprecated, use jest.advanceTimersByTime directly'\n  );\n  jest.advanceTimersByTime(count * frameTime);\n  jest.runOnlyPendingTimers();\n};\n\nconst requireFunction = isJest()\n  ? require\n  : () => {\n      throw new ReanimatedError(\n        '`setUpTests` is available only in Jest environment.'\n      );\n    };\n\ntype ToHaveAnimatedStyleConfig = {\n  shouldMatchAllProps?: boolean;\n};\n\nexport const setUpTests = (userFramerateConfig = {}) => {\n  let expect: jest.Expect = (global as typeof global & { expect: jest.Expect })\n    .expect;\n  if (expect === undefined) {\n    const expectModule = requireFunction('expect');\n    expect = expectModule;\n    // Starting from Jest 28, \"expect\" package uses named exports instead of default export.\n    // So, requiring \"expect\" package doesn't give direct access to \"expect\" function anymore.\n    // It gives access to the module object instead.\n    // We use this info to detect if the project uses Jest 28 or higher.\n    if (typeof expect === 'object') {\n      const jestGlobals = requireFunction('@jest/globals');\n      expect = jestGlobals.expect;\n    }\n    if (expect === undefined || expect.extend === undefined) {\n      expect = expectModule.default;\n    }\n  }\n\n  const framerateConfig = {\n    ...defaultFramerateConfig,\n    ...userFramerateConfig,\n  };\n  frameTime = Math.round(1000 / framerateConfig.fps);\n\n  expect.extend({\n    toHaveAnimatedStyle(\n      component: React.Component<\n        AnimatedComponentProps<InitialComponentProps>\n      > &\n        IAnimatedComponentInternal,\n      expectedStyle: DefaultStyle,\n      config: ToHaveAnimatedStyleConfig = {}\n    ) {\n      return compareStyle(component, expectedStyle, config);\n    },\n  });\n};\n\ntype TestComponent = React.Component<\n  AnimatedComponentProps<InitialComponentProps> & {\n    jestAnimatedStyle?: { value: DefaultStyle };\n  }\n>;\n\nexport const getAnimatedStyle = (component: ReactTestInstance) => {\n  return getCurrentStyle(\n    // This type assertion is needed to get type checking in the following\n    // functions since `ReactTestInstance` has its `props` defined as `any`.\n    component as unknown as TestComponent\n  );\n};\n"],"mappings":"AACA,YAAY;;AAAC,IAAAA,sBAAA,GAAAC,OAAA;AAAAC,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,mBAAA,GAAAF,OAAA,CAAAG,UAAA,GAAAH,OAAA,CAAAI,gBAAA,GAAAJ,OAAA,CAAAK,sBAAA,GAAAL,OAAA,CAAAM,uBAAA;AAAA,IAAAC,eAAA,GAAAX,sBAAA,CAAAC,OAAA;AAQb,IAAAW,gBAAA,GAAAX,OAAA;AAEA,IAAAY,OAAA,GAAAZ,OAAA;AAeA,IAAMa,sBAAsB,GAAG;EAC7BC,GAAG,EAAE;AACP,CAAC;AAED,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAIC,GAAW;EAAA,OAAKf,MAAM,CAACgB,IAAI,CAACD,GAAG,CAAC,CAACE,MAAM,KAAK,CAAC;AAAA;AAC9D,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIH,GAAW,EAAK;EAC3C,OAAOA,GAAG,KAAKI,SAAS,GACpB,CAAC,CAAC,GACFnB,MAAM,CAACoB,WAAW,CAChBpB,MAAM,CAACqB,OAAO,CAACN,GAAG,CAAC,CAACO,GAAG,CAAC,UAAAC,IAAA;IAAA,IAAAC,KAAA,OAAAf,eAAA,CAAAgB,OAAA,EAAAF,IAAA;MAAEG,QAAQ,GAAAF,KAAA;MAAErB,KAAK,GAAAqB,KAAA;IAAA,OAAM,CAC7CE,QAAQ,EACRvB,KAAK,CAACwB,wBAAwB,GAAGxB,KAAK,CAACA,KAAK,GAAGA,KAAK,CACrD;EAAA,EACH,CAAC;AACP,CAAC;AASD,IAAMyB,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,SAAwB,EAAmB;EAAA,IAAAC,qBAAA;EAClE,IAAMC,WAAW,GAAGF,SAAS,CAACG,KAAK,CAACC,KAAK;EAEzC,IAAIC,YAAY,GAAG,CAAC,CAAC;EAErB,IAAIC,KAAK,CAACC,OAAO,CAACL,WAAW,CAAC,EAAE;IAG9BA,WAAW,CAACM,OAAO,CAAC,UAACJ,KAAK,EAAK;MAC7BC,YAAY,GAAAlC,MAAA,CAAAsC,MAAA,KACPJ,YAAY,EACZD,KAAK,CACT;IACH,CAAC,CAAC;IAEF,OAAOC,YAAY;EACrB;EAEA,IAAMK,gBAAgB,GAAGV,SAAS,CAACG,KAAK,CAACQ,eAAkC;EAC3E,IAAMC,sBAAsB,IAAAX,qBAAA,GAAGD,SAAS,CAACG,KAAK,CAACU,iBAAiB,qBAAjCZ,qBAAA,CAAmC3B,KAAK;EAEvE,IAAIgC,KAAK,CAACC,OAAO,CAACG,gBAAgB,CAAC,EAAE;IACnC,KAAK,IAAMxB,GAAG,IAAIwB,gBAAgB,EAAE;MAClC,IAAI,mBAAmB,IAAIxB,GAAG,EAAE;QAC9B;MACF;MAEA,IAAM4B,aAAY,GAAGzB,mBAAmB,CAACH,GAAG,CAAC;MAE7CmB,YAAY,GAAAlC,MAAA,CAAAsC,MAAA,KACPJ,YAAY,EACZS,aAAY,CAChB;IACH;IAEAT,YAAY,GAAAlC,MAAA,CAAAsC,MAAA,KACPP,WAAW,EACXG,YAAY,EACZO,sBAAsB,CAC1B;IAED,OAAOP,YAAY;EACrB;EAEA,IAAMS,YAAY,GAAGzB,mBAAmB,CAACqB,gBAAgB,CAAC;EAE1DL,YAAY,GAAGpB,OAAO,CAAC2B,sBAAgC,CAAC,GAAAzC,MAAA,CAAAsC,MAAA,KAC/CP,WAAW,EAAKY,YAAY,IAAA3C,MAAA,CAAAsC,MAAA,KAC5BP,WAAW,EAAKU,sBAAsB,CAAE;EAEjD,OAAOP,YAAY;AACrB,CAAC;AAED,IAAMU,WAAU,GAAG,SAAbA,UAAUA,CAAWC,OAAc,EAAEC,QAAe,EAAK;EAC7D,IAAIX,KAAK,CAACC,OAAO,CAACU,QAAQ,CAAC,EAAE;IAC3B,IAAI,CAACX,KAAK,CAACC,OAAO,CAACS,OAAO,CAAC,IAAIC,QAAQ,CAAC7B,MAAM,KAAK4B,OAAO,CAAC5B,MAAM,EAAE;MACjE,OAAO,KAAK;IACd;IACA,KAAK,IAAI8B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,OAAO,CAAC5B,MAAM,EAAE8B,CAAC,EAAE,EAAE;MACvC,IAAI,CAACH,WAAU,CAACC,OAAO,CAACE,CAAC,CAAC,EAAED,QAAQ,CAACC,CAAC,CAAC,CAAC,EAAE;QACxC,OAAO,KAAK;MACd;IACF;EACF,CAAC,MAAM,IAAI,OAAOF,OAAO,KAAK,QAAQ,IAAIA,OAAO,EAAE;IACjD,IAAI,OAAOC,QAAQ,KAAK,QAAQ,IAAI,CAACA,QAAQ,EAAE;MAC7C,OAAO,KAAK;IACd;IACA,KAAK,IAAMpB,QAAQ,IAAIoB,QAAQ,EAAE;MAC/B,IAAI,CAACF,WAAU,CAACC,OAAO,CAACnB,QAAQ,CAAC,EAAEoB,QAAQ,CAACpB,QAAQ,CAAC,CAAC,EAAE;QACtD,OAAO,KAAK;MACd;IACF;EACF,CAAC,MAAM;IACL,OAAOmB,OAAO,KAAKC,QAAQ;EAC7B;EACA,OAAO,IAAI;AACb,CAAC;AAED,IAAME,aAAa,GAAG,SAAhBA,aAAaA,CACjBH,OAAqB,EACrBC,QAAsB,EACtBG,mBAA6B,EAC1B;EACH,IAAMC,KAAK,GAAG,EAAE;EAChB,IAAIC,OAAO,GAAG,IAAI;EAClB,IAAIzB,QAA4B;EAChC,KAAKA,QAAQ,IAAIoB,QAAQ,EAAE;IACzB,IAAI,CAACF,WAAU,CAACC,OAAO,CAACnB,QAAQ,CAAC,EAAEoB,QAAQ,CAACpB,QAAQ,CAAC,CAAC,EAAE;MACtDyB,OAAO,GAAG,KAAK;MACfD,KAAK,CAACE,IAAI,CAAC;QACT1B,QAAQ,EAARA,QAAQ;QACRmB,OAAO,EAAEA,OAAO,CAACnB,QAAQ,CAAC;QAC1B2B,MAAM,EAAEP,QAAQ,CAACpB,QAAQ;MAC3B,CAAC,CAAC;IACJ;EACF;EAEA,IACEuB,mBAAmB,IACnBjD,MAAM,CAACgB,IAAI,CAAC6B,OAAO,CAAC,CAAC5B,MAAM,KAAKjB,MAAM,CAACgB,IAAI,CAAC8B,QAAQ,CAAC,CAAC7B,MAAM,EAC5D;IACAkC,OAAO,GAAG,KAAK;IAEf,IAAIzB,SAA4B;IAChC,KAAKA,SAAQ,IAAImB,OAAO,EAAE;MACxB,IAAIC,QAAQ,CAACpB,SAAQ,CAAC,KAAKP,SAAS,EAAE;QACpC+B,KAAK,CAACE,IAAI,CAAC;UACT1B,QAAQ,EAARA,SAAQ;UACRmB,OAAO,EAAEA,OAAO,CAACnB,SAAQ,CAAC;UAC1B2B,MAAM,EAAEP,QAAQ,CAACpB,SAAQ;QAC3B,CAAC,CAAC;MACJ;IACF;EACF;EAEA,OAAO;IAAEyB,OAAO,EAAPA,OAAO;IAAED,KAAK,EAALA;EAAM,CAAC;AAC3B,CAAC;AAED,IAAMI,YAAY,GAAG,SAAfA,YAAYA,CAChBzB,SAAwB,EACxB0B,aAA2B,EAC3BC,MAAiC,EAC9B;EACH,IAAI,CAAC3B,SAAS,CAACG,KAAK,CAACC,KAAK,EAAE;IAC1B,OAAO;MAAEwB,OAAO,EAAE,SAATA,OAAOA,CAAA;QAAA,OAAQ,iCAAiC;MAAA;MAAEC,IAAI,EAAE;IAAM,CAAC;EAC1E;EACA,IAAQT,mBAAmB,GAAKO,MAAM,CAA9BP,mBAAmB;EAC3B,IAAMf,YAAY,GAAGN,eAAe,CAACC,SAAS,CAAC;EAC/C,IAAA8B,cAAA,GAA2BX,aAAa,CACtCd,YAAY,EACZqB,aAAa,EACbN,mBACF,CAAC;IAJOE,OAAO,GAAAQ,cAAA,CAAPR,OAAO;IAAED,KAAK,GAAAS,cAAA,CAALT,KAAK;EAMtB,IAAIC,OAAO,EAAE;IACX,OAAO;MAAEM,OAAO,EAAE,SAATA,OAAOA,CAAA;QAAA,OAAQ,IAAI;MAAA;MAAEC,IAAI,EAAE;IAAK,CAAC;EAC5C;EAEA,IAAME,eAAe,GAAGC,IAAI,CAACC,SAAS,CAAC5B,YAAY,CAAC;EACpD,IAAM6B,gBAAgB,GAAGF,IAAI,CAACC,SAAS,CAACP,aAAa,CAAC;EACtD,IAAMS,WAAW,GAAGd,KAAK,CACtB5B,GAAG,CACF,UAAC2C,IAAI;IAAA,OACH,MAAMA,IAAI,CAACvC,QAAQ,eAAemC,IAAI,CAACC,SAAS,CAC9CG,IAAI,CAACZ,MACP,CAAC,YAAYQ,IAAI,CAACC,SAAS,CAACG,IAAI,CAACpB,OAAO,CAAC,EAAE;EAAA,CAC/C,CAAC,CACAqB,IAAI,CAAC,IAAI,CAAC;EAEb,OAAO;IACLT,OAAO,EAAE,SAATA,OAAOA,CAAA;MAAA,OACL,aAAaM,gBAAgB,eAAeH,eAAe,qBAAqBI,WAAW,EAAE;IAAA;IAC/FN,IAAI,EAAE;EACR,CAAC;AACH,CAAC;AAED,IAAIS,SAAS,GAAGC,IAAI,CAACC,KAAK,CAAC,IAAI,GAAGzD,sBAAsB,CAACC,GAAG,CAAC;AAE7D,IAAMyD,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;EACvBC,IAAI,CAACC,aAAa,CAAC,CAAC;AACtB,CAAC;AAED,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAS;EACtBF,IAAI,CAACG,oBAAoB,CAAC,CAAC;EAC3BH,IAAI,CAACI,aAAa,CAAC,CAAC;AACtB,CAAC;AAEM,IAAMvE,mBAAmB,GAAAF,OAAA,CAAAE,mBAAA,GAAG,SAAtBA,mBAAmBA,CAAIwE,aAAyB,EAAK;EAChEC,OAAO,CAACC,IAAI,CACV,sKACF,CAAC;EACDR,UAAU,CAAC,CAAC;EACZM,aAAa,CAAC,CAAC;EACfH,SAAS,CAAC,CAAC;AACb,CAAC;AAEM,IAAMlE,sBAAsB,GAAAL,OAAA,CAAAK,sBAAA,GAAG,SAAzBA,sBAAsBA,CAAA,EAAyB;EAAA,IAArBwE,IAAI,GAAAC,SAAA,CAAA/D,MAAA,QAAA+D,SAAA,QAAA7D,SAAA,GAAA6D,SAAA,MAAGb,SAAS;EACrDU,OAAO,CAACC,IAAI,CACV,kEACF,CAAC;EACDP,IAAI,CAACU,mBAAmB,CAACF,IAAI,CAAC;EAC9BR,IAAI,CAACG,oBAAoB,CAAC,CAAC;AAC7B,CAAC;AAEM,IAAMlE,uBAAuB,GAAAN,OAAA,CAAAM,uBAAA,GAAG,SAA1BA,uBAAuBA,CAAI0E,KAAa,EAAK;EACxDL,OAAO,CAACC,IAAI,CACV,kEACF,CAAC;EACDP,IAAI,CAACU,mBAAmB,CAACC,KAAK,GAAGf,SAAS,CAAC;EAC3CI,IAAI,CAACG,oBAAoB,CAAC,CAAC;AAC7B,CAAC;AAED,IAAMS,eAAe,GAAG,IAAAC,uBAAM,EAAC,CAAC,GAC5BrF,OAAO,GACP,YAAM;EACJ,MAAM,IAAIsF,uBAAe,CACvB,qDACF,CAAC;AACH,CAAC;AAME,IAAMhF,UAAU,GAAAH,OAAA,CAAAG,UAAA,GAAG,SAAbA,UAAUA,CAAA,EAAiC;EAAA,IAA7BiF,mBAAmB,GAAAN,SAAA,CAAA/D,MAAA,QAAA+D,SAAA,QAAA7D,SAAA,GAAA6D,SAAA,MAAG,CAAC,CAAC;EACjD,IAAI3B,MAAmB,GAAIkC,MAAM,CAC9BlC,MAAM;EACT,IAAIA,MAAM,KAAKlC,SAAS,EAAE;IACxB,IAAMqE,YAAY,GAAGL,eAAe,CAAC,QAAQ,CAAC;IAC9C9B,MAAM,GAAGmC,YAAY;IAKrB,IAAI,OAAOnC,MAAM,KAAK,QAAQ,EAAE;MAC9B,IAAMoC,WAAW,GAAGN,eAAe,CAAC,eAAe,CAAC;MACpD9B,MAAM,GAAGoC,WAAW,CAACpC,MAAM;IAC7B;IACA,IAAIA,MAAM,KAAKlC,SAAS,IAAIkC,MAAM,CAACqC,MAAM,KAAKvE,SAAS,EAAE;MACvDkC,MAAM,GAAGmC,YAAY,CAAC/D,OAAO;IAC/B;EACF;EAEA,IAAMkE,eAAe,GAAA3F,MAAA,CAAAsC,MAAA,KAChB1B,sBAAsB,EACtB0E,mBAAmB,CACvB;EACDnB,SAAS,GAAGC,IAAI,CAACC,KAAK,CAAC,IAAI,GAAGsB,eAAe,CAAC9E,GAAG,CAAC;EAElDwC,MAAM,CAACqC,MAAM,CAAC;IACZE,mBAAmB,WAAnBA,mBAAmBA,CACjB/D,SAG4B,EAC5B0B,aAA2B,EAE3B;MAAA,IADAC,MAAiC,GAAAwB,SAAA,CAAA/D,MAAA,QAAA+D,SAAA,QAAA7D,SAAA,GAAA6D,SAAA,MAAG,CAAC,CAAC;MAEtC,OAAO1B,YAAY,CAACzB,SAAS,EAAE0B,aAAa,EAAEC,MAAM,CAAC;IACvD;EACF,CAAC,CAAC;AACJ,CAAC;AAQM,IAAMlD,gBAAgB,GAAAJ,OAAA,CAAAI,gBAAA,GAAG,SAAnBA,gBAAgBA,CAAIuB,SAA4B,EAAK;EAChE,OAAOD,eAAe,CAGpBC,SACF,CAAC;AACH,CAAC","ignoreList":[]}