{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","createAnimatedComponent","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_react","_reactNative","_invariant","_ConfigHelper","_findHostInstance","_core","_layoutReanimation","_fabricUtils","_PropsRegistry","_util","_animationBuilder","_LayoutAnimationConfig","_JSPropsUpdater","_utils","_setAndForwardRef","_PlatformChecker","_InlinePropManager","_PropsFilter","_web","_UpdateLayoutAnimations","_domUtils","_getViewInfo2","_NativeEventsManager","_errors","_jsxRuntime","_callSuper","t","o","e","default","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","prototype","valueOf","call","IS_WEB","isWeb","IS_JEST","isJest","SHOULD_BE_USE_WEB","shouldBeUseWeb","configureWebLayoutAnimations","onlyAnimatedStyles","styles","filter","style","viewDescriptors","id","Component","options","invariant","isReactComponent","name","AnimatedComponent","_ref","props","_this","_styles","_isFirstRender","jestAnimatedStyle","_componentRef","_sharedElementTransition","_jsPropsUpdater","JSPropsUpdater","InlinePropManager","PropsFilter","reanimatedID","_resolveComponentRef","ref","componentRef","getAnimatableRef","_setComponentRef","setAndForwardRef","getForwardedRef","forwardedRef","setLocalRef","_viewInfo","undefined","tag","getComponentViewTag","_this$props","layout","entering","exiting","sharedTransitionTag","_this$context","enableLayoutAnimations","_configureSharedTransition","isFabric","reduceMotionInExiting","getReduceMotion","getReduceMotionFromConfig","_this$props2","updateLayoutAnimations","LayoutAnimationType","EXITING","maybeBuild","displayName","skipEntering","context","current","_this$props3","ENTERING","_this$props4","key","componentDidMount","_this$_NativeEventsMa","NativeEventsManager","attachEvents","addOnJSPropsChangeListener","_attachAnimatedStyles","attachInlineProps","_getViewInfo","_configureLayoutTransition","_this$context2","saveSnapshot","getReducedMotionFromConfig","startWebLayoutAnimation","visibility","componentWillUnmount","_this$_NativeEventsMa2","_this$_sharedElementT","detachEvents","removeOnJSPropsChangeListener","_detachStyles","detachInlineProps","unregisterTransition","addHTMLMutationObserver","_this$props5","viewTag","_this$props$animatedP","remove","animatedProps","removeFromPropsRegistry","_updateFromNative","setNativeProps","_this$_componentRef","viewName","shadowNodeWrapper","viewConfig","hostInstance","findHostInstance","ReanimatedError","viewInfo","getViewInfo","getShadowNodeWrapperFromRef","_this$props$animatedP2","_this2","_this$props$animatedP3","flattenArray","prevStyles","prevAnimatedProps","_animatedProps","_this$_getViewInfo","hasReanimated2Props","length","adaptViewConfig","hasOneSameStyle","_loop","prevStyle","isPresent","some","forEach","add","assign","initial","componentDidUpdate","prevProps","_prevState","snapshot","_this$_NativeEventsMa3","oldLayout","updateEvents","tryActivateLayoutTransition","LAYOUT","_ref2","_this$props$sharedTra","isUnmounting","arguments","_this$_sharedElementT2","sharedElementTransition","sharedTransitionStyle","SharedTransition","registerTransition","getSnapshotBeforeUpdate","_this$_componentRef2","getBoundingClientRect","render","_this$context3","filteredProps","filterNonAnimatedProps","_filteredProps$style","platformProps","Platform","select","web","collapsable","nativeID","jestProps","jestInlineStyle","jsx","React","contextType","SkipEnteringContext","forwardRef"],"sources":["createAnimatedComponent.tsx"],"sourcesContent":["'use strict';\nimport type {\n  Component,\n  ComponentClass,\n  ComponentType,\n  FunctionComponent,\n  MutableRefObject,\n} from 'react';\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport '../layoutReanimation/animationsManager';\nimport invariant from 'invariant';\nimport { adaptViewConfig } from '../ConfigHelper';\nimport { findHostInstance } from '../platform-specific/findHostInstance';\nimport { enableLayoutAnimations } from '../core';\nimport { SharedTransition, LayoutAnimationType } from '../layoutReanimation';\nimport type { StyleProps, ShadowNodeWrapper } from '../commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport { removeFromPropsRegistry } from '../PropsRegistry';\nimport { getReduceMotionFromConfig } from '../animation/util';\nimport { maybeBuild } from '../animationBuilder';\nimport { SkipEnteringContext } from '../component/LayoutAnimationConfig';\nimport type { AnimateProps } from '../helperTypes';\nimport JSPropsUpdater from './JSPropsUpdater';\nimport type {\n  AnimatedComponentProps,\n  AnimatedProps,\n  InitialComponentProps,\n  AnimatedComponentRef,\n  IAnimatedComponentInternal,\n  ViewInfo,\n  INativeEventsManager,\n  NestedArray,\n} from './commonTypes';\nimport { flattenArray } from './utils';\nimport setAndForwardRef from './setAndForwardRef';\nimport { isFabric, isJest, isWeb, shouldBeUseWeb } from '../PlatformChecker';\nimport { InlinePropManager } from './InlinePropManager';\nimport { PropsFilter } from './PropsFilter';\nimport {\n  startWebLayoutAnimation,\n  tryActivateLayoutTransition,\n  configureWebLayoutAnimations,\n  getReducedMotionFromConfig,\n  saveSnapshot,\n} from '../layoutReanimation/web';\nimport { updateLayoutAnimations } from '../UpdateLayoutAnimations';\nimport type { CustomConfig } from '../layoutReanimation/web/config';\nimport type { FlatList, FlatListProps } from 'react-native';\nimport { addHTMLMutationObserver } from '../layoutReanimation/web/domUtils';\nimport { getViewInfo } from './getViewInfo';\nimport { NativeEventsManager } from './NativeEventsManager';\nimport type { ReanimatedHTMLElement } from '../js-reanimated';\nimport { ReanimatedError } from '../errors';\n\nconst IS_WEB = isWeb();\nconst IS_JEST = isJest();\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\n\nif (IS_WEB) {\n  configureWebLayoutAnimations();\n}\n\nfunction onlyAnimatedStyles(styles: StyleProps[]): StyleProps[] {\n  return styles.filter((style) => style?.viewDescriptors);\n}\n\ntype Options<P> = {\n  setNativeProps: (ref: AnimatedComponentRef, props: P) => void;\n};\n\n/**\n * Lets you create an Animated version of any React Native component.\n *\n * @param component - The component you want to make animatable.\n * @returns A component that Reanimated is capable of animating.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/createAnimatedComponent\n */\n\n// Don't change the order of overloads, since such a change breaks current behavior\nexport function createAnimatedComponent<P extends object>(\n  component: FunctionComponent<P>,\n  options?: Options<P>\n): FunctionComponent<AnimateProps<P>>;\n\nexport function createAnimatedComponent<P extends object>(\n  component: ComponentClass<P>,\n  options?: Options<P>\n): ComponentClass<AnimateProps<P>>;\n\nexport function createAnimatedComponent<P extends object>(\n  // Actually ComponentType<P = {}> = ComponentClass<P> | FunctionComponent<P> but we need this overload too\n  // since some external components (like FastImage) are typed just as ComponentType\n  component: ComponentType<P>,\n  options?: Options<P>\n): FunctionComponent<AnimateProps<P>> | ComponentClass<AnimateProps<P>>;\n\n/**\n * @deprecated Please use `Animated.FlatList` component instead of calling\n *   `Animated.createAnimatedComponent(FlatList)` manually.\n */\n// @ts-ignore This is required to create this overload, since type of createAnimatedComponent is incorrect and doesn't include typeof FlatList\nexport function createAnimatedComponent(\n  component: typeof FlatList<unknown>,\n  options?: Options<any>\n): ComponentClass<AnimateProps<FlatListProps<unknown>>>;\n\nlet id = 0;\n\nexport function createAnimatedComponent(\n  Component: ComponentType<InitialComponentProps>,\n  options?: Options<InitialComponentProps>\n): any {\n  invariant(\n    typeof Component !== 'function' ||\n      (Component.prototype && Component.prototype.isReactComponent),\n    `Looks like you're passing a function component \\`${Component.name}\\` to \\`createAnimatedComponent\\` function which supports only class components. Please wrap your function component with \\`React.forwardRef()\\` or use a class component instead.`\n  );\n\n  class AnimatedComponent\n    extends React.Component<AnimatedComponentProps<InitialComponentProps>>\n    implements IAnimatedComponentInternal\n  {\n    _styles: StyleProps[] | null = null;\n    _animatedProps?: Partial<AnimatedComponentProps<AnimatedProps>>;\n    _isFirstRender = true;\n    jestInlineStyle: NestedArray<StyleProps> | undefined;\n    jestAnimatedStyle: { value: StyleProps } = { value: {} };\n    _componentRef: AnimatedComponentRef | HTMLElement | null = null;\n    _sharedElementTransition: SharedTransition | null = null;\n    _jsPropsUpdater = new JSPropsUpdater();\n    _InlinePropManager = new InlinePropManager();\n    _PropsFilter = new PropsFilter();\n    _NativeEventsManager?: INativeEventsManager;\n    _viewInfo?: ViewInfo;\n    static displayName: string;\n    static contextType = SkipEnteringContext;\n    context!: React.ContextType<typeof SkipEnteringContext>;\n    reanimatedID = id++;\n\n    constructor(props: AnimatedComponentProps<InitialComponentProps>) {\n      super(props);\n      if (IS_JEST) {\n        this.jestAnimatedStyle = { value: {} };\n      }\n      const entering = this.props.entering;\n      if (entering && isFabric()) {\n        updateLayoutAnimations(\n          this.reanimatedID,\n          LayoutAnimationType.ENTERING,\n          maybeBuild(entering, this.props?.style, AnimatedComponent.displayName)\n        );\n      }\n    }\n\n    componentDidMount() {\n      if (!IS_WEB) {\n        // It exists only on native platforms. We initialize it here because the ref to the animated component is available only post-mount\n        this._NativeEventsManager = new NativeEventsManager(this, options);\n      }\n      this._NativeEventsManager?.attachEvents();\n      this._jsPropsUpdater.addOnJSPropsChangeListener(this);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n\n      const layout = this.props.layout;\n      if (layout) {\n        this._configureLayoutTransition();\n      }\n\n      if (IS_WEB) {\n        if (this.props.exiting) {\n          saveSnapshot(this._componentRef as HTMLElement);\n        }\n\n        if (\n          !this.props.entering ||\n          getReducedMotionFromConfig(this.props.entering as CustomConfig)\n        ) {\n          this._isFirstRender = false;\n          return;\n        }\n\n        const skipEntering = this.context?.current;\n\n        if (!skipEntering) {\n          startWebLayoutAnimation(\n            this.props,\n            this._componentRef as ReanimatedHTMLElement,\n            LayoutAnimationType.ENTERING\n          );\n        } else {\n          (this._componentRef as HTMLElement).style.visibility = 'initial';\n        }\n      }\n\n      this._isFirstRender = false;\n    }\n\n    componentWillUnmount() {\n      this._NativeEventsManager?.detachEvents();\n      this._jsPropsUpdater.removeOnJSPropsChangeListener(this);\n      this._detachStyles();\n      this._InlinePropManager.detachInlineProps();\n      if (this.props.sharedTransitionTag) {\n        this._configureSharedTransition(true);\n      }\n      this._sharedElementTransition?.unregisterTransition(\n        this.getComponentViewTag(),\n        true\n      );\n\n      const exiting = this.props.exiting;\n\n      if (\n        IS_WEB &&\n        this._componentRef &&\n        exiting &&\n        !getReducedMotionFromConfig(exiting as CustomConfig)\n      ) {\n        addHTMLMutationObserver();\n\n        startWebLayoutAnimation(\n          this.props,\n          this._componentRef as ReanimatedHTMLElement,\n          LayoutAnimationType.EXITING\n        );\n      } else if (exiting && !IS_WEB && !isFabric()) {\n        const reduceMotionInExiting =\n          'getReduceMotion' in exiting &&\n          typeof exiting.getReduceMotion === 'function'\n            ? getReduceMotionFromConfig(exiting.getReduceMotion())\n            : getReduceMotionFromConfig();\n        if (!reduceMotionInExiting) {\n          updateLayoutAnimations(\n            this.getComponentViewTag(),\n            LayoutAnimationType.EXITING,\n            maybeBuild(\n              exiting,\n              this.props?.style,\n              AnimatedComponent.displayName\n            )\n          );\n        }\n      }\n    }\n\n    getComponentViewTag() {\n      return this._getViewInfo().viewTag as number;\n    }\n\n    _detachStyles() {\n      const viewTag = this.getComponentViewTag();\n      if (viewTag !== -1 && this._styles !== null) {\n        for (const style of this._styles) {\n          style.viewDescriptors.remove(viewTag);\n        }\n        if (this.props.animatedProps?.viewDescriptors) {\n          this.props.animatedProps.viewDescriptors.remove(viewTag);\n        }\n        if (isFabric()) {\n          removeFromPropsRegistry(viewTag);\n        }\n      }\n    }\n\n    _updateFromNative(props: StyleProps) {\n      if (options?.setNativeProps) {\n        options.setNativeProps(\n          this._componentRef as AnimatedComponentRef,\n          props\n        );\n      } else {\n        (this._componentRef as AnimatedComponentRef)?.setNativeProps?.(props);\n      }\n    }\n\n    _getViewInfo(): ViewInfo {\n      if (this._viewInfo !== undefined) {\n        return this._viewInfo;\n      }\n\n      let viewTag: number | HTMLElement | null;\n      let viewName: string | null;\n      let shadowNodeWrapper: ShadowNodeWrapper | null = null;\n      let viewConfig;\n\n      if (SHOULD_BE_USE_WEB) {\n        // At this point I assume that `_setComponentRef` was already called and `_component` is set.\n        // `this._component` on web represents HTMLElement of our component, that's why we use casting\n        viewTag = this._componentRef as HTMLElement;\n        viewName = null;\n        shadowNodeWrapper = null;\n        viewConfig = null;\n      } else {\n        const hostInstance = findHostInstance(this);\n        if (!hostInstance) {\n          /* \n            findHostInstance can return null for a component that doesn't render anything \n            (render function returns null). Example: \n            svg Stop: https://github.com/react-native-svg/react-native-svg/blob/develop/src/elements/Stop.tsx\n          */\n          throw new ReanimatedError(\n            'Cannot find host instance for this component. Maybe it renders nothing?'\n          );\n        }\n\n        const viewInfo = getViewInfo(hostInstance);\n        viewTag = viewInfo.viewTag;\n        viewName = viewInfo.viewName;\n        viewConfig = viewInfo.viewConfig;\n        shadowNodeWrapper = isFabric()\n          ? getShadowNodeWrapperFromRef(this, hostInstance)\n          : null;\n      }\n      this._viewInfo = { viewTag, viewName, shadowNodeWrapper, viewConfig };\n      return this._viewInfo;\n    }\n\n    _attachAnimatedStyles() {\n      const styles = this.props.style\n        ? onlyAnimatedStyles(flattenArray<StyleProps>(this.props.style))\n        : [];\n      const prevStyles = this._styles;\n      this._styles = styles;\n\n      const prevAnimatedProps = this._animatedProps;\n      this._animatedProps = this.props.animatedProps;\n\n      const { viewTag, viewName, shadowNodeWrapper, viewConfig } =\n        this._getViewInfo();\n\n      // update UI props whitelist for this view\n      const hasReanimated2Props =\n        this.props.animatedProps?.viewDescriptors || styles.length;\n      if (hasReanimated2Props && viewConfig) {\n        adaptViewConfig(viewConfig);\n      }\n\n      // remove old styles\n      if (prevStyles) {\n        // in most of the cases, views have only a single animated style and it remains unchanged\n        const hasOneSameStyle =\n          styles.length === 1 &&\n          prevStyles.length === 1 &&\n          styles[0] === prevStyles[0];\n\n        if (!hasOneSameStyle) {\n          // otherwise, remove each style that is not present in new styles\n          for (const prevStyle of prevStyles) {\n            const isPresent = styles.some((style) => style === prevStyle);\n            if (!isPresent) {\n              prevStyle.viewDescriptors.remove(viewTag);\n            }\n          }\n        }\n      }\n\n      styles.forEach((style) => {\n        style.viewDescriptors.add({\n          tag: viewTag,\n          name: viewName,\n          shadowNodeWrapper,\n        });\n        if (IS_JEST) {\n          /**\n           * We need to connect Jest's TestObject instance whose contains just\n           * props object with the updateProps() function where we update the\n           * properties of the component. We can't update props object directly\n           * because TestObject contains a copy of props - look at render\n           * function: const props = this._filterNonAnimatedProps(this.props);\n           */\n          this.jestAnimatedStyle.value = {\n            ...this.jestAnimatedStyle.value,\n            ...style.initial.value,\n          };\n          style.jestAnimatedStyle.current = this.jestAnimatedStyle;\n        }\n      });\n\n      // detach old animatedProps\n      if (prevAnimatedProps && prevAnimatedProps !== this.props.animatedProps) {\n        prevAnimatedProps.viewDescriptors!.remove(viewTag as number);\n      }\n\n      // attach animatedProps property\n      if (this.props.animatedProps?.viewDescriptors) {\n        this.props.animatedProps.viewDescriptors.add({\n          tag: viewTag as number,\n          name: viewName!,\n          shadowNodeWrapper: shadowNodeWrapper!,\n        });\n      }\n    }\n\n    componentDidUpdate(\n      prevProps: AnimatedComponentProps<InitialComponentProps>,\n      _prevState: Readonly<unknown>,\n      // This type comes straight from React\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      snapshot: DOMRect | null\n    ) {\n      const layout = this.props.layout;\n      const oldLayout = prevProps.layout;\n      if (layout !== oldLayout) {\n        this._configureLayoutTransition();\n      }\n      if (\n        this.props.sharedTransitionTag !== undefined ||\n        prevProps.sharedTransitionTag !== undefined\n      ) {\n        this._configureSharedTransition();\n      }\n      this._NativeEventsManager?.updateEvents(prevProps);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n\n      if (IS_WEB && this.props.exiting) {\n        saveSnapshot(this._componentRef as HTMLElement);\n      }\n\n      // Snapshot won't be undefined because it comes from getSnapshotBeforeUpdate method\n      if (\n        IS_WEB &&\n        snapshot !== null &&\n        this.props.layout &&\n        !getReducedMotionFromConfig(this.props.layout as CustomConfig)\n      ) {\n        tryActivateLayoutTransition(\n          this.props,\n          this._componentRef as ReanimatedHTMLElement,\n          snapshot\n        );\n      }\n    }\n\n    _configureLayoutTransition() {\n      if (IS_WEB) {\n        return;\n      }\n\n      const layout = this.props.layout\n        ? maybeBuild(\n            this.props.layout,\n            undefined /* We don't have to warn user if style has common properties with animation for LAYOUT */,\n            AnimatedComponent.displayName\n          )\n        : undefined;\n      updateLayoutAnimations(\n        this.getComponentViewTag(),\n        LayoutAnimationType.LAYOUT,\n        layout\n      );\n    }\n\n    _configureSharedTransition(isUnmounting = false) {\n      if (IS_WEB) {\n        return;\n      }\n\n      const { sharedTransitionTag } = this.props;\n      if (!sharedTransitionTag) {\n        this._sharedElementTransition?.unregisterTransition(\n          this.getComponentViewTag(),\n          isUnmounting\n        );\n        this._sharedElementTransition = null;\n        return;\n      }\n      const sharedElementTransition =\n        this.props.sharedTransitionStyle ??\n        this._sharedElementTransition ??\n        new SharedTransition();\n      sharedElementTransition.registerTransition(\n        this.getComponentViewTag(),\n        sharedTransitionTag,\n        isUnmounting\n      );\n      this._sharedElementTransition = sharedElementTransition;\n    }\n\n    _resolveComponentRef = (ref: Component | HTMLElement | null) => {\n      const componentRef = ref as AnimatedComponentRef;\n      // Component can specify ref which should be animated when animated version of the component is created.\n      // Otherwise, we animate the component itself.\n      if (componentRef && componentRef.getAnimatableRef) {\n        return componentRef.getAnimatableRef();\n      }\n      return componentRef;\n    };\n\n    _setComponentRef = setAndForwardRef<Component | HTMLElement>({\n      getForwardedRef: () =>\n        this.props.forwardedRef as MutableRefObject<\n          Component<Record<string, unknown>, Record<string, unknown>, unknown>\n        >,\n      setLocalRef: (ref) => {\n        if (!ref) {\n          // component has been unmounted\n          return;\n        }\n        if (ref !== this._componentRef) {\n          this._componentRef = this._resolveComponentRef(ref);\n          // if ref is changed, reset viewInfo\n          this._viewInfo = undefined;\n        }\n        const tag = this.getComponentViewTag();\n\n        const { layout, entering, exiting, sharedTransitionTag } = this.props;\n        if (layout || entering || exiting || sharedTransitionTag) {\n          if (!SHOULD_BE_USE_WEB) {\n            enableLayoutAnimations(true, false);\n          }\n\n          if (sharedTransitionTag) {\n            this._configureSharedTransition();\n          }\n          if (exiting && isFabric()) {\n            const reduceMotionInExiting =\n              'getReduceMotion' in exiting &&\n              typeof exiting.getReduceMotion === 'function'\n                ? getReduceMotionFromConfig(exiting.getReduceMotion())\n                : getReduceMotionFromConfig();\n            if (!reduceMotionInExiting) {\n              updateLayoutAnimations(\n                tag,\n                LayoutAnimationType.EXITING,\n                maybeBuild(\n                  exiting,\n                  this.props?.style,\n                  AnimatedComponent.displayName\n                )\n              );\n            }\n          }\n\n          const skipEntering = this.context?.current;\n          if (entering && !skipEntering && !IS_WEB) {\n            updateLayoutAnimations(\n              tag,\n              LayoutAnimationType.ENTERING,\n              maybeBuild(\n                entering,\n                this.props?.style,\n                AnimatedComponent.displayName\n              )\n            );\n          }\n        }\n      },\n    });\n\n    // This is a component lifecycle method from React, therefore we are not calling it directly.\n    // It is called before the component gets rerendered. This way we can access components' position before it changed\n    // and later on, in componentDidUpdate, calculate translation for layout transition.\n    getSnapshotBeforeUpdate() {\n      if (\n        IS_WEB &&\n        (this._componentRef as HTMLElement)?.getBoundingClientRect !== undefined\n      ) {\n        return (this._componentRef as HTMLElement).getBoundingClientRect();\n      }\n\n      return null;\n    }\n\n    render() {\n      const filteredProps = this._PropsFilter.filterNonAnimatedProps(this);\n\n      if (IS_JEST) {\n        filteredProps.jestAnimatedStyle = this.jestAnimatedStyle;\n      }\n\n      // Layout animations on web are set inside `componentDidMount` method, which is called after first render.\n      // Because of that we can encounter a situation in which component is visible for a short amount of time, and later on animation triggers.\n      // I've tested that on various browsers and devices and it did not happen to me. To be sure that it won't happen to someone else,\n      // I've decided to hide component at first render. Its visibility is reset in `componentDidMount`.\n      if (\n        this._isFirstRender &&\n        IS_WEB &&\n        filteredProps.entering &&\n        !getReducedMotionFromConfig(filteredProps.entering as CustomConfig)\n      ) {\n        filteredProps.style = {\n          ...(filteredProps.style ?? {}),\n          visibility: 'hidden', // Hide component until `componentDidMount` triggers\n        };\n      }\n\n      const platformProps = Platform.select({\n        web: {},\n        default: { collapsable: false },\n      });\n\n      const skipEntering = this.context?.current;\n      const nativeID =\n        skipEntering || !isFabric() ? undefined : `${this.reanimatedID}`;\n\n      const jestProps = IS_JEST\n        ? {\n            jestInlineStyle: this.props.style,\n            jestAnimatedStyle: this.jestAnimatedStyle,\n          }\n        : {};\n\n      return (\n        <Component\n          nativeID={nativeID}\n          {...filteredProps}\n          {...jestProps}\n          // Casting is used here, because ref can be null - in that case it cannot be assigned to HTMLElement.\n          // After spending some time trying to figure out what to do with this problem, we decided to leave it this way\n          ref={this._setComponentRef as (ref: Component) => void}\n          {...platformProps}\n        />\n      );\n    }\n  }\n\n  AnimatedComponent.displayName = `AnimatedComponent(${\n    Component.displayName || Component.name || 'Component'\n  })`;\n\n  return React.forwardRef<Component>((props, ref) => {\n    return (\n      <AnimatedComponent\n        {...props}\n        {...(ref === null ? null : { forwardedRef: ref })}\n      />\n    );\n  });\n}\n"],"mappings":"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","ignoreList":[]}