{"version":3,"names":["_getJestObj","mock","ActualAnimated","jest","requireActual","Object","assign","timing","value","config","start","callback","setValue","toValue","_interopRequireDefault","require","_react","_reactNative","_CategorySelector","_reactNative2","_jsxRuntime","_require","describe","categories","id","name","it","_render","render","jsx","default","selectedCategory","onSelectCategory","fn","getByText","forEach","category","expect","toBeTruthy","_render2","fireEvent","press","toHaveBeenCalledWith","_render3","not","toHaveBeenCalled","_render4","pill","act","scrollToMock","_render5"],"sources":["CategorySelector.test.js"],"sourcesContent":["// __tests__/CategorySelector.test.js\nimport React from 'react';\nimport { render, fireEvent, act } from '@testing-library/react-native';\nimport CategorySelector from '../../src/components/exercise-common/CategorySelector';\nimport { Animated } from 'react-native';\n\n// Mock Animated.timing pour éviter les warnings et contrôler l'animation\njest.mock('react-native/Libraries/Animated/src/Animated', () => {\n  const ActualAnimated = jest.requireActual('react-native/Libraries/Animated/src/Animated');\n  return {\n    ...ActualAnimated,\n    timing: (value, config) => ({\n      start: (callback) => {\n        value.setValue(config.toValue);\n        if (callback) callback();\n      },\n    }),\n  };\n});\n\ndescribe('CategorySelector', () => {\n  const categories = [\n    { id: '1', name: 'Fruits' },\n    { id: '2', name: 'Vegetables' },\n    { id: '3', name: 'Dairy' },\n  ];\n\n  it('renders all categories correctly', () => {\n    const { getByText } = render(\n      <CategorySelector \n        categories={categories} \n        selectedCategory={'2'} \n        onSelectCategory={jest.fn()} \n      />\n    );\n\n    categories.forEach(category => {\n      expect(getByText(category.name)).toBeTruthy();\n    });\n  });\n\n  it('calls onSelectCategory when a category is pressed', () => {\n    const onSelectCategory = jest.fn();\n    const { getByText } = render(\n      <CategorySelector \n        categories={categories} \n        selectedCategory={'1'} \n        onSelectCategory={onSelectCategory} \n      />\n    );\n\n    fireEvent.press(getByText('Vegetables'));\n    expect(onSelectCategory).toHaveBeenCalledWith('2');\n  });\n\n  it('does not call onSelectCategory if the same category is pressed', () => {\n    const onSelectCategory = jest.fn();\n    const { getByText } = render(\n      <CategorySelector \n        categories={categories} \n        selectedCategory={'1'} \n        onSelectCategory={onSelectCategory} \n      />\n    );\n\n    fireEvent.press(getByText('Fruits'));\n    expect(onSelectCategory).not.toHaveBeenCalled();\n  });\n\n  it('triggers pressIn and pressOut animations', () => {\n    const { getByText } = render(\n      <CategorySelector \n        categories={categories} \n        selectedCategory={'1'} \n        onSelectCategory={jest.fn()} \n      />\n    );\n\n    const pill = getByText('Vegetables');\n\n    act(() => {\n      fireEvent(pill, 'pressIn');\n    });\n\n    act(() => {\n      fireEvent(pill, 'pressOut');\n    });\n  });\n\n  it('scrolls to selected category on mount', () => {\n    const scrollToMock = jest.fn();\n    const { getByText } = render(\n      <CategorySelector \n        categories={categories} \n        selectedCategory={'3'} \n        onSelectCategory={jest.fn()} \n      />\n    );\n\n    // Impossible de mocker scrollViewRef directement facilement,\n    // mais on vérifie qu’il existe sans crash.\n    expect(getByText('Dairy')).toBeTruthy();\n  });\n});\n"],"mappings":"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","ignoreList":[]}