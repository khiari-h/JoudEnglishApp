{"version":3,"names":["_getJestObj","mock","isEnabled","jest","fn","mockResolvedValue","isBiometricsEnabled","enableLock","disableLock","setPin","setBiometricsEnabled","generateRecoveryCode","setRecoveryCode","_interopRequireDefault","require","_asyncToGenerator2","_react","_reactNative","_SecuritySettings","_jsxRuntime","_require","describe","it","default","_render","render","jsx","getByTestId","queryByTestId","fireEvent","press","pin1","waitFor","pin2","changeText","expect","toBeNull","_render2","toggle","_render3","findByTestId","code","props","children","toBe"],"sources":["SecuritySettings.test.js"],"sourcesContent":["import React from 'react';\r\nimport { render, fireEvent, waitFor } from '@testing-library/react-native';\r\nimport SecuritySettings from '../../src/components/setting/SecuritySettings';\r\n\r\njest.mock('../../src/services/lockService', () => ({\r\n  isEnabled: jest.fn().mockResolvedValue(false),\r\n  isBiometricsEnabled: jest.fn().mockResolvedValue(false),\r\n  enableLock: jest.fn().mockResolvedValue(true),\r\n  disableLock: jest.fn().mockResolvedValue(true),\r\n  setPin: jest.fn().mockResolvedValue(true),\r\n  setBiometricsEnabled: jest.fn().mockResolvedValue(true),\r\n  generateRecoveryCode: jest.fn(() => 'ABCD2345EFGH6789'),\r\n  setRecoveryCode: jest.fn().mockResolvedValue(true),\r\n}));\r\n\r\ndescribe('SecuritySettings', () => {\r\n  it('permet de définir un PIN via la modale', async () => {\r\n    const { getByTestId, queryByTestId } = render(<SecuritySettings />);\r\n\r\n    // ouvrir la modale via bouton \"Définir un PIN\"\r\n    fireEvent.press(getByTestId('set-pin-button'));\r\n    const pin1 = await waitFor(() => getByTestId('pin-input-1'));\r\n    const pin2 = getByTestId('pin-input-2');\r\n\r\n    fireEvent.changeText(pin1, '1234');\r\n    fireEvent.changeText(pin2, '1234');\r\n    fireEvent.press(getByTestId('pin-save'));\r\n\r\n    await waitFor(() => expect(queryByTestId('pin-input-1')).toBeNull());\r\n  });\r\n\r\n  it('active/désactive la biométrie', async () => {\r\n    const { getByTestId } = render(<SecuritySettings />);\r\n    const toggle = await waitFor(() => getByTestId('biometrics-toggle'));\r\n    fireEvent(toggle, 'valueChange', true);\r\n  });\r\n\r\n  it('génère et affiche un code de récupération', async () => {\r\n    const { getByTestId, findByTestId } = render(<SecuritySettings />);\r\n    fireEvent.press(getByTestId('recovery-generate-button'));\r\n    const code = await findByTestId('recovery-code');\r\n    expect(code.props.children).toBe('ABCD2345EFGH6789');\r\n  });\r\n});\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}