{"version":3,"names":["Object","defineProperty","exports","value","LogLevel","DEFAULT_LOGGER_CONFIG","logToLogBoxAndConsole","updateLoggerConfig","replaceLoggerImplementation","registerLoggerConfig","logger","_LogBox","require","DOCS_URL","DOCS_REFERENCE","_worklet_13693014718893_init_data","code","location","sourceMap","version","logToConsole","_e","global","Error","data","level","console","warn","message","content","error","__closure","__workletHash","__initData","__stackDetails","logFunction","strict","_worklet_4389735034432_init_data","formatMessage","_worklet_4272689492939_init_data","createLog","formattedMessage","substitutions","category","componentStack","componentStackType","stack","addLogBoxLog","_worklet_8875174704824_init_data","config","__reanimatedLoggerConfig","_worklet_13124635139513_init_data","assign","_worklet_9290302006921_init_data","options","_options$level","_options$strict","_worklet_11500141072829_init_data","handleLog","_worklet_1169669053447_init_data","_worklet_5261174224454_init_data","arguments","length","undefined"],"sources":["logger.ts"],"sourcesContent":["'use strict';\nimport { addLogBoxLog } from './LogBox';\nimport type { LogData, LogBoxLogLevel } from './LogBox';\n\nconst DOCS_URL =\n  'https://docs.swmansion.com/react-native-reanimated/docs/debugging/logger-configuration';\nconst DOCS_REFERENCE = `If you don't want to see this message, you can disable the \\`strict\\` mode. Refer to:\\n${DOCS_URL} for more details.`;\n\ntype LogFunction = (data: LogData) => void;\n\nexport enum LogLevel {\n  warn = 1,\n  error = 2,\n}\n\nexport type LoggerConfig = {\n  level?: LogLevel;\n  strict?: boolean;\n};\n\nexport type LoggerConfigInternal = {\n  logFunction: LogFunction;\n} & Required<LoggerConfig>;\n\nfunction logToConsole(data: LogData) {\n  'worklet';\n  switch (data.level) {\n    case 'warn':\n      console.warn(data.message.content);\n      break;\n    case 'error':\n    case 'fatal':\n    case 'syntax':\n      console.error(data.message.content);\n      break;\n  }\n}\n\nexport const DEFAULT_LOGGER_CONFIG: LoggerConfigInternal = {\n  logFunction: logToConsole,\n  level: LogLevel.warn,\n  strict: true,\n};\n\nfunction formatMessage(message: string) {\n  'worklet';\n  return `[Reanimated] ${message}`;\n}\n\nfunction createLog(level: LogBoxLogLevel, message: string): LogData {\n  'worklet';\n  const formattedMessage = formatMessage(message);\n\n  return {\n    level,\n    message: {\n      content: formattedMessage,\n      substitutions: [],\n    },\n    category: formattedMessage,\n    componentStack: [],\n    componentStackType: null,\n    // eslint-disable-next-line reanimated/use-reanimated-error\n    stack: new Error().stack,\n  };\n}\n\n/**\n * Function that logs to LogBox and console. Used to replace the default console\n * logging with logging to LogBox on the UI thread when runOnJS is available.\n *\n * @param data - The details of the log.\n */\nexport function logToLogBoxAndConsole(data: LogData) {\n  addLogBoxLog(data);\n  logToConsole(data);\n}\n\n/**\n * Registers the logger configuration. use it only for Worklet runtimes.\n *\n * @param config - The config to register.\n */\nexport function registerLoggerConfig(config: LoggerConfigInternal) {\n  'worklet';\n  global.__reanimatedLoggerConfig = config;\n}\n\n/**\n * Replaces the default log function with a custom implementation.\n *\n * @param logFunction - The custom log function.\n */\nexport function replaceLoggerImplementation(logFunction: LogFunction) {\n  'worklet';\n  registerLoggerConfig({ ...__reanimatedLoggerConfig, logFunction });\n}\n\n/**\n * Updates logger configuration.\n *\n * @param options - The new logger configuration to apply.\n *\n *   - Level: The minimum log level to display.\n *   - Strict: Whether to log warnings and errors that are not strict. Defaults to\n *       false.\n */\nexport function updateLoggerConfig(options?: Partial<LoggerConfig>) {\n  'worklet';\n  registerLoggerConfig({\n    ...__reanimatedLoggerConfig,\n    // Don't reuse previous level and strict values from the global config\n    level: options?.level ?? DEFAULT_LOGGER_CONFIG.level,\n    strict: options?.strict ?? DEFAULT_LOGGER_CONFIG.strict,\n  });\n}\n\ntype LogOptions = {\n  strict?: boolean;\n};\n\nfunction handleLog(\n  level: Exclude<LogBoxLogLevel, 'syntax' | 'fatal'>,\n  message: string,\n  options: LogOptions\n) {\n  'worklet';\n  const config = __reanimatedLoggerConfig;\n  if (\n    // Don't log if the log is marked as strict-only and the config doesn't\n    // enable strict logging\n    (options.strict && !config.strict) ||\n    // Don't log if the log level is below the minimum configured level\n    LogLevel[level] < config.level\n  ) {\n    return;\n  }\n\n  if (options.strict) {\n    message += `\\n\\n${DOCS_REFERENCE}`;\n  }\n\n  config.logFunction(createLog(level, message));\n}\n\nexport const logger = {\n  warn(message: string, options: LogOptions = {}) {\n    'worklet';\n    handleLog('warn', message, options);\n  },\n  error(message: string, options: LogOptions = {}) {\n    'worklet';\n    handleLog('error', message, options);\n  },\n};\n"],"mappings":"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","ignoreList":[]}