3d56db8091b4a419041960f98c219974
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _reactNative = require("react-native");
var _ThemeContext = require("../../../../contexts/ThemeContext");
var _useActivityMetrics2 = _interopRequireDefault(require("../../../../hooks/useActivityMetrics"));
var _useDailyWords2 = _interopRequireDefault(require("../../../../hooks/useDailyWords"));
var _style = _interopRequireDefault(require("./style"));
var _jsxRuntime = require("react/jsx-runtime");
var SimpleMetrics = function SimpleMetrics(_ref) {
  var _ref$accentColor = _ref.accentColor,
    accentColor = _ref$accentColor === void 0 ? "#3B82F6" : _ref$accentColor,
    _ref$refreshKey = _ref.refreshKey,
    refreshKey = _ref$refreshKey === void 0 ? 0 : _ref$refreshKey;
  var themeContext = (0, _react.useContext)(_ThemeContext.ThemeContext);
  var colors = (themeContext == null ? void 0 : themeContext.colors) || {
    surface: "#FFFFFF",
    text: "#1F2937",
    textSecondary: "#6B7280"
  };
  var _useState = (0, _react.useState)(0),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    localRefresh = _useState2[0],
    setLocalRefresh = _useState2[1];
  var _useActivityMetrics = (0, _useActivityMetrics2.default)(localRefresh),
    currentStreak = _useActivityMetrics.currentStreak,
    streakTrend = _useActivityMetrics.streakTrend,
    formattedTime = _useActivityMetrics.formattedTime,
    refreshMetrics = _useActivityMetrics.refresh;
  var _useDailyWords = (0, _useDailyWords2.default)(localRefresh),
    wordsToday = _useDailyWords.wordsToday,
    wordsLoading = _useDailyWords.isLoading,
    refreshWords = _useDailyWords.refresh;
  (0, _react.useEffect)(function () {
    if (refreshKey > 0) {
      setLocalRefresh(function (prev) {
        return prev + 1;
      });
      if (refreshMetrics) refreshMetrics();
      if (refreshWords) refreshWords();
    }
  }, [refreshKey, refreshMetrics, refreshWords]);
  if (wordsLoading) {
    return (0, _jsxRuntime.jsx)(_reactNative.View, {
      style: _style.default.container,
      children: (0, _jsxRuntime.jsxs)(_reactNative.View, {
        style: _style.default.loadingContainer,
        children: [(0, _jsxRuntime.jsx)(_reactNative.ActivityIndicator, {
          size: "small",
          color: accentColor
        }), (0, _jsxRuntime.jsx)(_reactNative.Text, {
          style: [_style.default.loadingText, {
            color: colors.textSecondary
          }],
          children: "Chargement des m\xE9triques..."
        })]
      })
    });
  }
  var metrics = [{
    id: 'streak',
    icon: 'üî•',
    value: (currentStreak || 0).toString(),
    label: 'Jours de suite',
    trend: streakTrend
  }, {
    id: 'words',
    icon: 'üìö',
    value: (wordsToday || 0).toString(),
    label: 'Mots aujourd\'hui',
    trend: null
  }, {
    id: 'time',
    icon: '‚è±Ô∏è',
    value: formattedTime || '0min',
    label: 'Temps aujourd\'hui',
    trend: null
  }];
  var hasActivity = currentStreak > 0 || wordsToday > 0 || formattedTime && formattedTime !== '0min';
  if (!hasActivity) {
    return (0, _jsxRuntime.jsx)(_reactNative.View, {
      style: _style.default.container,
      children: (0, _jsxRuntime.jsxs)(_reactNative.View, {
        style: _style.default.emptyState,
        children: [(0, _jsxRuntime.jsx)(_reactNative.Text, {
          style: _style.default.emptyIcon,
          children: "\uD83C\uDFAF"
        }), (0, _jsxRuntime.jsx)(_reactNative.Text, {
          style: [_style.default.emptyTitle, {
            color: colors.text
          }],
          children: "Commencez votre premi\xE8re session !"
        }), (0, _jsxRuntime.jsx)(_reactNative.Text, {
          style: [_style.default.emptySubtitle, {
            color: colors.textSecondary
          }],
          children: "Vos statistiques appara\xEEtront ici"
        })]
      })
    });
  }
  return (0, _jsxRuntime.jsxs)(_reactNative.View, {
    style: _style.default.container,
    children: [(0, _jsxRuntime.jsx)(_reactNative.Text, {
      style: [_style.default.sectionTitle, {
        color: colors.text
      }],
      children: "\uD83D\uDCCA Aujourd'hui"
    }), (0, _jsxRuntime.jsx)(_reactNative.View, {
      style: _style.default.metricsGrid,
      children: metrics.map(function (metric) {
        return (0, _jsxRuntime.jsx)(MetricCard, {
          metric: metric,
          colors: colors,
          accentColor: accentColor
        }, metric.id);
      })
    })]
  });
};
var MetricCard = function MetricCard(_ref2) {
  var metric = _ref2.metric,
    colors = _ref2.colors;
  var getTrendStyle = function getTrendStyle(trend) {
    if (!trend) return null;
    var isPositive = trend.includes('+') || trend.includes('üèÜ') || trend.includes('üí™') || trend.includes('üî•');
    var isNegative = trend.includes('-');
    if (isPositive) {
      return {
        backgroundColor: '#DCFCE7',
        color: '#16A34A'
      };
    }
    if (isNegative) {
      return {
        backgroundColor: '#FEF2F2',
        color: '#DC2626'
      };
    }
    return {
      backgroundColor: '#F1F5F9',
      color: '#64748B'
    };
  };
  var trendStyle = getTrendStyle(metric.trend);
  return (0, _jsxRuntime.jsxs)(_reactNative.View, {
    style: [_style.default.metricCard, {
      backgroundColor: colors.surface
    }],
    children: [metric.trend && trendStyle && (0, _jsxRuntime.jsx)(_reactNative.View, {
      style: [_style.default.trendIndicator, {
        backgroundColor: trendStyle.backgroundColor
      }],
      children: (0, _jsxRuntime.jsx)(_reactNative.Text, {
        style: [_style.default.trendText, {
          color: trendStyle.color
        }],
        children: metric.trend
      })
    }), (0, _jsxRuntime.jsx)(_reactNative.Text, {
      style: _style.default.metricIcon,
      children: metric.icon
    }), (0, _jsxRuntime.jsx)(_reactNative.Text, {
      style: [_style.default.metricValue, {
        color: colors.text
      }],
      children: metric.value
    }), (0, _jsxRuntime.jsx)(_reactNative.Text, {
      style: [_style.default.metricLabel, {
        color: colors.textSecondary
      }],
      children: metric.label
    })]
  });
};
var _default = exports.default = SimpleMetrics;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3JlYWN0TmF0aXZlIiwiX1RoZW1lQ29udGV4dCIsIl91c2VBY3Rpdml0eU1ldHJpY3MyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl91c2VEYWlseVdvcmRzMiIsIl9zdHlsZSIsIl9qc3hSdW50aW1lIiwiU2ltcGxlTWV0cmljcyIsIl9yZWYiLCJfcmVmJGFjY2VudENvbG9yIiwiYWNjZW50Q29sb3IiLCJfcmVmJHJlZnJlc2hLZXkiLCJyZWZyZXNoS2V5IiwidGhlbWVDb250ZXh0IiwidXNlQ29udGV4dCIsIlRoZW1lQ29udGV4dCIsImNvbG9ycyIsInN1cmZhY2UiLCJ0ZXh0IiwidGV4dFNlY29uZGFyeSIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJsb2NhbFJlZnJlc2giLCJzZXRMb2NhbFJlZnJlc2giLCJfdXNlQWN0aXZpdHlNZXRyaWNzIiwidXNlQWN0aXZpdHlNZXRyaWNzIiwiY3VycmVudFN0cmVhayIsInN0cmVha1RyZW5kIiwiZm9ybWF0dGVkVGltZSIsInJlZnJlc2hNZXRyaWNzIiwicmVmcmVzaCIsIl91c2VEYWlseVdvcmRzIiwidXNlRGFpbHlXb3JkcyIsIndvcmRzVG9kYXkiLCJ3b3Jkc0xvYWRpbmciLCJpc0xvYWRpbmciLCJyZWZyZXNoV29yZHMiLCJ1c2VFZmZlY3QiLCJwcmV2IiwianN4IiwiVmlldyIsInN0eWxlIiwic3R5bGVzIiwiY29udGFpbmVyIiwiY2hpbGRyZW4iLCJqc3hzIiwibG9hZGluZ0NvbnRhaW5lciIsIkFjdGl2aXR5SW5kaWNhdG9yIiwic2l6ZSIsImNvbG9yIiwiVGV4dCIsImxvYWRpbmdUZXh0IiwibWV0cmljcyIsImlkIiwiaWNvbiIsInZhbHVlIiwidG9TdHJpbmciLCJsYWJlbCIsInRyZW5kIiwiaGFzQWN0aXZpdHkiLCJlbXB0eVN0YXRlIiwiZW1wdHlJY29uIiwiZW1wdHlUaXRsZSIsImVtcHR5U3VidGl0bGUiLCJzZWN0aW9uVGl0bGUiLCJtZXRyaWNzR3JpZCIsIm1hcCIsIm1ldHJpYyIsIk1ldHJpY0NhcmQiLCJfcmVmMiIsImdldFRyZW5kU3R5bGUiLCJpc1Bvc2l0aXZlIiwiaW5jbHVkZXMiLCJpc05lZ2F0aXZlIiwiYmFja2dyb3VuZENvbG9yIiwidHJlbmRTdHlsZSIsIm1ldHJpY0NhcmQiLCJ0cmVuZEluZGljYXRvciIsInRyZW5kVGV4dCIsIm1ldHJpY0ljb24iLCJtZXRyaWNWYWx1ZSIsIm1ldHJpY0xhYmVsIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3NjcmVlbnMvRGFzaGJvYXJkL2NvbXBvbmVudHMvU2ltcGxlTWV0cmljcy9pbmRleC5qcyAtIEFWRUMgUkFGUkHDjkNISVNTRU1FTlRcclxuXHJcbmltcG9ydCB7IHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgVmlldywgVGV4dCwgQWN0aXZpdHlJbmRpY2F0b3IgfSBmcm9tIFwicmVhY3QtbmF0aXZlXCI7XHJcbmltcG9ydCB7IFRoZW1lQ29udGV4dCB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb250ZXh0cy9UaGVtZUNvbnRleHRcIjtcclxuaW1wb3J0IHVzZUFjdGl2aXR5TWV0cmljcyBmcm9tIFwiLi4vLi4vLi4vLi4vaG9va3MvdXNlQWN0aXZpdHlNZXRyaWNzXCI7XHJcbmltcG9ydCB1c2VEYWlseVdvcmRzIGZyb20gXCIuLi8uLi8uLi8uLi9ob29rcy91c2VEYWlseVdvcmRzXCI7XHJcbmltcG9ydCBzdHlsZXMgZnJvbSBcIi4vc3R5bGVcIjtcclxuXHJcbi8qKlxyXG4gKiDwn5OKIFNpbXBsZU1ldHJpY3MgLSBBVkVDIFNZU1TDiE1FIERFIFJBRlJBw45DSElTU0VNRU5UXHJcbiAqL1xyXG5jb25zdCBTaW1wbGVNZXRyaWNzID0gKHsgXHJcbiAgYWNjZW50Q29sb3IgPSBcIiMzQjgyRjZcIiwgXHJcbiAgcmVmcmVzaEtleSA9IDAgLy8g8J+UpSBOT1VWRUxMRSBQUk9QIHBvdXIgZm9yY2VyIGxlIHJhZnJhw65jaGlzc2VtZW50XHJcbn0pID0+IHtcclxuICBjb25zdCB0aGVtZUNvbnRleHQgPSB1c2VDb250ZXh0KFRoZW1lQ29udGV4dCk7XHJcbiAgY29uc3QgY29sb3JzID0gdGhlbWVDb250ZXh0Py5jb2xvcnMgfHwge1xyXG4gICAgc3VyZmFjZTogXCIjRkZGRkZGXCIsXHJcbiAgICB0ZXh0OiBcIiMxRjI5MzdcIixcclxuICAgIHRleHRTZWNvbmRhcnk6IFwiIzZCNzI4MFwiLFxyXG4gIH07XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT0gw4lUQVQgTE9DQUwgUE9VUiBGT1JDRVIgTEUgUkVGUkVTSCA9PT09PT09PT09PT09PT09PT09XHJcbiAgY29uc3QgW2xvY2FsUmVmcmVzaCwgc2V0TG9jYWxSZWZyZXNoXSA9IHVzZVN0YXRlKDApO1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09IEhPT0tTIEFWRUMgUkVGUkVTSCA9PT09PT09PT09PT09PT09PT09XHJcbiAgY29uc3QgeyBcclxuICAgIGN1cnJlbnRTdHJlYWssIFxyXG4gICAgc3RyZWFrVHJlbmQsIFxyXG4gICAgZm9ybWF0dGVkVGltZSxcclxuICAgIHJlZnJlc2g6IHJlZnJlc2hNZXRyaWNzIC8vIPCflKUgU2kgdG9uIGhvb2sgYSB1bmUgZm9uY3Rpb24gcmVmcmVzaFxyXG4gIH0gPSB1c2VBY3Rpdml0eU1ldHJpY3MobG9jYWxSZWZyZXNoKTsgLy8gUGFzc2UgbGUgdHJpZ2dlciBsb2NhbFxyXG5cclxuICBjb25zdCB7IFxyXG4gICAgd29yZHNUb2RheSxcclxuICAgIGlzTG9hZGluZzogd29yZHNMb2FkaW5nLFxyXG4gICAgcmVmcmVzaDogcmVmcmVzaFdvcmRzIC8vIPCflKUgU2kgdG9uIGhvb2sgYSB1bmUgZm9uY3Rpb24gcmVmcmVzaFxyXG4gIH0gPSB1c2VEYWlseVdvcmRzKGxvY2FsUmVmcmVzaCk7IC8vIFBhc3NlIGxlIHRyaWdnZXIgbG9jYWxcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PSDDiUNPVVRFIERVIFJFRlJFU0ggRFUgUEFSRU5UID09PT09PT09PT09PT09PT09PT1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHJlZnJlc2hLZXkgPiAwKSB7XHJcbiAgICAgIC8vIEZvcmNlIGxlIHJlY2hhcmdlbWVudCBkZXMgZG9ubsOpZXNcclxuICAgICAgc2V0TG9jYWxSZWZyZXNoKHByZXYgPT4gcHJldiArIDEpO1xyXG4gICAgICBcclxuICAgICAgLy8gU2kgbGVzIGhvb2tzIG9udCBkZXMgZm9uY3Rpb25zIHJlZnJlc2gsIGxlcyBhcHBlbGVyXHJcbiAgICAgIGlmIChyZWZyZXNoTWV0cmljcykgcmVmcmVzaE1ldHJpY3MoKTtcclxuICAgICAgaWYgKHJlZnJlc2hXb3JkcykgcmVmcmVzaFdvcmRzKCk7XHJcbiAgICB9XHJcbiAgfSwgW3JlZnJlc2hLZXksIHJlZnJlc2hNZXRyaWNzLCByZWZyZXNoV29yZHNdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PSBMT0FESU5HIFNUQVRFID09PT09PT09PT09PT09PT09PT1cclxuICBpZiAod29yZHNMb2FkaW5nKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XHJcbiAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5sb2FkaW5nQ29udGFpbmVyfT5cclxuICAgICAgICAgIDxBY3Rpdml0eUluZGljYXRvciBzaXplPVwic21hbGxcIiBjb2xvcj17YWNjZW50Q29sb3J9IC8+XHJcbiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5sb2FkaW5nVGV4dCwgeyBjb2xvcjogY29sb3JzLnRleHRTZWNvbmRhcnkgfV19PlxyXG4gICAgICAgICAgICBDaGFyZ2VtZW50IGRlcyBtw6l0cmlxdWVzLi4uXHJcbiAgICAgICAgICA8L1RleHQ+XHJcbiAgICAgICAgPC9WaWV3PlxyXG4gICAgICA8L1ZpZXc+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PSBET05Ow4lFUyBERVMgTcOJVFJJUVVFUyA9PT09PT09PT09PT09PT09PT09XHJcbiAgY29uc3QgbWV0cmljcyA9IFtcclxuICAgIHtcclxuICAgICAgaWQ6ICdzdHJlYWsnLFxyXG4gICAgICBpY29uOiAn8J+UpScsXHJcbiAgICAgIHZhbHVlOiAoY3VycmVudFN0cmVhayB8fCAwKS50b1N0cmluZygpLFxyXG4gICAgICBsYWJlbDogJ0pvdXJzIGRlIHN1aXRlJyxcclxuICAgICAgdHJlbmQ6IHN0cmVha1RyZW5kLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6ICd3b3JkcycsXHJcbiAgICAgIGljb246ICfwn5OaJyxcclxuICAgICAgdmFsdWU6ICh3b3Jkc1RvZGF5IHx8IDApLnRvU3RyaW5nKCksXHJcbiAgICAgIGxhYmVsOiAnTW90cyBhdWpvdXJkXFwnaHVpJyxcclxuICAgICAgdHJlbmQ6IG51bGwsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBpZDogJ3RpbWUnLFxyXG4gICAgICBpY29uOiAn4o+x77iPJyxcclxuICAgICAgdmFsdWU6IGZvcm1hdHRlZFRpbWUgfHwgJzBtaW4nLFxyXG4gICAgICBsYWJlbDogJ1RlbXBzIGF1am91cmRcXCdodWknLFxyXG4gICAgICB0cmVuZDogbnVsbCxcclxuICAgIH1cclxuICBdO1xyXG5cclxuICAvLyBNYXNxdWVyIHNpIHRvdXRlcyBsZXMgbcOpdHJpcXVlcyBzb250IMOgIDBcclxuICBjb25zdCBoYXNBY3Rpdml0eSA9IGN1cnJlbnRTdHJlYWsgPiAwIHx8IHdvcmRzVG9kYXkgPiAwIHx8IChmb3JtYXR0ZWRUaW1lICYmIGZvcm1hdHRlZFRpbWUgIT09ICcwbWluJyk7XHJcbiAgXHJcbiAgaWYgKCFoYXNBY3Rpdml0eSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxyXG4gICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuZW1wdHlTdGF0ZX0+XHJcbiAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLmVtcHR5SWNvbn0+8J+OrzwvVGV4dD5cclxuICAgICAgICAgIDxUZXh0IHN0eWxlPXtbc3R5bGVzLmVtcHR5VGl0bGUsIHsgY29sb3I6IGNvbG9ycy50ZXh0IH1dfT5cclxuICAgICAgICAgICAgQ29tbWVuY2V6IHZvdHJlIHByZW1pw6hyZSBzZXNzaW9uICFcclxuICAgICAgICAgIDwvVGV4dD5cclxuICAgICAgICAgIDxUZXh0IHN0eWxlPXtbc3R5bGVzLmVtcHR5U3VidGl0bGUsIHsgY29sb3I6IGNvbG9ycy50ZXh0U2Vjb25kYXJ5IH1dfT5cclxuICAgICAgICAgICAgVm9zIHN0YXRpc3RpcXVlcyBhcHBhcmHDrnRyb250IGljaVxyXG4gICAgICAgICAgPC9UZXh0PlxyXG4gICAgICAgIDwvVmlldz5cclxuICAgICAgPC9WaWV3PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT0gUkVOREVSIFBSSU5DSVBBTCA9PT09PT09PT09PT09PT09PT09XHJcbiAgcmV0dXJuIChcclxuICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGFpbmVyfT5cclxuICAgICAgPFRleHQgc3R5bGU9e1tzdHlsZXMuc2VjdGlvblRpdGxlLCB7IGNvbG9yOiBjb2xvcnMudGV4dCB9XX0+8J+TiiBBdWpvdXJkJmFwb3M7aHVpPC9UZXh0PlxyXG4gICAgICBcclxuICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5tZXRyaWNzR3JpZH0+XHJcbiAgICAgICAge21ldHJpY3MubWFwKChtZXRyaWMpID0+IChcclxuICAgICAgICAgIDxNZXRyaWNDYXJkXHJcbiAgICAgICAgICAgIGtleT17bWV0cmljLmlkfVxyXG4gICAgICAgICAgICBtZXRyaWM9e21ldHJpY31cclxuICAgICAgICAgICAgY29sb3JzPXtjb2xvcnN9XHJcbiAgICAgICAgICAgIGFjY2VudENvbG9yPXthY2NlbnRDb2xvcn1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvVmlldz5cclxuICAgIDwvVmlldz5cclxuICApO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIPCfk4ggQ2FydGUgbcOpdHJpcXVlIGluZGl2aWR1ZWxsZVxyXG4gKi9cclxuY29uc3QgTWV0cmljQ2FyZCA9ICh7IG1ldHJpYywgY29sb3JzIH0pID0+IHtcclxuICBjb25zdCBnZXRUcmVuZFN0eWxlID0gKHRyZW5kKSA9PiB7XHJcbiAgICBpZiAoIXRyZW5kKSByZXR1cm4gbnVsbDtcclxuICAgIFxyXG4gICAgY29uc3QgaXNQb3NpdGl2ZSA9IHRyZW5kLmluY2x1ZGVzKCcrJykgfHwgdHJlbmQuaW5jbHVkZXMoJ/Cfj4YnKSB8fCB0cmVuZC5pbmNsdWRlcygn8J+SqicpIHx8IHRyZW5kLmluY2x1ZGVzKCfwn5SlJyk7XHJcbiAgICBjb25zdCBpc05lZ2F0aXZlID0gdHJlbmQuaW5jbHVkZXMoJy0nKTtcclxuICAgIFxyXG4gICAgaWYgKGlzUG9zaXRpdmUpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRENGQ0U3JyxcclxuICAgICAgICBjb2xvcjogJyMxNkEzNEEnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChpc05lZ2F0aXZlKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0ZFRjJGMicsIFxyXG4gICAgICAgIGNvbG9yOiAnI0RDMjYyNidcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0YxRjVGOScsXHJcbiAgICAgIGNvbG9yOiAnIzY0NzQ4QidcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdHJlbmRTdHlsZSA9IGdldFRyZW5kU3R5bGUobWV0cmljLnRyZW5kKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLm1ldHJpY0NhcmQsIHsgYmFja2dyb3VuZENvbG9yOiBjb2xvcnMuc3VyZmFjZSB9XX0+XHJcbiAgICAgIHsvKiBUcmVuZCBpbmRpY2F0b3IgKi99XHJcbiAgICAgIHttZXRyaWMudHJlbmQgJiYgdHJlbmRTdHlsZSAmJiAoXHJcbiAgICAgICAgPFZpZXcgc3R5bGU9e1tzdHlsZXMudHJlbmRJbmRpY2F0b3IsIHsgYmFja2dyb3VuZENvbG9yOiB0cmVuZFN0eWxlLmJhY2tncm91bmRDb2xvciB9XX0+XHJcbiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy50cmVuZFRleHQsIHsgY29sb3I6IHRyZW5kU3R5bGUuY29sb3IgfV19PlxyXG4gICAgICAgICAgICB7bWV0cmljLnRyZW5kfVxyXG4gICAgICAgICAgPC9UZXh0PlxyXG4gICAgICAgIDwvVmlldz5cclxuICAgICAgKX1cclxuICAgICAgXHJcbiAgICAgIHsvKiBJY29uICovfVxyXG4gICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLm1ldHJpY0ljb259PnttZXRyaWMuaWNvbn08L1RleHQ+XHJcbiAgICAgIFxyXG4gICAgICB7LyogVmFsdWUgKi99XHJcbiAgICAgIDxUZXh0IHN0eWxlPXtbc3R5bGVzLm1ldHJpY1ZhbHVlLCB7IGNvbG9yOiBjb2xvcnMudGV4dCB9XX0+XHJcbiAgICAgICAge21ldHJpYy52YWx1ZX1cclxuICAgICAgPC9UZXh0PlxyXG4gICAgICBcclxuICAgICAgey8qIExhYmVsICovfVxyXG4gICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5tZXRyaWNMYWJlbCwgeyBjb2xvcjogY29sb3JzLnRleHRTZWNvbmRhcnkgfV19PlxyXG4gICAgICAgIHttZXRyaWMubGFiZWx9XHJcbiAgICAgIDwvVGV4dD5cclxuICAgIDwvVmlldz5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1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