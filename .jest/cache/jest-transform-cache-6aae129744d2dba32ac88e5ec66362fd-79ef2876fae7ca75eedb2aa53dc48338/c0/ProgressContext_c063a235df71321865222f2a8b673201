684f298f0a5f25e7b7f44c013d8713a6
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useProgressWrite = exports.useProgressRead = exports.useProgress = exports.createInitialProgress = exports.ProgressWriteContext = exports.ProgressReadContext = exports.ProgressProvider = exports.ProgressContext = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _constants = require("../utils/constants");
var _calculateProgress = require("../utils/progress/calculateProgress");
var _propTypes = _interopRequireDefault(require("prop-types"));
var _jsxRuntime = require("react/jsx-runtime");
var ProgressContext = exports.ProgressContext = (0, _react.createContext)();
var ProgressReadContext = exports.ProgressReadContext = (0, _react.createContext)();
var ProgressWriteContext = exports.ProgressWriteContext = (0, _react.createContext)();
var createInitialProgress = exports.createInitialProgress = function createInitialProgress() {
  var exercises = {};
  Object.keys(_constants.EXERCISES).forEach(function (exerciseType) {
    exercises[exerciseType] = {};
    Object.keys(_constants.LANGUAGE_LEVELS).forEach(function (levelId) {
      if (levelId === 'bonus') {
        if (_constants.BONUS_EXERCISES.includes(exerciseType)) {
          exercises[exerciseType][levelId] = {
            completed: 0,
            total: 100
          };
        }
      } else {
        exercises[exerciseType][levelId] = {
          completed: 0,
          total: 100
        };
      }
    });
  });
  return {
    exercises: exercises,
    stats: {
      streak: 0,
      totalTimeSpent: 0,
      correctAnswers: 0,
      totalAnswers: 0,
      exercisesCompleted: 0,
      lastLogin: null
    },
    lastActivity: {
      type: null,
      level: null,
      timestamp: null
    }
  };
};
var ProgressProvider = exports.ProgressProvider = function ProgressProvider(_ref) {
  var children = _ref.children;
  var _useState = (0, _react.useState)(createInitialProgress()),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    progress = _useState2[0],
    setProgress = _useState2[1];
  var _useState3 = (0, _react.useState)(true),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    isLoading = _useState4[0],
    setIsLoading = _useState4[1];
  var saveTimeoutRef = (0, _react.useRef)(null);
  var isInitialLoad = (0, _react.useRef)(true);
  (0, _react.useEffect)(function () {
    var loadProgress = function () {
      var _ref2 = (0, _asyncToGenerator2.default)(function* () {
        try {
          var _yield$calculateAllPr = yield (0, _calculateProgress.calculateAllProgress)(),
            levelProgress = _yield$calculateAllPr.levelProgress,
            exerciseProgress = _yield$calculateAllPr.exerciseProgress;
          var newProgress = {
            exercises: exerciseProgress,
            stats: {
              streak: 0,
              totalTimeSpent: 0,
              correctAnswers: 0,
              totalAnswers: 0,
              exercisesCompleted: 0,
              lastLogin: null
            },
            lastActivity: {
              type: null,
              level: null,
              timestamp: null
            }
          };
          setProgress(newProgress);
        } catch (error) {
          console.error('Erreur chargement progression:', error);
          setProgress(createInitialProgress());
        } finally {
          setIsLoading(false);
          isInitialLoad.current = false;
        }
      });
      return function loadProgress() {
        return _ref2.apply(this, arguments);
      };
    }();
    loadProgress();
  }, []);
  (0, _react.useEffect)(function () {
    if (isLoading || isInitialLoad.current) {
      return;
    }
    if (saveTimeoutRef.current) {
      clearTimeout(saveTimeoutRef.current);
    }
    saveTimeoutRef.current = setTimeout((0, _asyncToGenerator2.default)(function* () {
      try {
        yield _asyncStorage.default.setItem(_constants.STORAGE_KEYS.USER_PROGRESS, JSON.stringify(progress));
      } catch (error) {
        console.error('Erreur sauvegarde progression:', error);
      }
    }), 500);
    return function () {
      if (saveTimeoutRef.current) {
        clearTimeout(saveTimeoutRef.current);
      }
    };
  }, [progress, isLoading]);
  var updateExerciseProgress = (0, _react.useCallback)(function (exerciseType, level, completed) {
    setProgress(function (prev) {
      var newProgress = Object.assign({}, prev);
      if (!newProgress.exercises[exerciseType]) {
        newProgress.exercises[exerciseType] = {};
      }
      if (!newProgress.exercises[exerciseType][level]) {
        newProgress.exercises[exerciseType][level] = {
          completed: 0,
          total: 100
        };
      }
      newProgress.exercises[exerciseType][level].completed = Math.min(Math.max(0, completed), 100);
      newProgress.lastActivity = {
        type: exerciseType,
        level: level,
        timestamp: new Date().toISOString()
      };
      return newProgress;
    });
  }, []);
  var updateStats = (0, _react.useCallback)(function (newStats) {
    setProgress(function (prev) {
      return Object.assign({}, prev, {
        stats: Object.assign({}, prev.stats, newStats)
      });
    });
  }, []);
  var resetProgress = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      yield _asyncStorage.default.removeItem(_constants.STORAGE_KEYS.USER_PROGRESS);
      setProgress(createInitialProgress());
      return true;
    } catch (error) {
      console.error('Erreur reset progression:', error);
      return false;
    }
  }), []);
  var refreshProgress = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      var _yield$calculateAllPr2 = yield (0, _calculateProgress.calculateAllProgress)(),
        levelProgress = _yield$calculateAllPr2.levelProgress,
        exerciseProgress = _yield$calculateAllPr2.exerciseProgress;
      setProgress(function (prev) {
        return Object.assign({}, prev, {
          exercises: exerciseProgress,
          levelProgress: levelProgress
        });
      });
    } catch (error) {
      console.error('Erreur rafra√Æchissement progression:', error);
    }
  }), []);
  var getLevelProgressFromContext = (0, _react.useCallback)(function (level) {
    return (0, _calculateProgress.getLevelProgress)(progress.levelProgress || {}, level);
  }, [progress.levelProgress]);
  var getExerciseProgressFromContext = (0, _react.useCallback)(function (exerciseType, level) {
    return (0, _calculateProgress.getExerciseProgress)(progress.exercises || {}, exerciseType, level);
  }, [progress.exercises]);
  var hasProgressFromContext = (0, _react.useCallback)(function (exerciseType, level) {
    return (0, _calculateProgress.hasProgress)(progress.exercises || {}, exerciseType, level);
  }, [progress.exercises]);
  var calculateLevelProgress = (0, _react.useCallback)(function (level) {
    return (0, _calculateProgress.getLevelProgress)(progress.levelProgress || {}, level);
  }, [progress.levelProgress]);
  var calculateGlobalProgress = (0, _react.useCallback)(function () {
    var allLevels = Object.keys(_constants.LANGUAGE_LEVELS);
    if (allLevels.length === 0) {
      return 0;
    }
    var totalLevelProgress = allLevels.reduce(function (sum, levelId) {
      var levelProgress = calculateLevelProgress(levelId);
      return sum + levelProgress;
    }, 0);
    return Math.round(totalLevelProgress / allLevels.length);
  }, [calculateLevelProgress]);
  var contextValue = (0, _react.useMemo)(function () {
    return {
      progress: progress,
      isLoading: isLoading,
      updateExerciseProgress: updateExerciseProgress,
      updateStats: updateStats,
      calculateGlobalProgress: calculateGlobalProgress,
      calculateLevelProgress: calculateLevelProgress,
      resetProgress: resetProgress,
      refreshProgress: refreshProgress,
      getLevelProgress: getLevelProgressFromContext,
      getExerciseProgress: getExerciseProgressFromContext,
      hasProgress: hasProgressFromContext
    };
  }, [progress, isLoading, updateExerciseProgress, updateStats, calculateGlobalProgress, calculateLevelProgress, resetProgress, refreshProgress, getLevelProgressFromContext, getExerciseProgressFromContext, hasProgressFromContext]);
  var readValue = (0, _react.useMemo)(function () {
    return {
      progress: progress,
      isLoading: isLoading,
      calculateGlobalProgress: calculateGlobalProgress,
      calculateLevelProgress: calculateLevelProgress,
      refreshProgress: refreshProgress,
      getLevelProgress: getLevelProgressFromContext,
      getExerciseProgress: getExerciseProgressFromContext,
      hasProgress: hasProgressFromContext
    };
  }, [progress, isLoading, calculateGlobalProgress, calculateLevelProgress, refreshProgress, getLevelProgressFromContext, getExerciseProgressFromContext, hasProgressFromContext]);
  var writeValue = (0, _react.useMemo)(function () {
    return {
      updateExerciseProgress: updateExerciseProgress,
      updateStats: updateStats,
      resetProgress: resetProgress
    };
  }, [updateExerciseProgress, updateStats, resetProgress]);
  return (0, _jsxRuntime.jsx)(ProgressReadContext.Provider, {
    value: readValue,
    children: (0, _jsxRuntime.jsx)(ProgressWriteContext.Provider, {
      value: writeValue,
      children: (0, _jsxRuntime.jsx)(ProgressContext.Provider, {
        value: contextValue,
        children: children
      })
    })
  });
};
var useProgress = exports.useProgress = function useProgress() {
  var context = (0, _react.useContext)(ProgressContext);
  if (!context) {
    throw new Error('useProgress must be used within a ProgressProvider');
  }
  return context;
};
var useProgressRead = exports.useProgressRead = function useProgressRead() {
  var context = (0, _react.useContext)(ProgressReadContext);
  if (!context) {
    throw new Error('useProgressRead must be used within a ProgressProvider');
  }
  return context;
};
var useProgressWrite = exports.useProgressWrite = function useProgressWrite() {
  var context = (0, _react.useContext)(ProgressWriteContext);
  if (!context) {
    throw new Error('useProgressWrite must be used within a ProgressProvider');
  }
  return context;
};
ProgressProvider.propTypes = {
  children: _propTypes.default.node.isRequired
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29uc3RhbnRzIiwiX2NhbGN1bGF0ZVByb2dyZXNzIiwiX3Byb3BUeXBlcyIsIl9qc3hSdW50aW1lIiwiUHJvZ3Jlc3NDb250ZXh0IiwiZXhwb3J0cyIsImNyZWF0ZUNvbnRleHQiLCJQcm9ncmVzc1JlYWRDb250ZXh0IiwiUHJvZ3Jlc3NXcml0ZUNvbnRleHQiLCJjcmVhdGVJbml0aWFsUHJvZ3Jlc3MiLCJleGVyY2lzZXMiLCJPYmplY3QiLCJrZXlzIiwiRVhFUkNJU0VTIiwiZm9yRWFjaCIsImV4ZXJjaXNlVHlwZSIsIkxBTkdVQUdFX0xFVkVMUyIsImxldmVsSWQiLCJCT05VU19FWEVSQ0lTRVMiLCJpbmNsdWRlcyIsImNvbXBsZXRlZCIsInRvdGFsIiwic3RhdHMiLCJzdHJlYWsiLCJ0b3RhbFRpbWVTcGVudCIsImNvcnJlY3RBbnN3ZXJzIiwidG90YWxBbnN3ZXJzIiwiZXhlcmNpc2VzQ29tcGxldGVkIiwibGFzdExvZ2luIiwibGFzdEFjdGl2aXR5IiwidHlwZSIsImxldmVsIiwidGltZXN0YW1wIiwiUHJvZ3Jlc3NQcm92aWRlciIsIl9yZWYiLCJjaGlsZHJlbiIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJwcm9ncmVzcyIsInNldFByb2dyZXNzIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJzYXZlVGltZW91dFJlZiIsInVzZVJlZiIsImlzSW5pdGlhbExvYWQiLCJ1c2VFZmZlY3QiLCJsb2FkUHJvZ3Jlc3MiLCJfcmVmMiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl95aWVsZCRjYWxjdWxhdGVBbGxQciIsImNhbGN1bGF0ZUFsbFByb2dyZXNzIiwibGV2ZWxQcm9ncmVzcyIsImV4ZXJjaXNlUHJvZ3Jlc3MiLCJuZXdQcm9ncmVzcyIsImVycm9yIiwiY29uc29sZSIsImN1cnJlbnQiLCJhcHBseSIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJBc3luY1N0b3JhZ2UiLCJzZXRJdGVtIiwiU1RPUkFHRV9LRVlTIiwiVVNFUl9QUk9HUkVTUyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVFeGVyY2lzZVByb2dyZXNzIiwidXNlQ2FsbGJhY2siLCJwcmV2IiwiYXNzaWduIiwiTWF0aCIsIm1pbiIsIm1heCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZVN0YXRzIiwibmV3U3RhdHMiLCJyZXNldFByb2dyZXNzIiwicmVtb3ZlSXRlbSIsInJlZnJlc2hQcm9ncmVzcyIsIl95aWVsZCRjYWxjdWxhdGVBbGxQcjIiLCJnZXRMZXZlbFByb2dyZXNzRnJvbUNvbnRleHQiLCJnZXRMZXZlbFByb2dyZXNzIiwiZ2V0RXhlcmNpc2VQcm9ncmVzc0Zyb21Db250ZXh0IiwiZ2V0RXhlcmNpc2VQcm9ncmVzcyIsImhhc1Byb2dyZXNzRnJvbUNvbnRleHQiLCJoYXNQcm9ncmVzcyIsImNhbGN1bGF0ZUxldmVsUHJvZ3Jlc3MiLCJjYWxjdWxhdGVHbG9iYWxQcm9ncmVzcyIsImFsbExldmVscyIsImxlbmd0aCIsInRvdGFsTGV2ZWxQcm9ncmVzcyIsInJlZHVjZSIsInN1bSIsInJvdW5kIiwiY29udGV4dFZhbHVlIiwidXNlTWVtbyIsInJlYWRWYWx1ZSIsIndyaXRlVmFsdWUiLCJqc3giLCJQcm92aWRlciIsInZhbHVlIiwidXNlUHJvZ3Jlc3MiLCJjb250ZXh0IiwidXNlQ29udGV4dCIsIkVycm9yIiwidXNlUHJvZ3Jlc3NSZWFkIiwidXNlUHJvZ3Jlc3NXcml0ZSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm5vZGUiLCJpc1JlcXVpcmVkIl0sInNvdXJjZXMiOlsiUHJvZ3Jlc3NDb250ZXh0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNvbnRleHQsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xyXG5pbXBvcnQgeyBTVE9SQUdFX0tFWVMsIExBTkdVQUdFX0xFVkVMUywgRVhFUkNJU0VTLCBCT05VU19FWEVSQ0lTRVMgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBjYWxjdWxhdGVBbGxQcm9ncmVzcywgZ2V0TGV2ZWxQcm9ncmVzcywgZ2V0RXhlcmNpc2VQcm9ncmVzcywgaGFzUHJvZ3Jlc3MgfSBmcm9tICcuLi91dGlscy9wcm9ncmVzcy9jYWxjdWxhdGVQcm9ncmVzcyc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcblxyXG4vLyBDcsOpZXIgbGVzIGNvbnRleHRlcyBwb3VyIHVuZSBtZWlsbGV1cmUgc8OpcGFyYXRpb25cclxuZXhwb3J0IGNvbnN0IFByb2dyZXNzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTtcclxuZXhwb3J0IGNvbnN0IFByb2dyZXNzUmVhZENvbnRleHQgPSBjcmVhdGVDb250ZXh0KCk7XHJcbmV4cG9ydCBjb25zdCBQcm9ncmVzc1dyaXRlQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTtcclxuXHJcbi8qKlxyXG4gKiBGb25jdGlvbiBwb3VyIGfDqW7DqXJlciBsJ8OpdGF0IGRlIHByb2dyZXNzaW9uIGluaXRpYWxcclxuICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVJbml0aWFsUHJvZ3Jlc3MgPSAoKSA9PiB7XHJcbiAgY29uc3QgZXhlcmNpc2VzID0ge307XHJcbiAgXHJcbiAgT2JqZWN0LmtleXMoRVhFUkNJU0VTKS5mb3JFYWNoKGV4ZXJjaXNlVHlwZSA9PiB7XHJcbiAgICBleGVyY2lzZXNbZXhlcmNpc2VUeXBlXSA9IHt9O1xyXG4gICAgT2JqZWN0LmtleXMoTEFOR1VBR0VfTEVWRUxTKS5mb3JFYWNoKGxldmVsSWQgPT4ge1xyXG4gICAgICBpZiAobGV2ZWxJZCA9PT0gJ2JvbnVzJykge1xyXG4gICAgICAgIGlmIChCT05VU19FWEVSQ0lTRVMuaW5jbHVkZXMoZXhlcmNpc2VUeXBlKSkge1xyXG4gICAgICAgICAgZXhlcmNpc2VzW2V4ZXJjaXNlVHlwZV1bbGV2ZWxJZF0gPSB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBleGVyY2lzZXNbZXhlcmNpc2VUeXBlXVtsZXZlbElkXSA9IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZXhlcmNpc2VzLFxyXG4gICAgc3RhdHM6IHtcclxuICAgICAgc3RyZWFrOiAwLFxyXG4gICAgICB0b3RhbFRpbWVTcGVudDogMCxcclxuICAgICAgY29ycmVjdEFuc3dlcnM6IDAsXHJcbiAgICAgIHRvdGFsQW5zd2VyczogMCxcclxuICAgICAgZXhlcmNpc2VzQ29tcGxldGVkOiAwLFxyXG4gICAgICBsYXN0TG9naW46IG51bGwsXHJcbiAgICB9LFxyXG4gICAgbGFzdEFjdGl2aXR5OiB7XHJcbiAgICAgIHR5cGU6IG51bGwsXHJcbiAgICAgIGxldmVsOiBudWxsLFxyXG4gICAgICB0aW1lc3RhbXA6IG51bGwsXHJcbiAgICB9LFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyBGb3Vybmlzc2V1ciBkdSBjb250ZXh0ZVxyXG5leHBvcnQgY29uc3QgUHJvZ3Jlc3NQcm92aWRlciA9ICh7IGNoaWxkcmVuIH0pID0+IHtcclxuICBjb25zdCBbcHJvZ3Jlc3MsIHNldFByb2dyZXNzXSA9IHVzZVN0YXRlKGNyZWF0ZUluaXRpYWxQcm9ncmVzcygpKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgXHJcbiAgY29uc3Qgc2F2ZVRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgaXNJbml0aWFsTG9hZCA9IHVzZVJlZih0cnVlKTtcclxuXHJcbiAgLy8gPT09PT09PT09PSBDSEFSR0VNRU5UIElOSVRJQUwgZGVwdWlzIEFzeW5jU3RvcmFnZSA9PT09PT09PT09XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGxvYWRQcm9ncmVzcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBVdGlsaXNlciBub3MgdXRpbHMgcG91ciBjYWxjdWxlciBsYSBwcm9ncmVzc2lvbiByw6llbGxlXHJcbiAgICAgICAgY29uc3QgeyBsZXZlbFByb2dyZXNzLCBleGVyY2lzZVByb2dyZXNzIH0gPSBhd2FpdCBjYWxjdWxhdGVBbGxQcm9ncmVzcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyw6llciBsYSBzdHJ1Y3R1cmUgZGUgZG9ubsOpZXMgY29tcGF0aWJsZVxyXG4gICAgICAgIGNvbnN0IG5ld1Byb2dyZXNzID0ge1xyXG4gICAgICAgICAgZXhlcmNpc2VzOiBleGVyY2lzZVByb2dyZXNzLFxyXG4gICAgICAgICAgc3RhdHM6IHtcclxuICAgICAgICAgICAgc3RyZWFrOiAwLFxyXG4gICAgICAgICAgICB0b3RhbFRpbWVTcGVudDogMCxcclxuICAgICAgICAgICAgY29ycmVjdEFuc3dlcnM6IDAsXHJcbiAgICAgICAgICAgIHRvdGFsQW5zd2VyczogMCxcclxuICAgICAgICAgICAgZXhlcmNpc2VzQ29tcGxldGVkOiAwLFxyXG4gICAgICAgICAgICBsYXN0TG9naW46IG51bGwsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgbGFzdEFjdGl2aXR5OiB7XHJcbiAgICAgICAgICAgIHR5cGU6IG51bGwsXHJcbiAgICAgICAgICAgIGxldmVsOiBudWxsLFxyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG51bGwsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2V0UHJvZ3Jlc3MobmV3UHJvZ3Jlc3MpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBjaGFyZ2VtZW50IHByb2dyZXNzaW9uOicsIGVycm9yKTtcclxuICAgICAgICAvLyBGYWxsYmFjayB2ZXJzIGxhIHN0cnVjdHVyZSBpbml0aWFsZVxyXG4gICAgICAgIHNldFByb2dyZXNzKGNyZWF0ZUluaXRpYWxQcm9ncmVzcygpKTtcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIGlzSW5pdGlhbExvYWQuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgbG9hZFByb2dyZXNzKCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyA9PT09PT09PT09IFNBVVZFR0FSREUgQVVUT01BVElRVUUgKGF2ZWMgRGVib3VuY2UpID09PT09PT09PT1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGlzTG9hZGluZyB8fCBpc0luaXRpYWxMb2FkLmN1cnJlbnQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpO1xyXG4gICAgfVxyXG4gICAgc2F2ZVRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZUy5VU0VSX1BST0dSRVNTLCBKU09OLnN0cmluZ2lmeShwcm9ncmVzcykpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBzYXV2ZWdhcmRlIHByb2dyZXNzaW9uOicsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfSwgNTAwKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmIChzYXZlVGltZW91dFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0sIFtwcm9ncmVzcywgaXNMb2FkaW5nXSk7XHJcblxyXG4gIC8vID09PT09PT09PT0gTcOJVEhPREVTIEdFU1RJT04gREUgTEEgUFJPR1JFU1NJT04gPT09PT09PT09PVxyXG5cclxuICBjb25zdCB1cGRhdGVFeGVyY2lzZVByb2dyZXNzID0gdXNlQ2FsbGJhY2soKGV4ZXJjaXNlVHlwZSwgbGV2ZWwsIGNvbXBsZXRlZCkgPT4ge1xyXG4gICAgc2V0UHJvZ3Jlc3MocHJldiA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld1Byb2dyZXNzID0geyAuLi5wcmV2IH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBTJ2Fzc3VyZXIgcXVlIGwnb2JqZXQgZGUgcHJvZ3Jlc3Npb24gcG91ciBsJ2V4ZXJjaWNlIGV4aXN0ZVxyXG4gICAgICBpZiAoIW5ld1Byb2dyZXNzLmV4ZXJjaXNlc1tleGVyY2lzZVR5cGVdKSB7XHJcbiAgICAgICAgbmV3UHJvZ3Jlc3MuZXhlcmNpc2VzW2V4ZXJjaXNlVHlwZV0gPSB7fTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIW5ld1Byb2dyZXNzLmV4ZXJjaXNlc1tleGVyY2lzZVR5cGVdW2xldmVsXSkge1xyXG4gICAgICAgIG5ld1Byb2dyZXNzLmV4ZXJjaXNlc1tleGVyY2lzZVR5cGVdW2xldmVsXSA9IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIE1ldHRyZSDDoCBqb3VyIGxhIHByb2dyZXNzaW9uIGRlIGwnZXhlcmNpY2VcclxuICAgICAgbmV3UHJvZ3Jlc3MuZXhlcmNpc2VzW2V4ZXJjaXNlVHlwZV1bbGV2ZWxdLmNvbXBsZXRlZCA9IE1hdGgubWluKE1hdGgubWF4KDAsIGNvbXBsZXRlZCksIDEwMCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBNZXR0cmUgw6Agam91ciBsYSBkZXJuacOocmUgYWN0aXZpdMOpXHJcbiAgICAgIG5ld1Byb2dyZXNzLmxhc3RBY3Rpdml0eSA9IHtcclxuICAgICAgICB0eXBlOiBleGVyY2lzZVR5cGUsXHJcbiAgICAgICAgbGV2ZWwsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBuZXdQcm9ncmVzcztcclxuICAgIH0pO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgdXBkYXRlU3RhdHMgPSB1c2VDYWxsYmFjaygobmV3U3RhdHMpID0+IHtcclxuICAgIHNldFByb2dyZXNzKHByZXYgPT4gKHsgLi4ucHJldiwgc3RhdHM6IHsgLi4ucHJldi5zdGF0cywgLi4ubmV3U3RhdHMgfSB9KSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCByZXNldFByb2dyZXNzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVlTLlVTRVJfUFJPR1JFU1MpO1xyXG4gICAgICBzZXRQcm9ncmVzcyhjcmVhdGVJbml0aWFsUHJvZ3Jlc3MoKSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIHJlc2V0IHByb2dyZXNzaW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PSBGT05DVElPTlMgQ09NUEFUSUJMRVMgQVZFQyB1c2VSZWFsVGltZVByb2dyZXNzID09PT09PT09PT1cclxuICBcclxuICBjb25zdCByZWZyZXNoUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGxldmVsUHJvZ3Jlc3MsIGV4ZXJjaXNlUHJvZ3Jlc3MgfSA9IGF3YWl0IGNhbGN1bGF0ZUFsbFByb2dyZXNzKCk7XHJcbiAgICAgIHNldFByb2dyZXNzKHByZXYgPT4gKHtcclxuICAgICAgICAuLi5wcmV2LFxyXG4gICAgICAgIGV4ZXJjaXNlczogZXhlcmNpc2VQcm9ncmVzcyxcclxuICAgICAgICBsZXZlbFByb2dyZXNzXHJcbiAgICAgIH0pKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciByYWZyYcOuY2hpc3NlbWVudCBwcm9ncmVzc2lvbjonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBHZXR0ZXJzIGNvbXBhdGlibGVzIGF2ZWMgdXNlUmVhbFRpbWVQcm9ncmVzc1xyXG4gIGNvbnN0IGdldExldmVsUHJvZ3Jlc3NGcm9tQ29udGV4dCA9IHVzZUNhbGxiYWNrKChsZXZlbCkgPT4ge1xyXG4gICAgcmV0dXJuIGdldExldmVsUHJvZ3Jlc3MocHJvZ3Jlc3MubGV2ZWxQcm9ncmVzcyB8fCB7fSwgbGV2ZWwpO1xyXG4gIH0sIFtwcm9ncmVzcy5sZXZlbFByb2dyZXNzXSk7XHJcblxyXG4gIGNvbnN0IGdldEV4ZXJjaXNlUHJvZ3Jlc3NGcm9tQ29udGV4dCA9IHVzZUNhbGxiYWNrKChleGVyY2lzZVR5cGUsIGxldmVsKSA9PiB7XHJcbiAgICByZXR1cm4gZ2V0RXhlcmNpc2VQcm9ncmVzcyhwcm9ncmVzcy5leGVyY2lzZXMgfHwge30sIGV4ZXJjaXNlVHlwZSwgbGV2ZWwpO1xyXG4gIH0sIFtwcm9ncmVzcy5leGVyY2lzZXNdKTtcclxuXHJcbiAgY29uc3QgaGFzUHJvZ3Jlc3NGcm9tQ29udGV4dCA9IHVzZUNhbGxiYWNrKChleGVyY2lzZVR5cGUsIGxldmVsKSA9PiB7XHJcbiAgICByZXR1cm4gaGFzUHJvZ3Jlc3MocHJvZ3Jlc3MuZXhlcmNpc2VzIHx8IHt9LCBleGVyY2lzZVR5cGUsIGxldmVsKTtcclxuICB9LCBbcHJvZ3Jlc3MuZXhlcmNpc2VzXSk7XHJcblxyXG4gIC8vID09PT09PT09PT0gRk9OQ1RJT05TIERFIENBTENVTCAodXRpbGlzZW50IG5vcyB1dGlscykgPT09PT09PT09PVxyXG5cclxuICBjb25zdCBjYWxjdWxhdGVMZXZlbFByb2dyZXNzID0gdXNlQ2FsbGJhY2soKGxldmVsKSA9PiB7XHJcbiAgICByZXR1cm4gZ2V0TGV2ZWxQcm9ncmVzcyhwcm9ncmVzcy5sZXZlbFByb2dyZXNzIHx8IHt9LCBsZXZlbCk7XHJcbiAgfSwgW3Byb2dyZXNzLmxldmVsUHJvZ3Jlc3NdKTtcclxuXHJcbiAgY29uc3QgY2FsY3VsYXRlR2xvYmFsUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBjb25zdCBhbGxMZXZlbHMgPSBPYmplY3Qua2V5cyhMQU5HVUFHRV9MRVZFTFMpO1xyXG4gICAgaWYgKGFsbExldmVscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG90YWxMZXZlbFByb2dyZXNzID0gYWxsTGV2ZWxzLnJlZHVjZSgoc3VtLCBsZXZlbElkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxldmVsUHJvZ3Jlc3MgPSBjYWxjdWxhdGVMZXZlbFByb2dyZXNzKGxldmVsSWQpO1xyXG4gICAgICByZXR1cm4gc3VtICsgbGV2ZWxQcm9ncmVzcztcclxuICAgIH0sIDApO1xyXG5cclxuICAgIHJldHVybiBNYXRoLnJvdW5kKHRvdGFsTGV2ZWxQcm9ncmVzcyAvIGFsbExldmVscy5sZW5ndGgpO1xyXG4gIH0sIFtjYWxjdWxhdGVMZXZlbFByb2dyZXNzXSk7XHJcbiAgXHJcbiAgLy8gPT09PT09PT09PSBWQUxFVVJTIERVIENPTlRFWFRFIE3DiU1PUklTw4lFUyA9PT09PT09PT09XHJcblxyXG4gIGNvbnN0IGNvbnRleHRWYWx1ZSA9IHVzZU1lbW8oKCkgPT4gKHtcclxuICAgIHByb2dyZXNzLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgdXBkYXRlRXhlcmNpc2VQcm9ncmVzcyxcclxuICAgIHVwZGF0ZVN0YXRzLFxyXG4gICAgY2FsY3VsYXRlR2xvYmFsUHJvZ3Jlc3MsXHJcbiAgICBjYWxjdWxhdGVMZXZlbFByb2dyZXNzLFxyXG4gICAgcmVzZXRQcm9ncmVzcyxcclxuICAgIC8vIEZvbmN0aW9ucyBjb21wYXRpYmxlcyBhdmVjIHVzZVJlYWxUaW1lUHJvZ3Jlc3NcclxuICAgIHJlZnJlc2hQcm9ncmVzcyxcclxuICAgIGdldExldmVsUHJvZ3Jlc3M6IGdldExldmVsUHJvZ3Jlc3NGcm9tQ29udGV4dCxcclxuICAgIGdldEV4ZXJjaXNlUHJvZ3Jlc3M6IGdldEV4ZXJjaXNlUHJvZ3Jlc3NGcm9tQ29udGV4dCxcclxuICAgIGhhc1Byb2dyZXNzOiBoYXNQcm9ncmVzc0Zyb21Db250ZXh0LFxyXG4gIH0pLCBbXHJcbiAgICBwcm9ncmVzcywgXHJcbiAgICBpc0xvYWRpbmcsIFxyXG4gICAgdXBkYXRlRXhlcmNpc2VQcm9ncmVzcywgXHJcbiAgICB1cGRhdGVTdGF0cywgXHJcbiAgICBjYWxjdWxhdGVHbG9iYWxQcm9ncmVzcywgXHJcbiAgICBjYWxjdWxhdGVMZXZlbFByb2dyZXNzLCBcclxuICAgIHJlc2V0UHJvZ3Jlc3MsXHJcbiAgICByZWZyZXNoUHJvZ3Jlc3MsXHJcbiAgICBnZXRMZXZlbFByb2dyZXNzRnJvbUNvbnRleHQsXHJcbiAgICBnZXRFeGVyY2lzZVByb2dyZXNzRnJvbUNvbnRleHQsXHJcbiAgICBoYXNQcm9ncmVzc0Zyb21Db250ZXh0XHJcbiAgXSk7XHJcblxyXG4gIGNvbnN0IHJlYWRWYWx1ZSA9IHVzZU1lbW8oKCkgPT4gKHtcclxuICAgIHByb2dyZXNzLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgY2FsY3VsYXRlR2xvYmFsUHJvZ3Jlc3MsXHJcbiAgICBjYWxjdWxhdGVMZXZlbFByb2dyZXNzLFxyXG4gICAgLy8gRm9uY3Rpb25zIGNvbXBhdGlibGVzIGF2ZWMgdXNlUmVhbFRpbWVQcm9ncmVzc1xyXG4gICAgcmVmcmVzaFByb2dyZXNzLFxyXG4gICAgZ2V0TGV2ZWxQcm9ncmVzczogZ2V0TGV2ZWxQcm9ncmVzc0Zyb21Db250ZXh0LFxyXG4gICAgZ2V0RXhlcmNpc2VQcm9ncmVzczogZ2V0RXhlcmNpc2VQcm9ncmVzc0Zyb21Db250ZXh0LFxyXG4gICAgaGFzUHJvZ3Jlc3M6IGhhc1Byb2dyZXNzRnJvbUNvbnRleHQsXHJcbiAgfSksIFtcclxuICAgIHByb2dyZXNzLCBcclxuICAgIGlzTG9hZGluZywgXHJcbiAgICBjYWxjdWxhdGVHbG9iYWxQcm9ncmVzcywgXHJcbiAgICBjYWxjdWxhdGVMZXZlbFByb2dyZXNzLFxyXG4gICAgcmVmcmVzaFByb2dyZXNzLFxyXG4gICAgZ2V0TGV2ZWxQcm9ncmVzc0Zyb21Db250ZXh0LFxyXG4gICAgZ2V0RXhlcmNpc2VQcm9ncmVzc0Zyb21Db250ZXh0LFxyXG4gICAgaGFzUHJvZ3Jlc3NGcm9tQ29udGV4dFxyXG4gIF0pO1xyXG5cclxuICBjb25zdCB3cml0ZVZhbHVlID0gdXNlTWVtbygoKSA9PiAoe1xyXG4gICAgdXBkYXRlRXhlcmNpc2VQcm9ncmVzcyxcclxuICAgIHVwZGF0ZVN0YXRzLFxyXG4gICAgcmVzZXRQcm9ncmVzcyxcclxuICB9KSwgW3VwZGF0ZUV4ZXJjaXNlUHJvZ3Jlc3MsIHVwZGF0ZVN0YXRzLCByZXNldFByb2dyZXNzXSk7XHJcblxyXG4gIC8vID09PT09PT09PT0gU1RSVUNUVVJFIERVIEZPVVJOSVNTRVVSID09PT09PT09PT1cclxuICByZXR1cm4gKFxyXG4gICAgPFByb2dyZXNzUmVhZENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3JlYWRWYWx1ZX0+XHJcbiAgICAgIDxQcm9ncmVzc1dyaXRlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17d3JpdGVWYWx1ZX0+XHJcbiAgICAgICAgPFByb2dyZXNzQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dFZhbHVlfT5cclxuICAgICAgICAgIHtjaGlsZHJlbn1cclxuICAgICAgICA8L1Byb2dyZXNzQ29udGV4dC5Qcm92aWRlcj5cclxuICAgICAgPC9Qcm9ncmVzc1dyaXRlQ29udGV4dC5Qcm92aWRlcj5cclxuICAgIDwvUHJvZ3Jlc3NSZWFkQ29udGV4dC5Qcm92aWRlcj5cclxuICApO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PSBIT09LUyBQT1VSIENPTlNPTU1FUiBMRSBDT05URVhURSA9PT09PT09PT09XHJcbmV4cG9ydCBjb25zdCB1c2VQcm9ncmVzcyA9ICgpID0+IHtcclxuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChQcm9ncmVzc0NvbnRleHQpO1xyXG4gIGlmICghY29udGV4dCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VQcm9ncmVzcyBtdXN0IGJlIHVzZWQgd2l0aGluIGEgUHJvZ3Jlc3NQcm92aWRlcicpO1xyXG4gIH1cclxuICByZXR1cm4gY29udGV4dDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VQcm9ncmVzc1JlYWQgPSAoKSA9PiB7XHJcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoUHJvZ3Jlc3NSZWFkQ29udGV4dCk7XHJcbiAgaWYgKCFjb250ZXh0KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZVByb2dyZXNzUmVhZCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgUHJvZ3Jlc3NQcm92aWRlcicpO1xyXG4gIH1cclxuICByZXR1cm4gY29udGV4dDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VQcm9ncmVzc1dyaXRlID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFByb2dyZXNzV3JpdGVDb250ZXh0KTtcclxuICBpZiAoIWNvbnRleHQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcigndXNlUHJvZ3Jlc3NXcml0ZSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgUHJvZ3Jlc3NQcm92aWRlcicpO1xyXG4gIH1cclxuICByZXR1cm4gY29udGV4dDtcclxufTtcclxuXHJcblByb2dyZXNzUHJvdmlkZXIucHJvcFR5cGVzID0ge1xyXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZS5pc1JlcXVpcmVkLFxyXG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLFVBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLGtCQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxVQUFBLEdBQUFILHNCQUFBLENBQUFGLE9BQUE7QUFBbUMsSUFBQU0sV0FBQSxHQUFBTixPQUFBO0FBRzVCLElBQU1PLGVBQWUsR0FBQUMsT0FBQSxDQUFBRCxlQUFBLEdBQUcsSUFBQUUsb0JBQWEsRUFBQyxDQUFDO0FBQ3ZDLElBQU1DLG1CQUFtQixHQUFBRixPQUFBLENBQUFFLG1CQUFBLEdBQUcsSUFBQUQsb0JBQWEsRUFBQyxDQUFDO0FBQzNDLElBQU1FLG9CQUFvQixHQUFBSCxPQUFBLENBQUFHLG9CQUFBLEdBQUcsSUFBQUYsb0JBQWEsRUFBQyxDQUFDO0FBSzVDLElBQU1HLHFCQUFxQixHQUFBSixPQUFBLENBQUFJLHFCQUFBLEdBQUcsU0FBeEJBLHFCQUFxQkEsQ0FBQSxFQUFTO0VBQ3pDLElBQU1DLFNBQVMsR0FBRyxDQUFDLENBQUM7RUFFcEJDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDQyxvQkFBUyxDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFBQyxZQUFZLEVBQUk7SUFDN0NMLFNBQVMsQ0FBQ0ssWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVCSixNQUFNLENBQUNDLElBQUksQ0FBQ0ksMEJBQWUsQ0FBQyxDQUFDRixPQUFPLENBQUMsVUFBQUcsT0FBTyxFQUFJO01BQzlDLElBQUlBLE9BQU8s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