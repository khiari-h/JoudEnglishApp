1df64c5b2c4bc2e0b34f087478fdb455
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.storeData = exports.storageService = exports.resetStorage = exports.removeFromStorage = exports.removeData = exports.readFromStorage = exports.isStorageAvailable = exports.getStorageInfo = exports.getMultipleData = exports.getData = exports.clearAllData = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _timeConstants = require("./timeConstants.js");
var _timeUtils = require("./timeUtils.js");
var isStorageAvailable = exports.isStorageAvailable = function () {
  var _ref = (0, _asyncToGenerator2.default)(function* () {
    try {
      var test = '__storage_test__';
      yield _asyncStorage.default.setItem(test, test);
      yield _asyncStorage.default.removeItem(test);
      return true;
    } catch (e) {
      console.warn('AsyncStorage not available:', e.message);
      return false;
    }
  });
  return function isStorageAvailable() {
    return _ref.apply(this, arguments);
  };
}();
var storeData = exports.storeData = function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* (key, value) {
    try {
      var jsonValue = JSON.stringify(value);
      yield _asyncStorage.default.setItem(key, jsonValue);
      return true;
    } catch (error) {
      console.error('Error storing data:', error);
      return false;
    }
  });
  return function storeData(_x, _x2) {
    return _ref2.apply(this, arguments);
  };
}();
var getData = exports.getData = function () {
  var _ref3 = (0, _asyncToGenerator2.default)(function* (key) {
    try {
      var jsonValue = yield _asyncStorage.default.getItem(key);
      return jsonValue != null ? JSON.parse(jsonValue) : null;
    } catch (error) {
      console.error('Error getting data:', error);
      return null;
    }
  });
  return function getData(_x3) {
    return _ref3.apply(this, arguments);
  };
}();
var removeData = exports.removeData = function () {
  var _ref4 = (0, _asyncToGenerator2.default)(function* (key) {
    try {
      yield _asyncStorage.default.removeItem(key);
      return true;
    } catch (error) {
      console.error('Error removing data:', error);
      return false;
    }
  });
  return function removeData(_x4) {
    return _ref4.apply(this, arguments);
  };
}();
var getMultipleData = exports.getMultipleData = function () {
  var _ref5 = (0, _asyncToGenerator2.default)(function* (keys) {
    try {
      var items = yield _asyncStorage.default.multiGet(keys);
      return items.reduce(function (result, _ref6) {
        var _ref7 = (0, _slicedToArray2.default)(_ref6, 2),
          key = _ref7[0],
          value = _ref7[1];
        result[key] = value != null ? JSON.parse(value) : null;
        return result;
      }, {});
    } catch (error) {
      console.error('Error getting multiple data:', error);
      return {};
    }
  });
  return function getMultipleData(_x5) {
    return _ref5.apply(this, arguments);
  };
}();
var clearAllData = exports.clearAllData = function () {
  var _ref8 = (0, _asyncToGenerator2.default)(function* () {
    try {
      yield _asyncStorage.default.clear();
      return true;
    } catch (error) {
      console.error('Error clearing all data:', error);
      return false;
    }
  });
  return function clearAllData() {
    return _ref8.apply(this, arguments);
  };
}();
var validateStorageStructure = function validateStorageStructure(data) {
  if (!data || typeof data !== 'object') return false;
  var hasVersion = typeof data.version === 'string';
  var hasData = typeof data.data === 'object' && data.data !== null;
  var hasTimestamp = typeof data.lastModified === 'number';
  return hasVersion && hasData && hasTimestamp;
};
var migrateOldData = function migrateOldData(oldData) {
  if (validateStorageStructure(oldData)) {
    return oldData;
  }
  var migratedData = Object.assign({}, _timeConstants.DEFAULT_STATS);
  if (oldData && typeof oldData === 'object') {
    if (oldData.vocabulary_classic || oldData.vocabulary_fast) {
      var classicTime = oldData.vocabulary_classic || 0;
      var fastTime = oldData.vocabulary_fast || 0;
      migratedData.vocabulary = classicTime + fastTime;
    }
    Object.keys(_timeConstants.DEFAULT_STATS).forEach(function (exerciseType) {
      if (exerciseType !== 'vocabulary' && oldData[exerciseType]) {
        migratedData[exerciseType] = oldData[exerciseType];
      }
    });
  }
  return {
    version: _timeConstants.STORAGE_CONFIG.VERSION,
    data: (0, _timeUtils.sanitizeTimeStats)(migratedData),
    lastModified: Date.now()
  };
};
var writeToStorage = function () {
  var _ref9 = (0, _asyncToGenerator2.default)(function* (key, data) {
    yield _asyncStorage.default.setItem(key, JSON.stringify(data));
  });
  return function writeToStorage(_x6, _x7) {
    return _ref9.apply(this, arguments);
  };
}();
var _readFromStorage = exports.readFromStorage = function () {
  var _ref0 = (0, _asyncToGenerator2.default)(function* () {
    var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _timeConstants.STORAGE_CONFIG.KEY;
    var available = yield isStorageAvailable();
    if (!available) {
      return null;
    }
    try {
      var rawData = yield _asyncStorage.default.getItem(key);
      if (!rawData) {
        return null;
      }
      var parsedData = JSON.parse(rawData);
      var migratedData = migrateOldData(parsedData);
      if (!validateStorageStructure(parsedData)) {
        yield writeToStorage(key, migratedData.data);
      }
      return migratedData;
    } catch (error) {
      console.error(`Error reading from storage (${key}):`, error);
      if (key !== _timeConstants.STORAGE_CONFIG.BACKUP_KEY) {
        var backup = yield _readFromStorage(_timeConstants.STORAGE_CONFIG.BACKUP_KEY);
        if (backup) {
          console.info('Restored from backup');
          return backup;
        }
      }
      return null;
    }
  });
  return function readFromStorage() {
    return _ref0.apply(this, arguments);
  };
}();
var removeFromStorage = exports.removeFromStorage = function () {
  var _ref1 = (0, _asyncToGenerator2.default)(function* () {
    var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _timeConstants.STORAGE_CONFIG.KEY;
    var available = yield isStorageAvailable();
    if (!available) {
      return false;
    }
    try {
      yield _asyncStorage.default.removeItem(key);
      return true;
    } catch (error) {
      console.error(`Error removing from storage (${key}):`, error);
      return false;
    }
  });
  return function removeFromStorage() {
    return _ref1.apply(this, arguments);
  };
}();
var resetStorage = exports.resetStorage = function resetStorage() {
  return writeToStorage(_timeConstants.STORAGE_CONFIG.KEY, _timeConstants.DEFAULT_STATS);
};
var getStorageInfo = exports.getStorageInfo = function () {
  var _ref10 = (0, _asyncToGenerator2.default)(function* () {
    var available = yield isStorageAvailable();
    if (!available) {
      return {
        available: false
      };
    }
    try {
      var data = yield _readFromStorage();
      var backupData = yield _asyncStorage.default.getItem(_timeConstants.STORAGE_CONFIG.BACKUP_KEY);
      var hasBackup = Boolean(backupData);
      var mainData = yield _asyncStorage.default.getItem(_timeConstants.STORAGE_CONFIG.KEY);
      return {
        available: true,
        hasData: Boolean(data),
        hasBackup: hasBackup,
        version: (data == null ? void 0 : data.version) || 'unknown',
        lastModified: data != null && data.lastModified ? new Date(data.lastModified) : null,
        dataSize: (mainData == null ? void 0 : mainData.length) || 0
      };
    } catch (error) {
      return {
        available: true,
        error: error.message
      };
    }
  });
  return function getStorageInfo() {
    return _ref10.apply(this, arguments);
  };
}();
var storageService = exports.storageService = {
  keys: {
    USER_PROGRESS: 'userProgress',
    USER_SETTINGS: 'userSettings',
    LAST_ACTIVITY: 'lastActivity',
    CURRENT_LEVEL: 'currentLevel',
    STREAK_DATA: 'streakData',
    COMPLETED_EXERCISES: 'completedExercises'
  },
  saveProgress: function saveProgress(progressData) {
    return storeData(storageService.keys.USER_PROGRESS, progressData);
  },
  getProgress: function getProgress() {
    return getData(storageService.keys.USER_PROGRESS);
  },
  saveSettings: function saveSettings(settings) {
    return storeData(storageService.keys.USER_SETTINGS, settings);
  },
  getSettings: function getSettings() {
    return getData(storageService.keys.USER_SETTINGS);
  },
  markExerciseCompleted: function () {
    var _markExerciseCompleted = (0, _asyncToGenerator2.default)(function* (exerciseId, level, score) {
      try {
        var completedExercises = (yield getData(storageService.keys.COMPLETED_EXERCISES)) || {};
        completedExercises[exerciseId] = {
          level: level,
          score: score,
          completedAt: new Date().toISOString()
        };
        yield storeData(storageService.keys.COMPLETED_EXERCISES, completedExercises);
        return true;
      } catch (error) {
        console.error('Error marking exercise completed:', error);
        return false;
      }
    });
    function markExerciseCompleted(_x8, _x9, _x0) {
      return _markExerciseCompleted.apply(this, arguments);
    }
    return markExerciseCompleted;
  }(),
  isExerciseCompleted: function () {
    var _isExerciseCompleted = (0, _asyncToGenerator2.default)(function* (exerciseId) {
      var completedExercises = (yield getData(storageService.keys.COMPLETED_EXERCISES)) || {};
      return Boolean(completedExercises[exerciseId]);
    });
    function isExerciseCompleted(_x1) {
      return _isExerciseCompleted.apply(this, arguments);
    }
    return isExerciseCompleted;
  }(),
  updateStreak: function () {
    var _updateStreak = (0, _asyncToGenerator2.default)(function* () {
      try {
        var streakData = (yield getData(storageService.keys.STREAK_DATA)) || {
          currentStreak: 0,
          lastLoginDate: null,
          maxStreak: 0
        };
        var now = new Date();
        var today = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
        if (!streakData.lastLoginDate) {
          streakData.currentStreak = 1;
          streakData.maxStreak = 1;
          streakData.lastLoginDate = today;
        } else {
          var lastLogin = new Date(streakData.lastLoginDate).getTime();
          var oneDayMs = 24 * 60 * 60 * 1000;
          if (today - lastLogin === oneDayMs) {
            streakData.currentStreak += 1;
            streakData.maxStreak = Math.max(streakData.maxStreak, streakData.currentStreak);
            streakData.lastLoginDate = today;
          } else if (today === lastLogin) {} else {
            streakData.currentStreak = 1;
            streakData.lastLoginDate = today;
          }
        }
        yield storeData(storageService.keys.STREAK_DATA, streakData);
        return streakData;
      } catch (error) {
        console.error('Error updating streak:', error);
        return null;
      }
    });
    function updateStreak() {
      return _updateStreak.apply(this, arguments);
    }
    return updateStreak;
  }(),
  getStreak: function getStreak() {
    return getData(storageService.keys.STREAK_DATA) || {
      currentStreak: 0,
      lastLoginDate: null,
      maxStreak: 0
    };
  },
  resetAllData: function resetAllData() {
    return clearAllData();
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXN5bmNTdG9yYWdlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdGltZUNvbnN0YW50cyIsIl90aW1lVXRpbHMiLCJpc1N0b3JhZ2VBdmFpbGFibGUiLCJleHBvcnRzIiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsImRlZmF1bHQiLCJ0ZXN0IiwiQXN5bmNTdG9yYWdlIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJlIiwiY29uc29sZSIsIndhcm4iLCJtZXNzYWdlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzdG9yZURhdGEiLCJfcmVmMiIsImtleSIsInZhbHVlIiwianNvblZhbHVlIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiX3giLCJfeDIiLCJnZXREYXRhIiwiX3JlZjMiLCJnZXRJdGVtIiwicGFyc2UiLCJfeDMiLCJyZW1vdmVEYXRhIiwiX3JlZjQiLCJfeDQiLCJnZXRNdWx0aXBsZURhdGEiLCJfcmVmNSIsImtleXMiLCJpdGVtcyIsIm11bHRpR2V0IiwicmVkdWNlIiwicmVzdWx0IiwiX3JlZjYiLCJfcmVmNyIsIl9zbGljZWRUb0FycmF5MiIsIl94NSIsImNsZWFyQWxsRGF0YSIsIl9yZWY4IiwiY2xlYXIiLCJ2YWxpZGF0ZVN0b3JhZ2VTdHJ1Y3R1cmUiLCJkYXRhIiwiaGFzVmVyc2lvbiIsInZlcnNpb24iLCJoYXNEYXRhIiwiaGFzVGltZXN0YW1wIiwibGFzdE1vZGlmaWVkIiwibWlncmF0ZU9sZERhdGEiLCJvbGREYXRhIiwibWlncmF0ZWREYXRhIiwiT2JqZWN0IiwiYXNzaWduIiwiREVGQVVMVF9TVEFUUyIsInZvY2FidWxhcnlfY2xhc3NpYyIsInZvY2FidWxhcnlfZmFzdCIsImNsYXNzaWNUaW1lIiwiZmFzdFRpbWUiLCJ2b2NhYnVsYXJ5IiwiZm9yRWFjaCIsImV4ZXJjaXNlVHlwZSIsIlNUT1JBR0VfQ09ORklHIiwiVkVSU0lPTiIsInNhbml0aXplVGltZVN0YXRzIiwiRGF0ZSIsIm5vdyIsIndyaXRlVG9TdG9yYWdlIiwiX3JlZjkiLCJfeDYiLCJfeDciLCJyZWFkRnJvbVN0b3JhZ2UiLCJfcmVmMCIsImxlbmd0aCIsInVuZGVmaW5lZCIsIktFWSIsImF2YWlsYWJsZSIsInJhd0RhdGEiLCJwYXJzZWREYXRhIiwiQkFDS1VQX0tFWSIsImJhY2t1cCIsImluZm8iLCJyZW1vdmVGcm9tU3RvcmFnZSIsIl9yZWYxIiwicmVzZXRTdG9yYWdlIiwiZ2V0U3RvcmFnZUluZm8iLCJfcmVmMTAiLCJiYWNrdXBEYXRhIiwiaGFzQmFja3VwIiwiQm9vbGVhbiIsIm1haW5EYXRhIiwiZGF0YVNpemUiLCJzdG9yYWdlU2VydmljZSIsIlVTRVJfUFJPR1JFU1MiLCJVU0VSX1NFVFRJTkdTIiwiTEFTVF9BQ1RJVklUWSIsIkNVUlJFTlRfTEVWRUwiLCJTVFJFQUtfREFUQSIsIkNPTVBMRVRFRF9FWEVSQ0lTRVMiLCJzYXZlUHJvZ3Jlc3MiLCJwcm9ncmVzc0RhdGEiLCJnZXRQcm9ncmVzcyIsInNhdmVTZXR0aW5ncyIsInNldHRpbmdzIiwiZ2V0U2V0dGluZ3MiLCJtYXJrRXhlcmNpc2VDb21wbGV0ZWQiLCJfbWFya0V4ZXJjaXNlQ29tcGxldGVkIiwiZXhlcmNpc2VJZCIsImxldmVsIiwic2NvcmUiLCJjb21wbGV0ZWRFeGVyY2lzZXMiLCJjb21wbGV0ZWRBdCIsInRvSVNPU3RyaW5nIiwiX3g4IiwiX3g5IiwiX3gwIiwiaXNFeGVyY2lzZUNvbXBsZXRlZCIsIl9pc0V4ZXJjaXNlQ29tcGxldGVkIiwiX3gxIiwidXBkYXRlU3RyZWFrIiwiX3VwZGF0ZVN0cmVhayIsInN0cmVha0RhdGEiLCJjdXJyZW50U3RyZWFrIiwibGFzdExvZ2luRGF0ZSIsIm1heFN0cmVhayIsInRvZGF5IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRUaW1lIiwibGFzdExvZ2luIiwib25lRGF5TXMiLCJNYXRoIiwibWF4IiwiZ2V0U3RyZWFrIiwicmVzZXRBbGxEYXRhIl0sInNvdXJjZXMiOlsic3RvcmFnZVV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9zdG9yYWdlVXRpbHMuanNcclxuLyoqXHJcbiAqIFV0aWxpdGFpcmVzIHVuaWZpw6lzIHBvdXIgbGEgZ2VzdGlvbiBkdSBzdG9ja2FnZSBBc3luY1N0b3JhZ2VcclxuICogQ29tYmluZSBsb2dpcXVlIG3DqXRpZXIgKyB1dGlsaXRhaXJlcyBnw6luw6lyaXF1ZXNcclxuICovXHJcblxyXG5pbXBvcnQgQXN5bmNTdG9yYWdlIGZyb20gJ0ByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZS9hc3luYy1zdG9yYWdlJztcclxuaW1wb3J0IHsgU1RPUkFHRV9DT05GSUcsIERFRkFVTFRfU1RBVFMgfSBmcm9tICcuL3RpbWVDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBzYW5pdGl6ZVRpbWVTdGF0cyB9IGZyb20gJy4vdGltZVV0aWxzLmpzJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT0gVVRJTElUQUlSRVMgR8OJTsOJUklRVUVTID09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBWw6lyaWZpZSBzaSBBc3luY1N0b3JhZ2UgZXN0IGRpc3BvbmlibGVcclxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFRydWUgc2kgQXN5bmNTdG9yYWdlIGVzdCBkaXNwb25pYmxlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgaXNTdG9yYWdlQXZhaWxhYmxlID0gYXN5bmMgKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB0ZXN0ID0gJ19fc3RvcmFnZV90ZXN0X18nO1xyXG4gICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0odGVzdCwgdGVzdCk7XHJcbiAgICBhd2FpdCBBc3luY1N0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0KTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUud2FybignQXN5bmNTdG9yYWdlIG5vdCBhdmFpbGFibGU6JywgZS5tZXNzYWdlKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogU3RvY2tlciBkZXMgZG9ubsOpZXMgZ8OpbsOpcmlxdWVzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBDbMOpIGRlIHN0b2NrYWdlXHJcbiAqIEBwYXJhbSB7YW55fSB2YWx1ZSAtIFZhbGV1ciDDoCBzdG9ja2VyIChzZXJhIGNvbnZlcnRpZSBlbiBKU09OKVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSB0cnVlIHNpIHN1Y2PDqHMsIGZhbHNlIHNpIGVycmV1clxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHN0b3JlRGF0YSA9IGFzeW5jIChrZXksIHZhbHVlKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGpzb25WYWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5zZXRJdGVtKGtleSwganNvblZhbHVlKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdG9yaW5nIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBSw6ljdXDDqXJlciBkZXMgZG9ubsOpZXMgZ8OpbsOpcmlxdWVzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBDbMOpIGRlIHN0b2NrYWdlXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59IC0gRG9ubsOpZXMgcsOpY3Vww6lyw6llcyBvdSBudWxsIHNpIG5vbiB0cm91dsOpL2VycmV1clxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGdldERhdGEgPSBhc3luYyAoa2V5KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGpzb25WYWx1ZSA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICByZXR1cm4ganNvblZhbHVlICE9IG51bGwgPyBKU09OLnBhcnNlKGpzb25WYWx1ZSkgOiBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFN1cHByaW1lciBkZXMgZG9ubsOpZXNcclxuICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIENsw6kgZGUgc3RvY2thZ2VcclxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IC0gdHJ1ZSBzaSBzdWNjw6hzLCBmYWxzZSBzaSBlcnJldXJcclxuICovXHJcbmV4cG9ydCBjb25zdCByZW1vdmVEYXRhID0gYXN5bmMgKGtleSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBBc3luY1N0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbW92aW5nIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBSw6ljdXDDqXJlciBwbHVzaWV1cnMgZG9ubsOpZXMgZGVwdWlzIEFzeW5jU3RvcmFnZVxyXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGtleXMgLSBUYWJsZWF1IGRlIGNsw6lzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IC0gT2JqZXQgYXZlYyBsZXMgY2zDqXMgZXQgbGVzIHZhbGV1cnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBnZXRNdWx0aXBsZURhdGEgPSBhc3luYyAoa2V5cykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IEFzeW5jU3RvcmFnZS5tdWx0aUdldChrZXlzKTtcclxuICAgIHJldHVybiBpdGVtcy5yZWR1Y2UoKHJlc3VsdCwgW2tleSwgdmFsdWVdKSA9PiB7XHJcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsdWUgIT0gbnVsbCA/IEpTT04ucGFyc2UodmFsdWUpIDogbnVsbDtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sIHt9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBtdWx0aXBsZSBkYXRhOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7fTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogRWZmYWNlciB0b3V0ZXMgbGVzIGRvbm7DqWVzIGRlIGwnYXBwbGljYXRpb25cclxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IC0gdHJ1ZSBzaSBzdWNjw6hzLCBmYWxzZSBzaSBlcnJldXJcclxuICovXHJcbmV4cG9ydCBjb25zdCBjbGVhckFsbERhdGEgPSBhc3luYyAoKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsZWFyaW5nIGFsbCBkYXRhOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09IExPR0lRVUUgTcOJVElFUiBTUMOJQ0lGSVFVRSA9PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogVmFsaWRlIGxhIHN0cnVjdHVyZSBkZXMgZG9ubsOpZXMgc3RvY2vDqWVzXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZVN0b3JhZ2VTdHJ1Y3R1cmUgPSAoZGF0YSkgPT4ge1xyXG4gIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcclxuICBcclxuICBjb25zdCBoYXNWZXJzaW9uID0gdHlwZW9mIGRhdGEudmVyc2lvbiA9PT0gJ3N0cmluZyc7XHJcbiAgY29uc3QgaGFzRGF0YSA9IHR5cGVvZiBkYXRhLmRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEuZGF0YSAhPT0gbnVsbDtcclxuICBjb25zdCBoYXNUaW1lc3RhbXAgPSB0eXBlb2YgZGF0YS5sYXN0TW9kaWZpZWQgPT09ICdudW1iZXInO1xyXG4gIFxyXG4gIHJldHVybiBoYXNWZXJzaW9uICYmIGhhc0RhdGEgJiYgaGFzVGltZXN0YW1wO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1pZ3JlIGxlcyBhbmNpZW5uZXMgZG9ubsOpZXMgdmVycyBsZSBub3V2ZWF1IGZvcm1hdFxyXG4gKi9cclxuY29uc3QgbWlncmF0ZU9sZERhdGEgPSAob2xkRGF0YSkgPT4ge1xyXG4gIGlmICh2YWxpZGF0ZVN0b3JhZ2VTdHJ1Y3R1cmUob2xkRGF0YSkpIHtcclxuICAgIHJldHVybiBvbGREYXRhO1xyXG4gIH1cclxuICBcclxuICBjb25zdCBtaWdyYXRlZERhdGEgPSB7IC4uLkRFRkFVTFRfU1RBVFMgfTtcclxuICBcclxuICBpZiAob2xkRGF0YSAmJiB0eXBlb2Ygb2xkRGF0YSA9PT0gJ29iamVjdCcpIHtcclxuICAgIGlmIChvbGREYXRhLnZvY2FidWxhcnlfY2xhc3NpYyB8fCBvbGREYXRhLnZvY2FidWxhcnlfZmFzdCkge1xyXG4gICAgICBjb25zdCBjbGFzc2ljVGltZSA9IG9sZERhdGEudm9jYWJ1bGFyeV9jbGFzc2ljIHx8IDA7XHJcbiAgICAgIGNvbnN0IGZhc3RUaW1lID0gb2xkRGF0YS52b2NhYnVsYXJ5X2Zhc3QgfHwgMDtcclxuICAgICAgbWlncmF0ZWREYXRhLnZvY2FidWxhcnkgPSBjbGFzc2ljVGltZSArIGZhc3RUaW1lO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBPYmplY3Qua2V5cyhERUZBVUxUX1NUQVRTKS5mb3JFYWNoKGV4ZXJjaXNlVHlwZSA9PiB7XHJcbiAgICAgIGlmIChleGVyY2lzZVR5cGUgIT09ICd2b2NhYnVsYXJ5JyAmJiBvbGREYXRhW2V4ZXJjaXNlVHlwZV0pIHtcclxuICAgICAgICBtaWdyYXRlZERhdGFbZXhlcmNpc2VUeXBlXSA9IG9sZERhdGFbZXhlcmNpc2VUeXBlXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICB2ZXJzaW9uOiBTVE9SQUdFX0NPTkZJRy5WRVJTSU9OLFxyXG4gICAgZGF0YTogc2FuaXRpemVUaW1lU3RhdHMobWlncmF0ZWREYXRhKSxcclxuICAgIGxhc3RNb2RpZmllZDogRGF0ZS5ub3coKVxyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogw4ljcml0IGxlcyBkb25uw6llcyBhdmVjIHZhbGlkYXRpb25cclxuICovXHJcbmNvbnN0IHdyaXRlVG9TdG9yYWdlID0gYXN5bmMgKGtleSwgZGF0YSkgPT4ge1xyXG4gIGF3YWl0IEFzeW5jU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIExpdCBsZXMgZG9ubsOpZXMgYXZlYyB2YWxpZGF0aW9uIGV0IG1pZ3JhdGlvblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJlYWRGcm9tU3RvcmFnZSA9IGFzeW5jIChrZXkgPSBTVE9SQUdFX0NPTkZJRy5LRVkpID0+IHtcclxuICBjb25zdCBhdmFpbGFibGUgPSBhd2FpdCBpc1N0b3JhZ2VBdmFpbGFibGUoKTtcclxuICBpZiAoIWF2YWlsYWJsZSkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByYXdEYXRhID0gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgIGlmICghcmF3RGF0YSkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UocmF3RGF0YSk7XHJcbiAgICBjb25zdCBtaWdyYXRlZERhdGEgPSBtaWdyYXRlT2xkRGF0YShwYXJzZWREYXRhKTtcclxuICAgIFxyXG4gICAgaWYgKCF2YWxpZGF0ZVN0b3JhZ2VTdHJ1Y3R1cmUocGFyc2VkRGF0YSkpIHtcclxuICAgICAgYXdhaXQgd3JpdGVUb1N0b3JhZ2Uoa2V5LCBtaWdyYXRlZERhdGEuZGF0YSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBtaWdyYXRlZERhdGE7XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBmcm9tIHN0b3JhZ2UgKCR7a2V5fSk6YCwgZXJyb3IpO1xyXG4gICAgXHJcbiAgICBpZiAoa2V5ICE9PSBTVE9SQUdFX0NPTkZJRy5CQUNLVVBfS0VZKSB7XHJcbiAgICAgIGNvbnN0IGJhY2t1cCA9IGF3YWl0IHJlYWRGcm9tU3RvcmFnZShTVE9SQUdFX0NPTkZJRy5CQUNLVVBfS0VZKTtcclxuICAgICAgaWYgKGJhY2t1cCkge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnUmVzdG9yZWQgZnJvbSBiYWNrdXAnKTtcclxuICAgICAgICByZXR1cm4gYmFja3VwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBTdXBwcmltZSBsZXMgZG9ubsOpZXMgZHUgQXN5bmNTdG9yYWdlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlRnJvbVN0b3JhZ2UgPSBhc3luYyAoa2V5ID0gU1RPUkFHRV9DT05GSUcuS0VZKSA9PiB7XHJcbiAgY29uc3QgYXZhaWxhYmxlID0gYXdhaXQgaXNTdG9yYWdlQXZhaWxhYmxlKCk7XHJcbiAgaWYgKCFhdmFpbGFibGUpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVtb3ZpbmcgZnJvbSBzdG9yYWdlICgke2tleX0pOmAsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogUmVtZXQgbGVzIGRvbm7DqWVzIMOgIHrDqXJvXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVzZXRTdG9yYWdlID0gKCkgPT4ge1xyXG4gIHJldHVybiB3cml0ZVRvU3RvcmFnZShTVE9SQUdFX0NPTkZJRy5LRVksIERFRkFVTFRfU1RBVFMpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE9idGllbnQgbGVzIHN0YXRpc3RpcXVlcyBkZSBzdG9ja2FnZSBwb3VyIGRlYnVnXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0U3RvcmFnZUluZm8gPSBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgYXZhaWxhYmxlID0gYXdhaXQgaXNTdG9yYWdlQXZhaWxhYmxlKCk7XHJcbiAgaWYgKCFhdmFpbGFibGUpIHtcclxuICAgIHJldHVybiB7IGF2YWlsYWJsZTogZmFsc2UgfTtcclxuICB9XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZWFkRnJvbVN0b3JhZ2UoKTtcclxuICAgIGNvbnN0IGJhY2t1cERhdGEgPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0NPTkZJRy5CQUNLVVBfS0VZKTtcclxuICAgIGNvbnN0IGhhc0JhY2t1cCA9IEJvb2xlYW4oYmFja3VwRGF0YSk7XHJcbiAgICBjb25zdCBtYWluRGF0YSA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfQ09ORklHLktFWSk7XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGF2YWlsYWJsZTogdHJ1ZSxcclxuICAgICAgaGFzRGF0YTogQm9vbGVhbihkYXRhKSxcclxuICAgICAgaGFzQmFja3VwLFxyXG4gICAgICB2ZXJzaW9uOiBkYXRhPy52ZXJzaW9uIHx8ICd1bmtub3duJyxcclxuICAgICAgbGFzdE1vZGlmaWVkOiBkYXRhPy5sYXN0TW9kaWZpZWQgPyBuZXcgRGF0ZShkYXRhLmxhc3RNb2RpZmllZCkgOiBudWxsLFxyXG4gICAgICBkYXRhU2l6ZTogbWFpbkRhdGE/Lmxlbmd0aCB8fCAwXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhdmFpbGFibGU6IHRydWUsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT0gU0VSVklDRSBNw4lUSUVSIFBPVVIgTCdBUFAgPT09PT09PT09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIFNlcnZpY2UgZGUgc3RvY2thZ2Ugc3DDqWNpZmlxdWUgcG91ciBsJ2FwcGxpY2F0aW9uXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc3RvcmFnZVNlcnZpY2UgPSB7XHJcbiAgLy8gQ2zDqXMgZGUgc3RvY2thZ2VcclxuICBrZXlzOiB7XHJcbiAgICBVU0VSX1BST0dSRVNTOiAndXNlclByb2dyZXNzJyxcclxuICAgIFVTRVJfU0VUVElOR1M6ICd1c2VyU2V0dGluZ3MnLFxyXG4gICAgTEFTVF9BQ1RJVklUWTogJ2xhc3RBY3Rpdml0eScsXHJcbiAgICBDVVJSRU5UX0xFVkVMOiAnY3VycmVudExldmVsJyxcclxuICAgIFNUUkVBS19EQVRBOiAnc3RyZWFrRGF0YScsXHJcbiAgICBDT01QTEVURURfRVhFUkNJU0VTOiAnY29tcGxldGVkRXhlcmNpc2VzJyxcclxuICB9LFxyXG5cclxuICAvLyBTYXV2ZWdhcmRlciBsYSBwcm9ncmVzc2lvblxyXG4gIHNhdmVQcm9ncmVzczogKHByb2dyZXNzRGF0YSkgPT4ge1xyXG4gICAgcmV0dXJuIHN0b3JlRGF0YShzdG9yYWdlU2VydmljZS5rZXlzLlVTRVJfUFJPR1JFU1MsIHByb2dyZXNzRGF0YSk7XHJcbiAgfSxcclxuXHJcbiAgLy8gUsOpY3Vww6lyZXIgbGEgcHJvZ3Jlc3Npb25cclxuICBnZXRQcm9ncmVzczogKCkgPT4ge1xyXG4gICAgcmV0dXJuIGdldERhdGEoc3RvcmFnZVNlcnZpY2Uua2V5cy5VU0VSX1BST0dSRVNTKTtcclxuICB9LFxyXG5cclxuICAvLyBTYXV2ZWdhcmRlciBsZXMgcGFyYW3DqHRyZXNcclxuICBzYXZlU2V0dGluZ3M6IChzZXR0aW5ncykgPT4ge1xyXG4gICAgcmV0dXJuIHN0b3JlRGF0YShzdG9yYWdlU2VydmljZS5rZXlzLlVTRVJfU0VUVElOR1MsIHNldHRpbmdzKTtcclxuICB9LFxyXG5cclxuICAvLyBSw6ljdXDDqXJlciBsZXMgcGFyYW3DqHRyZXNcclxuICBnZXRTZXR0aW5nczogKCkgPT4ge1xyXG4gICAgcmV0dXJuIGdldERhdGEoc3RvcmFnZVNlcnZpY2Uua2V5cy5VU0VSX1NFVFRJTkdTKTtcclxuICB9LFxyXG5cclxuICAvLyBNYXJxdWVyIHVuIGV4ZXJjaWNlIGNvbW1lIGNvbXBsw6l0w6lcclxuICBtYXJrRXhlcmNpc2VDb21wbGV0ZWQ6IGFzeW5jIChleGVyY2lzZUlkLCBsZXZlbCwgc2NvcmUpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbXBsZXRlZEV4ZXJjaXNlcyA9IGF3YWl0IGdldERhdGEoc3RvcmFnZVNlcnZpY2Uua2V5cy5DT01QTEVURURfRVhFUkNJU0VTKSB8fCB7fTtcclxuXHJcbiAgICAgIGNvbXBsZXRlZEV4ZXJjaXNlc1tleGVyY2lzZUlkXSA9IHtcclxuICAgICAgICBsZXZlbCxcclxuICAgICAgICBzY29yZSxcclxuICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXdhaXQgc3RvcmVEYXRhKHN0b3JhZ2VTZXJ2aWNlLmtleXMuQ09NUExFVEVEX0VYRVJDSVNFUywgY29tcGxldGVkRXhlcmNpc2VzKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXJraW5nIGV4ZXJjaXNlIGNvbXBsZXRlZDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvLyBWw6lyaWZpZXIgc2kgdW4gZXhlcmNpY2UgYSDDqXTDqSBjb21wbMOpdMOpXHJcbiAgaXNFeGVyY2lzZUNvbXBsZXRlZDogYXN5bmMgKGV4ZXJjaXNlSWQpID0+IHtcclxuICAgIGNvbnN0IGNvbXBsZXRlZEV4ZXJjaXNlcyA9IGF3YWl0IGdldERhdGEoc3RvcmFnZVNlcnZpY2Uua2V5cy5DT01QTEVURURfRVhFUkNJU0VTKSB8fCB7fTtcclxuICAgIHJldHVybiBCb29sZWFuKGNvbXBsZXRlZEV4ZXJjaXNlc1tleGVyY2lzZUlkXSk7XHJcbiAgfSxcclxuXHJcbiAgLy8gTWV0dHJlIMOgIGpvdXIgbGEgc3RyZWFrXHJcbiAgdXBkYXRlU3RyZWFrOiBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdHJlYWtEYXRhID0gYXdhaXQgZ2V0RGF0YShzdG9yYWdlU2VydmljZS5rZXlzLlNUUkVBS19EQVRBKSB8fCB7XHJcbiAgICAgICAgY3VycmVudFN0cmVhazogMCxcclxuICAgICAgICBsYXN0TG9naW5EYXRlOiBudWxsLFxyXG4gICAgICAgIG1heFN0cmVhazogMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICBpZiAoIXN0cmVha0RhdGEubGFzdExvZ2luRGF0ZSkge1xyXG4gICAgICAgIHN0cmVha0RhdGEuY3VycmVudFN0cmVhayA9IDE7XHJcbiAgICAgICAgc3RyZWFrRGF0YS5tYXhTdHJlYWsgPSAxO1xyXG4gICAgICAgIHN0cmVha0RhdGEubGFzdExvZ2luRGF0ZSA9IHRvZGF5O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGxhc3RMb2dpbiA9IG5ldyBEYXRlKHN0cmVha0RhdGEubGFzdExvZ2luRGF0ZSkuZ2V0VGltZSgpO1xyXG4gICAgICAgIGNvbnN0IG9uZURheU1zID0gMjQgKiA2MCAqIDYwICogMTAwMDtcclxuXHJcbiAgICAgICAgaWYgKHRvZGF5IC0gbGFzdExvZ2luID09PSBvbmVEYXlNcykge1xyXG4gICAgICAgICAgc3RyZWFrRGF0YS5jdXJyZW50U3RyZWFrICs9IDE7XHJcbiAgICAgICAgICBzdHJlYWtEYXRhLm1heFN0cmVhayA9IE1hdGgubWF4KHN0cmVha0RhdGEubWF4U3RyZWFrLCBzdHJlYWtEYXRhLmN1cnJlbnRTdHJlYWspO1xyXG4gICAgICAgICAgc3RyZWFrRGF0YS5sYXN0TG9naW5EYXRlID0gdG9kYXk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0b2RheSA9PT0gbGFzdExvZ2luKSB7XHJcbiAgICAgICAgICAvLyBOZSByaWVuIGZhaXJlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN0cmVha0RhdGEuY3VycmVudFN0cmVhayA9IDE7XHJcbiAgICAgICAgICBzdHJlYWtEYXRhLmxhc3RMb2dpbkRhdGUgPSB0b2RheTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IHN0b3JlRGF0YShzdG9yYWdlU2VydmljZS5rZXlzLlNUUkVBS19EQVRBLCBzdHJlYWtEYXRhKTtcclxuICAgICAgcmV0dXJuIHN0cmVha0RhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBzdHJlYWs6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvLyBSw6ljdXDDqXJlciBsZXMgZG9ubsOpZXMgZGUgc3RyZWFrXHJcbiAgZ2V0U3RyZWFrOiAoKSA9PiB7XHJcbiAgICByZXR1cm4gZ2V0RGF0YShzdG9yYWdlU2VydmljZS5rZXlzLlNUUkVBS19EQVRBKSB8fCB7XHJcbiAgICAgIGN1cnJlbnRTdHJlYWs6IDAsXHJcbiAgICAgIGxhc3RMb2dpbkRhdGU6IG51bGwsXHJcbiAgICAgIG1heFN0cmVhazogMCxcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgLy8gUsOpaW5pdGlhbGlzZXIgdG91dGVzIGxlcyBkb25uw6llc1xyXG4gIHJlc2V0QWxsRGF0YTogKCkgPT4ge1xyXG4gICAgcmV0dXJuIGNsZWFyQWxsRGF0YSgpO1xyXG4gIH0sXHJcbn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBTUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsVUFBQSxHQUFBRixPQUFBO0FBUU8sSUFBTUcsa0JBQWtCLEdBQUFDLE9BQUEsQ0FBQUQsa0JBQUE7RUFBQSxJQUFBRSxJQUFBLE9BQUFDLGtCQUFBLENBQUFDLE9BQUEsRUFBRyxhQUFZO0lBQzVDLElBQUk7TUFDRixJQUFNQyxJQUFJLEdBQUcsa0JBQWtCO01BQy9CLE1BQU1DLHFCQUFZLENBQUNDLE9BQU8sQ0FBQ0YsSUFBSSxFQUFFQSxJQUFJLENBQUM7TUFDdEMsTUFBTUMscUJBQVksQ0FBQ0UsVUFBVSxDQUFDSCxJQUFJLENBQUM7TUFDbkMsT0FBTyxJQUFJO0lBQ2IsQ0FBQyxDQUFDLE9BQU9JLENBQUMsRUFBRTtNQUNWQyxPQUFPLENBQUNDLElBQUksQ0FBQyw2QkFBNkIsRUFBRUYsQ0FBQyxDQUFDRyxPQUFPLENBQUM7TUFDdEQsT0FBTyxLQUFLO0lBQ2Q7RUFDRixDQUFDO0VBQUEsZ0JBVllaLGtCQUFrQkEsQ0FBQTtJQUFBLE9BQUFFLElBQUEsQ0FBQVcsS0FBQSxPQUFBQyxTQUFBO0VBQUE7QUFBQSxHQVU5QjtBQVFNLElBQU1DLFNBQVMsR0FBQWQsT0FBQSxDQUFBYyxT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