4981d1558dcfc7dae4649cb061fdb590
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.SettingsProvider = exports.SettingsContext = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _storageUtils = require("../utils/storageUtils");
var _constants = require("../utils/constants");
var _propTypes = _interopRequireDefault(require("prop-types"));
var _jsxRuntime = require("react/jsx-runtime");
var SettingsContext = exports.SettingsContext = (0, _react.createContext)();
var SettingsProvider = exports.SettingsProvider = function SettingsProvider(_ref) {
  var children = _ref.children;
  var _useState = (0, _react.useState)(_constants.DEFAULT_SETTINGS),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    settings = _useState2[0],
    setSettings = _useState2[1];
  var _useState3 = (0, _react.useState)(true),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    isLoading = _useState4[0],
    setIsLoading = _useState4[1];
  (0, _react.useEffect)(function () {
    var loadSettings = function () {
      var _ref2 = (0, _asyncToGenerator2.default)(function* () {
        try {
          setIsLoading(true);
          var savedSettings = yield (0, _storageUtils.getData)('userSettings');
          if (savedSettings) {
            setSettings(Object.assign({}, _constants.DEFAULT_SETTINGS, savedSettings));
          } else {
            setSettings(_constants.DEFAULT_SETTINGS);
          }
        } catch (error) {} finally {
          setIsLoading(false);
        }
      });
      return function loadSettings() {
        return _ref2.apply(this, arguments);
      };
    }();
    loadSettings();
  }, []);
  (0, _react.useEffect)(function () {
    if (!isLoading) {
      (0, _storageUtils.storeData)('userSettings', settings);
    }
  }, [settings, isLoading]);
  var updateSetting = function updateSetting(key, value) {
    if (settings[key] === undefined) {
      return;
    }
    setSettings(function (prevSettings) {
      return Object.assign({}, prevSettings, (0, _defineProperty2.default)({}, key, value));
    });
  };
  var updateSettings = function updateSettings(newSettings) {
    setSettings(function (prevSettings) {
      return Object.assign({}, prevSettings, newSettings);
    });
  };
  var resetSettings = function resetSettings() {
    setSettings(_constants.DEFAULT_SETTINGS);
  };
  var areNotificationsEnabled = function areNotificationsEnabled() {
    return settings.notifications;
  };
  var getDailyGoal = function getDailyGoal() {
    return settings.dailyGoal;
  };
  var setDailyGoal = function setDailyGoal(minutes) {
    updateSetting('dailyGoal', Math.max(1, Math.min(120, minutes)));
  };
  var contextValue = {
    settings: settings,
    updateSetting: updateSetting,
    updateSettings: updateSettings,
    resetSettings: resetSettings,
    areNotificationsEnabled: areNotificationsEnabled,
    getDailyGoal: getDailyGoal,
    setDailyGoal: setDailyGoal,
    isLoading: isLoading
  };
  return (0, _jsxRuntime.jsx)(SettingsContext.Provider, {
    value: contextValue,
    children: children
  });
};
SettingsContext.propTypes = {
  children: _propTypes.default.any.isRequired
};
var _default = exports.default = SettingsContext;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3N0b3JhZ2VVdGlscyIsIl9jb25zdGFudHMiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9qc3hSdW50aW1lIiwiU2V0dGluZ3NDb250ZXh0IiwiZXhwb3J0cyIsImNyZWF0ZUNvbnRleHQiLCJTZXR0aW5nc1Byb3ZpZGVyIiwiX3JlZiIsImNoaWxkcmVuIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJERUZBVUxUX1NFVFRJTkdTIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJzZXR0aW5ncyIsInNldFNldHRpbmdzIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJ1c2VFZmZlY3QiLCJsb2FkU2V0dGluZ3MiLCJfcmVmMiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsInNhdmVkU2V0dGluZ3MiLCJnZXREYXRhIiwiT2JqZWN0IiwiYXNzaWduIiwiZXJyb3IiLCJhcHBseSIsImFyZ3VtZW50cyIsInN0b3JlRGF0YSIsInVwZGF0ZVNldHRpbmciLCJrZXkiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsInByZXZTZXR0aW5ncyIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJ1cGRhdGVTZXR0aW5ncyIsIm5ld1NldHRpbmdzIiwicmVzZXRTZXR0aW5ncyIsImFyZU5vdGlmaWNhdGlvbnNFbmFibGVkIiwibm90aWZpY2F0aW9ucyIsImdldERhaWx5R29hbCIsImRhaWx5R29hbCIsInNldERhaWx5R29hbCIsIm1pbnV0ZXMiLCJNYXRoIiwibWF4IiwibWluIiwiY29udGV4dFZhbHVlIiwianN4IiwiUHJvdmlkZXIiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJhbnkiLCJpc1JlcXVpcmVkIiwiX2RlZmF1bHQiXSwic291cmNlcyI6WyJTZXR0aW5nQ29udGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29udGV4dHMvU2V0dGluZ3NDb250ZXh0LmpzXHJcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHN0b3JlRGF0YSwgZ2V0RGF0YSB9IGZyb20gJy4uL3V0aWxzL3N0b3JhZ2VVdGlscyc7XHJcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuXHJcbi8vIENyw6llciBsZSBjb250ZXh0ZVxyXG5leHBvcnQgY29uc3QgU2V0dGluZ3NDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xyXG5cclxuLyoqXHJcbiAqIEZvdXJuaXNzZXVyIGRlIGNvbnRleHRlIHBvdXIgZ8OpcmVyIGxlcyBwYXJhbcOodHJlcyBkZSBsJ2FwcGxpY2F0aW9uXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgU2V0dGluZ3NQcm92aWRlciA9ICh7IGNoaWxkcmVuIH0pID0+IHtcclxuICAvLyDDiXRhdCBkZXMgcGFyYW3DqHRyZXNcclxuICBjb25zdCBbc2V0dGluZ3MsIHNldFNldHRpbmdzXSA9IHVzZVN0YXRlKERFRkFVTFRfU0VUVElOR1MpO1xyXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuXHJcbiAgLy8gQ2hhcmdlciBsZXMgcGFyYW3DqHRyZXMgYXUgZMOpbWFycmFnZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBsb2FkU2V0dGluZ3MgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHNhdmVkU2V0dGluZ3MgPSBhd2FpdCBnZXREYXRhKCd1c2VyU2V0dGluZ3MnKTtcclxuXHJcbiAgICAgICAgaWYgKHNhdmVkU2V0dGluZ3MpIHtcclxuICAgICAgICAgIC8vIEZ1c2lvbm5lciBhdmVjIGxlcyBwYXJhbcOodHJlcyBwYXIgZMOpZmF1dCBwb3VyIHMnYXNzdXJlciBxdWUgdG91cyBsZXMgY2hhbXBzIHNvbnQgcHLDqXNlbnRzXHJcbiAgICAgICAgICBzZXRTZXR0aW5ncyh7IC4uLkRFRkFVTFRfU0VUVElOR1MsIC4uLnNhdmVkU2V0dGluZ3MgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIElmIG5vIHNhdmVkIHNldHRpbmdzLCB1c2UgZGVmYXVsdFxyXG4gICAgICAgICAgc2V0U2V0dGluZ3MoREVGQVVMVF9TRVRUSU5HUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIElnbm9yZWQgb24gcHVycG9zZVxyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbG9hZFNldHRpbmdzKCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBTYXV2ZWdhcmRlciBsZXMgcGFyYW3DqHRyZXMgbG9yc3F1J2lscyBjaGFuZ2VudFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWlzTG9hZGluZykge1xyXG4gICAgICBzdG9yZURhdGEoJ3VzZXJTZXR0aW5ncycsIHNldHRpbmdzKTtcclxuICAgIH1cclxuICB9LCBbc2V0dGluZ3MsIGlzTG9hZGluZ10pO1xyXG5cclxuICAvLyBNZXR0cmUgw6Agam91ciB1biBwYXJhbcOodHJlIHNww6ljaWZpcXVlXHJcbiAgY29uc3QgdXBkYXRlU2V0dGluZyA9IChrZXksIHZhbHVlKSA9PiB7XHJcbiAgICBpZiAoc2V0dGluZ3Nba2V5XSA9PT0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U2V0dGluZ3MocHJldlNldHRpbmdzID0+ICh7XHJcbiAgICAgIC4uLnByZXZTZXR0aW5ncyxcclxuICAgICAgW2tleV06IHZhbHVlXHJcbiAgICB9KSk7XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0dHJlIMOgIGpvdXIgcGx1c2lldXJzIHBhcmFtw6h0cmVzIMOgIGxhIGZvaXNcclxuICBjb25zdCB1cGRhdGVTZXR0aW5ncyA9IChuZXdTZXR0aW5ncykgPT4ge1xyXG4gICAgc2V0U2V0dGluZ3MocHJldlNldHRpbmdzID0+ICh7XHJcbiAgICAgIC4uLnByZXZTZXR0aW5ncyxcclxuICAgICAgLi4ubmV3U2V0dGluZ3NcclxuICAgIH0pKTtcclxuICB9O1xyXG5cclxuICAvLyBSw6lpbml0aWFsaXNlciB0b3VzIGxlcyBwYXJhbcOodHJlc1xyXG4gIGNvbnN0IHJlc2V0U2V0dGluZ3MgPSAoKSA9PiB7XHJcbiAgICBzZXRTZXR0aW5ncyhERUZBVUxUX1NFVFRJTkdTKTtcclxuICB9O1xyXG5cclxuICAvLyBWw6lyaWZpZXIgc2kgbGVzIG5vdGlmaWNhdGlvbnMgc29udCBhY3RpdsOpZXNcclxuICBjb25zdCBhcmVOb3RpZmljYXRpb25zRW5hYmxlZCA9ICgpID0+IHtcclxuICAgIHJldHVybiBzZXR0aW5ncy5ub3RpZmljYXRpb25zO1xyXG4gIH07XHJcblxyXG4gIC8vIE9idGVuaXIgbGUgZMOpbGFpIGpvdXJuYWxpZXJcclxuICBjb25zdCBnZXREYWlseUdvYWwgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gc2V0dGluZ3MuZGFpbHlHb2FsO1xyXG4gIH07XHJcblxyXG4gIC8vIETDqWZpbmlyIGxlIGTDqWxhaSBqb3VybmFsaWVyXHJcbiAgY29uc3Qgc2V0RGFpbHlHb2FsID0gKG1pbnV0ZXMpID0+IHtcclxuICAgIHVwZGF0ZVNldHRpbmcoJ2RhaWx5R29hbCcsIE1hdGgubWF4KDEsIE1hdGgubWluKDEyMCwgbWludXRlcykpKTsgLy8gRW50cmUgMSBldCAxMjAgbWludXRlc1xyXG4gIH07XHJcblxyXG4gIC8vIFZhbGV1ciBmb3VybmllIHBhciBsZSBjb250ZXh0ZVxyXG4gIGNvbnN0IGNvbnRleHRWYWx1ZSA9IHtcclxuICAgIHNldHRpbmdzLFxyXG4gICAgdXBkYXRlU2V0dGluZyxcclxuICAgIHVwZGF0ZVNldHRpbmdzLFxyXG4gICAgcmVzZXRTZXR0aW5ncyxcclxuICAgIGFyZU5vdGlmaWNhdGlvbnNFbmFibGVkLFxyXG4gICAgZ2V0RGFpbHlHb2FsLFxyXG4gICAgc2V0RGFpbHlHb2FsLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8U2V0dGluZ3NDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L1NldHRpbmdzQ29udGV4dC5Qcm92aWRlcj5cclxuICApO1xyXG59O1xyXG5cclxuXG5TZXR0aW5nc0NvbnRleHQucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2V0dGluZ3NDb250ZXh0OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxVQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxVQUFBLEdBQUFDLHNCQUFBLENBQUFKLE9BQUE7QUFBbUMsSUFBQUssV0FBQSxHQUFBTCxPQUFBO0FBRzVCLElBQU1NLGVBQWUsR0FBQUMsT0FBQSxDQUFBRCxlQUFBLEdBQUcsSUFBQUUsb0JBQWEsRUFBQyxDQUFDO0FBS3ZDLElBQU1DLGdCQUFnQixHQUFBRixPQUFBLENBQUFFLGdCQUFBLEdBQUcsU0FBbkJBLGdCQUFnQkEsQ0FBQUMsSUFBQSxFQUFxQjtFQUFBLElBQWZDLFFBQVEsR0FBQUQsSUFBQSxDQUFSQyxRQUFRO0VBRXpDLElBQUFDLFNBQUEsR0FBZ0MsSUFBQUMsZUFBUSxFQUFDQywyQkFBZ0IsQ0FBQztJQUFBQyxVQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBTCxTQUFBO0lBQW5ETSxRQUFR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