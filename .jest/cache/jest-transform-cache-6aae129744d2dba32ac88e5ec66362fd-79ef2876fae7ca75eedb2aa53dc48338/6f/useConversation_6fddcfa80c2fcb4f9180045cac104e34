be877538095c54aa096782eb67f9e9dd
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var useConversation = function useConversation() {
  var _currentScenario$step;
  var conversationData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "A1";
  var _useState = (0, _react.useState)(0),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    currentScenarioIndex = _useState2[0],
    setCurrentScenarioIndex = _useState2[1];
  var _useState3 = (0, _react.useState)([]),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    conversation = _useState4[0],
    setConversation = _useState4[1];
  var _useState5 = (0, _react.useState)(0),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    currentStep = _useState6[0],
    setCurrentStep = _useState6[1];
  var _useState7 = (0, _react.useState)(""),
    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),
    message = _useState8[0],
    setMessage = _useState8[1];
  var _useState9 = (0, _react.useState)(false),
    _useState0 = (0, _slicedToArray2.default)(_useState9, 2),
    isTyping = _useState0[0],
    setIsTyping = _useState0[1];
  var _useState1 = (0, _react.useState)([]),
    _useState10 = (0, _slicedToArray2.default)(_useState1, 2),
    suggestions = _useState10[0],
    setSuggestions = _useState10[1];
  var _useState11 = (0, _react.useState)(false),
    _useState12 = (0, _slicedToArray2.default)(_useState11, 2),
    showHelp = _useState12[0],
    setShowHelp = _useState12[1];
  var _useState13 = (0, _react.useState)({}),
    _useState14 = (0, _slicedToArray2.default)(_useState13, 2),
    completedScenarios = _useState14[0],
    setCompletedScenarios = _useState14[1];
  var _useState15 = (0, _react.useState)({}),
    _useState16 = (0, _slicedToArray2.default)(_useState15, 2),
    conversationHistory = _useState16[0],
    setConversationHistory = _useState16[1];
  var _useState17 = (0, _react.useState)(false),
    _useState18 = (0, _slicedToArray2.default)(_useState17, 2),
    loaded = _useState18[0],
    setLoaded = _useState18[1];
  var _useState19 = (0, _react.useState)(false),
    _useState20 = (0, _slicedToArray2.default)(_useState19, 2),
    showDetailedProgress = _useState20[0],
    setShowDetailedProgress = _useState20[1];
  var isInitialized = (0, _react.useRef)(false);
  var conversationChanged = (0, _react.useRef)(false);
  var scenarios = (conversationData == null ? void 0 : conversationData.exercises) || [];
  var currentScenario = scenarios[currentScenarioIndex] || {};
  var totalScenarios = scenarios.length;
  var totalSteps = ((_currentScenario$step = currentScenario.steps) == null ? void 0 : _currentScenario$step.length) || 0;
  var STORAGE_KEY = `conversation_${level}`;
  (0, _react.useEffect)(function () {
    var loadData = function () {
      var _ref = (0, _asyncToGenerator2.default)(function* () {
        try {
          var saved = yield _asyncStorage.default.getItem(STORAGE_KEY);
          if (saved) {
            var _JSON$parse = JSON.parse(saved),
              savedCompleted = _JSON$parse.completedScenarios,
              savedHistory = _JSON$parse.conversationHistory,
              lastPosition = _JSON$parse.lastPosition;
            setCompletedScenarios(savedCompleted || {});
            setConversationHistory(savedHistory || {});
            if (lastPosition) {
              setCurrentScenarioIndex(lastPosition.scenarioIndex || 0);
              setCurrentStep(lastPosition.stepIndex || 0);
            }
          }
        } catch (error) {
          console.error('Error loading conversation data:', error);
        } finally {
          setLoaded(true);
        }
      });
      return function loadData() {
        return _ref.apply(this, arguments);
      };
    }();
    loadData();
  }, [level]);
  var saveData = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      var dataToSave = {
        completedScenarios: completedScenarios,
        conversationHistory: conversationHistory,
        lastPosition: {
          scenarioIndex: currentScenarioIndex,
          stepIndex: currentStep
        }
      };
      yield _asyncStorage.default.setItem(STORAGE_KEY, JSON.stringify(dataToSave));
    } catch (error) {
      console.error('Error saving conversation data:', error);
    }
  }), [completedScenarios, conversationHistory, currentScenarioIndex, currentStep, STORAGE_KEY]);
  (0, _react.useEffect)(function () {
    if (loaded) saveData();
  }, [saveData, loaded]);
  (0, _react.useEffect)(function () {
    if (loaded && conversationData && !isInitialized.current) {
      var newCompletedScenarios = Object.assign({}, completedScenarios);
      scenarios.forEach(function (_, index) {
        if (!newCompletedScenarios[index]) {
          newCompletedScenarios[index] = null;
        }
      });
      setCompletedScenarios(newCompletedScenarios);
      isInitialized.current = true;
    }
  }, [loaded, conversationData, scenarios, completedScenarios]);
  var startConversation = (0, _react.useCallback)(function () {
    if (!currentScenario.steps || currentScenario.steps.length === 0) return;
    var savedConversation = conversationHistory[currentScenarioIndex];
    if (savedConversation != null && savedConversation.conversation && savedConversation.conversation.length > 0) {
      var _currentScenario$step2;
      setConversation(savedConversation.conversation);
      var botMessages = savedConversation.conversation.filter(function (msg) {
        return msg.sender === "bot";
      });
      var calculatedStep = Math.min(botMessages.length - 1, currentScenario.steps.length - 1);
      setCurrentStep(Math.max(0, calculatedStep));
      var stepIndex = Math.min(calculatedStep, currentScenario.steps.length - 1);
      setSuggestions(((_currentScenario$step2 = currentScenario.steps[stepIndex]) == null ? void 0 : _currentScenario$step2.suggestions) || []);
    } else {
      setConversation([]);
      setCurrentStep(0);
      setTimeout(function () {
        setIsTyping(true);
        setTimeout(function () {
          var initialMessage = {
            id: `bot-${Date.now()}`,
            text: currentScenario.steps[0].botMessage,
            sender: "bot"
          };
          setConversation([initialMessage]);
          setSuggestions(currentScenario.steps[0].suggestions || []);
          setIsTyping(false);
          conversationChanged.current = true;
        }, 1000);
      }, 500);
    }
  }, [currentScenario, conversationHistory, currentScenarioIndex]);
  (0, _react.useEffect)(function () {
    if (loaded && currentScenario.steps) {
      startConversation();
    }
  }, [loaded, currentScenarioIndex, startConversation]);
  var sendMessage = (0, _react.useCallback)(function () {
    if (message.trim() === "" || !currentScenario.steps) return;
    var userMessage = {
      id: `user-${Date.now()}`,
      text: message,
      sender: "user"
    };
    var updatedConversation = [].concat((0, _toConsumableArray2.default)(conversation), [userMessage]);
    setConversation(updatedConversation);
    setMessage("");
    setSuggestions([]);
    conversationChanged.current = true;
    setIsTyping(true);
    setTimeout(function () {
      var nextStepIndex = currentStep + 1;
      if (nextStepIndex < currentScenario.steps.length) {
        var nextStep = currentScenario.steps[nextStepIndex];
        var botMessage = {
          id: `bot-${Date.now()}`,
          text: nextStep.botMessage,
          sender: "bot"
        };
        var conversationWithBot = [].concat((0, _toConsumableArray2.default)(updatedConversation), [botMessage]);
        setConversation(conversationWithBot);
        setCurrentStep(nextStepIndex);
        setSuggestions(nextStep.suggestions || []);
        setConversationHistory(function (prev) {
          return Object.assign({}, prev, (0, _defineProperty2.default)({}, currentScenarioIndex, {
            conversation: conversationWithBot,
            updatedAt: new Date().toISOString(),
            timestamp: Date.now()
          }));
        });
        if (nextStepIndex === currentScenario.steps.length - 1) {
          setCompletedScenarios(function (prev) {
            return Object.assign({}, prev, (0, _defineProperty2.default)({}, currentScenarioIndex, {
              completedAt: new Date().toISOString(),
              timestamp: Date.now(),
              messageCount: conversationWithBot.length
            }));
          });
        }
      }
      setIsTyping(false);
    }, 1000);
  }, [message, currentScenario, currentStep, conversation, currentScenarioIndex]);
  var changeScenario = (0, _react.useCallback)(function (newIndex) {
    if (newIndex !== currentScenarioIndex && newIndex >= 0 && newIndex < scenarios.length) {
      setCurrentScenarioIndex(newIndex);
      setConversation([]);
      setCurrentStep(0);
      setSuggestions([]);
      setMessage("");
      setShowHelp(false);
      conversationChanged.current = false;
    }
  }, [currentScenarioIndex, scenarios.length]);
  var handleSuggestion = (0, _react.useCallback)(function (suggestion) {
    setMessage(suggestion);
  }, []);
  var toggleHelp = (0, _react.useCallback)(function () {
    setShowHelp(function (prev) {
      return !prev;
    });
  }, []);
  var toggleDetailedProgress = (0, _react.useCallback)(function () {
    setShowDetailedProgress(function (prev) {
      return !prev;
    });
  }, []);
  var getStats = (0, _react.useCallback)(function () {
    var completedScenariosCount = Object.values(completedScenarios).filter(Boolean).length;
    var totalProgress = totalScenarios > 0 ? Math.round(completedScenariosCount / totalScenarios * 100) : 0;
    var completionProgress = totalSteps > 0 ? (currentStep + 1) / totalSteps * 100 : 0;
    return {
      totalScenarios: totalScenarios,
      completedScenariosCount: completedScenariosCount,
      totalProgress: totalProgress,
      completionProgress: completionProgress,
      currentStep: currentStep + 1,
      totalSteps: totalSteps
    };
  }, [completedScenarios, totalScenarios, totalSteps, currentStep]);
  var getDisplayData = (0, _react.useCallback)(function () {
    var _currentScenario$step3;
    var scenarioCounter = `${currentScenarioIndex + 1} / ${totalScenarios}`;
    var stepCounter = `${currentStep + 1} / ${totalSteps}`;
    var scenarioTitles = scenarios.map(function (scenario) {
      return scenario.title || "Scenario";
    });
    return {
      scenarioCounter: scenarioCounter,
      stepCounter: stepCounter,
      scenarios: scenarioTitles,
      currentScenario: currentScenario,
      currentHelp: ((_currentScenario$step3 = currentScenario.steps) == null || (_currentScenario$step3 = _currentScenario$step3[currentStep]) == null ? void 0 : _currentScenario$step3.help) || ""
    };
  }, [currentScenarioIndex, totalScenarios, currentStep, totalSteps, scenarios, currentScenario]);
  var hasValidData = (conversationData == null ? void 0 : conversationData.exercises) && Array.isArray(conversationData.exercises) && conversationData.exercises.length > 0;
  var isLastStep = currentStep === totalSteps - 1;
  var isConversationStarted = conversation.length > 0;
  return {
    currentScenarioIndex: currentScenarioIndex,
    conversation: conversation,
    currentStep: currentStep,
    message: message,
    setMessage: setMessage,
    isTyping: isTyping,
    suggestions: suggestions,
    showHelp: showHelp,
    completedScenarios: completedScenarios,
    conversationHistory: conversationHistory,
    loaded: loaded,
    showDetailedProgress: showDetailedProgress,
    currentScenario: currentScenario,
    totalScenarios: totalScenarios,
    totalSteps: totalSteps,
    hasValidData: hasValidData,
    changeScenario: changeScenario,
    sendMessage: sendMessage,
    handleSuggestion: handleSuggestion,
    toggleHelp: toggleHelp,
    toggleDetailedProgress: toggleDetailedProgress,
    startConversation: startConversation,
    isLastStep: isLastStep,
    isConversationStarted: isConversationStarted,
    stats: getStats(),
    display: getDisplayData()
  };
};
var _default = exports.default = useConversation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJ1c2VDb252ZXJzYXRpb24iLCJfY3VycmVudFNjZW5hcmlvJHN0ZXAiLCJjb252ZXJzYXRpb25EYXRhIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibGV2ZWwiLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsIl91c2VTdGF0ZTIiLCJfc2xpY2VkVG9BcnJheTIiLCJkZWZhdWx0IiwiY3VycmVudFNjZW5hcmlvSW5kZXgiLCJzZXRDdXJyZW50U2NlbmFyaW9JbmRleCIsIl91c2VTdGF0ZTMiLCJfdXNlU3RhdGU0IiwiY29udmVyc2F0aW9uIiwic2V0Q29udmVyc2F0aW9uIiwiX3VzZVN0YXRlNSIsIl91c2VTdGF0ZTYiLCJjdXJyZW50U3RlcCIsInNldEN1cnJlbnRTdGVwIiwiX3VzZVN0YXRlNyIsIl91c2VTdGF0ZTgiLCJtZXNzYWdlIiwic2V0TWVzc2FnZSIsIl91c2VTdGF0ZTkiLCJfdXNlU3RhdGUwIiwiaXNUeXBpbmciLCJzZXRJc1R5cGluZyIsIl91c2VTdGF0ZTEiLCJfdXNlU3RhdGUxMCIsInN1Z2dlc3Rpb25zIiwic2V0U3VnZ2VzdGlvbnMiLCJfdXNlU3RhdGUxMSIsIl91c2VTdGF0ZTEyIiwic2hvd0hlbHAiLCJzZXRTaG93SGVscCIsIl91c2VTdGF0ZTEzIiwiX3VzZVN0YXRlMTQiLCJjb21wbGV0ZWRTY2VuYXJpb3MiLCJzZXRDb21wbGV0ZWRTY2VuYXJpb3MiLCJfdXNlU3RhdGUxNSIsIl91c2VTdGF0ZTE2IiwiY29udmVyc2F0aW9uSGlzdG9yeSIsInNldENvbnZlcnNhdGlvbkhpc3RvcnkiLCJfdXNlU3RhdGUxNyIsIl91c2VTdGF0ZTE4IiwibG9hZGVkIiwic2V0TG9hZGVkIiwiX3VzZVN0YXRlMTkiLCJfdXNlU3RhdGUyMCIsInNob3dEZXRhaWxlZFByb2dyZXNzIiwic2V0U2hvd0RldGFpbGVkUHJvZ3Jlc3MiLCJpc0luaXRpYWxpemVkIiwidXNlUmVmIiwiY29udmVyc2F0aW9uQ2hhbmdlZCIsInNjZW5hcmlvcyIsImV4ZXJjaXNlcyIsImN1cnJlbnRTY2VuYXJpbyIsInRvdGFsU2NlbmFyaW9zIiwidG90YWxTdGVwcyIsInN0ZXBzIiwiU1RPUkFHRV9LRVkiLCJ1c2VFZmZlY3QiLCJsb2FkRGF0YSIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJzYXZlZCIsIkFzeW5jU3RvcmFnZSIsImdldEl0ZW0iLCJfSlNPTiRwYXJzZSIsIkpTT04iLCJwYXJzZSIsInNhdmVkQ29tcGxldGVkIiwic2F2ZWRIaXN0b3J5IiwibGFzdFBvc2l0aW9uIiwic2NlbmFyaW9JbmRleCIsInN0ZXBJbmRleCIsImVycm9yIiwiY29uc29sZSIsImFwcGx5Iiwic2F2ZURhdGEiLCJ1c2VDYWxsYmFjayIsImRhdGFUb1NhdmUiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiY3VycmVudCIsIm5ld0NvbXBsZXRlZFNjZW5hcmlvcyIsIk9iamVjdCIsImFzc2lnbiIsImZvckVhY2giLCJfIiwiaW5kZXgiLCJzdGFydENvbnZlcnNhdGlvbiIsInNhdmVkQ29udmVyc2F0aW9uIiwiX2N1cnJlbnRTY2VuYXJpbyRzdGVwMiIsImJvdE1lc3NhZ2VzIiwiZmlsdGVyIiwibXNnIiwic2VuZGVyIiwiY2FsY3VsYXRlZFN0ZXAiLCJNYXRoIiwibWluIiwibWF4Iiwic2V0VGltZW91dCIsImluaXRpYWxNZXNzYWdlIiwiaWQiLCJEYXRlIiwibm93IiwidGV4dCIsImJvdE1lc3NhZ2UiLCJzZW5kTWVzc2FnZSIsInRyaW0iLCJ1c2VyTWVzc2FnZSIsInVwZGF0ZWRDb252ZXJzYXRpb24iLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkyIiwibmV4dFN0ZXBJbmRleCIsIm5leHRTdGVwIiwiY29udmVyc2F0aW9uV2l0aEJvdCIsInByZXYiLCJfZGVmaW5lUHJvcGVydHkyIiwidXBkYXRlZEF0IiwidG9JU09TdHJpbmciLCJ0aW1lc3RhbXAiLCJjb21wbGV0ZWRBdCIsIm1lc3NhZ2VDb3VudCIsImNoYW5nZVNjZW5hcmlvIiwibmV3SW5kZXgiLCJoYW5kbGVTdWdnZXN0aW9uIiwic3VnZ2VzdGlvbiIsInRvZ2dsZUhlbHAiLCJ0b2dnbGVEZXRhaWxlZFByb2dyZXNzIiwiZ2V0U3RhdHMiLCJjb21wbGV0ZWRTY2VuYXJpb3NDb3VudCIsInZhbHVlcyIsIkJvb2xlYW4iLCJ0b3RhbFByb2dyZXNzIiwicm91bmQiLCJjb21wbGV0aW9uUHJvZ3Jlc3MiLCJnZXREaXNwbGF5RGF0YSIsIl9jdXJyZW50U2NlbmFyaW8kc3RlcDMiLCJzY2VuYXJpb0NvdW50ZXIiLCJzdGVwQ291bnRlciIsInNjZW5hcmlvVGl0bGVzIiwibWFwIiwic2NlbmFyaW8iLCJ0aXRsZSIsImN1cnJlbnRIZWxwIiwiaGVscCIsImhhc1ZhbGlkRGF0YSIsIkFycmF5IiwiaXNBcnJheSIsImlzTGFzdFN0ZXAiLCJpc0NvbnZlcnNhdGlvblN0YXJ0ZWQiLCJzdGF0cyIsImRpc3BsYXkiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1c2VDb252ZXJzYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaG9va3MvdXNlQ29udmVyc2F0aW9uLmpzIC0gSE9PSyBVTklGScOJIFNJTVBMRVxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xuXG4vKipcbiAqIPCfjq8gSG9vayB1bmlmacOpIHBvdXIgQ29udmVyc2F0aW9uIEV4ZXJjaXNlXG4gKiBSZW1wbGFjZSB1c2VDb252ZXJzYXRpb25Qcm9ncmVzcyArIHVzZUNvbnZlcnNhdGlvbkV4ZXJjaXNlU3RhdGUgKyBsb2dpcXVlIGR1IGNvbXBvc2FudFxuICogU2ltcGxlLCBlZmZpY2FjZSwgbWFpbnRlbmFibGUgLSBwYXR0ZXJuIGlkZW50aXF1ZSBhdXggNCBhdXRyZXMgZXhlcmNpY2VzXG4gKi9cbmNvbnN0IHVzZUNvbnZlcnNhdGlvbiA9IChjb252ZXJzYXRpb25EYXRhID0gbnVsbCwgbGV2ZWwgPSBcIkExXCIpID0+IHtcbiAgXG4gIC8vID09PT09PT09PT09PT09PT09PT0gQ09SRSBTVEFURSA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IFtjdXJyZW50U2NlbmFyaW9JbmRleCwgc2V0Q3VycmVudFNjZW5hcmlvSW5kZXhdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtjb252ZXJzYXRpb24sIHNldENvbnZlcnNhdGlvbl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtjdXJyZW50U3RlcCwgc2V0Q3VycmVudFN0ZXBdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbaXNUeXBpbmcsIHNldElzVHlwaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N1Z2dlc3Rpb25zLCBzZXRTdWdnZXN0aW9uc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtzaG93SGVscCwgc2V0U2hvd0hlbHBdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29tcGxldGVkU2NlbmFyaW9zLCBzZXRDb21wbGV0ZWRTY2VuYXJpb3NdID0gdXNlU3RhdGUoe30pO1xuICBjb25zdCBbY29udmVyc2F0aW9uSGlzdG9yeSwgc2V0Q29udmVyc2F0aW9uSGlzdG9yeV0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtsb2FkZWQsIHNldExvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93RGV0YWlsZWRQcm9ncmVzcywgc2V0U2hvd0RldGFpbGVkUHJvZ3Jlc3NdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gUkVGUyA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGlzSW5pdGlhbGl6ZWQgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBjb252ZXJzYXRpb25DaGFuZ2VkID0gdXNlUmVmKGZhbHNlKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IENPTVBVVEVEIFZBTFVFUyA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IHNjZW5hcmlvcyA9IGNvbnZlcnNhdGlvbkRhdGE/LmV4ZXJjaXNlcyB8fCBbXTtcbiAgY29uc3QgY3VycmVudFNjZW5hcmlvID0gc2NlbmFyaW9zW2N1cnJlbnRTY2VuYXJpb0luZGV4XSB8fCB7fTtcbiAgY29uc3QgdG90YWxTY2VuYXJpb3MgPSBzY2VuYXJpb3MubGVuZ3RoO1xuICBjb25zdCB0b3RhbFN0ZXBzID0gY3VycmVudFNjZW5hcmlvLnN0ZXBzPy5sZW5ndGggfHwgMDtcbiAgXG4gIC8vID09PT09PT09PT09PT09PT09PT0gUEVSU0lTVEVOQ0UgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBTVE9SQUdFX0tFWSA9IGBjb252ZXJzYXRpb25fJHtsZXZlbH1gO1xuXG4gIC8vIExvYWQgZGF0YSBmcm9tIHN0b3JhZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsb2FkRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNhdmVkID0gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9LRVkpO1xuICAgICAgICBpZiAoc2F2ZWQpIHtcbiAgICAgICAgICBjb25zdCB7IGNvbXBsZXRlZFNjZW5hcmlvczogc2F2ZWRDb21wbGV0ZWQsIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IHNhdmVkSGlzdG9yeSwgbGFzdFBvc2l0aW9uIH0gPSBKU09OLnBhcnNlKHNhdmVkKTtcbiAgICAgICAgICBzZXRDb21wbGV0ZWRTY2VuYXJpb3Moc2F2ZWRDb21wbGV0ZWQgfHwge30pO1xuICAgICAgICAgIHNldENvbnZlcnNhdGlvbkhpc3Rvcnkoc2F2ZWRIaXN0b3J5IHx8IHt9KTtcbiAgICAgICAgICBpZiAobGFzdFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBzZXRDdXJyZW50U2NlbmFyaW9JbmRleChsYXN0UG9zaXRpb24uc2NlbmFyaW9JbmRleCB8fCAwKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRTdGVwKGxhc3RQb3NpdGlvbi5zdGVwSW5kZXggfHwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGNvbnZlcnNhdGlvbiBkYXRhOicsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldExvYWRlZCh0cnVlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxvYWREYXRhKCk7XG4gIH0sIFtsZXZlbF0pO1xuXG4gIC8vIFNhdmUgZGF0YSB0byBzdG9yYWdlXG4gIGNvbnN0IHNhdmVEYXRhID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhVG9TYXZlID0ge1xuICAgICAgICBjb21wbGV0ZWRTY2VuYXJpb3MsXG4gICAgICAgIGNvbnZlcnNhdGlvbkhpc3RvcnksXG4gICAgICAgIGxhc3RQb3NpdGlvbjoge1xuICAgICAgICAgIHNjZW5hcmlvSW5kZXg6IGN1cnJlbnRTY2VuYXJpb0luZGV4LFxuICAgICAgICAgIHN0ZXBJbmRleDogY3VycmVudFN0ZXBcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShkYXRhVG9TYXZlKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBjb252ZXJzYXRpb24gZGF0YTonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbY29tcGxldGVkU2NlbmFyaW9zLCBjb252ZXJzYXRpb25IaXN0b3J5LCBjdXJyZW50U2NlbmFyaW9JbmRleCwgY3VycmVudFN0ZXAsIFNUT1JBR0VfS0VZXSk7XG5cbiAgLy8gQXV0by1zYXZlIHdoZW4gZGF0YSBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGxvYWRlZCkgc2F2ZURhdGEoKTtcbiAgfSwgW3NhdmVEYXRhLCBsb2FkZWRdKTtcblxuICAvLyBJbml0aWFsaXplIHByb2dyZXNzIGZvciBuZXcgc2NlbmFyaW9zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGxvYWRlZCAmJiBjb252ZXJzYXRpb25EYXRhICYmICFpc0luaXRpYWxpemVkLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IG5ld0NvbXBsZXRlZFNjZW5hcmlvcyA9IHsgLi4uY29tcGxldGVkU2NlbmFyaW9zIH07XG4gICAgICBzY2VuYXJpb3MuZm9yRWFjaCgoXywgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKCFuZXdDb21wbGV0ZWRTY2VuYXJpb3NbaW5kZXhdKSB7XG4gICAgICAgICAgbmV3Q29tcGxldGVkU2NlbmFyaW9zW2luZGV4XSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgc2V0Q29tcGxldGVkU2NlbmFyaW9zKG5ld0NvbXBsZXRlZFNjZW5hcmlvcyk7XG4gICAgICBpc0luaXRpYWxpemVkLmN1cnJlbnQgPSB0cnVlO1xuICAgIH1cbiAgfSwgW2xvYWRlZCwgY29udmVyc2F0aW9uRGF0YSwgc2NlbmFyaW9zLCBjb21wbGV0ZWRTY2VuYXJpb3NdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IENPTlZFUlNBVElPTiBNQU5BR0VNRU5UID09PT09PT09PT09PT09PT09PT1cbiAgY29uc3Qgc3RhcnRDb252ZXJzYXRpb24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFjdXJyZW50U2NlbmFyaW8uc3RlcHMgfHwgY3VycmVudFNjZW5hcmlvLnN0ZXBzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBzYXZlZCBjb252ZXJzYXRpb24gZm9yIHRoaXMgc2NlbmFyaW9cbiAgICBjb25zdCBzYXZlZENvbnZlcnNhdGlvbiA9IGNvbnZlcnNhdGlvbkhpc3RvcnlbY3VycmVudFNjZW5hcmlvSW5kZXhdO1xuICAgIFxuICAgIGlmIChzYXZlZENvbnZlcnNhdGlvbj8uY29udmVyc2F0aW9uICYmIHNhdmVkQ29udmVyc2F0aW9uLmNvbnZlcnNhdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBSZXN0b3JlIHNhdmVkIGNvbnZlcnNhdGlvblxuICAgICAgc2V0Q29udmVyc2F0aW9uKHNhdmVkQ29udmVyc2F0aW9uLmNvbnZlcnNhdGlvbik7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBjdXJyZW50IHN0ZXAgYmFzZWQgb24gYm90IG1lc3NhZ2VzXG4gICAgICBjb25zdCBib3RNZXNzYWdlcyA9IHNhdmVkQ29udmVyc2F0aW9uLmNvbnZlcnNhdGlvbi5maWx0ZXIobXNnID0+IG1zZy5zZW5kZXIgPT09IFwiYm90XCIpO1xuICAgICAgY29uc3QgY2FsY3VsYXRlZFN0ZXAgPSBNYXRoLm1pbihib3RNZXNzYWdlcy5sZW5ndGggLSAxLCBjdXJyZW50U2NlbmFyaW8uc3RlcHMubGVuZ3RoIC0gMSk7XG4gICAgICBzZXRDdXJyZW50U3RlcChNYXRoLm1heCgwLCBjYWxjdWxhdGVkU3RlcCkpO1xuICAgICAgXG4gICAgICAvLyBTZXQgc3VnZ2VzdGlvbnMgZm9yIGN1cnJlbnQgc3RlcFxuICAgICAgY29uc3Qgc3RlcEluZGV4ID0gTWF0aC5taW4oY2FsY3VsYXRlZFN0ZXAsIGN1cnJlbnRTY2VuYXJpby5zdGVwcy5sZW5ndGggLSAxKTtcbiAgICAgIHNldFN1Z2dlc3Rpb25zKGN1cnJlbnRTY2VuYXJpby5zdGVwc1tzdGVwSW5kZXhdPy5zdWdnZXN0aW9ucyB8fCBbXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFN0YXJ0IG5ldyBjb252ZXJzYXRpb25cbiAgICAgIHNldENvbnZlcnNhdGlvbihbXSk7XG4gICAgICBzZXRDdXJyZW50U3RlcCgwKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIGluaXRpYWwgYm90IG1lc3NhZ2VcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRJc1R5cGluZyh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxNZXNzYWdlID0ge1xuICAgICAgICAgICAgaWQ6IGBib3QtJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICB0ZXh0OiBjdXJyZW50U2NlbmFyaW8uc3RlcHNbMF0uYm90TWVzc2FnZSxcbiAgICAgICAgICAgIHNlbmRlcjogXCJib3RcIixcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIHNldENvbnZlcnNhdGlvbihbaW5pdGlhbE1lc3NhZ2VdKTtcbiAgICAgICAgICBzZXRTdWdnZXN0aW9ucyhjdXJyZW50U2NlbmFyaW8uc3RlcHNbMF0uc3VnZ2VzdGlvbnMgfHwgW10pO1xuICAgICAgICAgIHNldElzVHlwaW5nKGZhbHNlKTtcbiAgICAgICAgICBjb252ZXJzYXRpb25DaGFuZ2VkLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICAgIH0sIDUwMCk7XG4gICAgfVxuICB9LCBbY3VycmVudFNjZW5hcmlvLCBjb252ZXJzYXRpb25IaXN0b3J5LCBjdXJyZW50U2NlbmFyaW9JbmRleF0pO1xuXG4gIC8vIEluaXRpYWxpemUgY29udmVyc2F0aW9uIHdoZW4gc2NlbmFyaW8gY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChsb2FkZWQgJiYgY3VycmVudFNjZW5hcmlvLnN0ZXBzKSB7XG4gICAgICBzdGFydENvbnZlcnNhdGlvbigpO1xuICAgIH1cbiAgfSwgW2xvYWRlZCwgY3VycmVudFNjZW5hcmlvSW5kZXgsIHN0YXJ0Q29udmVyc2F0aW9uXSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBNRVNTQUdFIEhBTkRMSU5HID09PT09PT09PT09PT09PT09PT1cbiAgY29uc3Qgc2VuZE1lc3NhZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKG1lc3NhZ2UudHJpbSgpID09PSBcIlwiIHx8ICFjdXJyZW50U2NlbmFyaW8uc3RlcHMpIHJldHVybjtcblxuICAgIC8vIFVzZXIgbWVzc2FnZVxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0ge1xuICAgICAgaWQ6IGB1c2VyLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgIHNlbmRlcjogXCJ1c2VyXCIsXG4gICAgfTtcblxuICAgIGNvbnN0IHVwZGF0ZWRDb252ZXJzYXRpb24gPSBbLi4uY29udmVyc2F0aW9uLCB1c2VyTWVzc2FnZV07XG4gICAgc2V0Q29udmVyc2F0aW9uKHVwZGF0ZWRDb252ZXJzYXRpb24pO1xuICAgIHNldE1lc3NhZ2UoXCJcIik7XG4gICAgc2V0U3VnZ2VzdGlvbnMoW10pO1xuICAgIGNvbnZlcnNhdGlvbkNoYW5nZWQuY3VycmVudCA9IHRydWU7XG5cbiAgICAvLyBCb3QgcmVzcG9uc2VcbiAgICBzZXRJc1R5cGluZyh0cnVlKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgbmV4dFN0ZXBJbmRleCA9IGN1cnJlbnRTdGVwICsgMTtcblxuICAgICAgaWYgKG5leHRTdGVwSW5kZXggPCBjdXJyZW50U2NlbmFyaW8uc3RlcHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG5leHRTdGVwID0gY3VycmVudFNjZW5hcmlvLnN0ZXBzW25leHRTdGVwSW5kZXhdO1xuXG4gICAgICAgIGNvbnN0IGJvdE1lc3NhZ2UgPSB7XG4gICAgICAgICAgaWQ6IGBib3QtJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgdGV4dDogbmV4dFN0ZXAuYm90TWVzc2FnZSxcbiAgICAgICAgICBzZW5kZXI6IFwiYm90XCIsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uV2l0aEJvdCA9IFsuLi51cGRhdGVkQ29udmVyc2F0aW9uLCBib3RNZXNzYWdlXTtcbiAgICAgICAgc2V0Q29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbldpdGhCb3QpO1xuICAgICAgICBzZXRDdXJyZW50U3RlcChuZXh0U3RlcEluZGV4KTtcbiAgICAgICAgc2V0U3VnZ2VzdGlvbnMobmV4dFN0ZXAuc3VnZ2VzdGlvbnMgfHwgW10pO1xuXG4gICAgICAgIC8vIFNhdmUgdG8gaGlzdG9yeVxuICAgICAgICBzZXRDb252ZXJzYXRpb25IaXN0b3J5KHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIFtjdXJyZW50U2NlbmFyaW9JbmRleF06IHtcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbjogY29udmVyc2F0aW9uV2l0aEJvdCxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIE1hcmsgYXMgY29tcGxldGVkIGlmIGxhc3Qgc3RlcFxuICAgICAgICBpZiAobmV4dFN0ZXBJbmRleCA9PT0gY3VycmVudFNjZW5hcmlvLnN0ZXBzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBzZXRDb21wbGV0ZWRTY2VuYXJpb3MocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIFtjdXJyZW50U2NlbmFyaW9JbmRleF06IHtcbiAgICAgICAgICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICBtZXNzYWdlQ291bnQ6IGNvbnZlcnNhdGlvbldpdGhCb3QubGVuZ3RoLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXRJc1R5cGluZyhmYWxzZSk7XG4gICAgfSwgMTAwMCk7XG4gIH0sIFttZXNzYWdlLCBjdXJyZW50U2NlbmFyaW8sIGN1cnJlbnRTdGVwLCBjb252ZXJzYXRpb24sIGN1cnJlbnRTY2VuYXJpb0luZGV4XSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBOQVZJR0FUSU9OIEFDVElPTlMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBjaGFuZ2VTY2VuYXJpbyA9IHVzZUNhbGxiYWNrKChuZXdJbmRleCkgPT4ge1xuICAgIGlmIChuZXdJbmRleCAhPT0gY3VycmVudFNjZW5hcmlvSW5kZXggJiYgbmV3SW5kZXggPj0gMCAmJiBuZXdJbmRleCA8IHNjZW5hcmlvcy5sZW5ndGgpIHtcbiAgICAgIHNldEN1cnJlbnRTY2VuYXJpb0luZGV4KG5ld0luZGV4KTtcbiAgICAgIHNldENvbnZlcnNhdGlvbihbXSk7XG4gICAgICBzZXRDdXJyZW50U3RlcCgwKTtcbiAgICAgIHNldFN1Z2dlc3Rpb25zKFtdKTtcbiAgICAgIHNldE1lc3NhZ2UoXCJcIik7XG4gICAgICBzZXRTaG93SGVscChmYWxzZSk7XG4gICAgICBjb252ZXJzYXRpb25DaGFuZ2VkLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9XG4gIH0sIFtjdXJyZW50U2NlbmFyaW9JbmRleCwgc2NlbmFyaW9zLmxlbmd0aF0pO1xuXG4gIGNvbnN0IGhhbmRsZVN1Z2dlc3Rpb24gPSB1c2VDYWxsYmFjaygoc3VnZ2VzdGlvbikgPT4ge1xuICAgIHNldE1lc3NhZ2Uoc3VnZ2VzdGlvbik7XG4gIH0sIFtdKTtcblxuICBjb25zdCB0b2dnbGVIZWxwID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dIZWxwKHByZXYgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdG9nZ2xlRGV0YWlsZWRQcm9ncmVzcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93RGV0YWlsZWRQcm9ncmVzcyhwcmV2ID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gQ09NUFVURUQgU1RBVFMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBnZXRTdGF0cyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBjb21wbGV0ZWRTY2VuYXJpb3NDb3VudCA9IE9iamVjdC52YWx1ZXMoY29tcGxldGVkU2NlbmFyaW9zKS5maWx0ZXIoQm9vbGVhbikubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsUHJvZ3Jlc3MgPSB0b3RhbFNjZW5hcmlvcyA+IDAgPyBNYXRoLnJvdW5kKChjb21wbGV0ZWRTY2VuYXJpb3NDb3VudCAvIHRvdGFsU2NlbmFyaW9zKSAqIDEwMCkgOiAwO1xuICAgIGNvbnN0IGNvbXBsZXRpb25Qcm9ncmVzcyA9IHRvdGFsU3RlcHMgPiAwID8gKChjdXJyZW50U3RlcCArIDEpIC8gdG90YWxTdGVwcykgKiAxMDAgOiAwO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsU2NlbmFyaW9zLFxuICAgICAgY29tcGxldGVkU2NlbmFyaW9zQ291bnQsXG4gICAgICB0b3RhbFByb2dyZXNzLFxuICAgICAgY29tcGxldGlvblByb2dyZXNzLFxuICAgICAgY3VycmVudFN0ZXA6IGN1cnJlbnRTdGVwICsgMSxcbiAgICAgIHRvdGFsU3RlcHNcbiAgICB9O1xuICB9LCBbY29tcGxldGVkU2NlbmFyaW9zLCB0b3RhbFNjZW5hcmlvcywgdG90YWxTdGVwcywgY3VycmVudFN0ZXBdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IENPTVBVVEVEIERJU1BMQVkgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBnZXREaXNwbGF5RGF0YSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBzY2VuYXJpb0NvdW50ZXIgPSBgJHtjdXJyZW50U2NlbmFyaW9JbmRleCArIDF9IC8gJHt0b3RhbFNjZW5hcmlvc31gO1xuICAgIGNvbnN0IHN0ZXBDb3VudGVyID0gYCR7Y3VycmVudFN0ZXAgKyAxfSAvICR7dG90YWxTdGVwc31gO1xuICAgIGNvbnN0IHNjZW5hcmlvVGl0bGVzID0gc2NlbmFyaW9zLm1hcChzY2VuYXJpbyA9PiBzY2VuYXJpby50aXRsZSB8fCBcIlNjZW5hcmlvXCIpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzY2VuYXJpb0NvdW50ZXIsXG4gICAgICBzdGVwQ291bnRlcixcbiAgICAgIHNjZW5hcmlvczogc2NlbmFyaW9UaXRsZXMsXG4gICAgICBjdXJyZW50U2NlbmFyaW8sXG4gICAgICBjdXJyZW50SGVscDogY3VycmVudFNjZW5hcmlvLnN0ZXBzPy5bY3VycmVudFN0ZXBdPy5oZWxwIHx8IFwiXCJcbiAgICB9O1xuICB9LCBbY3VycmVudFNjZW5hcmlvSW5kZXgsIHRvdGFsU2NlbmFyaW9zLCBjdXJyZW50U3RlcCwgdG90YWxTdGVwcywgc2NlbmFyaW9zLCBjdXJyZW50U2NlbmFyaW9dKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IFZBTElEQVRJT04gPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBoYXNWYWxpZERhdGEgPSBjb252ZXJzYXRpb25EYXRhPy5leGVyY2lzZXMgJiYgQXJyYXkuaXNBcnJheShjb252ZXJzYXRpb25EYXRhLmV4ZXJjaXNlcykgJiYgY29udmVyc2F0aW9uRGF0YS5leGVyY2lzZXMubGVuZ3RoID4gMDtcbiAgY29uc3QgaXNMYXN0U3RlcCA9IGN1cnJlbnRTdGVwID09PSB0b3RhbFN0ZXBzIC0gMTtcbiAgY29uc3QgaXNDb252ZXJzYXRpb25TdGFydGVkID0gY29udmVyc2F0aW9uLmxlbmd0aCA+IDA7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBTdGF0ZVxuICAgIGN1cnJlbnRTY2VuYXJpb0luZGV4LFxuICAgIGNvbnZlcnNhdGlvbixcbiAgICBjdXJyZW50U3RlcCxcbiAgICBtZXNzYWdlLFxuICAgIHNldE1lc3NhZ2UsXG4gICAgaXNUeXBpbmcsXG4gICAgc3VnZ2VzdGlvbnMsXG4gICAgc2hvd0hlbHAsXG4gICAgY29tcGxldGVkU2NlbmFyaW9zLFxuICAgIGNvbnZlcnNhdGlvbkhpc3RvcnksXG4gICAgbG9hZGVkLFxuICAgIHNob3dEZXRhaWxlZFByb2dyZXNzLFxuICAgIFxuICAgIC8vIERhdGFcbiAgICBjdXJyZW50U2NlbmFyaW8sXG4gICAgdG90YWxTY2VuYXJpb3MsXG4gICAgdG90YWxTdGVwcyxcbiAgICBoYXNWYWxpZERhdGEsXG4gICAgXG4gICAgLy8gQWN0aW9uc1xuICAgIGNoYW5nZVNjZW5hcmlvLFxuICAgIHNlbmRNZXNzYWdlLFxuICAgIGhhbmRsZVN1Z2dlc3Rpb24sXG4gICAgdG9nZ2xlSGVscCxcbiAgICB0b2dnbGVEZXRhaWxlZFByb2dyZXNzLFxuICAgIHN0YXJ0Q29udmVyc2F0aW9uLFxuICAgIFxuICAgIC8vIENvbXB1dGVkXG4gICAgaXNMYXN0U3RlcCxcbiAgICBpc0NvbnZlcnNhdGlvblN0YXJ0ZWQsXG4gICAgc3RhdHM6IGdldFN0YXRzKCksXG4gICAgZGlzcGxheTogZ2V0RGlzcGxheURhdGEoKSxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZUNvbnZlcnNhdGlvbjsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQU9BLElBQU1HLGVBQWUsR0FBRyxTQUFsQkEsZUFBZUEsQ0FBQSxFQUE4QztFQUFBLElBQUFDLHFCQUFBO0VBQUEsSUFBMUNDLGdCQUFnQixHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxJQUFJO0VBQUEsSUFBRUcsS0FBSyxHQUFBSCxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxJQUFJO0VBRzVELElBQUFJLFNBQUEsR0FBd0QsSUFBQUMsZUFBUSxFQUFDLENBQUMsQ0FBQztJQUFBQyxVQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBSixTQUFBO0lBQTVESyxv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