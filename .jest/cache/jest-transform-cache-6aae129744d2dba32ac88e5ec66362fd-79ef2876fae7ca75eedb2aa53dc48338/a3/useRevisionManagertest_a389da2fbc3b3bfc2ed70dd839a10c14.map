{"version":3,"names":["_getJestObj","mock","getItem","jest","fn","setItem","_interopRequireDefault","require","_asyncToGenerator2","_reactNative","_asyncStorage","_useRevisionManager","_require","describe","beforeEach","clearAllMocks","useFakeTimers","afterEach","useRealTimers","it","AsyncStorage","mockResolvedValue","_renderHook","renderHook","useRevisionManager","result","expect","current","totalWordsLearned","toBe","nextRevisionAt","shouldShowRevision","isRevisionDisabled","isLoading","default","mockSavedData","lastRevisionWords","word","revisionHistory","timestamp","mockImplementation","key","Promise","resolve","JSON","stringify","_renderHook2","waitFor","_renderHook3","act","response","handleRevisionChoice","action","_renderHook4","markRevisionCompleted","enableRevisions","calculateTotalWords","selectRevisionWords","getRevisionStats","config","toBeDefined","_renderHook5","stats","totalRevisions","averageScore","lastRevision","toBeNull","streak"],"sources":["useRevisionManager.test.js"],"sourcesContent":["// __tests__/hooks/useRevisionManager.test.js\nimport { renderHook, act, waitFor } from '@testing-library/react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport useRevisionManager from '../../src/hooks/useRevisionManager';\n\njest.mock('@react-native-async-storage/async-storage', () => ({\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n}));\n\ndescribe('useRevisionManager', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    jest.useFakeTimers();\n  });\n\n  afterEach(() => {\n    jest.useRealTimers();\n  });\n\n  it('devrait initialiser avec les valeurs par défaut', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionManager());\n\n    expect(result.current.totalWordsLearned).toBe(0);\n    expect(result.current.nextRevisionAt).toBe(50);\n    expect(result.current.shouldShowRevision).toBe(false);\n    expect(result.current.isRevisionDisabled).toBe(false);\n    expect(result.current.isLoading).toBe(true);\n  });\n\n  it('devrait charger les données sauvegardées', async () => {\n    const mockSavedData = {\n      nextRevisionAt: 100,\n      lastRevisionWords: [{ word: 'test' }],\n      revisionHistory: [{ timestamp: 123456789 }],\n      isRevisionDisabled: true\n    };\n\n    AsyncStorage.getItem.mockImplementation((key) => {\n      if (key === 'revision_manager_data') {\n        return Promise.resolve(JSON.stringify(mockSavedData));\n      }\n      return Promise.resolve(null);\n    });\n\n    const { result } = renderHook(() => useRevisionManager());\n\n    await waitFor(() => {\n      expect(result.current.nextRevisionAt).toBe(100);\n      expect(result.current.isRevisionDisabled).toBe(true);\n      expect(result.current.isLoading).toBe(false);\n    });\n  });\n\n  it('devrait gérer les choix de révision', async () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionManager());\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    await act(async () => {\n      const response = await result.current.handleRevisionChoice('disable');\n      expect(response.action).toBe('disabled');\n    });\n\n    expect(result.current.isRevisionDisabled).toBe(true);\n  });\n\n  it('devrait avoir toutes les fonctions nécessaires', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionManager());\n\n    expect(typeof result.current.handleRevisionChoice).toBe('function');\n    expect(typeof result.current.markRevisionCompleted).toBe('function');\n    expect(typeof result.current.enableRevisions).toBe('function');\n    expect(typeof result.current.calculateTotalWords).toBe('function');\n    expect(typeof result.current.selectRevisionWords).toBe('function');\n    expect(typeof result.current.getRevisionStats).toBe('function');\n    expect(result.current.config).toBeDefined();\n  });\n\n  it('devrait calculer les statistiques', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionManager());\n\n    const stats = result.current.getRevisionStats();\n\n    expect(stats.totalRevisions).toBe(0);\n    expect(stats.averageScore).toBe(0);\n    expect(stats.lastRevision).toBeNull();\n    expect(stats.streak).toBe(0);\n  });\n});"],"mappings":"AAKAA,WAAA,GAAKC,IAAI,CAAC,2CAA2C,EAAE;EAAA,OAAO;IAC5DC,OAAO,EAAEC,IAAI,CAACC,EAAE,CAAC,CAAC;IAClBC,OAAO,EAAEF,IAAI,CAACC,EAAE,CAAC;EACnB,CAAC;AAAA,CAAC,CAAC;AAAC,IAAAE,sBAAA,GAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AAPJ,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAAG,aAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,mBAAA,GAAAL,sBAAA,CAAAC,OAAA;AAAoE,SAAAP,YAAA;EAAA,IAAAY,QAAA,GAAAL,OAAA;IAAAJ,IAAA,GAAAS,QAAA,CAAAT,IAAA;EAAAH,WAAA,YAAAA,YAAA;IAAA,OAAAG,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAOpEU,QAAQ,CAAC,oBAAoB,EAAE,YAAM;EACnCC,UAAU,CAAC,YAAM;IACfX,IAAI,CAACY,aAAa,CAAC,CAAC;IACpBZ,IAAI,CAACa,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFC,SAAS,CAAC,YAAM;IACdd,IAAI,CAACe,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFC,EAAE,CAAC,iDAAiD,EAAE,YAAM;IAC1DC,qBAAY,CAAClB,OAAO,CAACmB,iBAAiB,CAAC,IAAI,CAAC;IAC5C,IAAAC,WAAA,GAAmB,IAAAC,uBAAU,EAAC;QAAA,OAAM,IAAAC,2BAAkB,EAAC,CAAC;MAAA,EAAC;MAAjDC,MAAM,GAAAH,WAAA,CAANG,MAAM;IAEdC,MAAM,CAACD,MAAM,CAACE,OAAO,CAACC,iBAAiB,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;IAChDH,MAAM,CAACD,MAAM,CAACE,OAAO,CAACG,cAAc,CAAC,CAACD,IAAI,CAAC,EAAE,CAAC;IAC9CH,MAAM,CAACD,MAAM,CAACE,OAAO,CAACI,kBAAkB,CAAC,CAACF,IAAI,CAAC,KAAK,CAAC;IACrDH,MAAM,CAACD,MAAM,CAACE,OAAO,CAACK,kBAAkB,CAAC,CAACH,IAAI,CAAC,KAAK,CAAC;IACrDH,MAAM,CAACD,MAAM,CAACE,OAAO,CAACM,SAAS,CAAC,CAACJ,IAAI,CAAC,IAAI,CAAC;EAC7C,CAAC,CAAC;EAEFV,EAAE,CAAC,0CAA0C,MAAAX,kBAAA,CAAA0B,OAAA,EAAE,aAAY;IACzD,IAAMC,aAAa,GAAG;MACpBL,cAAc,EAAE,GAAG;MACnBM,iBAAiB,EAAE,CAAC;QAAEC,IAAI,EAAE;MAAO,CAAC,CAAC;MACrCC,eAAe,EAAE,CAAC;QAAEC,SAAS,EAAE;MAAU,CAAC,CAAC;MAC3CP,kBAAkB,EAAE;IACtB,CAAC;IAEDZ,qBAAY,CAAClB,OAAO,CAACsC,kBAAkB,CAAC,UAACC,GAAG,EAAK;MAC/C,IAAIA,GAAG,KAAK,uBAAuB,EAAE;QACnC,OAAOC,OAAO,CAACC,OAAO,CAACC,IAAI,CAACC,SAAS,CAACV,aAAa,CAAC,CAAC;MACvD;MACA,OAAOO,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;IAC9B,CAAC,CAAC;IAEF,IAAAG,YAAA,GAAmB,IAAAvB,uBAAU,EAAC;QAAA,OAAM,IAAAC,2BAAkB,EAAC,CAAC;MAAA,EAAC;MAAjDC,MAAM,GAAAqB,YAAA,CAANrB,MAAM;IAEd,MAAM,IAAAsB,oBAAO,EAAC,YAAM;MAClBrB,MAAM,CAACD,MAAM,CAACE,OAAO,CAACG,cAAc,CAAC,CAACD,IAAI,CAAC,GAAG,CAAC;MAC/CH,MAAM,CAACD,MAAM,CAACE,OAAO,CAACK,kBAAkB,CAAC,CAACH,IAAI,CAAC,IAAI,CAAC;MACpDH,MAAM,CAACD,MAAM,CAACE,OAAO,CAACM,SAAS,CAAC,CAACJ,IAAI,CAAC,KAAK,CAAC;IAC9C,CAAC,CAAC;EACJ,CAAC,EAAC;EAEFV,EAAE,CAAC,qCAAqC,MAAAX,kBAAA,CAAA0B,OAAA,EAAE,aAAY;IACpDd,qBAAY,CAAClB,OAAO,CAACmB,iBAAiB,CAAC,IAAI,CAAC;IAC5C,IAAA2B,YAAA,GAAmB,IAAAzB,uBAAU,EAAC;QAAA,OAAM,IAAAC,2BAAkB,EAAC,CAAC;MAAA,EAAC;MAAjDC,MAAM,GAAAuB,YAAA,CAANvB,MAAM;IAEd,MAAM,IAAAsB,oBAAO,EAAC,YAAM;MAClBrB,MAAM,CAACD,MAAM,CAACE,OAAO,CAACM,SAAS,CAAC,CAACJ,IAAI,CAAC,KAAK,CAAC;IAC9C,CAAC,CAAC;IAEF,MAAM,IAAAoB,gBAAG,MAAAzC,kBAAA,CAAA0B,OAAA,EAAC,aAAY;MACpB,IAAMgB,QAAQ,SAASzB,MAAM,CAACE,OAAO,CAACwB,oBAAoB,CAAC,SAAS,CAAC;MACrEzB,MAAM,CAACwB,QAAQ,CAACE,MAAM,CAAC,CAACvB,IAAI,CAAC,UAAU,CAAC;IAC1C,CAAC,EAAC;IAEFH,MAAM,CAACD,MAAM,CAACE,OAAO,CAACK,kBAAkB,CAAC,CAACH,IAAI,CAAC,IAAI,CAAC;EACtD,CAAC,EAAC;EAEFV,EAAE,CAAC,gDAAgD,EAAE,YAAM;IACzDC,qBAAY,CAAClB,OAAO,CAACmB,iBAAiB,CAAC,IAAI,CAAC;IAC5C,IAAAgC,YAAA,GAAmB,IAAA9B,uBAAU,EAAC;QAAA,OAAM,IAAAC,2BAAkB,EAAC,CAAC;MAAA,EAAC;MAAjDC,MAAM,GAAA4B,YAAA,CAAN5B,MAAM;IAEdC,MAAM,CAAC,OAAOD,MAAM,CAACE,OAAO,CAACwB,oBAAoB,CAAC,CAACtB,IAAI,CAAC,UAAU,CAAC;IACnEH,MAAM,CAAC,OAAOD,MAAM,CAACE,OAAO,CAAC2B,qBAAqB,CAAC,CAACzB,IAAI,CAAC,UAAU,CAAC;IACpEH,MAAM,CAAC,OAAOD,MAAM,CAACE,OAAO,CAAC4B,eAAe,CAAC,CAAC1B,IAAI,CAAC,UAAU,CAAC;IAC9DH,MAAM,CAAC,OAAOD,MAAM,CAACE,OAAO,CAAC6B,mBAAmB,CAAC,CAAC3B,IAAI,CAAC,UAAU,CAAC;IAClEH,MAAM,CAAC,OAAOD,MAAM,CAACE,OAAO,CAAC8B,mBAAmB,CAAC,CAAC5B,IAAI,CAAC,UAAU,CAAC;IAClEH,MAAM,CAAC,OAAOD,MAAM,CAACE,OAAO,CAAC+B,gBAAgB,CAAC,CAAC7B,IAAI,CAAC,UAAU,CAAC;IAC/DH,MAAM,CAACD,MAAM,CAACE,OAAO,CAACgC,MAAM,CAAC,CAACC,WAAW,CAAC,CAAC;EAC7C,CAAC,CAAC;EAEFzC,EAAE,CAAC,mCAAmC,EAAE,YAAM;IAC5CC,qBAAY,CAAClB,OAAO,CAACmB,iBAAiB,CAAC,IAAI,CAAC;IAC5C,IAAAwC,YAAA,GAAmB,IAAAtC,uBAAU,EAAC;QAAA,OAAM,IAAAC,2BAAkB,EAAC,CAAC;MAAA,EAAC;MAAjDC,MAAM,GAAAoC,YAAA,CAANpC,MAAM;IAEd,IAAMqC,KAAK,GAAGrC,MAAM,CAACE,OAAO,CAAC+B,gBAAgB,CAAC,CAAC;IAE/ChC,MAAM,CAACoC,KAAK,CAACC,cAAc,CAAC,CAAClC,IAAI,CAAC,CAAC,CAAC;IACpCH,MAAM,CAACoC,KAAK,CAACE,YAAY,CAAC,CAACnC,IAAI,CAAC,CAAC,CAAC;IAClCH,MAAM,CAACoC,KAAK,CAACG,YAAY,CAAC,CAACC,QAAQ,CAAC,CAAC;IACrCxC,MAAM,CAACoC,KAAK,CAACK,MAAM,CAAC,CAACtC,IAAI,CAAC,CAAC,CAAC;EAC9B,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}