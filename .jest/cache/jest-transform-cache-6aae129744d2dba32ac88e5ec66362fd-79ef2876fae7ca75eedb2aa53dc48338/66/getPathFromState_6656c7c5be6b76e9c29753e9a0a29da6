4db547cfa534208fc559cb7d9732bfd2
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getPathFromState = getPathFromState;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var queryString = _interopRequireWildcard(require("query-string"));
var _getPatternParts = require("./getPatternParts.js");
var _validatePathConfig = require("./validatePathConfig.js");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
var _getActiveRoute = function getActiveRoute(state) {
  var route = typeof state.index === 'number' ? state.routes[state.index] : state.routes[state.routes.length - 1];
  if (route.state) {
    return _getActiveRoute(route.state);
  }
  return route;
};
var cachedNormalizedConfigs = new WeakMap();
var getNormalizedConfigs = function getNormalizedConfigs(options) {
  if (!(options != null && options.screens)) return {};
  var cached = cachedNormalizedConfigs.get(options == null ? void 0 : options.screens);
  if (cached) return cached;
  var normalizedConfigs = createNormalizedConfigs(options.screens);
  cachedNormalizedConfigs.set(options.screens, normalizedConfigs);
  return normalizedConfigs;
};
function getPathFromState(state, options) {
  if (state == null) {
    throw Error(`Got '${String(state)}' for the navigation state. You must pass a valid state object.`);
  }
  if (options) {
    (0, _validatePathConfig.validatePathConfig)(options);
  }
  var configs = getNormalizedConfigs(options);
  var path = '/';
  var current = state;
  var allParams = {};
  var _loop = function _loop() {
    var index = typeof current.index === 'number' ? current.index : 0;
    var route = current.routes[index];
    var parts;
    var focusedParams;
    var currentOptions = configs;
    var focusedRoute = _getActiveRoute(state);
    var nestedRouteNames = [];
    var hasNext = true;
    var _loop2 = function _loop2() {
      parts = currentOptions[route.name].parts;
      nestedRouteNames.push(route.name);
      if (route.params) {
        var _parts2;
        var _options = currentOptions[route.name];
        var currentParams = Object.fromEntries(Object.entries(route.params).map(function (_ref4) {
          var _options$stringify$ke, _options$stringify;
          var _ref5 = (0, _slicedToArray2.default)(_ref4, 2),
            key = _ref5[0],
            value = _ref5[1];
          if (value === undefined) {
            if (_options) {
              var _options$parts;
              var optional = (_options$parts = _options.parts) == null || (_options$parts = _options$parts.find(function (part) {
                return part.param === key;
              })) == null ? void 0 : _options$parts.optional;
              if (optional) {
                return null;
              }
            } else {
              return null;
            }
          }
          var stringify = (_options$stringify$ke = _options == null || (_options$stringify = _options.stringify) == null ? void 0 : _options$stringify[key]) != null ? _options$stringify$ke : String;
          return [key, stringify(value)];
        }).filter(function (entry) {
          return entry != null;
        }));
        if ((_parts2 = parts) != null && _parts2.length) {
          Object.assign(allParams, currentParams);
        }
        if (focusedRoute === route) {
          var _parts3;
          focusedParams = Object.assign({}, currentParams);
          (_parts3 = parts) == null || _parts3.forEach(function (_ref6) {
            var param = _ref6.param;
            if (param) {
              if (focusedParams) {
                delete focusedParams[param];
              }
            }
          });
        }
      }
      if (!currentOptions[route.name].screens || route.state === undefined) {
        hasNext = false;
      } else {
        index = typeof route.state.index === 'number' ? route.state.index : route.state.routes.length - 1;
        var nextRoute = route.state.routes[index];
        var nestedConfig = currentOptions[route.name].screens;
        if (nestedConfig && nextRoute.name in nestedConfig) {
          route = nextRoute;
          currentOptions = nestedConfig;
        } else {
          hasNext = false;
        }
      }
    };
    while (route.name in currentOptions && hasNext) {
      _loop2();
    }
    if (currentOptions[route.name] !== undefined) {
      var _parts;
      path += (_parts = parts) == null ? void 0 : _parts.map(function (_ref) {
        var segment = _ref.segment,
          param = _ref.param,
          optional = _ref.optional;
        if (segment === '*') {
          return route.name;
        }
        if (param) {
          var value = allParams[param];
          if (value === undefined && optional) {
            return '';
          }
          return String(value).replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]/g, function (char) {
            return encodeURIComponent(char);
          });
        }
        return encodeURIComponent(segment);
      }).join('/');
    } else {
      path += encodeURIComponent(route.name);
    }
    if (!focusedParams && focusedRoute.params) {
      focusedParams = Object.fromEntries(Object.entries(focusedRoute.params).map(function (_ref2) {
        var _ref3 = (0, _slicedToArray2.default)(_ref2, 2),
          key = _ref3[0],
          value = _ref3[1];
        return [key, String(value)];
      }));
    }
    if (route.state) {
      path += '/';
    } else if (focusedParams) {
      for (var param in focusedParams) {
        if (focusedParams[param] === 'undefined') {
          delete focusedParams[param];
        }
      }
      var query = queryString.stringify(focusedParams, {
        sort: false
      });
      if (query) {
        path += `?${query}`;
      }
    }
    current = route.state;
  };
  while (current) {
    _loop();
  }
  if (options != null && options.path) {
    path = `${options.path}/${path}`;
  }
  path = path.replace(/\/+/g, '/');
  path = path.length > 1 ? path.replace(/\/$/, '') : path;
  if (!path.startsWith('/')) {
    path = `/${path}`;
  }
  return path;
}
var createConfigItem = function createConfigItem(config, parentParts) {
  if (typeof config === 'string') {
    var _parts4 = (0, _getPatternParts.getPatternParts)(config);
    if (parentParts) {
      return {
        parts: [].concat((0, _toConsumableArray2.default)(parentParts), (0, _toConsumableArray2.default)(_parts4))
      };
    }
    return {
      parts: _parts4
    };
  }
  if (config.exact && config.path === undefined) {
    throw new Error("A 'path' needs to be specified when specifying 'exact: true'. If you don't want this screen in the URL, specify it as empty string, e.g. `path: ''`.");
  }
  var parts = config.exact !== true ? [].concat((0, _toConsumableArray2.default)(parentParts || []), (0, _toConsumableArray2.default)(config.path ? (0, _getPatternParts.getPatternParts)(config.path) : [])) : config.path ? (0, _getPatternParts.getPatternParts)(config.path) : undefined;
  var screens = config.screens ? createNormalizedConfigs(config.screens, parts) : undefined;
  return {
    parts: parts,
    stringify: config.stringify,
    screens: screens
  };
};
var createNormalizedConfigs = function createNormalizedConfigs(options, parts) {
  return Object.fromEntries(Object.entries(options).map(function (_ref7) {
    var _ref8 = (0, _slicedToArray2.default)(_ref7, 2),
      name = _ref8[0],
      c = _ref8[1];
    var result = createConfigItem(c, parts);
    return [name, result];
  }));
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyeVN0cmluZyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9nZXRQYXR0ZXJuUGFydHMiLCJfdmFsaWRhdGVQYXRoQ29uZmlnIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsIl90IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRBY3RpdmVSb3V0ZSIsInN0YXRlIiwicm91dGUiLCJpbmRleCIsInJvdXRlcyIsImxlbmd0aCIsImNhY2hlZE5vcm1hbGl6ZWRDb25maWdzIiwiZ2V0Tm9ybWFsaXplZENvbmZpZ3MiLCJvcHRpb25zIiwic2NyZWVucyIsImNhY2hlZCIsIm5vcm1hbGl6ZWRDb25maWdzIiwiY3JlYXRlTm9ybWFsaXplZENvbmZpZ3MiLCJnZXRQYXRoRnJvbVN0YXRlIiwiRXJyb3IiLCJTdHJpbmciLCJ2YWxpZGF0ZVBhdGhDb25maWciLCJjb25maWdzIiwicGF0aCIsImN1cnJlbnQiLCJhbGxQYXJhbXMiLCJfbG9vcCIsInBhcnRzIiwiZm9jdXNlZFBhcmFtcyIsImN1cnJlbnRPcHRpb25zIiwiZm9jdXNlZFJvdXRlIiwibmVzdGVkUm91dGVOYW1lcyIsImhhc05leHQiLCJfbG9vcDIiLCJuYW1lIiwicHVzaCIsInBhcmFtcyIsIl9wYXJ0czIiLCJjdXJyZW50UGFyYW1zIiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwibWFwIiwiX3JlZjQiLCJfb3B0aW9ucyRzdHJpbmdpZnkka2UiLCJfb3B0aW9ucyRzdHJpbmdpZnkiLCJfcmVmNSIsIl9zbGljZWRUb0FycmF5MiIsImtleSIsInZhbHVlIiwidW5kZWZpbmVkIiwiX29wdGlvbnMkcGFydHMiLCJvcHRpb25hbCIsImZpbmQiLCJwYXJ0IiwicGFyYW0iLCJzdHJpbmdpZnkiLCJmaWx0ZXIiLCJlbnRyeSIsImFzc2lnbiIsIl9wYXJ0czMiLCJmb3JFYWNoIiwiX3JlZjYiLCJuZXh0Um91dGUiLCJuZXN0ZWRDb25maWciLCJfcGFydHMiLCJfcmVmIiwic2VnbWVudCIsInJlcGxhY2UiLCJjaGFyIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsIl9yZWYyIiwiX3JlZjMiLCJxdWVyeSIsInNvcnQiLCJzdGFydHNXaXRoIiwiY3JlYXRlQ29uZmlnSXRlbSIsImNvbmZpZyIsInBhcmVudFBhcnRzIiwiZ2V0UGF0dGVyblBhcnRzIiwiY29uY2F0IiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsImV4YWN0IiwiX3JlZjciLCJfcmVmOCIsImMiLCJyZXN1bHQiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvZ2V0UGF0aEZyb21TdGF0ZS50c3giXSwic291cmNlc0NvbnRlbnQiOltudWxsXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUtBLElBQUFBLFdBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLGdCQUFBLEdBQUFELE9BQUE7QUFFQSxJQUFBRSxtQkFBQSxHQUFBRixPQUFBO0FBQXlELFNBQUFELHdCQUFBSSxDQUFBLEVBQUFDLENBQUEsNkJBQUFDLE9BQUEsTUFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBTix1QkFBQSxZQUFBQSx3QkFBQUksQ0FBQSxFQUFBQyxDQUFBLFNBQUFBLENBQUEsSUFBQUQsQ0FBQSxJQUFBQSxDQUFBLENBQUFLLFVBQUEsU0FBQUwsQ0FBQSxNQUFBTSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSxLQUFBQyxTQUFBLFFBQUFDLE9BQUEsRUFBQVYsQ0FBQSxpQkFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxTQUFBUSxDQUFBLE1BQUFGLENBQUEsR0FBQUwsQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUEsUUFBQUcsQ0FBQSxDQUFBSyxHQUFBLENBQUFYLENBQUEsVUFBQU0sQ0FBQSxDQUFBTSxHQUFBLENBQUFaLENBQUEsR0FBQU0sQ0FBQSxDQUFBTyxHQUFBLENBQUFiLENBQUEsRUFBQVEsQ0FBQSxjQUFBTSxFQUFBLElBQUFkLENBQUEsZ0JBQUFjLEVBQUEsT0FBQUMsY0FBQSxDQUFBQyxJQUFBLENBQUFoQixDQUFBLEVBQUFjLEVBQUEsT0FBQVAsQ0FBQSxJQUFBRCxDQUFBLEdBQUFXLE1BQUEsQ0FBQUMsY0FBQSxLQUFBRCxNQUFBLENBQUFFLHdCQUFBLENBQUFuQixDQUFBLEVBQUFjLEVBQUEsT0FBQVAsQ0FBQSxDQUFBSyxHQUFBLElBQUFMLENBQUEsQ0FBQU0sR0FBQSxJQUFBUCxDQUFBLENBQUFFLENBQUEsRUFBQU0sRUFBQSxFQUFBUCxDQUFBLElBQUFDLENBQUEsQ0FBQU0sRUFBQSxJQUFBZCxDQUFBLENBQUFjLEVBQUEsV0FBQU4sQ0FBQSxLQUFBUixDQUFBLEVBQUFDLENBQUE7QUFrQnpELElBQU1tQixlQUFjLEdBQUksU0FBbEJBLGNBQWNBLENBQUlDLEtBQVksRUFBd0M7RUFDMUUsSUFBTUMsS0FBSyxHQUNULE9BQU9ELEtBQUssQ0FBQ0UsS0FBSyxLQUFLLFFBQVEsR0FDM0JGLEtBQUssQ0FBQ0csTUFBTSxDQUFDSCxLQUFLLENBQUNFLEtBQUssQ0FBQyxHQUN6QkYsS0FBSyxDQUFDRyxNQUFNLENBQUNILEtBQUssQ0FBQ0csTUFBTSxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0VBRTNDLElBQUlILEtBQUssQ0FBQ0QsS0FBSyxFQUFFO0lBQ2YsT0FBT0QsZUFBYyxDQUFDRSxLQUFLLENBQUNELEtBQUssQ0FBQztFQUNwQztFQUVBLE9BQU9DLEtBQUs7QUFDZCxDQUFDO0FBRUQsSUFBTUksdUJBQXVCLEdBQUcsSUFBSXhCLE9BQU8sQ0FHekMsQ0FBQztBQUVILElBQU15QixvQkFBb0IsR0FBSSxTQUF4QkEsb0JBQW9CQSxDQUFJQyxPQUFxQixFQUFLO0VBQ3RELElBQUksRUFBQ0EsT0FBTyxZQUFQQSxPQUFPLENBQUVDLE9BQU8sR0FBRSxPQUFPLENBQUMsQ0FBQztFQUVoQyxJQUFNQyxNQUFNLEdBQUdKLHVCQUF1QixDQUFDZCxHQUFHLENBQUNnQixPQUFPLG9CQUFQQSxPQUFPLENBQUVDLE9BQU8sQ0FBQztFQUU1RCxJQUFJQyxNQUFNLEVBQUUsT0FBT0EsTUFBTTtFQUV6QixJQUFNQyxpQkFBaUIsR0FBR0MsdUJBQXVCLENBQUNKLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO0VBRWxFSCx1QkFBdUIsQ0FBQ2IsR0FBRyxDQUFDZSxPQUFPLENBQUNDLE9BQU8sRUFBRUUsaUJBQWlCLENBQUM7RUFFL0QsT0FBT0EsaUJBQWlCO0FBQzFCLENBQUM7QUErQk0sU0FBU0UsZ0JBQWdCQSxDQUM5QlosS0FBWSxFQUNaTyxPQUE0QixFQUNwQjtFQUNSLElBQUlQLEtBQUssSUFBSSxJQUFJLEVBQUU7SUFDakIsTUFBTWEsS0FBSyxDQUNULFFBQVFDLE1BQU0sQ0FBQ2QsS0FBSyxDQUFDLGlFQUN2QixDQUFDO0VBQ0g7RUFFQSxJQUFJTyxPQUFPLEVBQUU7SUFDWCxJQUFBUSxzQ0FBa0IsRUFBQ1IsT0FBTyxDQUFDO0VBQzdCO0VBRUEsSUFBTVMsT0FBTyxHQUFHVixvQkFBb0IsQ0FBQ0MsT0FBTyxDQUFDO0VBRTdDLElBQUlVLElBQUksR0FBRyxHQUFHO0VBQ2QsSUFBSUMsT0FBMEIsR0FBR2xCLEtBQUs7RUFFdEMsSUFBTW1CLFNBQWlDLEdBQUcsQ0FBQyxDQUFDO0VBQUEsSUFBQUMsS0FBQSxZQUFBQSxNQUFBLEVBRTVCO0lBQ2QsSUFBSWxCLEtBQUssR0FBRyxPQUFPZ0IsT0FBTyxDQUFDaEIsS0FBSyxLQUFLLFFBQVEsR0FBR2dCLE9BQU8sQ0FBQ2hCLEtBQUssR0FBRyxDQUFDO0lBQ2pFLElBQUlELEtBQUssR0FBR2lCLE9BQU8sQ0FBQ2YsTUFBTSxDQUFDRCxLQUFLLENBRS9CO0lBRUQsSUFBSW1CLEtBQWdDO0lBRXBDLElBQUlDLGFBQWlEO0lBQ3JELElBQUlDLGNBQWMsR0FBR1AsT0FBTztJQUU1QixJQUFNUSxZQUFZLEdBQUd6QixlQUFjLENBQUNDLEtBQUssQ0FBQztJQUcxQyxJQUFNeUIsZ0JBQWdCLEdBQUcsRUFBRTtJQUUzQixJQUFJQyxPQUFPLEdBQUcsSUFBSTtJQUFBLElBQUFDLE1BQUEsWUFBQUEsT0FBQSxFQUU4QjtNQUM5Q04sS0FBSyxHQUFHRSxjQUFjLENBQUN0QixLQUFLLENBQUMyQixJQUFJLENBQUMsQ0FBQ1AsS0FBSztNQUV4Q0ksZ0JBQWdCLENBQUNJLElBQUksQ0FBQzVCLEtBQUssQ0FBQzJCLElBQUksQ0FBQztNQUVqQyxJQUFJM0IsS0FBSyxDQUFDNkIsTUFBTSxFQUFFO1FBQUEsSUFBQUMsT0FBQTtRQUNoQixJQUFNeEIsUUFBTyxHQUFHZ0IsY0FBYyxDQUFDdEIsS0FBSyxDQUFDMkIsSUFBSSxDQUFDO1FBRTFDLElBQU1JLGFBQWEsR0FBR3BDLE1BQU0sQ0FBQ3FDLFdBQVcsQ0FDdENyQyxNQUFNLENBQUNzQyxPQUFPLENBQUNqQyxLQUFLLENBQUM2QixNQUFNLENBQUMsQ0FDekJLLEdBQUcsQ0FBQyxVQUFBQyxLQUFBLEVBQTJDO1VBQUEsSUFBQUMscUJBQUEsRUFBQUMsa0JBQUE7VUFBQSxJQUFBQyxLQUFBLE9BQUFDLGVBQUEsQ0FBQW5ELE9BQUEsRUFBQStDLEtBQUE7WUFBekNLLEdBQUcsR0FBQUYsS0FBQTtZQUFFRyxLQUFLLEdBQUFILEtBQUE7VUFDZixJQUFJRyxLQUFLLEtBQUtDLFNBQVMsRUFBRTtZQUN2QixJQUFJcEMsUUFBTyxFQUFFO2NBQUEsSUFBQXFDLGNBQUE7Y0FDWCxJQUFNQyxRQUFRLElBQUFELGNBQUEsR0FBR3JDLFFBQU8sQ0FBQ2MsS0FBSyxjQUFBdUIsY0FBQSxHQUFiQSxjQUFBLENBQWVFLElBQUksQ0FDakMsVUFBQUMsSUFBSTtnQkFBQSxPQUFLQSxJQUFJLENBQUNDLEtBQUssS0FBS1AsR0FDM0I7Y0FBQSxFQUFDLHFCQUZnQkcsY0FBQSxDQUVkQyxRQUFRO2NBRVgsSUFBSUEsUUFBUSxFQUFFO2dCQUNaLE9BQU8sSUFBSTtjQUNiO1lBQ0YsQ0FBQyxNQUFNO2NBQ0wsT0FBTyxJQUFJO1lBQ2I7VUFDRjtVQUVBLElBQU1JLFNBQVMsSUFBQVoscUJBQUEsR0FBRzlCLFFBQU8sYUFBQStCLGtCQUFBLEdBQVAvQixRQUFPLENBQUUwQyxTQUFTLHFCQUFsQlgsa0JBQUEsQ0FBcUJHLEdBQUcsQ0FBQyxZQUFBSixxQkFBQSxHQUFJdkIsTUFBTTtVQUVyRCxPQUFPLENBQUMyQixHQUFHLEVBQUVRLFNBQVMsQ0FBQ1AsS0FBSyxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQ0RRLE1BQU0sQ0FBRSxVQUFBQyxLQUFLO1VBQUEsT0FBS0EsS0FBSyxJQUFJLElBQUk7UUFBQSxFQUNwQyxDQUFDO1FBRUQsS0FBQXBCLE9BQUEsR0FBSVYsS0FBSyxhQUFMVSxPQUFBLENBQU8zQixNQUFNLEVBQUU7VUFDakJSLE1BQU0sQ0FBQ3dELE1BQU0sQ0FBQ2pDLFNBQVMsRUFBRWEsYUFBYSxDQUFDO1FBQ3pDO1FBRUEsSUFBSVIsWUFBWSxLQUFLdkIsS0FBSyxFQUFFO1VBQUEsSUFBQW9ELE9BQUE7VUFHMUIvQixhQUFhLEdBQUExQixNQUFBLENBQUF3RCxNQUFBLEtBQVFwQixhQUFBLENBQWU7VUFFcEMsQ0FBQXFCLE9BQUEsR0FBQWhDLEtBQUEsYUFBQWdDLE9BQUEsQ0FFSUMsT0FBTyxDQUFDLFVBQUFDLEtBQUEsRUFBZTtZQUFBLElBQVpQLEtBQUEsR0FBQU8sS0FBQSxDQUFBUCxLQUFBO1lBQ1gsSUFBSUEsS0FBSyxFQUFFO2NBRVQsSUFBSTFCLGFBQWEsRUFBRTtnQkFFakIsT0FBT0EsYUFBYSxDQUFDMEIsS0FBSyxDQUFDO2NBQzdCO1lBQ0Y7VUFDRixDQUFDLENBQUM7UUFDTjtNQUNGO01BR0EsSUFBSSxDQUFDekIsY0FBYyxDQUFDdEIsS0FBSyxDQUFDMkIsSUFBSSxDQUFDLENBQUNwQixPQUFPLElBQUlQLEtBQUssQ0FBQ0QsS0FBSyxLQUFLMkMsU0FBUyxFQUFFO1FBQ3BFakIsT0FBTyxHQUFHLEtBQUs7TUFDakIsQ0FBQyxNQUFNO1FBQ0x4QixLQUFLLEdBQ0gsT0FBT0QsS0FBSyxDQUFDRCxLQUFLLENBQUNFLEtBQUssS0FBSyxRQUFRLEdBQ2pDRCxLQUFLLENBQUNELEtBQUssQ0FBQ0UsS0FBSyxHQUNqQkQsS0FBSyxDQUFDRCxLQUFLLENBQUNHLE1BQU0sQ0FBQ0MsTUFBTSxHQUFHLENBQUM7UUFFbkMsSUFBTW9ELFNBQVMsR0FBR3ZELEtBQUssQ0FBQ0QsS0FBSyxDQUFDRyxNQUFNLENBQUNELEtBQUssQ0FBQztRQUMzQyxJQUFNdUQsWUFBWSxHQUFHbEMsY0FBYyxDQUFDdEIsS0FBSyxDQUFDMkIsSUFBSSxDQUFDLENBQUNwQixPQUFPO1FBR3ZELElBQUlpRCxZQUFZLElBQUlELFNBQVMsQ0FBQzVCLElBQUksSUFBSTZCLFlBQVksRUFBRTtVQUNsRHhELEtBQUssR0FBR3VELFNBQThDO1VBQ3REakMsY0FBYyxHQUFHa0MsWUFBWTtRQUMvQixDQUFDLE1BQU07VUFFTC9CLE9BQU8sR0FBRyxLQUFLO1FBQ2pCO01BQ0Y7SUFDRjtJQTVFQSxPQUFPekIsS0FBSyxDQUFDMkIsSUFBSSxJQUFJTCxjQUFjLElBQUlHLE9BQU87TUFBQUMsTUFBQTtJQUFBO0lBOEU5QyxJQUFJSixjQUFjLENBQUN0QixLQUFLLENBQUMyQixJQUFJLENBQUMsS0FBS2UsU0FBUyxFQUFFO01BQUEsSUFBQWUsTUFBQTtNQUM1Q3pDLElBQUksS0FBQXlDLE1BQUEsR0FBSXJDLEtBQUsscUJBQUxxQyxNQUFBLENBQ0p2QixHQUFHLENBQUMsVUFBQXdCLElBQUEsRUFBa0M7UUFBQSxJQUEvQkMsT0FBTyxHQUFBRCxJQUFBLENBQVBDLE9BQU87VUFBRVosS0FBSyxHQUFBVyxJQUFBLENBQUxYLEtBQUs7VUFBRUgsUUFBQSxHQUFBYyxJQUFBLENBQUFkLFFBQUE7UUFJdkIsSUFBSWUsT0FBTyxLQUFLLEdBQUcsRUFBRTtVQUNuQixPQUFPM0QsS0FBSyxDQUFDMkIsSUFBSTtRQUNuQjtRQUdBLElBQUlvQixLQUFLLEVBQUU7VUFDVCxJQUFNTixLQUFLLEdBQUd2QixTQUFTLENBQUM2QixLQUFLLENBQUM7VUFFOUIsSUFBSU4sS0FBSyxLQUFLQyxTQUFTLElBQUlFLFFBQVEsRUFBRTtZQUVuQyxPQUFPLEVBQUU7VUFDWDtVQUlBLE9BQU8vQixNQUFNLENBQUM0QixLQUFLLENBQUMsQ0FBQ21CLE9BQU8sQ0FDMUIsaUNBQWlDLEVBQ2hDLFVBQUFDLElBQUk7WUFBQSxPQUFLQyxrQkFBa0IsQ0FBQ0QsSUFBSSxDQUNuQztVQUFBLEVBQUM7UUFDSDtRQUVBLE9BQU9DLGtCQUFrQixDQUFDSCxPQUFPLENBQUM7TUFDcEMsQ0FBQyxDQUFDLENBQ0RJLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDZCxDQUFDLE1BQU07TUFDTC9DLElBQUksSUFBSThDLGtCQUFrQixDQUFDOUQsS0FBSyxDQUFDMkIsSUFBSSxDQUFDO0lBQ3hDO0lBRUEsSUFBSSxDQUFDTixhQUFhLElBQUlFLFlBQVksQ0FBQ00sTUFBTSxFQUFFO01BQ3pDUixhQUFhLEdBQUcxQixNQUFNLENBQUNxQyxXQUFXLENBQ2hDckMsTUFBTSxDQUFDc0MsT0FBTyxDQUFDVixZQUFZLENBQUNNLE1BQU0sQ0FBQyxDQUFDSyxHQUFHLENBQUMsVUFBQThCLEtBQUE7UUFBQSxJQUFBQyxLQUFBLE9BQUExQixlQUFBLENBQUFuRCxPQUFBLEVBQUE0RSxLQUFBO1VBQUV4QixHQUFHLEdBQUF5QixLQUFBO1VBQUV4QixLQUFLLEdBQUF3QixLQUFBO1FBQUEsT0FBTSxDQUN4RHpCLEdBQUcsRUFDSDNCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxDQUNkO01BQUEsRUFDSCxDQUFDO0lBQ0g7SUFFQSxJQUFJekMsS0FBSyxDQUFDRCxLQUFLLEVBQUU7TUFDZmlCLElBQUksSUFBSSxHQUFHO0lBQ2IsQ0FBQyxNQUFNLElBQUlLLGFBQWEsRUFBRTtNQUN4QixLQUFLLElBQU0wQixLQUFLLElBQUkxQixhQUFhLEVBQUU7UUFDakMsSUFBSUEsYUFBYSxDQUFDMEIsS0FBSyxDQUFDLEtBQUssV0FBVyxFQUFFO1VBRXhDLE9BQU8xQixhQUFhLENBQUMwQixLQUFLLENBQUM7UUFDN0I7TUFDRjtNQUVBLElBQU1tQixLQUFLLEdBQUc3RixXQUFXLENBQUMyRSxTQUFTLENBQUMzQixhQUFhLEVBQUU7UUFBRThDLElBQUksRUFBRTtNQUFNLENBQUMsQ0FBQztNQUVuRSxJQUFJRCxLQUFLLEVBQUU7UUFDVGxELElBQUksSUFBSSxJQUFJa0QsS0FBSyxFQUFFO01BQ3JCO0lBQ0Y7SUFFQWpELE9BQU8sR0FBR2pCLEtBQUssQ0FBQ0QsS0FBSztFQUN2QjtFQTdKQSxPQUFPa0IsT0FBTztJQUFBRSxLQUFBO0VBQUE7RUFnS2QsSUFBSWIsT0FBTyxZQUFQQSxPQUFPLENBQUVVLElBQUksRUFBRTtJQUNqQkEsSUFBSSxHQUFHLEdBQUdWLE9BQU8sQ0FBQ1UsSUFBSSxJQUFJQSxJQUFJLEVBQUU7RUFDbEM7RUFHQUEsSUFBSSxHQUFHQSxJQUFJLENBQUM0QyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQztFQUNoQzVDLElBQUksR0FBR0EsSUFBSSxDQUFDYixNQUFNLEdBQUcsQ0FBQyxHQUFHYSxJQUFJLENBQUM0QyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHNUMsSUFBSTtFQUl2RCxJQUFJLENBQUNBLElBQUksQ0FBQ29ELFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtJQUN6QnBELElBQUksR0FBRyxJQUFJQSxJQUFJLEVBQUU7RUFDbkI7RUFFQSxPQUFPQSxJQUFJO0FBQ2I7QUFFQSxJQUFNcUQsZ0JBQWdCLEdBQUcsU0FBbkJBLGdCQUFnQkEsQ0FDcEJDLE1BQW1DLEVBQ25DQyxXQUEyQixFQUNaO0VBQ2YsSUFBSSxPQUFPRCxNQUFNLEtBQUssUUFBUSxFQUFFO0lBRTlCLElBQU1sRCxPQUFLLEdBQUcsSUFBQW9ELGdDQUFlLEVBQUNGLE1BQU0sQ0FBQztJQUVyQyxJQUFJQyxXQUFXLEVBQUU7TUFDZixPQUFPO1FBQUVuRCxLQUFLLEtBQUFxRCxNQUFBLEtBQUFDLG1CQUFBLENBQUF0RixPQUFBLEVBQU1tRixXQUFXLE9BQUFHLG1CQUFBLENBQUF0RixPQUFBLEVBQUtnQyxPQUFLO01BQUUsQ0FBQztJQUM5QztJQUVBLE9BQU87TUFBRUEsS0FBQSxFQUFBQTtJQUFNLENBQUM7RUFDbEI7RUFFQSxJQUFJa0QsTUFBTSxDQUFDSyxLQUFLLElBQUlMLE1BQU0sQ0FBQ3RELElBQUksS0FBSzBCLFNBQVMsRUFBRTtJQUM3QyxNQUFNLElBQUk5QixLQUFLLENBQ2Isc0pBQ0YsQ0FBQztFQUNIO0VBSUEsSUFBTVEsS0FBSyxHQUNUa0QsTUFBTSxDQUFDSyxLQUFLLEtBQUssSUFBSSxNQUFBRixNQUFBLEtBQUFDLG1CQUFBLENBQUF0RixPQUFBLEVBRVhtRixXQUFXLElBQUksRUFBRSxPQUFBRyxtQkFBQSxDQUFBdEYsT0FBQSxFQUNqQmtGLE1BQU0sQ0FBQ3RELElBQUksR0FBRyxJQUFBd0QsZ0NBQWUsRUFBQ0YsTUFBTSxDQUFDdEQsSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUVyRHNELE1BQU0sQ0FBQ3RELElBQUksR0FDVCxJQUFBd0QsZ0NBQWUsRUFBQ0YsTUFBTSxDQUFDdEQsSUFBSSxDQUFDLEdBQzVCMEIsU0FBUztFQUVqQixJQUFNbkMsT0FBTyxHQUFHK0QsTUFBTSxDQUFDL0QsT0FBTyxHQUMxQkcsdUJBQXVCLENBQUM0RCxNQUFNLENBQUMvRCxPQUFPLEVBQUVhLEtBQUssQ0FBQyxHQUM5Q3NCLFNBQVM7RUFFYixPQUFPO0lBQ0x0QixLQUFLLEVBQUxBLEtBQUs7SUFDTDRCLFNBQVMsRUFBRXNCLE1BQU0sQ0FBQ3RCLFNBQVM7SUFDM0J6QyxPQUFBLEVBQUFBO0VBQ0YsQ0FBQztBQUNILENBQUM7QUFFRCxJQUFNRyx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQXVCQSxDQUMzQkosT0FBOEIsRUFDOUJjLEtBQXFCO0VBQUEsT0FFckJ6QixNQUFNLENBQUNxQyxXQUFXLENBQ2hCckMsTUFBTSxDQUFDc0MsT0FBTyxDQUFDM0IsT0FBTyxDQUFDLENBQUM0QixHQUFHLENBQUMsVUFBQTBDLEtBQUEsRUFBZTtJQUFBLElBQUFDLEtBQUEsT0FBQXRDLGVBQUEsQ0FBQW5ELE9BQUEsRUFBQXdGLEtBQUE7TUFBYmpELElBQUksR0FBQWtELEtBQUE7TUFBRUMsQ0FBQyxHQUFBRCxLQUFBO0lBQ25DLElBQU1FLE1BQU0sR0FBR1YsZ0JBQWdCLENBQUNTLENBQUMsRUFBRTFELEtBQUssQ0FBQztJQUV6QyxPQUFPLENBQUNPLElBQUksRUFBRW9ELE1BQU0sQ0FBQztFQUN2QixDQUFDLENBQ0gsQ0FBQztBQUFBIiwiaWdub3JlTGlzdCI6W119