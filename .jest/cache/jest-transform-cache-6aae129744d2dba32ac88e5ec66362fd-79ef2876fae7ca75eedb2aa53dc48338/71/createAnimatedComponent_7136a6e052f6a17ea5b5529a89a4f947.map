{"version":3,"names":["_composeStyles","_interopRequireDefault","require","_View","_useMergeRefs","_useAnimatedProps3","_react","_interopRequireWildcard","React","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","createAnimatedComponent","Component","AnimatedComponent","forwardRef","props","forwardedRef","_useAnimatedProps","useAnimatedProps","_useAnimatedProps2","_slicedToArray2","reducedProps","callbackRef","ref","useMergeRefs","passthroughAnimatedPropExplicitValues","style","passthroughStyle","mergedStyle","useMemo","composeStyles","jsx","assign","displayName"],"sources":["createAnimatedComponent.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n * @format\n */\n\nimport composeStyles from '../../src/private/styles/composeStyles';\nimport View from '../Components/View/View';\nimport useMergeRefs from '../Utilities/useMergeRefs';\nimport useAnimatedProps from './useAnimatedProps';\nimport * as React from 'react';\nimport {useMemo} from 'react';\n\nexport type AnimatedProps<Props: {...}> = {\n  // eslint-disable-next-line no-unused-vars\n  +[_K in keyof (Props &\n      $ReadOnly<{\n        passthroughAnimatedPropExplicitValues?: React.ElementConfig<\n          typeof View,\n        >,\n      }>)]: any,\n};\n\nexport type AnimatedComponentType<\n  Props: {...},\n  +Instance = mixed,\n> = React.AbstractComponent<AnimatedProps<Props>, Instance>;\n\nexport default function createAnimatedComponent<TProps: {...}, TInstance>(\n  Component: React.AbstractComponent<TProps, TInstance>,\n): AnimatedComponentType<TProps, TInstance> {\n  const AnimatedComponent = React.forwardRef<AnimatedProps<TProps>, TInstance>(\n    (props, forwardedRef) => {\n      const [reducedProps, callbackRef] = useAnimatedProps<TProps, TInstance>(\n        // $FlowFixMe[incompatible-call]\n        props,\n      );\n      const ref = useMergeRefs<TInstance>(callbackRef, forwardedRef);\n\n      // Some components require explicit passthrough values for animation\n      // to work properly. For example, if an animated component is\n      // transformed and Pressable, onPress will not work after transform\n      // without these passthrough values.\n      // $FlowFixMe[prop-missing]\n      const {passthroughAnimatedPropExplicitValues, style} = reducedProps;\n      const passthroughStyle = passthroughAnimatedPropExplicitValues?.style;\n      const mergedStyle = useMemo(\n        () => composeStyles(style, passthroughStyle),\n        [passthroughStyle, style],\n      );\n\n      // NOTE: It is important that `passthroughAnimatedPropExplicitValues` is\n      // spread after `reducedProps` but before `style`.\n      return (\n        <Component\n          {...reducedProps}\n          {...passthroughAnimatedPropExplicitValues}\n          style={mergedStyle}\n          ref={ref}\n        />\n      );\n    },\n  );\n\n  AnimatedComponent.displayName = `Animated(${\n    Component.displayName || 'Anonymous'\n  })`;\n\n  return AnimatedComponent;\n}\n"],"mappings":";;;;;;AAUA,IAAAA,cAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,aAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,kBAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,MAAA,GAAAC,uBAAA,CAAAL,OAAA;AAA+B,IAAAM,KAAA,GAAAF,MAAA;AAAA,IAAAG,WAAA,GAAAP,OAAA;AAAA,SAAAK,wBAAAG,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAL,uBAAA,YAAAA,wBAAAG,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,cAAAM,EAAA,IAAAd,CAAA,gBAAAc,EAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,EAAA,OAAAP,CAAA,IAAAD,CAAA,GAAAW,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAc,EAAA,OAAAP,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAM,EAAA,EAAAP,CAAA,IAAAC,CAAA,CAAAM,EAAA,IAAAd,CAAA,CAAAc,EAAA,WAAAN,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAkBhB,SAASmB,uBAAuBA,CAC7CC,SAAqD,EACX;EAC1C,IAAMC,iBAAiB,GAAGxB,KAAK,CAACyB,UAAU,CACxC,UAACC,KAAK,EAAEC,YAAY,EAAK;IACvB,IAAAC,iBAAA,GAAoC,IAAAC,0BAAgB,EAElDH,KACF,CAAC;MAAAI,kBAAA,OAAAC,eAAA,CAAAnB,OAAA,EAAAgB,iBAAA;MAHMI,YAAY,GAAAF,kBAAA;MAAEG,WAAW,GAAAH,kBAAA;IAIhC,IAAMI,GAAG,GAAG,IAAAC,qBAAY,EAAYF,WAAW,EAAEN,YAAY,CAAC;IAO9D,IAAOS,qCAAqC,GAAWJ,YAAY,CAA5DI,qCAAqC;MAAEC,KAAK,GAAIL,YAAY,CAArBK,KAAK;IACnD,IAAMC,gBAAgB,GAAGF,qCAAqC,oBAArCA,qCAAqC,CAAEC,KAAK;IACrE,IAAME,WAAW,GAAG,IAAAC,cAAO,EACzB;MAAA,OAAM,IAAAC,sBAAa,EAACJ,KAAK,EAAEC,gBAAgB,CAAC;IAAA,GAC5C,CAACA,gBAAgB,EAAED,KAAK,CAC1B,CAAC;IAID,OACE,IAAApC,WAAA,CAAAyC,GAAA,EAACnB,SAAS,EAAAJ,MAAA,CAAAwB,MAAA,KACJX,YAAY,EACZI,qCAAqC;MACzCC,KAAK,EAAEE,WAAY;MACnBL,GAAG,EAAEA;IAAI,EACV,CAAC;EAEN,CACF,CAAC;EAEDV,iBAAiB,CAACoB,WAAW,GAAG,YAC9BrB,SAAS,CAACqB,WAAW,IAAI,WAAW,GACnC;EAEH,OAAOpB,iBAAiB;AAC1B","ignoreList":[]}