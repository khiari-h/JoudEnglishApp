a230659e9e644e8feef82e7c1e3040c5
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _reactNative = require("react-native");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var useReading = function useReading() {
  var _currentExercise$ques, _currentExercise$ques2, _completedQuestions$s2;
  var exercises = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "A1";
  var _useState = (0, _react.useState)(0),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    selectedExerciseIndex = _useState2[0],
    setSelectedExerciseIndex = _useState2[1];
  var _useState3 = (0, _react.useState)(0),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    currentQuestionIndex = _useState4[0],
    setCurrentQuestionIndex = _useState4[1];
  var _useState5 = (0, _react.useState)(null),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    selectedAnswer = _useState6[0],
    setSelectedAnswer = _useState6[1];
  var _useState7 = (0, _react.useState)(false),
    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),
    showFeedback = _useState8[0],
    setShowFeedback = _useState8[1];
  var _useState9 = (0, _react.useState)(true),
    _useState0 = (0, _slicedToArray2.default)(_useState9, 2),
    textExpanded = _useState0[0],
    setTextExpanded = _useState0[1];
  var _useState1 = (0, _react.useState)(0),
    _useState10 = (0, _slicedToArray2.default)(_useState1, 2),
    attempts = _useState10[0],
    setAttempts = _useState10[1];
  var _useState11 = (0, _react.useState)({}),
    _useState12 = (0, _slicedToArray2.default)(_useState11, 2),
    completedQuestions = _useState12[0],
    setCompletedQuestions = _useState12[1];
  var _useState13 = (0, _react.useState)(false),
    _useState14 = (0, _slicedToArray2.default)(_useState13, 2),
    loaded = _useState14[0],
    setLoaded = _useState14[1];
  var _useState15 = (0, _react.useState)(false),
    _useState16 = (0, _slicedToArray2.default)(_useState15, 2),
    showDetailedProgress = _useState16[0],
    setShowDetailedProgress = _useState16[1];
  var _useState17 = (0, _react.useState)(false),
    _useState18 = (0, _slicedToArray2.default)(_useState17, 2),
    isCorrect = _useState18[0],
    setIsCorrect = _useState18[1];
  var scrollViewRef = (0, _react.useRef)(null);
  var textsScrollViewRef = (0, _react.useRef)(null);
  var fadeAnim = (0, _react.useRef)(new _reactNative.Animated.Value(1)).current;
  var slideAnim = (0, _react.useRef)(new _reactNative.Animated.Value(0)).current;
  var isInitialized = (0, _react.useRef)(false);
  var currentExercise = exercises[selectedExerciseIndex] || {
    title: "",
    text: "",
    questions: []
  };
  var currentQuestion = ((_currentExercise$ques = currentExercise.questions) == null ? void 0 : _currentExercise$ques[currentQuestionIndex]) || null;
  var totalExercises = exercises.length;
  var totalQuestions = ((_currentExercise$ques2 = currentExercise.questions) == null ? void 0 : _currentExercise$ques2.length) || 0;
  var STORAGE_KEY = `reading_progress_${level}`;
  var loadProgress = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      var storedProgress = yield _asyncStorage.default.getItem(STORAGE_KEY);
      if (storedProgress) {
        setCompletedQuestions(JSON.parse(storedProgress));
      }
    } catch (error) {
      console.error('Erreur lors du chargement de la progression de lecture:', error);
    } finally {
      setLoaded(true);
    }
  }), [STORAGE_KEY]);
  var saveProgress = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      yield _asyncStorage.default.setItem(STORAGE_KEY, JSON.stringify(completedQuestions));
    } catch (error) {
      console.error('Erreur lors de la sauvegarde de la progression de lecture:', error);
    }
  }), [completedQuestions, STORAGE_KEY]);
  (0, _react.useEffect)(function () {
    loadProgress();
  }, [loadProgress]);
  (0, _react.useEffect)(function () {
    if (loaded) {
      saveProgress();
    }
  }, [completedQuestions, loaded, saveProgress]);
  (0, _react.useEffect)(function () {
    setShowFeedback(false);
    setSelectedAnswer(null);
    setAttempts(0);
    setTextExpanded(true);
    if (currentQuestionIndex === 0 && selectedExerciseIndex === 0 && !isInitialized.current) {
      isInitialized.current = true;
    } else {
      var _scrollViewRef$curren, _textsScrollViewRef$c;
      (_scrollViewRef$curren = scrollViewRef.current) == null || _scrollViewRef$curren.scrollTo({
        y: 0,
        animated: true
      });
      (_textsScrollViewRef$c = textsScrollViewRef.current) == null || _textsScrollViewRef$c.scrollTo({
        y: 0,
        animated: true
      });
    }
  }, [currentQuestionIndex, selectedExerciseIndex]);
  var changeExercise = (0, _react.useCallback)(function (index) {
    if (index >= 0 && index < totalExercises) {
      setSelectedExerciseIndex(index);
      setCurrentQuestionIndex(0);
    }
  }, [totalExercises]);
  var changeQuestion = (0, _react.useCallback)(function (index) {
    if (index >= 0 && index < totalQuestions) {
      setCurrentQuestionIndex(index);
    }
  }, [totalQuestions]);
  var selectAnswer = (0, _react.useCallback)(function (answer) {
    if (!showFeedback) {
      setSelectedAnswer(answer);
    }
  }, [showFeedback]);
  var submitAnswer = (0, _react.useCallback)(function () {
    if (!currentQuestion || selectedAnswer === null) {
      _reactNative.Alert.alert("Sélection requise", "Veuillez sélectionner une réponse.");
      return;
    }
    var isCurrentAnswerCorrect = selectedAnswer === currentQuestion.correctAnswer;
    setIsCorrect(isCurrentAnswerCorrect);
    setShowFeedback(true);
    setAttempts(function (prev) {
      return prev + 1;
    });
    if (isCurrentAnswerCorrect) {
      setCompletedQuestions(function (prev) {
        var newCompleted = Object.assign({}, prev);
        if (!newCompleted[selectedExerciseIndex]) {
          newCompleted[selectedExerciseIndex] = [];
        }
        if (!newCompleted[selectedExerciseIndex].includes(currentQuestionIndex)) {
          newCompleted[selectedExerciseIndex].push(currentQuestionIndex);
        }
        return newCompleted;
      });
    } else {}
  }, [currentQuestion, selectedAnswer, selectedExerciseIndex, currentQuestionIndex]);
  var nextQuestion = (0, _react.useCallback)(function () {
    if (currentQuestionIndex < totalQuestions - 1) {
      changeQuestion(currentQuestionIndex + 1);
    } else {
      if (selectedExerciseIndex < totalExercises - 1) {
        changeExercise(selectedExerciseIndex + 1);
      } else {
        _reactNative.Alert.alert("Exercice terminé", "Vous avez terminé tous les exercices de lecture pour ce niveau !");
      }
    }
  }, [currentQuestionIndex, totalQuestions, changeQuestion, selectedExerciseIndex, totalExercises, changeExercise]);
  var previousQuestion = (0, _react.useCallback)(function () {
    if (currentQuestionIndex > 0) {
      changeQuestion(currentQuestionIndex - 1);
    } else if (selectedExerciseIndex > 0) {
      var prevExercise = exercises[selectedExerciseIndex - 1];
      if (prevExercise) {
        setSelectedExerciseIndex(selectedExerciseIndex - 1);
        setCurrentQuestionIndex(prevExercise.questions.length - 1);
      }
    }
  }, [currentQuestionIndex, changeQuestion, selectedExerciseIndex, exercises]);
  var retryQuestion = (0, _react.useCallback)(function () {
    setShowFeedback(false);
    setSelectedAnswer(null);
    setAttempts(0);
  }, []);
  var toggleTextExpansion = (0, _react.useCallback)(function () {
    setTextExpanded(function (prev) {
      return !prev;
    });
  }, []);
  var toggleDetailedProgress = (0, _react.useCallback)(function () {
    setShowDetailedProgress(function (prev) {
      return !prev;
    });
  }, []);
  var getProgress = (0, _react.useCallback)(function () {
    var _completedQuestions$s;
    var totalCompletedQuestions = Object.values(completedQuestions).reduce(function (sum, completed) {
      return sum + ((completed == null ? void 0 : completed.length) || 0);
    }, 0);
    var totalQuestionsAllExercises = exercises.reduce(function (sum, ex) {
      var _ex$questions;
      return sum + (((_ex$questions = ex.questions) == null ? void 0 : _ex$questions.length) || 0);
    }, 0);
    var completedInCurrentExercise = ((_completedQuestions$s = completedQuestions[selectedExerciseIndex]) == null ? void 0 : _completedQuestions$s.length) || 0;
    var progressPercent = totalQuestions > 0 ? completedInCurrentExercise / totalQuestions * 100 : 0;
    var overallProgress = totalQuestionsAllExercises > 0 ? totalCompletedQuestions / totalQuestionsAllExercises * 100 : 0;
    return {
      currentExercise: progressPercent,
      overall: overallProgress,
      completedInCurrent: completedInCurrentExercise,
      totalInCurrent: totalQuestions,
      completedOverall: totalCompletedQuestions,
      totalOverall: totalQuestionsAllExercises
    };
  }, [completedQuestions, selectedExerciseIndex, totalQuestions, exercises]);
  var isQuestionCompleted = ((_completedQuestions$s2 = completedQuestions[selectedExerciseIndex]) == null ? void 0 : _completedQuestions$s2.includes(currentQuestionIndex)) || false;
  return {
    selectedExerciseIndex: selectedExerciseIndex,
    currentQuestionIndex: currentQuestionIndex,
    selectedAnswer: selectedAnswer,
    showFeedback: showFeedback,
    textExpanded: textExpanded,
    attempts: attempts,
    completedQuestions: completedQuestions,
    loaded: loaded,
    showDetailedProgress: showDetailedProgress,
    currentExercise: currentExercise,
    currentQuestion: currentQuestion,
    totalExercises: totalExercises,
    totalQuestions: totalQuestions,
    changeExercise: changeExercise,
    changeQuestion: changeQuestion,
    selectAnswer: selectAnswer,
    submitAnswer: submitAnswer,
    nextQuestion: nextQuestion,
    previousQuestion: previousQuestion,
    retryQuestion: retryQuestion,
    toggleTextExpansion: toggleTextExpansion,
    toggleDetailedProgress: toggleDetailedProgress,
    isCorrect: isCorrect,
    isQuestionCompleted: isQuestionCompleted,
    progress: getProgress(),
    scrollViewRef: scrollViewRef,
    textsScrollViewRef: textsScrollViewRef,
    fadeAnim: fadeAnim,
    slideAnim: slideAnim
  };
};
var _default = exports.default = useReading;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3JlYWN0TmF0aXZlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJ1c2VSZWFkaW5nIiwiX2N1cnJlbnRFeGVyY2lzZSRxdWVzIiwiX2N1cnJlbnRFeGVyY2lzZSRxdWVzMiIsIl9jb21wbGV0ZWRRdWVzdGlvbnMkczIiLCJleGVyY2lzZXMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJsZXZlbCIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJzZWxlY3RlZEV4ZXJjaXNlSW5kZXgiLCJzZXRTZWxlY3RlZEV4ZXJjaXNlSW5kZXgiLCJfdXNlU3RhdGUzIiwiX3VzZVN0YXRlNCIsImN1cnJlbnRRdWVzdGlvbkluZGV4Iiwic2V0Q3VycmVudFF1ZXN0aW9uSW5kZXgiLCJfdXNlU3RhdGU1IiwiX3VzZVN0YXRlNiIsInNlbGVjdGVkQW5zd2VyIiwic2V0U2VsZWN0ZWRBbnN3ZXIiLCJfdXNlU3RhdGU3IiwiX3VzZVN0YXRlOCIsInNob3dGZWVkYmFjayIsInNldFNob3dGZWVkYmFjayIsIl91c2VTdGF0ZTkiLCJfdXNlU3RhdGUwIiwidGV4dEV4cGFuZGVkIiwic2V0VGV4dEV4cGFuZGVkIiwiX3VzZVN0YXRlMSIsIl91c2VTdGF0ZTEwIiwiYXR0ZW1wdHMiLCJzZXRBdHRlbXB0cyIsIl91c2VTdGF0ZTExIiwiX3VzZVN0YXRlMTIiLCJjb21wbGV0ZWRRdWVzdGlvbnMiLCJzZXRDb21wbGV0ZWRRdWVzdGlvbnMiLCJfdXNlU3RhdGUxMyIsIl91c2VTdGF0ZTE0IiwibG9hZGVkIiwic2V0TG9hZGVkIiwiX3VzZVN0YXRlMTUiLCJfdXNlU3RhdGUxNiIsInNob3dEZXRhaWxlZFByb2dyZXNzIiwic2V0U2hvd0RldGFpbGVkUHJvZ3Jlc3MiLCJfdXNlU3RhdGUxNyIsIl91c2VTdGF0ZTE4IiwiaXNDb3JyZWN0Iiwic2V0SXNDb3JyZWN0Iiwic2Nyb2xsVmlld1JlZiIsInVzZVJlZiIsInRleHRzU2Nyb2xsVmlld1JlZiIsImZhZGVBbmltIiwiQW5pbWF0ZWQiLCJWYWx1ZSIsImN1cnJlbnQiLCJzbGlkZUFuaW0iLCJpc0luaXRpYWxpemVkIiwiY3VycmVudEV4ZXJjaXNlIiwidGl0bGUiLCJ0ZXh0IiwicXVlc3Rpb25zIiwiY3VycmVudFF1ZXN0aW9uIiwidG90YWxFeGVyY2lzZXMiLCJ0b3RhbFF1ZXN0aW9ucyIsIlNUT1JBR0VfS0VZIiwibG9hZFByb2dyZXNzIiwidXNlQ2FsbGJhY2siLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJzdG9yZWRQcm9ncmVzcyIsIkFzeW5jU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJlcnJvciIsImNvbnNvbGUiLCJzYXZlUHJvZ3Jlc3MiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidXNlRWZmZWN0IiwiX3Njcm9sbFZpZXdSZWYkY3VycmVuIiwiX3RleHRzU2Nyb2xsVmlld1JlZiRjIiwic2Nyb2xsVG8iLCJ5IiwiYW5pbWF0ZWQiLCJjaGFuZ2VFeGVyY2lzZSIsImluZGV4IiwiY2hhbmdlUXVlc3Rpb24iLCJzZWxlY3RBbnN3ZXIiLCJhbnN3ZXIiLCJzdWJtaXRBbnN3ZXIiLCJBbGVydCIsImFsZXJ0IiwiaXNDdXJyZW50QW5zd2VyQ29ycmVjdCIsImNvcnJlY3RBbnN3ZXIiLCJwcmV2IiwibmV3Q29tcGxldGVkIiwiT2JqZWN0IiwiYXNzaWduIiwiaW5jbHVkZXMiLCJwdXNoIiwibmV4dFF1ZXN0aW9uIiwicHJldmlvdXNRdWVzdGlvbiIsInByZXZFeGVyY2lzZSIsInJldHJ5UXVlc3Rpb24iLCJ0b2dnbGVUZXh0RXhwYW5zaW9uIiwidG9nZ2xlRGV0YWlsZWRQcm9ncmVzcyIsImdldFByb2dyZXNzIiwiX2NvbXBsZXRlZFF1ZXN0aW9ucyRzIiwidG90YWxDb21wbGV0ZWRRdWVzdGlvbnMiLCJ2YWx1ZXMiLCJyZWR1Y2UiLCJzdW0iLCJjb21wbGV0ZWQiLCJ0b3RhbFF1ZXN0aW9uc0FsbEV4ZXJjaXNlcyIsImV4IiwiX2V4JHF1ZXN0aW9ucyIsImNvbXBsZXRlZEluQ3VycmVudEV4ZXJjaXNlIiwicHJvZ3Jlc3NQZXJjZW50Iiwib3ZlcmFsbFByb2dyZXNzIiwib3ZlcmFsbCIsImNvbXBsZXRlZEluQ3VycmVudCIsInRvdGFsSW5DdXJyZW50IiwiY29tcGxldGVkT3ZlcmFsbCIsInRvdGFsT3ZlcmFsbCIsImlzUXVlc3Rpb25Db21wbGV0ZWQiLCJwcm9ncmVzcyIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVzZVJlYWRpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaG9va3MvdXNlUmVhZGluZy5qcyAtIEJPVUNMRVMgSU5GSU5JRVMgQ09SUklHw4lFUyBFVCBDQVRDSCBCTE9DS1MgQ09SUklHw4lTXG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBBbmltYXRlZCwgQWxlcnQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IEFzeW5jU3RvcmFnZSBmcm9tICdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZSc7XG5cbmNvbnN0IHVzZVJlYWRpbmcgPSAoZXhlcmNpc2VzID0gW10sIGxldmVsID0gXCJBMVwiKSA9PiB7XG5cbiAgY29uc3QgW3NlbGVjdGVkRXhlcmNpc2VJbmRleCwgc2V0U2VsZWN0ZWRFeGVyY2lzZUluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbY3VycmVudFF1ZXN0aW9uSW5kZXgsIHNldEN1cnJlbnRRdWVzdGlvbkluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbc2VsZWN0ZWRBbnN3ZXIsIHNldFNlbGVjdGVkQW5zd2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbc2hvd0ZlZWRiYWNrLCBzZXRTaG93RmVlZGJhY2tdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdGV4dEV4cGFuZGVkLCBzZXRUZXh0RXhwYW5kZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFthdHRlbXB0cywgc2V0QXR0ZW1wdHNdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtjb21wbGV0ZWRRdWVzdGlvbnMsIHNldENvbXBsZXRlZFF1ZXN0aW9uc10gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtsb2FkZWQsIHNldExvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93RGV0YWlsZWRQcm9ncmVzcywgc2V0U2hvd0RldGFpbGVkUHJvZ3Jlc3NdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNDb3JyZWN0LCBzZXRJc0NvcnJlY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gUkVGUyAmIEFOSU1BVElPTlMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBzY3JvbGxWaWV3UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCB0ZXh0c1Njcm9sbFZpZXdSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGZhZGVBbmltID0gdXNlUmVmKG5ldyBBbmltYXRlZC5WYWx1ZSgxKSkuY3VycmVudDtcbiAgY29uc3Qgc2xpZGVBbmltID0gdXNlUmVmKG5ldyBBbmltYXRlZC5WYWx1ZSgwKSkuY3VycmVudDtcbiAgY29uc3QgaXNJbml0aWFsaXplZCA9IHVzZVJlZihmYWxzZSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBDT01QVVRFRCBWQUxVRVMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBjdXJyZW50RXhlcmNpc2UgPSBleGVyY2lzZXNbc2VsZWN0ZWRFeGVyY2lzZUluZGV4XSB8fCB7IHRpdGxlOiBcIlwiLCB0ZXh0OiBcIlwiLCBxdWVzdGlvbnM6IFtdIH07XG4gIGNvbnN0IGN1cnJlbnRRdWVzdGlvbiA9IGN1cnJlbnRFeGVyY2lzZS5xdWVzdGlvbnM/LltjdXJyZW50UXVlc3Rpb25JbmRleF0gfHwgbnVsbDtcbiAgY29uc3QgdG90YWxFeGVyY2lzZXMgPSBleGVyY2lzZXMubGVuZ3RoO1xuICBjb25zdCB0b3RhbFF1ZXN0aW9ucyA9IGN1cnJlbnRFeGVyY2lzZS5xdWVzdGlvbnM/Lmxlbmd0aCB8fCAwO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gQVNZTkMgU1RPUkFHRSA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IFNUT1JBR0VfS0VZID0gYHJlYWRpbmdfcHJvZ3Jlc3NfJHtsZXZlbH1gO1xuXG4gIGNvbnN0IGxvYWRQcm9ncmVzcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RvcmVkUHJvZ3Jlc3MgPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoc3RvcmVkUHJvZ3Jlc3MpIHtcbiAgICAgICAgc2V0Q29tcGxldGVkUXVlc3Rpb25zKEpTT04ucGFyc2Uoc3RvcmVkUHJvZ3Jlc3MpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZHUgY2hhcmdlbWVudCBkZSBsYSBwcm9ncmVzc2lvbiBkZSBsZWN0dXJlOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGVkKHRydWUpO1xuICAgIH1cbiAgfSwgW1NUT1JBR0VfS0VZXSk7XG5cbiAgY29uc3Qgc2F2ZVByb2dyZXNzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBBc3luY1N0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkoY29tcGxldGVkUXVlc3Rpb25zKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHNhdXZlZ2FyZGUgZGUgbGEgcHJvZ3Jlc3Npb24gZGUgbGVjdHVyZTonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbY29tcGxldGVkUXVlc3Rpb25zLCBTVE9SQUdFX0tFWV0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gRUZGRUNUUyA9PT09PT09PT09PT09PT09PT09XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9hZFByb2dyZXNzKCk7XG4gIH0sIFtsb2FkUHJvZ3Jlc3NdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChsb2FkZWQpIHtcbiAgICAgIHNhdmVQcm9ncmVzcygpO1xuICAgIH1cbiAgfSwgW2NvbXBsZXRlZFF1ZXN0aW9ucywgbG9hZGVkLCBzYXZlUHJvZ3Jlc3NdKTtcblxuICAvLyBSw6lpbml0aWFsaXNlciBsZSBmZWVkYmFjayBldCBsYSByw6lwb25zZSBzw6lsZWN0aW9ubsOpZSBxdWFuZCBsJ2V4ZXJjaWNlIG91IGxhIHF1ZXN0aW9uIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFNob3dGZWVkYmFjayhmYWxzZSk7XG4gICAgc2V0U2VsZWN0ZWRBbnN3ZXIobnVsbCk7XG4gICAgc2V0QXR0ZW1wdHMoMCk7IC8vIFLDqWluaXRpYWxpc2VyIGxlcyB0ZW50YXRpdmVzIHBvdXIgbGEgbm91dmVsbGUgcXVlc3Rpb25cbiAgICBzZXRUZXh0RXhwYW5kZWQodHJ1ZSk7IC8vIFRvdWpvdXJzIGTDqW1hcnJlciBhdmVjIGxlIHRleHRlIGTDqXZlbG9wcMOpIHBvdXIgdW5lIG5vdXZlbGxlIHF1ZXN0aW9uXG5cbiAgICBpZiAoY3VycmVudFF1ZXN0aW9uSW5kZXggPT09IDAgJiYgc2VsZWN0ZWRFeGVyY2lzZUluZGV4ID09PSAwICYmICFpc0luaXRpYWxpemVkLmN1cnJlbnQpIHtcbiAgICAgIC8vIE5lIHBhcyBzY3JvbGxlciBhdSBwcmVtaWVyIGNoYXJnZW1lbnQgaW5pdGlhbFxuICAgICAgaXNJbml0aWFsaXplZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2Nyb2xsZXIgdmVycyBsZSBoYXV0IHNpIG9uIG4nZXN0IHBhcyBhdSBjaGFyZ2VtZW50IGluaXRpYWxcbiAgICAgIHNjcm9sbFZpZXdSZWYuY3VycmVudD8uc2Nyb2xsVG8oeyB5OiAwLCBhbmltYXRlZDogdHJ1ZSB9KTtcbiAgICAgIHRleHRzU2Nyb2xsVmlld1JlZi5jdXJyZW50Py5zY3JvbGxUbyh7IHk6IDAsIGFuaW1hdGVkOiB0cnVlIH0pO1xuICAgIH1cbiAgfSwgW2N1cnJlbnRRdWVzdGlvbkluZGV4LCBzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdKTtcblxuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gQUNUSU9OUyA9PT09PT09PT09PT09PT09PT09XG5cbiAgY29uc3QgY2hhbmdlRXhlcmNpc2UgPSB1c2VDYWxsYmFjaygoaW5kZXgpID0+IHtcbiAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRvdGFsRXhlcmNpc2VzKSB7XG4gICAgICBzZXRTZWxlY3RlZEV4ZXJjaXNlSW5kZXgoaW5kZXgpO1xuICAgICAgc2V0Q3VycmVudFF1ZXN0aW9uSW5kZXgoMCk7IC8vIFRvdWpvdXJzIHJldmVuaXIgw6AgbGEgcHJlbWnDqHJlIHF1ZXN0aW9uXG4gICAgfVxuICB9LCBbdG90YWxFeGVyY2lzZXNdKTtcblxuICBjb25zdCBjaGFuZ2VRdWVzdGlvbiA9IHVzZUNhbGxiYWNrKChpbmRleCkgPT4ge1xuICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdG90YWxRdWVzdGlvbnMpIHtcbiAgICAgIHNldEN1cnJlbnRRdWVzdGlvbkluZGV4KGluZGV4KTtcbiAgICB9XG4gIH0sIFt0b3RhbFF1ZXN0aW9uc10pO1xuXG4gIGNvbnN0IHNlbGVjdEFuc3dlciA9IHVzZUNhbGxiYWNrKChhbnN3ZXIpID0+IHtcbiAgICBpZiAoIXNob3dGZWVkYmFjaykge1xuICAgICAgc2V0U2VsZWN0ZWRBbnN3ZXIoYW5zd2VyKTtcbiAgICB9XG4gIH0sIFtzaG93RmVlZGJhY2tdKTtcblxuICBjb25zdCBzdWJtaXRBbnN3ZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFjdXJyZW50UXVlc3Rpb24gfHwgc2VsZWN0ZWRBbnN3ZXIgPT09IG51bGwpIHtcbiAgICAgIEFsZXJ0LmFsZXJ0KFwiU8OpbGVjdGlvbiByZXF1aXNlXCIsIFwiVmV1aWxsZXogc8OpbGVjdGlvbm5lciB1bmUgcsOpcG9uc2UuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlzQ3VycmVudEFuc3dlckNvcnJlY3QgPSBzZWxlY3RlZEFuc3dlciA9PT0gY3VycmVudFF1ZXN0aW9uLmNvcnJlY3RBbnN3ZXI7XG4gICAgc2V0SXNDb3JyZWN0KGlzQ3VycmVudEFuc3dlckNvcnJlY3QpO1xuICAgIHNldFNob3dGZWVkYmFjayh0cnVlKTtcbiAgICBzZXRBdHRlbXB0cyhwcmV2ID0+IHByZXYgKyAxKTtcblxuICAgIGlmIChpc0N1cnJlbnRBbnN3ZXJDb3JyZWN0KSB7XG4gICAgICBzZXRDb21wbGV0ZWRRdWVzdGlvbnMocHJldiA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0NvbXBsZXRlZCA9IHsgLi4ucHJldiB9O1xuICAgICAgICBpZiAoIW5ld0NvbXBsZXRlZFtzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdKSB7XG4gICAgICAgICAgbmV3Q29tcGxldGVkW3NlbGVjdGVkRXhlcmNpc2VJbmRleF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5ld0NvbXBsZXRlZFtzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdLmluY2x1ZGVzKGN1cnJlbnRRdWVzdGlvbkluZGV4KSkge1xuICAgICAgICAgIG5ld0NvbXBsZXRlZFtzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdLnB1c2goY3VycmVudFF1ZXN0aW9uSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdDb21wbGV0ZWQ7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3B0aW9ubmVsOiBSw6lpbml0aWFsaXNlciBzZWxlY3RlZEFuc3dlciBzaSBpbmNvcnJlY3QgcG91ciBwZXJtZXR0cmUgdW5lIG5vdXZlbGxlIHRlbnRhdGl2ZVxuICAgICAgLy8gc2V0U2VsZWN0ZWRBbnN3ZXIobnVsbCk7XG4gICAgfVxuICB9LCBbY3VycmVudFF1ZXN0aW9uLCBzZWxlY3RlZEFuc3dlciwgc2VsZWN0ZWRFeGVyY2lzZUluZGV4LCBjdXJyZW50UXVlc3Rpb25JbmRleF0pO1xuXG4gIGNvbnN0IG5leHRRdWVzdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoY3VycmVudFF1ZXN0aW9uSW5kZXggPCB0b3RhbFF1ZXN0aW9ucyAtIDEpIHtcbiAgICAgIGNoYW5nZVF1ZXN0aW9uKGN1cnJlbnRRdWVzdGlvbkluZGV4ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpIGMnZXN0IGxhIGRlcm5pw6hyZSBxdWVzdGlvbiBkZSBsJ2V4ZXJjaWNlIGFjdHVlbCwgcGFzc2VyIMOgIGwnZXhlcmNpY2Ugc3VpdmFudFxuICAgICAgaWYgKHNlbGVjdGVkRXhlcmNpc2VJbmRleCA8IHRvdGFsRXhlcmNpc2VzIC0gMSkge1xuICAgICAgICBjaGFuZ2VFeGVyY2lzZShzZWxlY3RlZEV4ZXJjaXNlSW5kZXggKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE9wdGlvbm5lbDogR8OpcmVyIGxhIGZpbiBkZSB0b3VzIGxlcyBleGVyY2ljZXMgZGUgbGVjdHVyZVxuICAgICAgICBBbGVydC5hbGVydChcIkV4ZXJjaWNlIHRlcm1pbsOpXCIsIFwiVm91cyBhdmV6IHRlcm1pbsOpIHRvdXMgbGVzIGV4ZXJjaWNlcyBkZSBsZWN0dXJlIHBvdXIgY2Ugbml2ZWF1ICFcIik7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY3VycmVudFF1ZXN0aW9uSW5kZXgsIHRvdGFsUXVlc3Rpb25zLCBjaGFuZ2VRdWVzdGlvbiwgc2VsZWN0ZWRFeGVyY2lzZUluZGV4LCB0b3RhbEV4ZXJjaXNlcywgY2hhbmdlRXhlcmNpc2VdKTtcblxuICBjb25zdCBwcmV2aW91c1F1ZXN0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChjdXJyZW50UXVlc3Rpb25JbmRleCA+IDApIHtcbiAgICAgIGNoYW5nZVF1ZXN0aW9uKGN1cnJlbnRRdWVzdGlvbkluZGV4IC0gMSk7XG4gICAgfSBlbHNlIGlmIChzZWxlY3RlZEV4ZXJjaXNlSW5kZXggPiAwKSB7XG4gICAgICAvLyBTaSBjJ2VzdCBsYSBwcmVtacOocmUgcXVlc3Rpb24gZGUgbCdleGVyY2ljZSBhY3R1ZWwsIHBhc3NlciDDoCBsYSBkZXJuacOocmUgcXVlc3Rpb24gZGUgbCdleGVyY2ljZSBwcsOpY8OpZGVudFxuICAgICAgY29uc3QgcHJldkV4ZXJjaXNlID0gZXhlcmNpc2VzW3NlbGVjdGVkRXhlcmNpc2VJbmRleCAtIDFdO1xuICAgICAgaWYgKHByZXZFeGVyY2lzZSkge1xuICAgICAgICBzZXRTZWxlY3RlZEV4ZXJjaXNlSW5kZXgoc2VsZWN0ZWRFeGVyY2lzZUluZGV4IC0gMSk7XG4gICAgICAgIHNldEN1cnJlbnRRdWVzdGlvbkluZGV4KHByZXZFeGVyY2lzZS5xdWVzdGlvbnMubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY3VycmVudFF1ZXN0aW9uSW5kZXgsIGNoYW5nZVF1ZXN0aW9uLCBzZWxlY3RlZEV4ZXJjaXNlSW5kZXgsIGV4ZXJjaXNlc10pO1xuXG5cbiAgY29uc3QgcmV0cnlRdWVzdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93RmVlZGJhY2soZmFsc2UpO1xuICAgIHNldFNlbGVjdGVkQW5zd2VyKG51bGwpO1xuICAgIHNldEF0dGVtcHRzKDApO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdG9nZ2xlVGV4dEV4cGFuc2lvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRUZXh0RXhwYW5kZWQocHJldiA9PiAhcHJldik7XG4gIH0sIFtdKTtcblxuICBjb25zdCB0b2dnbGVEZXRhaWxlZFByb2dyZXNzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dEZXRhaWxlZFByb2dyZXNzKHByZXYgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBQUk9HUkVTU0lPTiA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGdldFByb2dyZXNzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHRvdGFsQ29tcGxldGVkUXVlc3Rpb25zID0gT2JqZWN0LnZhbHVlcyhjb21wbGV0ZWRRdWVzdGlvbnMpLnJlZHVjZSgoc3VtLCBjb21wbGV0ZWQpID0+IHN1bSArIChjb21wbGV0ZWQ/Lmxlbmd0aCB8fCAwKSwgMCk7XG4gICAgY29uc3QgdG90YWxRdWVzdGlvbnNBbGxFeGVyY2lzZXMgPSBleGVyY2lzZXMucmVkdWNlKChzdW0sIGV4KSA9PiBzdW0gKyAoZXgucXVlc3Rpb25zPy5sZW5ndGggfHwgMCksIDApO1xuXG4gICAgY29uc3QgY29tcGxldGVkSW5DdXJyZW50RXhlcmNpc2UgPSBjb21wbGV0ZWRRdWVzdGlvbnNbc2VsZWN0ZWRFeGVyY2lzZUluZGV4XT8ubGVuZ3RoIHx8IDA7XG4gICAgY29uc3QgcHJvZ3Jlc3NQZXJjZW50ID0gdG90YWxRdWVzdGlvbnMgPiAwID8gKGNvbXBsZXRlZEluQ3VycmVudEV4ZXJjaXNlIC8gdG90YWxRdWVzdGlvbnMpICogMTAwIDogMDtcblxuICAgIGNvbnN0IG92ZXJhbGxQcm9ncmVzcyA9IHRvdGFsUXVlc3Rpb25zQWxsRXhlcmNpc2VzID4gMCA/ICh0b3RhbENvbXBsZXRlZFF1ZXN0aW9ucyAvIHRvdGFsUXVlc3Rpb25zQWxsRXhlcmNpc2VzKSAqIDEwMCA6IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudEV4ZXJjaXNlOiBwcm9ncmVzc1BlcmNlbnQsXG4gICAgICBvdmVyYWxsOiBvdmVyYWxsUHJvZ3Jlc3MsXG4gICAgICBjb21wbGV0ZWRJbkN1cnJlbnQ6IGNvbXBsZXRlZEluQ3VycmVudEV4ZXJjaXNlLFxuICAgICAgdG90YWxJbkN1cnJlbnQ6IHRvdGFsUXVlc3Rpb25zLFxuICAgICAgY29tcGxldGVkT3ZlcmFsbDogdG90YWxDb21wbGV0ZWRRdWVzdGlvbnMsXG4gICAgICB0b3RhbE92ZXJhbGw6IHRvdGFsUXVlc3Rpb25zQWxsRXhlcmNpc2VzXG4gICAgfTtcbiAgfSwgW2NvbXBsZXRlZFF1ZXN0aW9ucywgc2VsZWN0ZWRFeGVyY2lzZUluZGV4LCB0b3RhbFF1ZXN0aW9ucywgZXhlcmNpc2VzXSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBWQUxJREFUSU9OID09PT09PT09PT09PT09PT09PT1cbiAgLy8g4pyFIENPUlJFQ1RJT046IFN1cHByZXNzaW9uIGRlIGxhIHZhcmlhYmxlIGlzQW5zd2VyQ29ycmVjdENvbXB1dGVkIGNhciBlbGxlIG4nw6l0YWl0IHBhcyB1dGlsaXPDqWUuXG5cbiAgY29uc3QgaXNRdWVzdGlvbkNvbXBsZXRlZCA9IGNvbXBsZXRlZFF1ZXN0aW9uc1tzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdPy5pbmNsdWRlcyhjdXJyZW50UXVlc3Rpb25JbmRleCkgfHwgZmFsc2U7XG5cbiAgcmV0dXJuIHtcbiAgICBzZWxlY3RlZEV4ZXJjaXNlSW5kZXgsXG4gICAgY3VycmVudFF1ZXN0aW9uSW5kZXgsXG4gICAgc2VsZWN0ZWRBbnN3ZXIsXG4gICAgc2hvd0ZlZWRiYWNrLFxuICAgIHRleHRFeHBhbmRlZCxcbiAgICBhdHRlbXB0cyxcbiAgICBjb21wbGV0ZWRRdWVzdGlvbnMsXG4gICAgbG9hZGVkLFxuICAgIHNob3dEZXRhaWxlZFByb2dyZXNzLFxuICAgIGN1cnJlbnRFeGVyY2lzZSxcbiAgICBjdXJyZW50UXVlc3Rpb24sXG4gICAgdG90YWxFeGVyY2lzZXMsXG4gICAgdG90YWxRdWVzdGlvbnMsXG4gICAgY2hhbmdlRXhlcmNpc2UsXG4gICAgY2hhbmdlUXVlc3Rpb24sXG4gICAgc2VsZWN0QW5zd2VyLFxuICAgIHN1Ym1pdEFuc3dlcixcbiAgICBuZXh0UXVlc3Rpb24sXG4gICAgcHJldmlvdXNRdWVzdGlvbixcbiAgICByZXRyeVF1ZXN0aW9uLFxuICAgIHRvZ2dsZVRleHRFeHBhbnNpb24sXG4gICAgdG9nZ2xlRGV0YWlsZWRQcm9ncmVzcyxcbiAgICBpc0NvcnJlY3QsXG4gICAgaXNRdWVzdGlvbkNvbXBsZXRlZCxcbiAgICBwcm9ncmVzczogZ2V0UHJvZ3Jlc3MoKSxcbiAgICBzY3JvbGxWaWV3UmVmLFxuICAgIHRleHRzU2Nyb2xsVmlld1JlZixcbiAgICBmYWRlQW5pbSxcbiAgICBzbGlkZUFuaW0sXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VSZWFkaW5nOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFlBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUVBLElBQU1JLFVBQVUsR0FBRyxTQUFiQSxVQUFVQSxDQUFBLEVBQXFDO0VBQUEsSUFBQUMscUJBQUEsRUFBQUMsc0JBQUEsRUFBQUMsc0JBQUE7RUFBQSxJQUFqQ0MsU0FBUyxHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxFQUFFO0VBQUEsSUFBRUcsS0FBSyxHQUFBSCxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxJQUFJO0VBRTlDLElBQUFJLFNBQUEsR0FBMEQsSUFBQUMsZUFBUSxFQUFDLENBQUMsQ0FBQztJQUFBQyxVQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBSixTQUFBO0lBQTlESyxxQkFBcUIsR0FBQUgsVUFBQTtJQUFFSSx3QkFBd0IsR0FBQUosVUFBQTtFQUN0RCxJQUFBSyxVQUFBLEdBQXdELElBQUFOLGVBQVEsRUFBQyxDQUFDLENBQUM7SUFBQU8sVUFBQSxPQUFBTCxlQUFBLENBQUFDLE9BQUEsRUFBQUcsVUFBQTtJQUE1REUsb0JBQW9CLEdBQUFELFVBQUE7SUFBRUUsdUJBQXVCLEdBQUFGLFVBQUE7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