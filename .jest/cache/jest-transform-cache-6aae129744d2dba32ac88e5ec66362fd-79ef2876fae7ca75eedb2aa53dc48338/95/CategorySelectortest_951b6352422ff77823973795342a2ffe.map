{"version":3,"names":["_getJestObj","mock","RN","jest","requireActual","Object","assign","Animated","Value","fn","interpolate","timing","mockTiming","parallel","mockParallel","multiply","a","b","_interopRequireDefault","require","_asyncToGenerator2","_react","_reactNative","_CategorySelector","_jsxRuntime","_require","start","cb","describe","categories","id","name","beforeEach","clearAllMocks","it","default","_render","render","jsx","selectedCategory","onSelectCategory","rerender","waitFor","expect","toHaveBeenCalled","act","toHaveBeenCalledTimes","_render2"],"sources":["CategorySelector.test.js"],"sourcesContent":["// __tests__/components/exercise-common/CategorySelector.test.js\nimport React from \"react\";\nimport { render, act, waitFor } from \"@testing-library/react-native\";\nimport CategorySelector from \"../../../src/components/exercise-common/CategorySelector\";\n\n// 🔧 Mock Animated API\nconst mockTiming = jest.fn(() => ({ start: jest.fn(cb => cb && cb()) }));\nconst mockParallel = jest.fn(() => ({ start: jest.fn(cb => cb && cb()) }));\n\njest.mock(\"react-native\", () => {\n  const RN = jest.requireActual(\"react-native\");\n  return {\n    ...RN,\n    Animated: {\n      ...RN.Animated,\n      Value: jest.fn(() => ({ interpolate: jest.fn() })),\n      timing: mockTiming,\n      parallel: mockParallel,\n      multiply: jest.fn((a, b) => a || b),\n    },\n  };\n});\n\ndescribe(\"CategorySelector - Animations\", () => {\n  const categories = [\n    { id: \"1\", name: \"Category 1\" },\n    { id: \"2\", name: \"Category 2\" },\n  ];\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it(\"triggers parallel animations when selectedCategory changes\", async () => {\n    const { rerender } = render(\n      <CategorySelector\n        categories={categories}\n        selectedCategory=\"1\"\n        onSelectCategory={jest.fn()}\n      />\n    );\n\n    // Wait for initial render to complete and Animated.Value to be initialized\n    await waitFor(() => {\n      expect(require(\"react-native\").Animated.Value).toHaveBeenCalled();\n    });\n\n    // ➡️ Wrap the state-changing rerender in act\n    await act(async () => {\n      rerender(\n        <CategorySelector\n          categories={categories}\n          selectedCategory=\"2\"\n          onSelectCategory={jest.fn()}\n        />\n      );\n    });\n\n    // Now, assert that the animations have been called\n    await waitFor(() => {\n      expect(mockParallel).toHaveBeenCalledTimes(1);\n      expect(mockTiming).toHaveBeenCalledTimes(2);\n    });\n  });\n\n  it(\"prevents animation conflicts with isAnimatingRef\", async () => {\n    const { rerender } = render(\n      <CategorySelector\n        categories={categories}\n        selectedCategory=\"1\"\n        onSelectCategory={jest.fn()}\n      />\n    );\n\n    await waitFor(() => {\n      expect(require(\"react-native\").Animated.Value).toHaveBeenCalled();\n    });\n\n    // ➡️ Wrap the first rerender in act\n    await act(async () => {\n      rerender(\n        <CategorySelector\n          categories={categories}\n          selectedCategory=\"2\"\n          onSelectCategory={jest.fn()}\n        />\n      );\n    });\n\n    await waitFor(() => {\n      expect(mockParallel).toHaveBeenCalledTimes(1);\n    });\n    \n    // ➡️ Wrap the second rerender in act\n    await act(async () => {\n      rerender(\n        <CategorySelector\n          categories={categories}\n          selectedCategory=\"1\"\n          onSelectCategory={jest.fn()}\n        />\n      );\n    });\n\n    // mockParallel should not have increased\n    await waitFor(() => {\n      expect(mockParallel).toHaveBeenCalledTimes(1);\n    });\n  });\n});"],"mappings":"AASAA,WAAA,GAAKC,IAAI,CAAC,cAAc,EAAE,YAAM;EAC9B,IAAMC,EAAE,GAAGC,IAAI,CAACC,aAAa,CAAC,cAAc,CAAC;EAC7C,OAAAC,MAAA,CAAAC,MAAA,KACKJ,EAAE;IACLK,QAAQ,EAAAF,MAAA,CAAAC,MAAA,KACHJ,EAAE,CAACK,QAAQ;MACdC,KAAK,EAAEL,IAAI,CAACM,EAAE,CAAC;QAAA,OAAO;UAAEC,WAAW,EAAEP,IAAI,CAACM,EAAE,CAAC;QAAE,CAAC;MAAA,CAAC,CAAC;MAClDE,MAAM,EAAEC,UAAU;MAClBC,QAAQ,EAAEC,YAAY;MACtBC,QAAQ,EAAEZ,IAAI,CAACM,EAAE,CAAC,UAACO,CAAC,EAAEC,CAAC;QAAA,OAAKD,CAAC,IAAIC,CAAC;MAAA;IAAC;EACpC;AAEL,CAAC,CAAC;AAAC,IAAAC,sBAAA,GAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AApBH,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AACA,IAAAI,iBAAA,GAAAL,sBAAA,CAAAC,OAAA;AAAwF,IAAAK,WAAA,GAAAL,OAAA;AAAA,SAAAnB,YAAA;EAAA,IAAAyB,QAAA,GAAAN,OAAA;IAAAhB,IAAA,GAAAsB,QAAA,CAAAtB,IAAA;EAAAH,WAAA,YAAAA,YAAA;IAAA,OAAAG,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAGxF,IAAMS,UAAU,GAAGT,IAAI,CAACM,EAAE,CAAC;EAAA,OAAO;IAAEiB,KAAK,EAAEvB,IAAI,CAACM,EAAE,CAAC,UAAAkB,EAAE;MAAA,OAAIA,EAAE,IAAIA,EAAE,CAAC,CAAC;IAAA;EAAE,CAAC;AAAA,CAAC,CAAC;AACxE,IAAMb,YAAY,GAAGX,IAAI,CAACM,EAAE,CAAC;EAAA,OAAO;IAAEiB,KAAK,EAAEvB,IAAI,CAACM,EAAE,CAAC,UAAAkB,EAAE;MAAA,OAAIA,EAAE,IAAIA,EAAE,CAAC,CAAC;IAAA;EAAE,CAAC;AAAA,CAAC,CAAC;AAgB1EC,QAAQ,CAAC,+BAA+B,EAAE,YAAM;EAC9C,IAAMC,UAAU,GAAG,CACjB;IAAEC,EAAE,EAAE,GAAG;IAAEC,IAAI,EAAE;EAAa,CAAC,EAC/B;IAAED,EAAE,EAAE,GAAG;IAAEC,IAAI,EAAE;EAAa,CAAC,CAChC;EAEDC,UAAU,CAAC,YAAM;IACf7B,IAAI,CAAC8B,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFC,EAAE,CAAC,4DAA4D,MAAAd,kBAAA,CAAAe,OAAA,EAAE,aAAY;IAC3E,IAAAC,OAAA,GAAqB,IAAAC,mBAAM,EACzB,IAAAb,WAAA,CAAAc,GAAA,EAACf,iBAAA,CAAAY,OAAgB;QACfN,UAAU,EAAEA,UAAW;QACvBU,gBAAgB,EAAC,GAAG;QACpBC,gBAAgB,EAAErC,IAAI,CAACM,EAAE,CAAC;MAAE,CAC7B,CACH,CAAC;MANOgC,QAAQ,GAAAL,OAAA,CAARK,QAAQ;IAShB,MAAM,IAAAC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAACxB,OAAO,CAAC,cAAc,CAAC,CAACZ,QAAQ,CAACC,KAAK,CAAC,CAACoC,gBAAgB,CAAC,CAAC;IACnE,CAAC,CAAC;IAGF,MAAM,IAAAC,gBAAG,MAAAzB,kBAAA,CAAAe,OAAA,EAAC,aAAY;MACpBM,QAAQ,CACN,IAAAjB,WAAA,CAAAc,GAAA,EAACf,iBAAA,CAAAY,OAAgB;QACfN,UAAU,EAAEA,UAAW;QACvBU,gBAAgB,EAAC,GAAG;QACpBC,gBAAgB,EAAErC,IAAI,CAACM,EAAE,CAAC;MAAE,CAC7B,CACH,CAAC;IACH,CAAC,EAAC;IAGF,MAAM,IAAAiC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAAC7B,YAAY,CAAC,CAACgC,qBAAqB,CAAC,CAAC,CAAC;MAC7CH,MAAM,CAAC/B,UAAU,CAAC,CAACkC,qBAAqB,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC;EACJ,CAAC,EAAC;EAEFZ,EAAE,CAAC,kDAAkD,MAAAd,kBAAA,CAAAe,OAAA,EAAE,aAAY;IACjE,IAAAY,QAAA,GAAqB,IAAAV,mBAAM,EACzB,IAAAb,WAAA,CAAAc,GAAA,EAACf,iBAAA,CAAAY,OAAgB;QACfN,UAAU,EAAEA,UAAW;QACvBU,gBAAgB,EAAC,GAAG;QACpBC,gBAAgB,EAAErC,IAAI,CAACM,EAAE,CAAC;MAAE,CAC7B,CACH,CAAC;MANOgC,QAAQ,GAAAM,QAAA,CAARN,QAAQ;IAQhB,MAAM,IAAAC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAACxB,OAAO,CAAC,cAAc,CAAC,CAACZ,QAAQ,CAACC,KAAK,CAAC,CAACoC,gBAAgB,CAAC,CAAC;IACnE,CAAC,CAAC;IAGF,MAAM,IAAAC,gBAAG,MAAAzB,kBAAA,CAAAe,OAAA,EAAC,aAAY;MACpBM,QAAQ,CACN,IAAAjB,WAAA,CAAAc,GAAA,EAACf,iBAAA,CAAAY,OAAgB;QACfN,UAAU,EAAEA,UAAW;QACvBU,gBAAgB,EAAC,GAAG;QACpBC,gBAAgB,EAAErC,IAAI,CAACM,EAAE,CAAC;MAAE,CAC7B,CACH,CAAC;IACH,CAAC,EAAC;IAEF,MAAM,IAAAiC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAAC7B,YAAY,CAAC,CAACgC,qBAAqB,CAAC,CAAC,CAAC;IAC/C,CAAC,CAAC;IAGF,MAAM,IAAAD,gBAAG,MAAAzB,kBAAA,CAAAe,OAAA,EAAC,aAAY;MACpBM,QAAQ,CACN,IAAAjB,WAAA,CAAAc,GAAA,EAACf,iBAAA,CAAAY,OAAgB;QACfN,UAAU,EAAEA,UAAW;QACvBU,gBAAgB,EAAC,GAAG;QACpBC,gBAAgB,EAAErC,IAAI,CAACM,EAAE,CAAC;MAAE,CAC7B,CACH,CAAC;IACH,CAAC,EAAC;IAGF,MAAM,IAAAiC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAAC7B,YAAY,CAAC,CAACgC,qBAAqB,CAAC,CAAC,CAAC;IAC/C,CAAC,CAAC;EACJ,CAAC,EAAC;AACJ,CAAC,CAAC","ignoreList":[]}