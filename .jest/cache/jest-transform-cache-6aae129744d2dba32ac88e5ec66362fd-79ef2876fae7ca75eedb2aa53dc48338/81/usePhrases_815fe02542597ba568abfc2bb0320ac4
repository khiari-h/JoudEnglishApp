cc12dff8bf6e9ac3d8710ab1734e65aa
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _reactNative = require("react-native");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var usePhrases = function usePhrases(phrasesData, level) {
  var handleStorageError = function handleStorageError(error, operation) {
    var fallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    console.warn(`Phrases storage error in ${operation}:`, error);
    return fallback;
  };
  var STORAGE_KEY = `phrases_${level}`;
  var _useState = (0, _react.useState)(0),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    categoryIndex = _useState2[0],
    setCategoryIndex = _useState2[1];
  var _useState3 = (0, _react.useState)(0),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    phraseIndex = _useState4[0],
    setPhraseIndex = _useState4[1];
  var _useState5 = (0, _react.useState)(false),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    showTranslation = _useState6[0],
    setShowTranslation = _useState6[1];
  var _useState7 = (0, _react.useState)({}),
    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),
    completedPhrases = _useState8[0],
    setCompletedPhrases = _useState8[1];
  var _useState9 = (0, _react.useState)(false),
    _useState0 = (0, _slicedToArray2.default)(_useState9, 2),
    loaded = _useState0[0],
    setLoaded = _useState0[1];
  var _useState1 = (0, _react.useState)(false),
    _useState10 = (0, _slicedToArray2.default)(_useState1, 2),
    showDetailedProgress = _useState10[0],
    setShowDetailedProgress = _useState10[1];
  var isInitialized = (0, _react.useRef)(false);
  var categories = (phrasesData == null ? void 0 : phrasesData.categories) || [];
  var allPhrases = (phrasesData == null ? void 0 : phrasesData.phrases) || [];
  var currentCategory = categories[categoryIndex];
  var currentPhrases = allPhrases.filter(function (phrase) {
    return phrase.categoryId === (currentCategory == null ? void 0 : currentCategory.id);
  }) || [];
  var currentPhrase = currentPhrases[phraseIndex];
  var totalPhrasesInCategory = currentPhrases.length;
  var hasValidData = phrasesData && categories.length > 0 && allPhrases.length > 0;
  console.log('🔍 DEBUG usePhrases:', {
    categoryIndex: categoryIndex,
    phraseIndex: phraseIndex,
    categoriesLength: categories.length,
    currentCategory: !!currentCategory,
    currentCategoryName: currentCategory == null ? void 0 : currentCategory.name,
    currentPhrasesLength: currentPhrases.length,
    allPhrasesLength: allPhrases.length,
    hasValidData: hasValidData,
    phrasesData: !!phrasesData,
    categoriesWithPhrases: categories.filter(function (cat) {
      return allPhrases.some(function (phrase) {
        return phrase.categoryId === cat.id;
      });
    }).length
  });
  (0, _react.useEffect)(function () {
    var loadData = function () {
      var _ref = (0, _asyncToGenerator2.default)(function* () {
        try {
          var savedData = yield _asyncStorage.default.getItem(STORAGE_KEY);
          if (savedData) {
            var _JSON$parse = JSON.parse(savedData),
              savedCompleted = _JSON$parse.completedPhrases;
            setCompletedPhrases(savedCompleted || {});
          }
        } catch (error) {
          handleStorageError(error, 'loadData');
        } finally {
          setLoaded(true);
        }
      });
      return function loadData() {
        return _ref.apply(this, arguments);
      };
    }();
    loadData();
  }, [level]);
  (0, _react.useEffect)(function () {
    if (loaded && phrasesData && categories.length > 0 && !isInitialized.current) {
      var validCategoryIndex = 0;
      var validPhraseIndex = 0;
      setCategoryIndex(validCategoryIndex);
      setPhraseIndex(validPhraseIndex);
      var newCompletedPhrases = {};
      categories.forEach(function (_, index) {
        newCompletedPhrases[index] = [];
      });
      setCompletedPhrases(newCompletedPhrases);
      isInitialized.current = true;
    }
  }, [loaded, phrasesData, categories.length]);
  var saveData = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      var dataToSave = {
        completedPhrases: completedPhrases,
        lastPosition: {
          categoryIndex: categoryIndex,
          phraseIndex: phraseIndex
        }
      };
      yield _asyncStorage.default.setItem(STORAGE_KEY, JSON.stringify(dataToSave));
    } catch (error) {
      handleStorageError(error, 'saveData');
    }
  }), [completedPhrases, categoryIndex, phraseIndex, STORAGE_KEY]);
  (0, _react.useEffect)(function () {
    if (loaded && isInitialized.current) saveData();
  }, [loaded, isInitialized.current]);
  var changeCategory = (0, _react.useCallback)(function (newCategoryIndex) {
    if (newCategoryIndex !== categoryIndex && newCategoryIndex >= 0 && newCategoryIndex < categories.length && isInitialized.current) {
      setCategoryIndex(newCategoryIndex);
      setPhraseIndex(0);
      setShowTranslation(false);
    }
  }, [categoryIndex, categories.length, isInitialized.current]);
  var goToNextPhrase = (0, _react.useCallback)(function () {
    if (phraseIndex < totalPhrasesInCategory - 1 && isInitialized.current) {
      setPhraseIndex(function (prev) {
        return prev + 1;
      });
      setShowTranslation(false);
    }
  }, [phraseIndex, totalPhrasesInCategory, isInitialized.current]);
  var goToPreviousPhrase = (0, _react.useCallback)(function () {
    if (phraseIndex > 0 && isInitialized.current) {
      setPhraseIndex(function (prev) {
        return prev - 1;
      });
      setShowTranslation(false);
      return true;
    }
    return false;
  }, [phraseIndex, isInitialized.current]);
  var toggleTranslation = (0, _react.useCallback)(function () {
    setShowTranslation(function (prev) {
      return !prev;
    });
  }, []);
  var toggleDetailedProgress = (0, _react.useCallback)(function () {
    setShowDetailedProgress(function (prev) {
      return !prev;
    });
  }, []);
  var markPhraseAsCompleted = (0, _react.useCallback)(function (catIndex, pIndex) {
    if (!isInitialized.current) return;
    setCompletedPhrases(function (prev) {
      var categoryCompleted = prev[catIndex] || [];
      if (!categoryCompleted.includes(pIndex)) {
        return Object.assign({}, prev, (0, _defineProperty2.default)({}, catIndex, [].concat((0, _toConsumableArray2.default)(categoryCompleted), [pIndex])));
      }
      return prev;
    });
  }, [isInitialized.current]);
  var findNextUncompletedCategory = (0, _react.useCallback)(function () {
    var numCategories = categories.length;
    var _loop = function _loop() {
        var _completedPhrases$nex;
        var nextIndex = (categoryIndex + i) % numCategories;
        var category = categories[nextIndex];
        var categoryPhrases = allPhrases.filter(function (p) {
          return p.categoryId === category.id;
        });
        var completedInCategory = ((_completedPhrases$nex = completedPhrases[nextIndex]) == null ? void 0 : _completedPhrases$nex.length) || 0;
        if (completedInCategory < categoryPhrases.length) {
          return {
            v: nextIndex
          };
        }
      },
      _ret;
    for (var i = 1; i <= numCategories; i++) {
      _ret = _loop();
      if (_ret) return _ret.v;
    }
    return -1;
  }, [categories, categoryIndex, allPhrases, completedPhrases]);
  var handleNext = (0, _react.useCallback)(function () {
    if (!isInitialized.current) return {
      completed: false
    };
    markPhraseAsCompleted(categoryIndex, phraseIndex);
    if (phraseIndex < totalPhrasesInCategory - 1) {
      goToNextPhrase();
    } else {
      var nextCategoryIndex = findNextUncompletedCategory();
      if (nextCategoryIndex === -1) {
        _reactNative.Alert.alert("Félicitations", "Vous avez terminé tous les exercices de phrases !");
        return {
          completed: true
        };
      } else {
        changeCategory(nextCategoryIndex);
      }
    }
    return {
      completed: false
    };
  }, [categoryIndex, phraseIndex, totalPhrasesInCategory, markPhraseAsCompleted, goToNextPhrase, findNextUncompletedCategory, changeCategory, isInitialized.current]);
  var handlePrevious = (0, _react.useCallback)(function () {
    if (!isInitialized.current) return;
    goToPreviousPhrase();
  }, [goToPreviousPhrase, isInitialized.current]);
  var stats = (0, _react.useMemo)(function () {
    var _completedPhrases$cat;
    if (!isInitialized.current) {
      return {
        totalPhrases: 0,
        completedPhrasesCount: 0,
        totalProgress: 0,
        completionProgress: 0,
        completedInCurrentCategory: 0,
        totalInCurrentCategory: 0
      };
    }
    var totalPhrases = currentPhrases.length;
    var completedPhrasesCount = Object.values(completedPhrases).reduce(function (sum, completed) {
      return sum + ((completed == null ? void 0 : completed.length) || 0);
    }, 0);
    var totalProgress = totalPhrases > 0 ? Math.round(completedPhrasesCount / totalPhrases * 100) : 0;
    var completionProgress = totalPhrasesInCategory > 0 ? (phraseIndex + 1) / totalPhrasesInCategory * 100 : 0;
    return {
      totalPhrases: totalPhrases,
      completedPhrasesCount: completedPhrasesCount,
      totalProgress: totalProgress,
      completionProgress: completionProgress,
      completedInCurrentCategory: ((_completedPhrases$cat = completedPhrases[categoryIndex]) == null ? void 0 : _completedPhrases$cat.length) || 0,
      totalInCurrentCategory: totalPhrasesInCategory
    };
  }, [currentPhrases, completedPhrases, totalPhrasesInCategory, phraseIndex, categoryIndex, isInitialized.current]);
  var display = (0, _react.useMemo)(function () {
    if (!isInitialized.current) {
      return {
        phraseCounter: "0 / 0",
        categories: [],
        currentPhrase: null,
        currentCategory: null,
        currentPhrases: []
      };
    }
    var phraseCounter = `${phraseIndex + 1} / ${totalPhrasesInCategory || 0}`;
    var categoriesNames = categories.map(function (cat) {
      return cat.name;
    });
    return {
      phraseCounter: phraseCounter,
      categories: categoriesNames,
      currentPhrase: currentPhrase,
      currentCategory: currentCategory,
      currentPhrases: currentPhrases
    };
  }, [phraseIndex, totalPhrasesInCategory, categories, currentPhrase, currentCategory, currentPhrases, isInitialized.current]);
  var canGoToPrevious = phraseIndex > 0;
  var isLastPhraseInCategory = phraseIndex === totalPhrasesInCategory - 1;
  return {
    categoryIndex: categoryIndex,
    phraseIndex: phraseIndex,
    showTranslation: showTranslation,
    completedPhrases: completedPhrases,
    loaded: loaded,
    showDetailedProgress: showDetailedProgress,
    currentPhrase: currentPhrase,
    currentCategory: currentCategory,
    currentPhrases: currentPhrases,
    totalCategories: categories.length,
    totalPhrasesInCategory: totalPhrasesInCategory,
    hasValidData: hasValidData,
    changeCategory: changeCategory,
    toggleTranslation: toggleTranslation,
    toggleDetailedProgress: toggleDetailedProgress,
    handleNext: handleNext,
    handlePrevious: handlePrevious,
    canGoToPrevious: canGoToPrevious,
    isLastPhraseInCategory: isLastPhraseInCategory,
    stats: stats,
    display: display
  };
};
var _default = exports.default = usePhrases;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3JlYWN0TmF0aXZlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJ1c2VQaHJhc2VzIiwicGhyYXNlc0RhdGEiLCJsZXZlbCIsImhhbmRsZVN0b3JhZ2VFcnJvciIsImVycm9yIiwib3BlcmF0aW9uIiwiZmFsbGJhY2siLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwid2FybiIsIlNUT1JBR0VfS0VZIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsImNhdGVnb3J5SW5kZXgiLCJzZXRDYXRlZ29yeUluZGV4IiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJwaHJhc2VJbmRleCIsInNldFBocmFzZUluZGV4IiwiX3VzZVN0YXRlNSIsIl91c2VTdGF0ZTYiLCJzaG93VHJhbnNsYXRpb24iLCJzZXRTaG93VHJhbnNsYXRpb24iLCJfdXNlU3RhdGU3IiwiX3VzZVN0YXRlOCIsImNvbXBsZXRlZFBocmFzZXMiLCJzZXRDb21wbGV0ZWRQaHJhc2VzIiwiX3VzZVN0YXRlOSIsIl91c2VTdGF0ZTAiLCJsb2FkZWQiLCJzZXRMb2FkZWQiLCJfdXNlU3RhdGUxIiwiX3VzZVN0YXRlMTAiLCJzaG93RGV0YWlsZWRQcm9ncmVzcyIsInNldFNob3dEZXRhaWxlZFByb2dyZXNzIiwiaXNJbml0aWFsaXplZCIsInVzZVJlZiIsImNhdGVnb3JpZXMiLCJhbGxQaHJhc2VzIiwicGhyYXNlcyIsImN1cnJlbnRDYXRlZ29yeSIsImN1cnJlbnRQaHJhc2VzIiwiZmlsdGVyIiwicGhyYXNlIiwiY2F0ZWdvcnlJZCIsImlkIiwiY3VycmVudFBocmFzZSIsInRvdGFsUGhyYXNlc0luQ2F0ZWdvcnkiLCJoYXNWYWxpZERhdGEiLCJsb2ciLCJjYXRlZ29yaWVzTGVuZ3RoIiwiY3VycmVudENhdGVnb3J5TmFtZSIsIm5hbWUiLCJjdXJyZW50UGhyYXNlc0xlbmd0aCIsImFsbFBocmFzZXNMZW5ndGgiLCJjYXRlZ29yaWVzV2l0aFBocmFzZXMiLCJjYXQiLCJzb21lIiwidXNlRWZmZWN0IiwibG9hZERhdGEiLCJfcmVmIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwic2F2ZWREYXRhIiwiQXN5bmNTdG9yYWdlIiwiZ2V0SXRlbSIsIl9KU09OJHBhcnNlIiwiSlNPTiIsInBhcnNlIiwic2F2ZWRDb21wbGV0ZWQiLCJhcHBseSIsImN1cnJlbnQiLCJ2YWxpZENhdGVnb3J5SW5kZXgiLCJ2YWxpZFBocmFzZUluZGV4IiwibmV3Q29tcGxldGVkUGhyYXNlcyIsImZvckVhY2giLCJfIiwiaW5kZXgiLCJzYXZlRGF0YSIsInVzZUNhbGxiYWNrIiwiZGF0YVRvU2F2ZSIsImxhc3RQb3NpdGlvbiIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjaGFuZ2VDYXRlZ29yeSIsIm5ld0NhdGVnb3J5SW5kZXgiLCJnb1RvTmV4dFBocmFzZSIsInByZXYiLCJnb1RvUHJldmlvdXNQaHJhc2UiLCJ0b2dnbGVUcmFuc2xhdGlvbiIsInRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MiLCJtYXJrUGhyYXNlQXNDb21wbGV0ZWQiLCJjYXRJbmRleCIsInBJbmRleCIsImNhdGVnb3J5Q29tcGxldGVkIiwiaW5jbHVkZXMiLCJPYmplY3QiLCJhc3NpZ24iLCJfZGVmaW5lUHJvcGVydHkyIiwiY29uY2F0IiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsImZpbmROZXh0VW5jb21wbGV0ZWRDYXRlZ29yeSIsIm51bUNhdGVnb3JpZXMiLCJfbG9vcCIsIl9jb21wbGV0ZWRQaHJhc2VzJG5leCIsIm5leHRJbmRleCIsImkiLCJjYXRlZ29yeSIsImNhdGVnb3J5UGhyYXNlcyIsInAiLCJjb21wbGV0ZWRJbkNhdGVnb3J5IiwidiIsIl9yZXQiLCJoYW5kbGVOZXh0IiwiY29tcGxldGVkIiwibmV4dENhdGVnb3J5SW5kZXgiLCJBbGVydCIsImFsZXJ0IiwiaGFuZGxlUHJldmlvdXMiLCJzdGF0cyIsInVzZU1lbW8iLCJfY29tcGxldGVkUGhyYXNlcyRjYXQiLCJ0b3RhbFBocmFzZXMiLCJjb21wbGV0ZWRQaHJhc2VzQ291bnQiLCJ0b3RhbFByb2dyZXNzIiwiY29tcGxldGlvblByb2dyZXNzIiwiY29tcGxldGVkSW5DdXJyZW50Q2F0ZWdvcnkiLCJ0b3RhbEluQ3VycmVudENhdGVnb3J5IiwidmFsdWVzIiwicmVkdWNlIiwic3VtIiwiTWF0aCIsInJvdW5kIiwiZGlzcGxheSIsInBocmFzZUNvdW50ZXIiLCJjYXRlZ29yaWVzTmFtZXMiLCJtYXAiLCJjYW5Hb1RvUHJldmlvdXMiLCJpc0xhc3RQaHJhc2VJbkNhdGVnb3J5IiwidG90YWxDYXRlZ29yaWVzIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidXNlUGhyYXNlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2NyZWVucy9leGVyY2lzZXMvcGhyYXNlcy9ob29rcy91c2VQaHJhc2VzLmpzIC0gVkVSU0lPTiBDT1JSSUfDiUVcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEFsZXJ0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xuXG4vKipcbiAqIPCfjq8gSG9vayB1bmlmacOpIHBvdXIgUGhyYXNlcyBFeGVyY2lzZVxuICogUmVtcGxhY2UgdXNlUGhyYXNlc0V4ZXJjaXNlU3RhdGUgKyB1c2VQaHJhc2VzUHJvZ3Jlc3MgKyB1c2VQaHJhc2VzRGlzcGxheVxuICogU2ltcGxlLCBlZmZpY2FjZSwgbWFpbnRlbmFibGUgLSBwYXR0ZXJuIGlkZW50aXF1ZSDDoCB1c2VSZWFkaW5nLCB1c2VHcmFtbWFyIGV0IHVzZVZvY2FidWxhcnlcbiAqL1xuY29uc3QgdXNlUGhyYXNlcyA9IChwaHJhc2VzRGF0YSwgbGV2ZWwpID0+IHtcbiAgLy8gPT09PT09PT09PT09PT09PT09PSBFUlJPUiBIQU5ETElORyBIRUxQRVIgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBoYW5kbGVTdG9yYWdlRXJyb3IgPSAoZXJyb3IsIG9wZXJhdGlvbiwgZmFsbGJhY2sgPSBudWxsKSA9PiB7XG4gICAgY29uc29sZS53YXJuKGBQaHJhc2VzIHN0b3JhZ2UgZXJyb3IgaW4gJHtvcGVyYXRpb259OmAsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH07XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBTVE9SQUdFIEtFWSA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IFNUT1JBR0VfS0VZID0gYHBocmFzZXNfJHtsZXZlbH1gO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gU1RBVEUgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBbY2F0ZWdvcnlJbmRleCwgc2V0Q2F0ZWdvcnlJbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3BocmFzZUluZGV4LCBzZXRQaHJhc2VJbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3Nob3dUcmFuc2xhdGlvbiwgc2V0U2hvd1RyYW5zbGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbXBsZXRlZFBocmFzZXMsIHNldENvbXBsZXRlZFBocmFzZXNdID0gdXNlU3RhdGUoe30pO1xuICBjb25zdCBbbG9hZGVkLCBzZXRMb2FkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0RldGFpbGVkUHJvZ3Jlc3MsIHNldFNob3dEZXRhaWxlZFByb2dyZXNzXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBpc0luaXRpYWxpemVkID0gdXNlUmVmKGZhbHNlKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IENPTVBVVEVEIFZBTFVFUyA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGNhdGVnb3JpZXMgPSBwaHJhc2VzRGF0YT8uY2F0ZWdvcmllcyB8fCBbXTtcbiAgLy8g4pyFIENPUlJJR8OJIDogTGVzIHBocmFzZXMgc29udCBkYW5zIHBocmFzZXNEYXRhLnBocmFzZXMsIHBhcyBkYW5zIGxlcyBjYXTDqWdvcmllc1xuICBjb25zdCBhbGxQaHJhc2VzID0gcGhyYXNlc0RhdGE/LnBocmFzZXMgfHwgW107XG4gIGNvbnN0IGN1cnJlbnRDYXRlZ29yeSA9IGNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF07XG4gIFxuICAvLyDinIUgQ09SUklHw4kgOiBGaWx0cmVyIGxlcyBwaHJhc2VzIHBhciBjYXTDqWdvcmllIGFjdHVlbGxlXG4gIGNvbnN0IGN1cnJlbnRQaHJhc2VzID0gYWxsUGhyYXNlcy5maWx0ZXIocGhyYXNlID0+IHBocmFzZS5jYXRlZ29yeUlkID09PSBjdXJyZW50Q2F0ZWdvcnk/LmlkKSB8fCBbXTtcbiAgY29uc3QgY3VycmVudFBocmFzZSA9IGN1cnJlbnRQaHJhc2VzW3BocmFzZUluZGV4XTtcbiAgY29uc3QgdG90YWxQaHJhc2VzSW5DYXRlZ29yeSA9IGN1cnJlbnRQaHJhc2VzLmxlbmd0aDtcbiAgXG4gIC8vIOKchSBDT1JSSUfDiSA6IGhhc1ZhbGlkRGF0YSB2w6lyaWZpZSBxdWUgbm91cyBhdm9ucyBkZXMgZG9ubsOpZXMgZXQgZGVzIGNhdMOpZ29yaWVzIGF2ZWMgZGVzIHBocmFzZXNcbiAgY29uc3QgaGFzVmFsaWREYXRhID0gcGhyYXNlc0RhdGEgJiYgY2F0ZWdvcmllcy5sZW5ndGggPiAwICYmIGFsbFBocmFzZXMubGVuZ3RoID4gMDtcblxuICAvLyDinIUgQUpPVVTDiSA6IERlYnVnIHBvdXIgY29tcHJlbmRyZSBwb3VycXVvaSBoYXNWYWxpZERhdGEgZXN0IGZhbHNlXG4gIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHIHVzZVBocmFzZXM6Jywge1xuICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgcGhyYXNlSW5kZXgsXG4gICAgY2F0ZWdvcmllc0xlbmd0aDogY2F0ZWdvcmllcy5sZW5ndGgsXG4gICAgY3VycmVudENhdGVnb3J5OiAhIWN1cnJlbnRDYXRlZ29yeSxcbiAgICBjdXJyZW50Q2F0ZWdvcnlOYW1lOiBjdXJyZW50Q2F0ZWdvcnk/Lm5hbWUsXG4gICAgY3VycmVudFBocmFzZXNMZW5ndGg6IGN1cnJlbnRQaHJhc2VzLmxlbmd0aCxcbiAgICBhbGxQaHJhc2VzTGVuZ3RoOiBhbGxQaHJhc2VzLmxlbmd0aCxcbiAgICBoYXNWYWxpZERhdGEsXG4gICAgcGhyYXNlc0RhdGE6ICEhcGhyYXNlc0RhdGEsXG4gICAgLy8g4pyFIEFKT1VUw4kgOiBWw6lyaWZpZXIgbGEgc3RydWN0dXJlIGRlcyBkb25uw6llc1xuICAgIGNhdGVnb3JpZXNXaXRoUGhyYXNlczogY2F0ZWdvcmllcy5maWx0ZXIoY2F0ID0+IFxuICAgICAgYWxsUGhyYXNlcy5zb21lKHBocmFzZSA9PiBwaHJhc2UuY2F0ZWdvcnlJZCA9PT0gY2F0LmlkKVxuICAgICkubGVuZ3RoXG4gIH0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gREFUQSBMT0FESU5HID09PT09PT09PT09PT09PT09PT1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsb2FkRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNhdmVkRGF0YSA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKTtcbiAgICAgICAgaWYgKHNhdmVkRGF0YSkge1xuICAgICAgICAgIGNvbnN0IHsgY29tcGxldGVkUGhyYXNlczogc2F2ZWRDb21wbGV0ZWQgfSA9IEpTT04ucGFyc2Uoc2F2ZWREYXRhKTtcbiAgICAgICAgICBzZXRDb21wbGV0ZWRQaHJhc2VzKHNhdmVkQ29tcGxldGVkIHx8IHt9KTtcbiAgICAgICAgICAvLyDinIUgU1VQUFJJTcOJIDogSW5pdGlhbGlzYXRpb24gZGVzIGluZGljZXMgaWNpIGNhciBwaHJhc2VzRGF0YSBuJ2VzdCBwYXMgZW5jb3JlIGRpc3BvbmlibGVcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8g4pyFIEdlc3Rpb24gZCdlcnJldXIgYXBwcm9wcmnDqWVcbiAgICAgICAgaGFuZGxlU3RvcmFnZUVycm9yKGVycm9yLCAnbG9hZERhdGEnKTtcbiAgICAgICAgLy8gRmFsbGJhY2s6IHV0aWxpc2VyIGxlcyB2YWxldXJzIHBhciBkw6lmYXV0XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRMb2FkZWQodHJ1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBsb2FkRGF0YSgpO1xuICB9LCBbbGV2ZWxdKTsgLy8g4pyFIENPUlJJR8OJIDogU3VwcHJpbcOpIHBocmFzZXNEYXRhIGRlcyBkw6lwZW5kYW5jZXNcblxuICAvLyDinIUgQUpPVVTDiSA6IEluaXRpYWxpc2F0aW9uIGRlcyBpbmRpY2VzIHF1YW5kIHBocmFzZXNEYXRhIGVzdCBkaXNwb25pYmxlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGxvYWRlZCAmJiBwaHJhc2VzRGF0YSAmJiBjYXRlZ29yaWVzLmxlbmd0aCA+IDAgJiYgIWlzSW5pdGlhbGl6ZWQuY3VycmVudCkge1xuICAgICAgLy8gSW5pdGlhbGlzZXIgbGVzIGluZGljZXMgYXZlYyBkZXMgdmFsZXVycyB2YWxpZGVzXG4gICAgICBjb25zdCB2YWxpZENhdGVnb3J5SW5kZXggPSAwOyAvLyBDb21tZW5jZXIgcGFyIGxhIHByZW1pw6hyZSBjYXTDqWdvcmllXG4gICAgICBjb25zdCB2YWxpZFBocmFzZUluZGV4ID0gMDsgICAvLyBDb21tZW5jZXIgcGFyIGxhIHByZW1pw6hyZSBwaHJhc2VcbiAgICAgIFxuICAgICAgc2V0Q2F0ZWdvcnlJbmRleCh2YWxpZENhdGVnb3J5SW5kZXgpO1xuICAgICAgc2V0UGhyYXNlSW5kZXgodmFsaWRQaHJhc2VJbmRleCk7XG4gICAgICBcbiAgICAgIC8vIOKchSBDT1JSSUfDiSA6IEluaXRpYWxpc2VyIGxlcyBwaHJhc2VzIGNvbXBsw6l0w6llcyBhdmVjIHVuIG9iamV0IHZpZGVcbiAgICAgIGNvbnN0IG5ld0NvbXBsZXRlZFBocmFzZXMgPSB7fTtcbiAgICAgIGNhdGVnb3JpZXMuZm9yRWFjaCgoXywgaW5kZXgpID0+IHtcbiAgICAgICAgbmV3Q29tcGxldGVkUGhyYXNlc1tpbmRleF0gPSBbXTtcbiAgICAgIH0pO1xuICAgICAgc2V0Q29tcGxldGVkUGhyYXNlcyhuZXdDb21wbGV0ZWRQaHJhc2VzKTtcbiAgICAgIFxuICAgICAgaXNJbml0aWFsaXplZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9XG4gIH0sIFtsb2FkZWQsIHBocmFzZXNEYXRhLCBjYXRlZ29yaWVzLmxlbmd0aF0pOyAvLyDinIUgQ09SUklHw4kgOiBEw6lwZW5kYW5jZXMgc2ltcGxpZmnDqWVzXG5cbiAgLy8gU2F2ZSBkYXRhIHRvIHN0b3JhZ2VcbiAgY29uc3Qgc2F2ZURhdGEgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFUb1NhdmUgPSB7XG4gICAgICAgIGNvbXBsZXRlZFBocmFzZXMsXG4gICAgICAgIGxhc3RQb3NpdGlvbjoge1xuICAgICAgICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgICAgICAgcGhyYXNlSW5kZXhcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShkYXRhVG9TYXZlKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIOKchSBHZXN0aW9uIGQnZXJyZXVyIGFwcHJvcHJpw6llXG4gICAgICBoYW5kbGVTdG9yYWdlRXJyb3IoZXJyb3IsICdzYXZlRGF0YScpO1xuICAgICAgLy8gRmFsbGJhY2s6IGNvbnRpbnVlciBzYW5zIHNhdXZlZ2FyZGVcbiAgICB9XG4gIH0sIFtjb21wbGV0ZWRQaHJhc2VzLCBjYXRlZ29yeUluZGV4LCBwaHJhc2VJbmRleCwgU1RPUkFHRV9LRVldKTtcblxuICAvLyBBdXRvLXNhdmUgd2hlbiBkYXRhIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobG9hZGVkICYmIGlzSW5pdGlhbGl6ZWQuY3VycmVudCkgc2F2ZURhdGEoKTtcbiAgfSwgW2xvYWRlZCwgaXNJbml0aWFsaXplZC5jdXJyZW50XSk7IC8vIOKchSBDT1JSSUfDiSA6IEFqb3V0w6kgaXNJbml0aWFsaXplZC5jdXJyZW50XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBOQVZJR0FUSU9OIEFDVElPTlMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBjaGFuZ2VDYXRlZ29yeSA9IHVzZUNhbGxiYWNrKChuZXdDYXRlZ29yeUluZGV4KSA9PiB7XG4gICAgaWYgKG5ld0NhdGVnb3J5SW5kZXggIT09IGNhdGVnb3J5SW5kZXggJiYgbmV3Q2F0ZWdvcnlJbmRleCA+PSAwICYmIG5ld0NhdGVnb3J5SW5kZXggPCBjYXRlZ29yaWVzLmxlbmd0aCAmJiBpc0luaXRpYWxpemVkLmN1cnJlbnQpIHtcbiAgICAgIHNldENhdGVnb3J5SW5kZXgobmV3Q2F0ZWdvcnlJbmRleCk7XG4gICAgICBzZXRQaHJhc2VJbmRleCgwKTtcbiAgICAgIHNldFNob3dUcmFuc2xhdGlvbihmYWxzZSk7XG4gICAgfVxuICB9LCBbY2F0ZWdvcnlJbmRleCwgY2F0ZWdvcmllcy5sZW5ndGgsIGlzSW5pdGlhbGl6ZWQuY3VycmVudF0pO1xuXG4gIGNvbnN0IGdvVG9OZXh0UGhyYXNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChwaHJhc2VJbmRleCA8IHRvdGFsUGhyYXNlc0luQ2F0ZWdvcnkgLSAxICYmIGlzSW5pdGlhbGl6ZWQuY3VycmVudCkge1xuICAgICAgc2V0UGhyYXNlSW5kZXgocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICBzZXRTaG93VHJhbnNsYXRpb24oZmFsc2UpO1xuICAgIH1cbiAgfSwgW3BocmFzZUluZGV4LCB0b3RhbFBocmFzZXNJbkNhdGVnb3J5LCBpc0luaXRpYWxpemVkLmN1cnJlbnRdKTtcblxuICBjb25zdCBnb1RvUHJldmlvdXNQaHJhc2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHBocmFzZUluZGV4ID4gMCAmJiBpc0luaXRpYWxpemVkLmN1cnJlbnQpIHtcbiAgICAgIHNldFBocmFzZUluZGV4KHByZXYgPT4gcHJldiAtIDEpOyAvLyDinIUgQ09SUklHw4kgOiBwcmV2IC0gMSwgcGFzIHByZXYgKyAxXG4gICAgICBzZXRTaG93VHJhbnNsYXRpb24oZmFsc2UpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSwgW3BocmFzZUluZGV4LCBpc0luaXRpYWxpemVkLmN1cnJlbnRdKTtcblxuICBjb25zdCB0b2dnbGVUcmFuc2xhdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93VHJhbnNsYXRpb24ocHJldiA9PiAhcHJldik7XG4gIH0sIFtdKTtcblxuICBjb25zdCB0b2dnbGVEZXRhaWxlZFByb2dyZXNzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dEZXRhaWxlZFByb2dyZXNzKHByZXYgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBDT01QTEVUSU9OIExPR0lDID09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgbWFya1BocmFzZUFzQ29tcGxldGVkID0gdXNlQ2FsbGJhY2soKGNhdEluZGV4LCBwSW5kZXgpID0+IHtcbiAgICBpZiAoIWlzSW5pdGlhbGl6ZWQuY3VycmVudCkgcmV0dXJuOyAvLyDinIUgQUpPVVTDiSA6IFByb3RlY3Rpb24gY29udHJlIGwnYWNjw6hzIGF2YW50IGluaXRpYWxpc2F0aW9uXG4gICAgXG4gICAgc2V0Q29tcGxldGVkUGhyYXNlcyhwcmV2ID0+IHtcbiAgICAgIGNvbnN0IGNhdGVnb3J5Q29tcGxldGVkID0gcHJldltjYXRJbmRleF0gfHwgW107XG4gICAgICBpZiAoIWNhdGVnb3J5Q29tcGxldGVkLmluY2x1ZGVzKHBJbmRleCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIFtjYXRJbmRleF06IFsuLi5jYXRlZ29yeUNvbXBsZXRlZCwgcEluZGV4XVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByZXY7XG4gICAgfSk7XG4gIH0sIFtpc0luaXRpYWxpemVkLmN1cnJlbnRdKTtcblxuICAvLyBGaW5kIG5leHQgdW5jb21wbGV0ZWQgY2F0ZWdvcnlcbiAgY29uc3QgZmluZE5leHRVbmNvbXBsZXRlZENhdGVnb3J5ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IG51bUNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBudW1DYXRlZ29yaWVzOyBpKyspIHtcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9IChjYXRlZ29yeUluZGV4ICsgaSkgJSBudW1DYXRlZ29yaWVzO1xuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaWVzW25leHRJbmRleF07XG4gICAgICAvLyDinIUgQ09SUklHw4kgOiBVdGlsaXNlciBhbGxQaHJhc2VzIGF1IGxpZXUgZGUgY3VycmVudFBocmFzZXNcbiAgICAgIGNvbnN0IGNhdGVnb3J5UGhyYXNlcyA9IGFsbFBocmFzZXMuZmlsdGVyKHAgPT4gcC5jYXRlZ29yeUlkID09PSBjYXRlZ29yeS5pZCk7XG4gICAgICBjb25zdCBjb21wbGV0ZWRJbkNhdGVnb3J5ID0gY29tcGxldGVkUGhyYXNlc1tuZXh0SW5kZXhdPy5sZW5ndGggfHwgMDtcbiAgICAgIFxuICAgICAgaWYgKGNvbXBsZXRlZEluQ2F0ZWdvcnkgPCBjYXRlZ29yeVBocmFzZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBuZXh0SW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfSwgW2NhdGVnb3JpZXMsIGNhdGVnb3J5SW5kZXgsIGFsbFBocmFzZXMsIGNvbXBsZXRlZFBocmFzZXNdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IE1BSU4gTkFWSUdBVElPTiA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGhhbmRsZU5leHQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFpc0luaXRpYWxpemVkLmN1cnJlbnQpIHJldHVybiB7IGNvbXBsZXRlZDogZmFsc2UgfTsgLy8g4pyFIEFKT1VUw4kgOiBQcm90ZWN0aW9uIGNvbnRyZSBsJ2FjY8OocyBhdmFudCBpbml0aWFsaXNhdGlvblxuICAgIFxuICAgIC8vIE1hcmsgY3VycmVudCBwaHJhc2UgYXMgY29tcGxldGVkXG4gICAgbWFya1BocmFzZUFzQ29tcGxldGVkKGNhdGVnb3J5SW5kZXgsIHBocmFzZUluZGV4KTtcblxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBtb3JlIHBocmFzZXMgaW4gY3VycmVudCBjYXRlZ29yeVxuICAgIGlmIChwaHJhc2VJbmRleCA8IHRvdGFsUGhyYXNlc0luQ2F0ZWdvcnkgLSAxKSB7XG4gICAgICBnb1RvTmV4dFBocmFzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFbmQgb2YgY2F0ZWdvcnkgLSBmaW5kIG5leHQgdW5jb21wbGV0ZWQgY2F0ZWdvcnlcbiAgICAgIGNvbnN0IG5leHRDYXRlZ29yeUluZGV4ID0gZmluZE5leHRVbmNvbXBsZXRlZENhdGVnb3J5KCk7XG4gICAgICBpZiAobmV4dENhdGVnb3J5SW5kZXggPT09IC0xKSB7XG4gICAgICAgIC8vIEFsbCBkb25lIVxuICAgICAgICBBbGVydC5hbGVydChcbiAgICAgICAgICBcIkbDqWxpY2l0YXRpb25zXCIsXG4gICAgICAgICAgXCJWb3VzIGF2ZXogdGVybWluw6kgdG91cyBsZXMgZXhlcmNpY2VzIGRlIHBocmFzZXMgIVwiXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7IGNvbXBsZXRlZDogdHJ1ZSB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhbmdlQ2F0ZWdvcnkobmV4dENhdGVnb3J5SW5kZXgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBjb21wbGV0ZWQ6IGZhbHNlIH07XG4gIH0sIFtjYXRlZ29yeUluZGV4LCBwaHJhc2VJbmRleCwgdG90YWxQaHJhc2VzSW5DYXRlZ29yeSwgbWFya1BocmFzZUFzQ29tcGxldGVkLCBnb1RvTmV4dFBocmFzZSwgZmluZE5leHRVbmNvbXBsZXRlZENhdGVnb3J5LCBjaGFuZ2VDYXRlZ29yeSwgaXNJbml0aWFsaXplZC5jdXJyZW50XSk7XG5cbiAgY29uc3QgaGFuZGxlUHJldmlvdXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFpc0luaXRpYWxpemVkLmN1cnJlbnQpIHJldHVybjsgLy8g4pyFIEFKT1VUw4kgOiBQcm90ZWN0aW9uIGNvbnRyZSBsJ2FjY8OocyBhdmFudCBpbml0aWFsaXNhdGlvblxuICAgIGdvVG9QcmV2aW91c1BocmFzZSgpO1xuICB9LCBbZ29Ub1ByZXZpb3VzUGhyYXNlLCBpc0luaXRpYWxpemVkLmN1cnJlbnRdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IENPTVBVVEVEIFNUQVRTID09PT09PT09PT09PT09PT09PT1cbiAgY29uc3Qgc3RhdHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWlzSW5pdGlhbGl6ZWQuY3VycmVudCkgeyAvLyDinIUgQUpPVVTDiSA6IFByb3RlY3Rpb24gY29udHJlIGxlIGNhbGN1bCBhdmFudCBpbml0aWFsaXNhdGlvblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWxQaHJhc2VzOiAwLFxuICAgICAgICBjb21wbGV0ZWRQaHJhc2VzQ291bnQ6IDAsXG4gICAgICAgIHRvdGFsUHJvZ3Jlc3M6IDAsXG4gICAgICAgIGNvbXBsZXRpb25Qcm9ncmVzczogMCxcbiAgICAgICAgY29tcGxldGVkSW5DdXJyZW50Q2F0ZWdvcnk6IDAsXG4gICAgICAgIHRvdGFsSW5DdXJyZW50Q2F0ZWdvcnk6IDBcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRvdGFsUGhyYXNlcyA9IGN1cnJlbnRQaHJhc2VzLmxlbmd0aDtcbiAgICBjb25zdCBjb21wbGV0ZWRQaHJhc2VzQ291bnQgPSBPYmplY3QudmFsdWVzKGNvbXBsZXRlZFBocmFzZXMpLnJlZHVjZSgoc3VtLCBjb21wbGV0ZWQpID0+IHN1bSArIChjb21wbGV0ZWQ/Lmxlbmd0aCB8fCAwKSwgMCk7XG4gICAgY29uc3QgdG90YWxQcm9ncmVzcyA9IHRvdGFsUGhyYXNlcyA+IDAgPyBNYXRoLnJvdW5kKChjb21wbGV0ZWRQaHJhc2VzQ291bnQgLyB0b3RhbFBocmFzZXMpICogMTAwKSA6IDA7XG4gICAgY29uc3QgY29tcGxldGlvblByb2dyZXNzID0gdG90YWxQaHJhc2VzSW5DYXRlZ29yeSA+IDAgPyAoKHBocmFzZUluZGV4ICsgMSkgLyB0b3RhbFBocmFzZXNJbkNhdGVnb3J5KSAqIDEwMCA6IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxQaHJhc2VzLFxuICAgICAgY29tcGxldGVkUGhyYXNlc0NvdW50LFxuICAgICAgdG90YWxQcm9ncmVzcyxcbiAgICAgIGNvbXBsZXRpb25Qcm9ncmVzcyxcbiAgICAgIGNvbXBsZXRlZEluQ3VycmVudENhdGVnb3J5OiBjb21wbGV0ZWRQaHJhc2VzW2NhdGVnb3J5SW5kZXhdPy5sZW5ndGggfHwgMCxcbiAgICAgIHRvdGFsSW5DdXJyZW50Q2F0ZWdvcnk6IHRvdGFsUGhyYXNlc0luQ2F0ZWdvcnlcbiAgICB9O1xuICB9LCBbY3VycmVudFBocmFzZXMsIGNvbXBsZXRlZFBocmFzZXMsIHRvdGFsUGhyYXNlc0luQ2F0ZWdvcnksIHBocmFzZUluZGV4LCBjYXRlZ29yeUluZGV4LCBpc0luaXRpYWxpemVkLmN1cnJlbnRdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IENPTVBVVEVEIERJU1BMQVkgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBkaXNwbGF5ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFpc0luaXRpYWxpemVkLmN1cnJlbnQpIHsgLy8g4pyFIEFKT1VUw4kgOiBQcm90ZWN0aW9uIGNvbnRyZSBsZSBjYWxjdWwgYXZhbnQgaW5pdGlhbGlzYXRpb25cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBocmFzZUNvdW50ZXI6IFwiMCAvIDBcIixcbiAgICAgICAgY2F0ZWdvcmllczogW10sXG4gICAgICAgIGN1cnJlbnRQaHJhc2U6IG51bGwsXG4gICAgICAgIGN1cnJlbnRDYXRlZ29yeTogbnVsbCxcbiAgICAgICAgY3VycmVudFBocmFzZXM6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwaHJhc2VDb3VudGVyID0gYCR7cGhyYXNlSW5kZXggKyAxfSAvICR7dG90YWxQaHJhc2VzSW5DYXRlZ29yeSB8fCAwfWA7XG4gICAgY29uc3QgY2F0ZWdvcmllc05hbWVzID0gY2F0ZWdvcmllcy5tYXAoY2F0ID0+IGNhdC5uYW1lKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcGhyYXNlQ291bnRlcixcbiAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXNOYW1lcyxcbiAgICAgIGN1cnJlbnRQaHJhc2UsXG4gICAgICBjdXJyZW50Q2F0ZWdvcnksXG4gICAgICBjdXJyZW50UGhyYXNlc1xuICAgIH07XG4gIH0sIFtwaHJhc2VJbmRleCwgdG90YWxQaHJhc2VzSW5DYXRlZ29yeSwgY2F0ZWdvcmllcywgY3VycmVudFBocmFzZSwgY3VycmVudENhdGVnb3J5LCBjdXJyZW50UGhyYXNlcywgaXNJbml0aWFsaXplZC5jdXJyZW50XSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBWQUxJREFUSU9OID09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgY2FuR29Ub1ByZXZpb3VzID0gcGhyYXNlSW5kZXggPiAwO1xuICBjb25zdCBpc0xhc3RQaHJhc2VJbkNhdGVnb3J5ID0gcGhyYXNlSW5kZXggPT09IHRvdGFsUGhyYXNlc0luQ2F0ZWdvcnkgLSAxO1xuXG4gIHJldHVybiB7XG4gICAgLy8gU3RhdGVcbiAgICBjYXRlZ29yeUluZGV4LFxuICAgIHBocmFzZUluZGV4LFxuICAgIHNob3dUcmFuc2xhdGlvbixcbiAgICBjb21wbGV0ZWRQaHJhc2VzLFxuICAgIGxvYWRlZCxcbiAgICBzaG93RGV0YWlsZWRQcm9ncmVzcyxcbiAgICBcbiAgICAvLyBEYXRhXG4gICAgY3VycmVudFBocmFzZSxcbiAgICBjdXJyZW50Q2F0ZWdvcnksXG4gICAgY3VycmVudFBocmFzZXMsXG4gICAgdG90YWxDYXRlZ29yaWVzOiBjYXRlZ29yaWVzLmxlbmd0aCxcbiAgICB0b3RhbFBocmFzZXNJbkNhdGVnb3J5LFxuICAgIGhhc1ZhbGlkRGF0YSxcbiAgICBcbiAgICAvLyBBY3Rpb25zXG4gICAgY2hhbmdlQ2F0ZWdvcnksXG4gICAgdG9nZ2xlVHJhbnNsYXRpb24sXG4gICAgdG9nZ2xlRGV0YWlsZWRQcm9ncmVzcyxcbiAgICBoYW5kbGVOZXh0LFxuICAgIGhhbmRsZVByZXZpb3VzLFxuICAgIFxuICAgIC8vIENvbXB1dGVkXG4gICAgY2FuR29Ub1ByZXZpb3VzLFxuICAgIGlzTGFzdFBocmFzZUluQ2F0ZWdvcnksXG4gICAgc3RhdHMsIC8vIOKchSBPUFRJTUlTw4kgOiBPYmpldCBtw6ltb3Jpc8OpXG4gICAgZGlzcGxheSwgLy8g4pyFIE9QVElNSVPDiSA6IE9iamV0IG3DqW1vcmlzw6lcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZVBocmFzZXM7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxhQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFPQSxJQUFNSSxVQUFVLEdBQUcsU0FBYkEsVUFBVUEsQ0FBSUMsV0FBVyxFQUFFQyxLQUFLLEVBQUs7RUFFekMsSUFBTUMsa0JBQWtCLEdBQUcsU0FBckJBLGtCQUFrQkEsQ0FBSUMsS0FBSyxFQUFFQyxTQUFT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