{"version":3,"names":["_getJestObj","mock","router","push","jest","fn","getItem","_interopRequireDefault","require","_asyncToGenerator2","_react","_reactNative","_RevisionOrchestrator","_asyncStorage","_expoRouter","_jsxRuntime","_require","describe","it","default","_render","render","jsx","queryByTestId","waitFor","expect","AsyncStorage","toHaveBeenCalled","toBeNull","_render2","_render3","getByTestId","popup","toBeTruthy","_render4","nowButton","fireEvent","press","toHaveBeenCalledTimes","_render5","laterButton","setItem","_render6","disableButton","_render7","dismissButton"],"sources":["RevisionOrchestrator.test.js"],"sourcesContent":["import React from 'react';\nimport { render, fireEvent, waitFor } from '@testing-library/react-native';\nimport RevisionOrchestrator from '../../../src/screens/VocabularyRevision/RevisionOrchestrator';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { router } from 'expo-router';\n\njest.mock('expo-router', () => ({\n  router: {\n    push: jest.fn(),\n  },\n}));\n\njest.mock('@react-native-async-storage/async-storage', () => ({\n  getItem: jest.fn(),\n}));\n\ndescribe('RevisionOrchestrator', () => {\n  it('renders nothing if revisions are disabled', async () => {\n    const { queryByTestId } = render(<RevisionOrchestrator />);\n    await waitFor(() => expect(AsyncStorage.getItem).toHaveBeenCalled());\n    expect(queryByTestId('revision-popup')).toBeNull();\n  });\n\n  it('does not show popup if word count is below threshold', async () => {\n    const { queryByTestId } = render(<RevisionOrchestrator />);\n    await waitFor(() => expect(AsyncStorage.getItem).toHaveBeenCalled());\n    expect(queryByTestId('revision-popup')).toBeNull();\n  });\n\n  it('shows the popup when word count reaches the threshold', async () => {\n    const { getByTestId } = render(<RevisionOrchestrator />);\n    await waitFor(() => expect(AsyncStorage.getItem).toHaveBeenCalled());\n    const popup = getByTestId('revision-popup');\n    expect(popup).toBeTruthy();\n  });\n\n  it('calls resetToNextTarget and navigates when \"now\" is chosen', async () => {\n    const { getByTestId } = render(<RevisionOrchestrator />);\n    await waitFor(() => expect(AsyncStorage.getItem).toHaveBeenCalled());\n    const nowButton = getByTestId('popup-now');\n    fireEvent.press(nowButton);\n    await waitFor(() => expect(router.push).toHaveBeenCalledTimes(1));\n  });\n\n  it('calls updatePreferences when \"later_50\" is chosen', async () => {\n    const { getByTestId } = render(<RevisionOrchestrator />);\n    await waitFor(() => expect(AsyncStorage.getItem).toHaveBeenCalled());\n    const laterButton = getByTestId('popup-later50');\n    fireEvent.press(laterButton);\n    await waitFor(() => expect(AsyncStorage.setItem).toHaveBeenCalledTimes(1));\n  });\n\n  it('calls disableRevisions when \"disable\" is chosen', async () => {\n    const { getByTestId } = render(<RevisionOrchestrator />);\n    await waitFor(() => expect(AsyncStorage.getItem).toHaveBeenCalled());\n    const disableButton = getByTestId('popup-disable');\n    fireEvent.press(disableButton);\n    await waitFor(() => expect(AsyncStorage.setItem).toHaveBeenCalledTimes(1));\n  });\n\n  it('handles dismiss by defaulting to \"later_50\"', async () => {\n    const { getByTestId } = render(<RevisionOrchestrator />);\n    await waitFor(() => expect(AsyncStorage.getItem).toHaveBeenCalled());\n    const dismissButton = getByTestId('popup-dismiss');\n    fireEvent.press(dismissButton);\n    await waitFor(() => expect(AsyncStorage.setItem).toHaveBeenCalledTimes(1));\n  });\n});"],"mappings":"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","ignoreList":[]}