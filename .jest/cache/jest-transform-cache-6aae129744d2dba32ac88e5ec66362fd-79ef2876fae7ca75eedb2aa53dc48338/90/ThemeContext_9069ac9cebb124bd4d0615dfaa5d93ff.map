{"version":3,"names":["_react","require","_reactNative","_storageUtils","_constants","_propTypes","_interopRequireDefault","_jsxRuntime","ThemeContext","exports","createContext","ThemeProvider","_ref","children","_useState","useState","_useState2","_slicedToArray2","default","theme","setTheme","systemColorScheme","useColorScheme","_useState3","_useState4","loaded","setLoaded","isDarkTheme","useMemo","useEffect","mounted","loadTheme","_ref2","_asyncToGenerator2","savedTheme","getData","error","console","apply","arguments","timeoutId","setTimeout","storeData","clearTimeout","setAppTheme","useCallback","newTheme","toggleTheme","resetToSystemTheme","colors","background","surface","primary","primaryDark","secondary","accent","text","textSecondary","border","divider","disabled","icon","level","A1","A2","B1","B2","C1","C2","Object","assign","COLORS","spacing","xs","sm","md","lg","xl","xxl","typography","fontSizes","xxxl","fontWeights","light","regular","medium","semibold","bold","lineHeights","tight","normal","loose","borderRadius","round","shadows","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","contextValue","jsx","Provider","value","propTypes","PropTypes","any","isRequired","_default"],"sources":["ThemeContext.js"],"sourcesContent":["// src/contexts/ThemeContext.js - VERSION CORRIGÉE SANS BOUCLE\r\nimport { createContext, useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useColorScheme } from 'react-native';\r\nimport { getData, storeData } from '../utils/storageUtils';\r\nimport { COLORS } from '../utils/constants';import PropTypes from 'prop-types';\n\r\n\r\n// Créer le contexte\r\nexport const ThemeContext = createContext();\r\n\r\n/**\r\n * Fournisseur de contexte pour gérer le thème de l'application\r\n */\r\nexport const ThemeProvider = ({ children }) => {\r\n  // États\r\n    const [theme, setTheme] = useState('system'); // 'light', 'dark', 'system'\r\n  const systemColorScheme = useColorScheme();\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  // ========== 🚨 MÉMORISER LE MODE SOMBRE ==========\r\n  const isDarkTheme = useMemo(() => {\r\n    return theme === 'system' \r\n      ? systemColorScheme === 'dark'\r\n      : theme === 'dark';\r\n  }, [theme, systemColorScheme]);\r\n\r\n  // Charger le thème sauvegardé au démarrage\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const loadTheme = async () => {\r\n      try {\r\n        const savedTheme = await getData('appTheme');\r\n        if (mounted) {\r\n          if (savedTheme) {\r\n            setTheme(savedTheme);\r\n          }\r\n          setLoaded(true);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading theme:', error);\r\n        if (mounted) {\r\n          setLoaded(true);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadTheme();\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []); // ← Dépendances vides = une seule fois\r\n\r\n  // Sauvegarder le thème lorsqu'il change\r\n  useEffect(() => {\r\n    let timeoutId = null;\r\n\r\n    if (loaded) {\r\n      // Debounce pour éviter trop de sauvegardes\r\n      timeoutId = setTimeout(() => {\r\n        storeData('appTheme', theme);\r\n      }, 300);\r\n    }\r\n\r\n    return () => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n    };\r\n  }, [theme, loaded]);\r\n\r\n  // ========== 🚨 MÉMORISER TOUTES LES FONCTIONS ==========\r\n  const setAppTheme = useCallback((newTheme) => {\r\n    setTheme(newTheme);\r\n  }, []);\r\n\r\n  const toggleTheme = useCallback(() => {\r\n    if (theme === 'system') {\r\n      setTheme(systemColorScheme === 'dark' ? 'light' : 'dark');\r\n    } else {\r\n      setTheme(theme === 'dark' ? 'light' : 'dark');\r\n    }\r\n  }, [theme, systemColorScheme]);\r\n\r\n  const resetToSystemTheme = useCallback(() => {\r\n    setTheme('system');\r\n  }, []);\r\n\r\n  // ========== 🚨 MÉMORISER LES COULEURS ==========\r\n  const colors = useMemo(() => {\r\n    return isDarkTheme \r\n      ? {\r\n          // Palette de couleurs pour le thème sombre\r\n          background: '#121212',\r\n          surface: '#1E1E1E',\r\n          primary: '#BB86FC',\r\n          primaryDark: '#9F66EB',\r\n          secondary: '#03DAC6',\r\n          accent: '#CF6679',\r\n          error: '#CF6679',\r\n          text: '#FFFFFF',\r\n          textSecondary: '#B0B0B0',\r\n          border: '#2C2C2C',\r\n          divider: '#2C2C2C',\r\n          disabled: '#666666',\r\n          icon: '#FFFFFF',\r\n\r\n          // Couleurs spécifiques au niveau\r\n          level: {\r\n            A1: '#3b82f6',\r\n            A2: '#8b5cf6', \r\n            B1: '#10b981',\r\n            B2: '#f59e0b',\r\n            C1: '#ef4444',\r\n            C2: '#6366f1',\r\n          }\r\n        }\r\n      : {\r\n          // Palette de couleurs pour le thème clair\r\n          ...COLORS,\r\n\r\n          // Couleurs spécifiques au niveau\r\n          level: {\r\n            A1: '#3b82f6',\r\n            A2: '#8b5cf6', \r\n            B1: '#10b981',\r\n            B2: '#f59e0b',\r\n            C1: '#ef4444',\r\n            C2: '#6366f1',\r\n          }\r\n        };\r\n  }, [isDarkTheme]);\r\n\r\n  // ========== 🚨 MÉMORISER ESPACEMENT ==========\r\n  const spacing = useMemo(() => ({\r\n    xs: 4,\r\n    sm: 8,\r\n    md: 16,\r\n    lg: 24,\r\n    xl: 32,\r\n    xxl: 48,\r\n  }), []);\r\n\r\n  // ========== 🚨 MÉMORISER TYPOGRAPHIE ==========\r\n  const typography = useMemo(() => ({\r\n    fontSizes: {\r\n      xs: 12,\r\n      sm: 14,\r\n      md: 16,\r\n      lg: 18,\r\n      xl: 20,\r\n      xxl: 24,\r\n      xxxl: 30,\r\n    },\r\n    fontWeights: {\r\n      light: '300',\r\n      regular: '400',\r\n      medium: '500',\r\n      semibold: '600',\r\n      bold: '700',\r\n    },\r\n    lineHeights: {\r\n      tight: 1.2,\r\n      normal: 1.5,\r\n      loose: 1.8,\r\n    },\r\n  }), []);\r\n\r\n  // ========== 🚨 MÉMORISER BORDER RADIUS ==========\r\n  const borderRadius = useMemo(() => ({\r\n    sm: 4,\r\n    md: 8,\r\n    lg: 12,\r\n    xl: 16,\r\n    round: 9999,\r\n  }), []);\r\n\r\n  // ========== 🚨 MÉMORISER OMBRES ==========\r\n  const shadows = useMemo(() => {\r\n    return isDarkTheme \r\n      ? {\r\n          sm: {\r\n            shadowColor: '#000',\r\n            shadowOffset: { width: 0, height: 1 },\r\n            shadowOpacity: 0.2,\r\n            shadowRadius: 2,\r\n            elevation: 2,\r\n          },\r\n          md: {\r\n            shadowColor: '#000',\r\n            shadowOffset: { width: 0, height: 2 },\r\n            shadowOpacity: 0.3,\r\n            shadowRadius: 4,\r\n            elevation: 4,\r\n          },\r\n          lg: {\r\n            shadowColor: '#000',\r\n            shadowOffset: { width: 0, height: 3 },\r\n            shadowOpacity: 0.4,\r\n            shadowRadius: 6,\r\n            elevation: 6,\r\n          },\r\n        }\r\n      : {\r\n          sm: {\r\n            shadowColor: '#000',\r\n            shadowOffset: { width: 0, height: 1 },\r\n            shadowOpacity: 0.1,\r\n            shadowRadius: 2,\r\n            elevation: 2,\r\n          },\r\n          md: {\r\n            shadowColor: '#000',\r\n            shadowOffset: { width: 0, height: 2 },\r\n            shadowOpacity: 0.15,\r\n            shadowRadius: 4,\r\n            elevation: 4,\r\n          },\r\n          lg: {\r\n            shadowColor: '#000',\r\n            shadowOffset: { width: 0, height: 3 },\r\n            shadowOpacity: 0.2,\r\n            shadowRadius: 6,\r\n            elevation: 6,\r\n          },\r\n        };\r\n  }, [isDarkTheme]);\r\n\r\n  // ========== 🚨 MÉMORISER LA VALEUR DU CONTEXTE ==========\r\n  const contextValue = useMemo(() => ({\r\n    theme,\r\n    setTheme: setAppTheme,\r\n    toggleTheme,\r\n    resetToSystemTheme,\r\n    isDarkTheme,\r\n    colors,\r\n    spacing,\r\n    typography,\r\n    borderRadius,\r\n    shadows,\r\n    loaded,\r\n  }), [\r\n    theme,\r\n    setAppTheme,\r\n    toggleTheme,\r\n    resetToSystemTheme,\r\n    isDarkTheme,\r\n    colors,\r\n    spacing,\r\n    typography,\r\n    borderRadius,\r\n    shadows,\r\n    loaded,\r\n  ]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={contextValue}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\n\nThemeContext.propTypes = {\n  children: PropTypes.any.isRequired,\n};\n\nexport default ThemeContext;"],"mappings":"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","ignoreList":[]}