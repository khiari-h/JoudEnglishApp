7c6e5276aa81de3e68b2ce1f075838cf
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _reactNative = require("@testing-library/react-native");
var _useDashboardState = require("../../../../src/screens/Dashboard/hooks/useDashboardState");
describe('useDashboardState', function () {
  var mockLoadLastActivities = jest.fn();
  beforeEach(function () {
    jest.clearAllMocks();
    mockLoadLastActivities.mockResolvedValue();
  });
  it('devrait initialiser avec les valeurs par défaut', function () {
    var _renderHook = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook.result;
    expect(result.current.showLevelProgress).toBe(false);
    expect(result.current.refreshing).toBe(false);
    expect(result.current.activeTab).toBe('home');
  });
  it('devrait ouvrir et fermer la modal de progression', function () {
    var _renderHook2 = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook2.result;
    (0, _reactNative.act)(function () {
      result.current.openLevelProgressModal();
    });
    expect(result.current.showLevelProgress).toBe(true);
    (0, _reactNative.act)(function () {
      result.current.closeLevelProgressModal();
    });
    expect(result.current.showLevelProgress).toBe(false);
  });
  it('devrait changer l\'état de la modal directement', function () {
    var _renderHook3 = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook3.result;
    (0, _reactNative.act)(function () {
      result.current.setShowLevelProgress(true);
    });
    expect(result.current.showLevelProgress).toBe(true);
    (0, _reactNative.act)(function () {
      result.current.setShowLevelProgress(false);
    });
    expect(result.current.showLevelProgress).toBe(false);
  });
  it('devrait changer l\'onglet actif', function () {
    var _renderHook4 = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook4.result;
    (0, _reactNative.act)(function () {
      result.current.setActiveTab('progress');
    });
    expect(result.current.activeTab).toBe('progress');
    (0, _reactNative.act)(function () {
      result.current.setActiveTab('settings');
    });
    expect(result.current.activeTab).toBe('settings');
  });
  it('devrait gérer le pull-to-refresh avec succès', (0, _asyncToGenerator2.default)(function* () {
    var _renderHook5 = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook5.result;
    expect(result.current.refreshing).toBe(false);
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      yield result.current.onRefresh();
    }));
    expect(result.current.refreshing).toBe(false);
    expect(mockLoadLastActivities).toHaveBeenCalledTimes(1);
  }));
  it('devrait gérer les erreurs de refresh gracieusement', (0, _asyncToGenerator2.default)(function* () {
    mockLoadLastActivities.mockRejectedValue(new Error('Network error'));
    var _renderHook6 = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook6.result;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      yield result.current.onRefresh();
    }));
    expect(result.current.refreshing).toBe(false);
    expect(mockLoadLastActivities).toHaveBeenCalledTimes(1);
  }));
  it('devrait mémoriser la fonction onRefresh', function () {
    var _renderHook7 = (0, _reactNative.renderHook)(function (_ref5) {
        var loadFn = _ref5.loadFn;
        return (0, _useDashboardState.useDashboardState)(loadFn);
      }, {
        initialProps: {
          loadFn: mockLoadLastActivities
        }
      }),
      result = _renderHook7.result,
      rerender = _renderHook7.rerender;
    var initialOnRefresh = result.current.onRefresh;
    rerender({
      loadFn: mockLoadLastActivities
    });
    expect(result.current.onRefresh).toBe(initialOnRefresh);
    var newMockFn = jest.fn();
    rerender({
      loadFn: newMockFn
    });
    expect(result.current.onRefresh).not.toBe(initialOnRefresh);
  });
  it('devrait mémoriser les fonctions de modal', function () {
    var _renderHook8 = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook8.result,
      rerender = _renderHook8.rerender;
    var initialOpenModal = result.current.openLevelProgressModal;
    var initialCloseModal = result.current.closeLevelProgressModal;
    rerender();
    expect(result.current.openLevelProgressModal).toBe(initialOpenModal);
    expect(result.current.closeLevelProgressModal).toBe(initialCloseModal);
  });
  it('devrait permettre plusieurs refresh simultanés sans conflit', (0, _asyncToGenerator2.default)(function* () {
    var resolveFirst, resolveSecond;
    var firstCall = new Promise(function (resolve) {
      resolveFirst = resolve;
    });
    var secondCall = new Promise(function (resolve) {
      resolveSecond = resolve;
    });
    mockLoadLastActivities.mockReturnValueOnce(firstCall).mockReturnValueOnce(secondCall);
    var _renderHook9 = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook9.result;
    var firstRefresh = (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      yield result.current.onRefresh();
    }));
    var secondRefresh = (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      yield result.current.onRefresh();
    }));
    expect(result.current.refreshing).toBe(true);
    resolveFirst();
    yield firstRefresh;
    resolveSecond();
    yield secondRefresh;
    expect(result.current.refreshing).toBe(false);
    expect(mockLoadLastActivities).toHaveBeenCalledTimes(2);
  }));
  it('devrait exposer toutes les fonctions et états nécessaires', function () {
    var _renderHook0 = (0, _reactNative.renderHook)(function () {
        return (0, _useDashboardState.useDashboardState)(mockLoadLastActivities);
      }),
      result = _renderHook0.result;
    expect(typeof result.current.showLevelProgress).toBe('boolean');
    expect(typeof result.current.refreshing).toBe('boolean');
    expect(typeof result.current.activeTab).toBe('string');
    expect(typeof result.current.setShowLevelProgress).toBe('function');
    expect(typeof result.current.openLevelProgressModal).toBe('function');
    expect(typeof result.current.closeLevelProgressModal).toBe('function');
    expect(typeof result.current.setActiveTab).toBe('function');
    expect(typeof result.current.onRefresh).toBe('function');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX3VzZURhc2hib2FyZFN0YXRlIiwiZGVzY3JpYmUiLCJtb2NrTG9hZExhc3RBY3Rpdml0aWVzIiwiamVzdCIsImZuIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIml0IiwiX3JlbmRlckhvb2siLCJyZW5kZXJIb29rIiwidXNlRGFzaGJvYXJkU3RhdGUiLCJyZXN1bHQiLCJleHBlY3QiLCJjdXJyZW50Iiwic2hvd0xldmVsUHJvZ3Jlc3MiLCJ0b0JlIiwicmVmcmVzaGluZyIsImFjdGl2ZVRhYiIsIl9yZW5kZXJIb29rMiIsImFjdCIsIm9wZW5MZXZlbFByb2dyZXNzTW9kYWwiLCJjbG9zZUxldmVsUHJvZ3Jlc3NNb2RhbCIsIl9yZW5kZXJIb29rMyIsInNldFNob3dMZXZlbFByb2dyZXNzIiwiX3JlbmRlckhvb2s0Iiwic2V0QWN0aXZlVGFiIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiZGVmYXVsdCIsIl9yZW5kZXJIb29rNSIsIm9uUmVmcmVzaCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJfcmVuZGVySG9vazYiLCJfcmVuZGVySG9vazciLCJfcmVmNSIsImxvYWRGbiIsImluaXRpYWxQcm9wcyIsInJlcmVuZGVyIiwiaW5pdGlhbE9uUmVmcmVzaCIsIm5ld01vY2tGbiIsIm5vdCIsIl9yZW5kZXJIb29rOCIsImluaXRpYWxPcGVuTW9kYWwiLCJpbml0aWFsQ2xvc2VNb2RhbCIsInJlc29sdmVGaXJzdCIsInJlc29sdmVTZWNvbmQiLCJmaXJzdENhbGwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNlY29uZENhbGwiLCJtb2NrUmV0dXJuVmFsdWVPbmNlIiwiX3JlbmRlckhvb2s5IiwiZmlyc3RSZWZyZXNoIiwic2Vjb25kUmVmcmVzaCIsIl9yZW5kZXJIb29rMCJdLCJzb3VyY2VzIjpbInVzZURhc2hib2FyZFN0YXRlLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gX190ZXN0c19fL3NjcmVlbnMvRGFzaGJvYXJkL2hvb2tzL3VzZURhc2hib2FyZFN0YXRlLnRlc3QuanNcbmltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlJztcbmltcG9ydCB7IHVzZURhc2hib2FyZFN0YXRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL3NjcmVlbnMvRGFzaGJvYXJkL2hvb2tzL3VzZURhc2hib2FyZFN0YXRlJztcblxuZGVzY3JpYmUoJ3VzZURhc2hib2FyZFN0YXRlJywgKCkgPT4ge1xuICBjb25zdCBtb2NrTG9hZExhc3RBY3Rpdml0aWVzID0gamVzdC5mbigpO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIG1vY2tMb2FkTGFzdEFjdGl2aXRpZXMubW9ja1Jlc29sdmVkVmFsdWUoKTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgaW5pdGlhbGlzZXIgYXZlYyBsZXMgdmFsZXVycyBwYXIgZMOpZmF1dCcsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiBcbiAgICAgIHVzZURhc2hib2FyZFN0YXRlKG1vY2tMb2FkTGFzdEFjdGl2aXRpZXMpXG4gICAgKTtcblxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zaG93TGV2ZWxQcm9ncmVzcykudG9CZShmYWxzZSk7XG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnJlZnJlc2hpbmcpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5hY3RpdmVUYWIpLnRvQmUoJ2hvbWUnKTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgb3V2cmlyIGV0IGZlcm1lciBsYSBtb2RhbCBkZSBwcm9ncmVzc2lvbicsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiBcbiAgICAgIHVzZURhc2hib2FyZFN0YXRlKG1vY2tMb2FkTGFzdEFjdGl2aXRpZXMpXG4gICAgKTtcblxuICAgIC8vIE91dnJpciBsYSBtb2RhbFxuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC5vcGVuTGV2ZWxQcm9ncmVzc01vZGFsKCk7XG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2hvd0xldmVsUHJvZ3Jlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAvLyBGZXJtZXIgbGEgbW9kYWxcbiAgICBhY3QoKCkgPT4ge1xuICAgICAgcmVzdWx0LmN1cnJlbnQuY2xvc2VMZXZlbFByb2dyZXNzTW9kYWwoKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zaG93TGV2ZWxQcm9ncmVzcykudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIGl0KCdkZXZyYWl0IGNoYW5nZXIgbFxcJ8OpdGF0IGRlIGxhIG1vZGFsIGRpcmVjdGVtZW50JywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IFxuICAgICAgdXNlRGFzaGJvYXJkU3RhdGUobW9ja0xvYWRMYXN0QWN0aXZpdGllcylcbiAgICApO1xuXG4gICAgYWN0KCgpID0+IHtcbiAgICAgIHJlc3VsdC5jdXJyZW50LnNldFNob3dMZXZlbFByb2dyZXNzKHRydWUpO1xuICAgIH0pO1xuXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNob3dMZXZlbFByb2dyZXNzKS50b0JlKHRydWUpO1xuXG4gICAgYWN0KCgpID0+IHtcbiAgICAgIHJlc3VsdC5jdXJyZW50LnNldFNob3dMZXZlbFByb2dyZXNzKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zaG93TGV2ZWxQcm9ncmVzcykudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIGl0KCdkZXZyYWl0IGNoYW5nZXIgbFxcJ29uZ2xldCBhY3RpZicsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiBcbiAgICAgIHVzZURhc2hib2FyZFN0YXRlKG1vY2tMb2FkTGFzdEFjdGl2aXRpZXMpXG4gICAgKTtcblxuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC5zZXRBY3RpdmVUYWIoJ3Byb2dyZXNzJyk7XG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuYWN0aXZlVGFiKS50b0JlKCdwcm9ncmVzcycpO1xuXG4gICAgYWN0KCgpID0+IHtcbiAgICAgIHJlc3VsdC5jdXJyZW50LnNldEFjdGl2ZVRhYignc2V0dGluZ3MnKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5hY3RpdmVUYWIpLnRvQmUoJ3NldHRpbmdzJyk7XG4gIH0pO1xuXG4gIGl0KCdkZXZyYWl0IGfDqXJlciBsZSBwdWxsLXRvLXJlZnJlc2ggYXZlYyBzdWNjw6hzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IFxuICAgICAgdXNlRGFzaGJvYXJkU3RhdGUobW9ja0xvYWRMYXN0QWN0aXZpdGllcylcbiAgICApO1xuXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnJlZnJlc2hpbmcpLnRvQmUoZmFsc2UpO1xuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50Lm9uUmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gQXByw6hzIGxlIHJlZnJlc2hcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQucmVmcmVzaGluZykudG9CZShmYWxzZSk7XG4gICAgZXhwZWN0KG1vY2tMb2FkTGFzdEFjdGl2aXRpZXMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgZ8OpcmVyIGxlcyBlcnJldXJzIGRlIHJlZnJlc2ggZ3JhY2lldXNlbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrTG9hZExhc3RBY3Rpdml0aWVzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IFxuICAgICAgdXNlRGFzaGJvYXJkU3RhdGUobW9ja0xvYWRMYXN0QWN0aXZpdGllcylcbiAgICApO1xuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50Lm9uUmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gTGUgcmVmcmVzaGluZyBkZXZyYWl0IMOqdHJlIHJlbWlzIMOgIGZhbHNlIG3Dqm1lIGVuIGNhcyBkJ2VycmV1clxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5yZWZyZXNoaW5nKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QobW9ja0xvYWRMYXN0QWN0aXZpdGllcykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICB9KTtcblxuICBpdCgnZGV2cmFpdCBtw6ltb3Jpc2VyIGxhIGZvbmN0aW9uIG9uUmVmcmVzaCcsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCwgcmVyZW5kZXIgfSA9IHJlbmRlckhvb2soXG4gICAgICAoeyBsb2FkRm4gfSkgPT4gdXNlRGFzaGJvYXJkU3RhdGUobG9hZEZuKSxcbiAgICAgIHsgaW5pdGlhbFByb3BzOiB7IGxvYWRGbjogbW9ja0xvYWRMYXN0QWN0aXZpdGllcyB9IH1cbiAgICApO1xuXG4gICAgY29uc3QgaW5pdGlhbE9uUmVmcmVzaCA9IHJlc3VsdC5jdXJyZW50Lm9uUmVmcmVzaDtcblxuICAgIC8vIFJlcmVuZGVyIGF2ZWMgbGEgbcOqbWUgZm9uY3Rpb25cbiAgICByZXJlbmRlcih7IGxvYWRGbjogbW9ja0xvYWRMYXN0QWN0aXZpdGllcyB9KTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQub25SZWZyZXNoKS50b0JlKGluaXRpYWxPblJlZnJlc2gpO1xuXG4gICAgLy8gUmVyZW5kZXIgYXZlYyB1bmUgZm9uY3Rpb24gZGlmZsOpcmVudGVcbiAgICBjb25zdCBuZXdNb2NrRm4gPSBqZXN0LmZuKCk7XG4gICAgcmVyZW5kZXIoeyBsb2FkRm46IG5ld01vY2tGbiB9KTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQub25SZWZyZXNoKS5ub3QudG9CZShpbml0aWFsT25SZWZyZXNoKTtcbiAgfSk7XG5cbiAgaXQoJ2RldnJhaXQgbcOpbW9yaXNlciBsZXMgZm9uY3Rpb25zIGRlIG1vZGFsJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0LCByZXJlbmRlciB9ID0gcmVuZGVySG9vaygoKSA9PiBcbiAgICAgIHVzZURhc2hib2FyZFN0YXRlKG1vY2tMb2FkTGFzdEFjdGl2aXRpZXMpXG4gICAgKTtcblxuICAgIGNvbnN0IGluaXRpYWxPcGVuTW9kYWwgPSByZXN1bHQuY3VycmVudC5vcGVuTGV2ZWxQcm9ncmVzc01vZGFsO1xuICAgIGNvbnN0IGluaXRpYWxDbG9zZU1vZGFsID0gcmVzdWx0LmN1cnJlbnQuY2xvc2VMZXZlbFByb2dyZXNzTW9kYWw7XG5cbiAgICAvLyBSZXJlbmRlciAtIGxlcyBmb25jdGlvbnMgZGV2cmFpZW50IHJlc3RlciBsZXMgbcOqbWVzXG4gICAgcmVyZW5kZXIoKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQub3BlbkxldmVsUHJvZ3Jlc3NNb2RhbCkudG9CZShpbml0aWFsT3Blbk1vZGFsKTtcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2xvc2VMZXZlbFByb2dyZXNzTW9kYWwpLnRvQmUoaW5pdGlhbENsb3NlTW9kYWwpO1xuICB9KTtcblxuICBpdCgnZGV2cmFpdCBwZXJtZXR0cmUgcGx1c2lldXJzIHJlZnJlc2ggc2ltdWx0YW7DqXMgc2FucyBjb25mbGl0JywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCByZXNvbHZlRmlyc3QsIHJlc29sdmVTZWNvbmQ7XG4gICAgY29uc3QgZmlyc3RDYWxsID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7IHJlc29sdmVGaXJzdCA9IHJlc29sdmU7IH0pO1xuICAgIGNvbnN0IHNlY29uZENhbGwgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsgcmVzb2x2ZVNlY29uZCA9IHJlc29sdmU7IH0pO1xuXG4gICAgbW9ja0xvYWRMYXN0QWN0aXZpdGllc1xuICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoZmlyc3RDYWxsKVxuICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoc2Vjb25kQ2FsbCk7XG5cbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiBcbiAgICAgIHVzZURhc2hib2FyZFN0YXRlKG1vY2tMb2FkTGFzdEFjdGl2aXRpZXMpXG4gICAgKTtcblxuICAgIC8vIETDqW1hcnJlciBkZXV4IHJlZnJlc2ggZW4gcGFyYWxsw6hsZVxuICAgIGNvbnN0IGZpcnN0UmVmcmVzaCA9IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5vblJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNlY29uZFJlZnJlc2ggPSBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQub25SZWZyZXNoKCk7XG4gICAgfSk7XG5cbiAgICAvLyBMZXMgZGV1eCBkZXZyYWllbnQgw6p0cmUgZW4gY291cnNcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQucmVmcmVzaGluZykudG9CZSh0cnVlKTtcblxuICAgIC8vIFLDqXNvdWRyZSBsZSBwcmVtaWVyXG4gICAgcmVzb2x2ZUZpcnN0KCk7XG4gICAgYXdhaXQgZmlyc3RSZWZyZXNoO1xuXG4gICAgLy8gUsOpc291ZHJlIGxlIHNlY29uZFxuICAgIHJlc29sdmVTZWNvbmQoKTtcbiAgICBhd2FpdCBzZWNvbmRSZWZyZXNoO1xuXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnJlZnJlc2hpbmcpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChtb2NrTG9hZExhc3RBY3Rpdml0aWVzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XG4gIH0pO1xuXG4gIGl0KCdkZXZyYWl0IGV4cG9zZXIgdG91dGVzIGxlcyBmb25jdGlvbnMgZXQgw6l0YXRzIG7DqWNlc3NhaXJlcycsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiBcbiAgICAgIHVzZURhc2hib2FyZFN0YXRlKG1vY2tMb2FkTGFzdEFjdGl2aXRpZXMpXG4gICAgKTtcblxuICAgIC8vIMOJdGF0c1xuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQuc2hvd0xldmVsUHJvZ3Jlc3MpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LnJlZnJlc2hpbmcpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LmFjdGl2ZVRhYikudG9CZSgnc3RyaW5nJyk7XG5cbiAgICAvLyBGb25jdGlvbnNcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LnNldFNob3dMZXZlbFByb2dyZXNzKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQub3BlbkxldmVsUHJvZ3Jlc3NNb2RhbCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LmNsb3NlTGV2ZWxQcm9ncmVzc01vZGFsKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQuc2V0QWN0aXZlVGFiKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQub25SZWZyZXNoKS50b0JlKCdmdW5jdGlvbicpO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFBQSxZQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxrQkFBQSxHQUFBRCxPQUFBO0FBRUFFLFFBQVEsQ0FB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