{"version":3,"names":["_react","require","_ProgressCard","_interopRequireDefault","_conversationStats","_jsxRuntime","ConversationProgress","_ref","_ref$levelColor","levelColor","_ref$conversationData","conversationData","_ref$completedScenari","completedScenarios","_ref$conversationHist","conversationHistory","_ref$expanded","expanded","onToggleExpand","onScenarioPress","statsData","useMemo","totalScenarios","calculateTotalScenarios","completedScenariosCount","calculateCompletedScenarios","totalStepsCount","calculateTotalSteps","completedStepsCount","calculateCompletedSteps","completionProgress","Math","round","scenarioProgressData","map","scenario","index","_conversationHistory$","_scenario$steps","_scenario$steps2","_conversationHistory$2","title","completedSteps","id","length","totalSteps","steps","progress","formattedScenarioData","completed","total","jsx","default","subtitle","unit","expandable","categoryData","onCategoryPress","_default","exports"],"sources":["index.js"],"sourcesContent":["// ConversationProgress/index.js - VERSION CORRIGÃ‰E AVEC useMemo\r\n\r\nimport { useMemo } from \"react\";\r\nimport ProgressCard from \"../../../../components/ui/ProgressCard\";\r\nimport {\r\n  calculateTotalScenarios,\r\n  calculateCompletedScenarios,\r\n  calculateTotalSteps,\r\n  calculateCompletedSteps,\r\n} from \"../../../../utils/conversation/conversationStats\";\r\n\r\n/**\r\n * ðŸ“Š ConversationProgress - Version corrigÃ©e avec mÃ©morisation\r\n * âœ… Ã‰vite les boucles infinies avec useMemo\r\n * âœ… Performance optimisÃ©e\r\n * âœ… DÃ©tecte automatiquement la structure des donnÃ©es\r\n */\r\nconst ConversationProgress = ({\r\n  levelColor = \"#5E60CE\",\r\n  conversationData = [],\r\n  completedScenarios = {},\r\n  conversationHistory = {},\r\n  expanded = false,\r\n  onToggleExpand,\r\n  onScenarioPress,\r\n}) => {\r\n  \r\n  // âœ… MÃ‰MORISER les statistiques calculÃ©es\r\n  const statsData = useMemo(() => {\r\n    const totalScenarios = calculateTotalScenarios(conversationData);\r\n    const completedScenariosCount = calculateCompletedScenarios(completedScenarios);\r\n    const totalStepsCount = calculateTotalSteps(conversationData);\r\n    const completedStepsCount = calculateCompletedSteps(conversationHistory);\r\n    \r\n    return {\r\n      totalScenarios,\r\n      completedScenariosCount,\r\n      totalStepsCount,\r\n      completedStepsCount,\r\n      completionProgress: totalStepsCount > 0 ? Math.round((completedStepsCount / totalStepsCount) * 100) : 0,\r\n      scenarioProgressData: conversationData.map((scenario, index) => ({\r\n        title: scenario.title || `ScÃ©nario ${index + 1}`,\r\n        completedSteps: conversationHistory[scenario.id]?.length || 0,\r\n        totalSteps: scenario.steps?.length || 1,\r\n        progress: scenario.steps?.length > 0 \r\n          ? Math.round(((conversationHistory[scenario.id]?.length || 0) / scenario.steps.length) * 100)\r\n          : 0\r\n      }))\r\n    };\r\n  }, [conversationData, completedScenarios, conversationHistory]);\r\n\r\n  // âœ… MÃ‰MORISER la transformation des donnÃ©es\r\n  const formattedScenarioData = useMemo(() => {\r\n    return statsData.scenarioProgressData.map((scenario) => ({\r\n      title: scenario.title,\r\n      completed: scenario.completedSteps,\r\n      total: scenario.totalSteps,\r\n      progress: scenario.progress,\r\n    }));\r\n  }, [statsData.scenarioProgressData]);\r\n\r\n  return (\r\n    <ProgressCard\r\n      title=\"Progression\"\r\n      subtitle={`${statsData.completedScenariosCount}/${statsData.totalScenarios} scÃ©narios â€¢ ${statsData.completedStepsCount}/${statsData.totalStepsCount} Ã©tapes`}\r\n      progress={statsData.completionProgress}\r\n      completed={statsData.completedStepsCount}\r\n      total={statsData.totalStepsCount}\r\n      unit=\"Ã©tapes\"\r\n      levelColor={levelColor}\r\n      expandable\r\n      expanded={expanded}\r\n      onToggleExpand={onToggleExpand}\r\n      categoryData={formattedScenarioData}\r\n      onCategoryPress={onScenarioPress}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ConversationProgress;"],"mappings":"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","ignoreList":[]}