d54f8d07e5b5604f170be54f38063615
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useFrameCallback = useFrameCallback;
var _react = require("react");
var _FrameCallbackRegistryJS = _interopRequireDefault(require("../frameCallback/FrameCallbackRegistryJS"));
var frameCallbackRegistry = new _FrameCallbackRegistryJS.default();
function useFrameCallback(callback) {
  var autostart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  var ref = (0, _react.useRef)({
    setActive: function setActive(isActive) {
      frameCallbackRegistry.manageStateFrameCallback(ref.current.callbackId, isActive);
      ref.current.isActive = isActive;
    },
    isActive: autostart,
    callbackId: -1
  });
  (0, _react.useEffect)(function () {
    ref.current.callbackId = frameCallbackRegistry.registerFrameCallback(callback);
    var memoizedFrameCallback = ref.current;
    ref.current.setActive(ref.current.isActive);
    return function () {
      frameCallbackRegistry.unregisterFrameCallback(memoizedFrameCallback.callbackId);
      memoizedFrameCallback.callbackId = -1;
    };
  }, [callback, autostart]);
  return ref.current;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwidXNlRnJhbWVDYWxsYmFjayIsIl9yZWFjdCIsIl9GcmFtZUNhbGxiYWNrUmVnaXN0cnlKUyIsImZyYW1lQ2FsbGJhY2tSZWdpc3RyeSIsIkZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTIiwiY2FsbGJhY2siLCJhdXRvc3RhcnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJyZWYiLCJ1c2VSZWYiLCJzZXRBY3RpdmUiLCJpc0FjdGl2ZSIsIm1hbmFnZVN0YXRlRnJhbWVDYWxsYmFjayIsImN1cnJlbnQiLCJjYWxsYmFja0lkIiwidXNlRWZmZWN0IiwicmVnaXN0ZXJGcmFtZUNhbGxiYWNrIiwibWVtb2l6ZWRGcmFtZUNhbGxiYWNrIiwidW5yZWdpc3RlckZyYW1lQ2FsbGJhY2siXSwic291cmNlcyI6WyJ1c2VGcmFtZUNhbGxiYWNrLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTIGZyb20gJy4uL2ZyYW1lQ2FsbGJhY2svRnJhbWVDYWxsYmFja1JlZ2lzdHJ5SlMnO1xuaW1wb3J0IHR5cGUgeyBGcmFtZUluZm8gfSBmcm9tICcuLi9mcmFtZUNhbGxiYWNrL0ZyYW1lQ2FsbGJhY2tSZWdpc3RyeVVJJztcblxuLyoqXG4gKiBAcGFyYW0gc2V0QWN0aXZlIC0gQSBmdW5jdGlvbiB0aGF0IGxldHMgeW91IHN0YXJ0IHRoZSBmcmFtZSBjYWxsYmFjayBvciBzdG9wXG4gKiAgIGl0IGZyb20gcnVubmluZy5cbiAqIEBwYXJhbSBpc0FjdGl2ZSAtIEEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgYSBjYWxsYmFjayBpcyBydW5uaW5nLlxuICogQHBhcmFtIGNhbGxiYWNrSWQgLSBBIG51bWJlciBpbmRpY2F0aW5nIGEgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIGZyYW1lXG4gKiAgIGNhbGxiYWNrLlxuICogQHNlZSBodHRwczovL2RvY3Muc3dtYW5zaW9uLmNvbS9yZWFjdC1uYXRpdmUtcmVhbmltYXRlZC9kb2NzL2FkdmFuY2VkL3VzZUZyYW1lQ2FsbGJhY2sjcmV0dXJuc1xuICovXG5leHBvcnQgdHlwZSBGcmFtZUNhbGxiYWNrID0ge1xuICBzZXRBY3RpdmU6IChpc0FjdGl2ZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIGNhbGxiYWNrSWQ6IG51bWJlcjtcbn07XG5jb25zdCBmcmFtZUNhbGxiYWNrUmVnaXN0cnkgPSBuZXcgRnJhbWVDYWxsYmFja1JlZ2lzdHJ5SlMoKTtcblxuLyoqXG4gKiBMZXRzIHlvdSBydW4gYSBmdW5jdGlvbiBvbiBldmVyeSBmcmFtZSB1cGRhdGUuXG4gKlxuICogQHBhcmFtIGNhbGxiYWNrIC0gQSBmdW5jdGlvbiBleGVjdXRlZCBvbiBldmVyeSBmcmFtZSB1cGRhdGUuXG4gKiBAcGFyYW0gYXV0b3N0YXJ0IC0gV2hldGhlciB0aGUgY2FsbGJhY2sgc2hvdWxkIHN0YXJ0IGF1dG9tYXRpY2FsbHkuIERlZmF1bHRzXG4gKiAgIHRvIGB0cnVlYC5cbiAqIEByZXR1cm5zIEEgZnJhbWUgY2FsbGJhY2sgb2JqZWN0IC0ge0BsaW5rIEZyYW1lQ2FsbGJhY2t9LlxuICogQHNlZSBodHRwczovL2RvY3Muc3dtYW5zaW9uLmNvbS9yZWFjdC1uYXRpdmUtcmVhbmltYXRlZC9kb2NzL2FkdmFuY2VkL3VzZUZyYW1lQ2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZyYW1lQ2FsbGJhY2soXG4gIGNhbGxiYWNrOiAoZnJhbWVJbmZvOiBGcmFtZUluZm8pID0+IHZvaWQsXG4gIGF1dG9zdGFydCA9IHRydWVcbik6IEZyYW1lQ2FsbGJhY2sge1xuICBjb25zdCByZWYgPSB1c2VSZWY8RnJhbWVDYWxsYmFjaz4oe1xuICAgIHNldEFjdGl2ZTogKGlzQWN0aXZlOiBib29sZWFuKSA9PiB7XG4gICAgICBmcmFtZUNhbGxiYWNrUmVnaXN0cnkubWFuYWdlU3RhdGVGcmFtZUNhbGxiYWNrKFxuICAgICAgICByZWYuY3VycmVudC5jYWxsYmFja0lkLFxuICAgICAgICBpc0FjdGl2ZVxuICAgICAgKTtcbiAgICAgIHJlZi5jdXJyZW50LmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfSxcbiAgICBpc0FjdGl2ZTogYXV0b3N0YXJ0LFxuICAgIGNhbGxiYWNrSWQ6IC0xLFxuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlZi5jdXJyZW50LmNhbGxiYWNrSWQgPVxuICAgICAgZnJhbWVDYWxsYmFja1JlZ2lzdHJ5LnJlZ2lzdGVyRnJhbWVDYWxsYmFjayhjYWxsYmFjayk7XG4gICAgY29uc3QgbWVtb2l6ZWRGcmFtZUNhbGxiYWNrID0gcmVmLmN1cnJlbnQ7XG4gICAgcmVmLmN1cnJlbnQuc2V0QWN0aXZlKHJlZi5jdXJyZW50LmlzQWN0aXZlKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBmcmFtZUNhbGxiYWNrUmVnaXN0cnkudW5yZWdpc3RlckZyYW1lQ2FsbGJhY2soXG4gICAgICAgIG1lbW9pemVkRnJhbWVDYWxsYmFjay5jYWxsYmFja0lkXG4gICAgICApO1xuICAgICAgbWVtb2l6ZWRGcmFtZUNhbGxiYWNrLmNhbGxiYWNrSWQgPSAtMTtcbiAgICB9O1xuICB9LCBbY2FsbGJhY2ssIGF1dG9zdGFydF0pO1xuXG4gIHJldHVybiByZWYuY3VycmVudDtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQyxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUFDLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLGdCQUFBLEdBQUFBLGdCQUFBO0FBQ2IsSUFBQUMsTUFBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sd0JBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQWdCQSxJQUFNUSxxQkFBcUIsR0FBRyxJQUFJQyxnQ0FBdUIsQ0FBQyxDQUFDO0FBV3BELFNBQVNKLGdCQUFnQkEsQ0FDOUJLLFFBQXdDLEVBRXpCO0VBQUEsSUFEZkMsU0FBUyxHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxJQUFJO0VBRWhCLElBQU1HLEdBQUcsR0FBRyxJQUFBQyxhQUFNLEVBQWdCO0lBQ2hDQyxTQUFTLEVBQUUsU0FBWEEsU0FBU0EsQ0FBR0MsUUFBaUIsRUFBSztNQUNoQ1YscUJBQXFCLENBQUNXLHdCQUF3QixDQUM1Q0osR0FBRyxDQUFDSyxPQUFPLENBQUNDLFVBQVUsRUFDdEJILFFBQ0YsQ0FBQztNQUNESCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0YsUUFBUSxHQUFHQSxRQUFRO0lBQ2pDLENBQUM7SUFDREEsUUFBUSxFQUFFUCxTQUFTO0lBQ25CVSxVQUFVLEVBQUUsQ0FBQztFQUNmLENBQUMsQ0FBQztFQUVGLElBQUFDLGdCQUFTLEVBQUMsWUFBTTtJQUNkUCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsVUFBVSxHQUNwQmIscUJBQXFCLENBQUNlLHFCQUFxQixDQUFDYixRQUFRLENBQUM7SUFDdkQsSUFBTWMscUJBQXFCLEdBQUdULEdBQUcsQ0FBQ0ssT0FBTztJQUN6Q0wsR0FBRyxDQUFDSyxPQUFPLENBQUNILFNBQVMsQ0FBQ0YsR0FBRyxDQUFDSyxPQUFPLENBQUNGLFFBQVEsQ0FBQztJQUUzQyxPQUFPLFlBQU07TUFDWFYscUJBQXFCLENBQUNpQix1QkFBdUIsQ0FDM0NELHFCQUFxQixDQUFDSCxVQUN4QixDQUFDO01BQ0RHLHFCQUFxQixDQUFDSCxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7RUFDSCxDQUFDLEVBQUUsQ0FBQ1gsUUFBUSxFQUFFQyxTQUFTLENBQUMsQ0FBQztFQUV6QixPQUFPSSxHQUFHLENBQUNLLE9BQU87QUFDcEIiLCJpZ25vcmVMaXN0IjpbXX0=