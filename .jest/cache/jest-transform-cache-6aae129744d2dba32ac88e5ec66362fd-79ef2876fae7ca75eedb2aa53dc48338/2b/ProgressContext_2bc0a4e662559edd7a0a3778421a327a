4090ba5c3d1062fff9e06776515b18f8
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useProgressWrite = exports.useProgressRead = exports.useProgress = exports.default = exports.ProgressWriteContext = exports.ProgressReadContext = exports.ProgressProvider = exports.ProgressContext = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _constants = require("../utils/constants");
var _propTypes = _interopRequireDefault(require("prop-types"));
var _jsxRuntime = require("react/jsx-runtime");
var ProgressContext = exports.ProgressContext = (0, _react.createContext)();
var ProgressReadContext = exports.ProgressReadContext = (0, _react.createContext)();
var ProgressWriteContext = exports.ProgressWriteContext = (0, _react.createContext)();
var createInitialProgress = function createInitialProgress() {
  return {
    levels: {
      '1': {
        completed: 0,
        total: 100
      },
      '2': {
        completed: 0,
        total: 100
      },
      '3': {
        completed: 0,
        total: 100
      },
      '4': {
        completed: 0,
        total: 100
      },
      '5': {
        completed: 0,
        total: 100
      },
      '6': {
        completed: 0,
        total: 100
      },
      'bonus': {
        completed: 0,
        total: 100
      }
    },
    exercises: {
      vocabulary: {
        '1': {
          completed: 0,
          total: 100
        },
        '2': {
          completed: 0,
          total: 100
        },
        '3': {
          completed: 0,
          total: 100
        },
        '4': {
          completed: 0,
          total: 100
        },
        '5': {
          completed: 0,
          total: 100
        },
        '6': {
          completed: 0,
          total: 100
        },
        'bonus': {
          completed: 0,
          total: 100
        }
      },
      phrases: {
        '1': {
          completed: 0,
          total: 100
        },
        '2': {
          completed: 0,
          total: 100
        },
        '3': {
          completed: 0,
          total: 100
        },
        '4': {
          completed: 0,
          total: 100
        },
        '5': {
          completed: 0,
          total: 100
        },
        '6': {
          completed: 0,
          total: 100
        },
        'bonus': {
          completed: 0,
          total: 100
        }
      },
      grammar: {
        '1': {
          completed: 0,
          total: 100
        },
        '2': {
          completed: 0,
          total: 100
        },
        '3': {
          completed: 0,
          total: 100
        },
        '4': {
          completed: 0,
          total: 100
        },
        '5': {
          completed: 0,
          total: 100
        },
        '6': {
          completed: 0,
          total: 100
        }
      }
    },
    stats: {
      streak: 0,
      totalTimeSpent: 0,
      correctAnswers: 0,
      totalAnswers: 0,
      exercisesCompleted: 0,
      lastLogin: null
    },
    lastActivity: {
      type: null,
      level: null,
      timestamp: null
    }
  };
};
var ProgressProvider = exports.ProgressProvider = function ProgressProvider(_ref) {
  var children = _ref.children;
  var _useState = (0, _react.useState)(createInitialProgress()),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    progress = _useState2[0],
    setProgress = _useState2[1];
  var _useState3 = (0, _react.useState)(true),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    isLoading = _useState4[0],
    setIsLoading = _useState4[1];
  var saveTimeoutRef = (0, _react.useRef)(null);
  var isInitialLoad = (0, _react.useRef)(true);
  (0, _react.useEffect)(function () {
    var loadProgress = function () {
      var _ref2 = (0, _asyncToGenerator2.default)(function* () {
        try {
          var stored = yield _asyncStorage.default.getItem(_constants.STORAGE_KEYS.USER_PROGRESS);
          if (stored) {
            var parsed = JSON.parse(stored);
            setProgress(parsed);
          }
        } catch (error) {
          console.error('Erreur chargement progression:', error);
        } finally {
          setIsLoading(false);
          isInitialLoad.current = false;
        }
      });
      return function loadProgress() {
        return _ref2.apply(this, arguments);
      };
    }();
    loadProgress();
  }, []);
  (0, _react.useEffect)(function () {
    if (isLoading || isInitialLoad.current) {
      return;
    }
    if (saveTimeoutRef.current) {
      clearTimeout(saveTimeoutRef.current);
    }
    saveTimeoutRef.current = setTimeout((0, _asyncToGenerator2.default)(function* () {
      try {
        yield _asyncStorage.default.setItem(_constants.STORAGE_KEYS.USER_PROGRESS, JSON.stringify(progress));
      } catch (error) {
        console.error('Erreur sauvegarde progression:', error);
      }
    }), 500);
    return function () {
      if (saveTimeoutRef.current) {
        clearTimeout(saveTimeoutRef.current);
      }
    };
  }, [progress, isLoading]);
  var updateExerciseProgress = (0, _react.useCallback)(function (exerciseType, level, completed) {
    setProgress(function (prev) {
      var newProgress = Object.assign({}, prev);
      if (!newProgress.exercises[exerciseType]) {
        newProgress.exercises[exerciseType] = {};
      }
      if (!newProgress.exercises[exerciseType][level]) {
        newProgress.exercises[exerciseType][level] = {
          completed: 0,
          total: 100
        };
      }
      newProgress.exercises[exerciseType][level].completed = Math.min(Math.max(0, completed), 100);
      var levelExercises = Object.keys(newProgress.exercises).map(function (type) {
        var _newProgress$exercise;
        return ((_newProgress$exercise = newProgress.exercises[type][level]) == null ? void 0 : _newProgress$exercise.completed) || 0;
      }).filter(function (val) {
        return val > 0;
      });
      if (levelExercises.length > 0) {
        var averageProgress = levelExercises.reduce(function (sum, val) {
          return sum + val;
        }, 0) / levelExercises.length;
        newProgress.levels[level].completed = Math.round(averageProgress);
      }
      newProgress.lastActivity = {
        type: exerciseType,
        level: level,
        timestamp: new Date().toISOString()
      };
      return newProgress;
    });
  }, []);
  var updateStats = (0, _react.useCallback)(function (newStats) {
    setProgress(function (prev) {
      return Object.assign({}, prev, {
        stats: Object.assign({}, prev.stats, newStats)
      });
    });
  }, []);
  var calculateGlobalProgress = (0, _react.useCallback)(function () {
    var levels = Object.values(progress.levels);
    if (levels.length === 0) return 0;
    var total = levels.reduce(function (sum, level) {
      return sum + level.completed;
    }, 0);
    return Math.round(total / levels.length);
  }, [progress.levels]);
  var calculateLevelProgress = (0, _react.useCallback)(function (level) {
    var _progress$levels$leve;
    return ((_progress$levels$leve = progress.levels[level]) == null ? void 0 : _progress$levels$leve.completed) || 0;
  }, [progress.levels]);
  var resetProgress = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      yield _asyncStorage.default.removeItem(_constants.STORAGE_KEYS.USER_PROGRESS);
      setProgress(createInitialProgress());
      return true;
    } catch (error) {
      console.error('Erreur reset progression:', error);
      return false;
    }
  }), []);
  var contextValue = (0, _react.useMemo)(function () {
    return {
      progress: progress,
      isLoading: isLoading,
      updateExerciseProgress: updateExerciseProgress,
      updateStats: updateStats,
      calculateGlobalProgress: calculateGlobalProgress,
      calculateLevelProgress: calculateLevelProgress,
      resetProgress: resetProgress
    };
  }, [progress, isLoading, updateExerciseProgress, updateStats, calculateGlobalProgress, calculateLevelProgress, resetProgress]);
  var readValue = (0, _react.useMemo)(function () {
    return {
      progress: progress,
      isLoading: isLoading,
      calculateGlobalProgress: calculateGlobalProgress,
      calculateLevelProgress: calculateLevelProgress
    };
  }, [progress, isLoading, calculateGlobalProgress, calculateLevelProgress]);
  var writeValue = (0, _react.useMemo)(function () {
    return {
      updateExerciseProgress: updateExerciseProgress,
      updateStats: updateStats,
      resetProgress: resetProgress
    };
  }, [updateExerciseProgress, updateStats, resetProgress]);
  return (0, _jsxRuntime.jsx)(ProgressReadContext.Provider, {
    value: readValue,
    children: (0, _jsxRuntime.jsx)(ProgressWriteContext.Provider, {
      value: writeValue,
      children: (0, _jsxRuntime.jsx)(ProgressContext.Provider, {
        value: contextValue,
        children: children
      })
    })
  });
};
var useProgress = exports.useProgress = function useProgress() {
  var context = (0, _react.useContext)(ProgressContext);
  if (!context) {
    throw new Error('useProgress must be used within a ProgressProvider');
  }
  return context;
};
var useProgressRead = exports.useProgressRead = function useProgressRead() {
  var context = (0, _react.useContext)(ProgressReadContext);
  if (!context) {
    throw new Error('useProgressRead must be used within a ProgressProvider');
  }
  return context;
};
var useProgressWrite = exports.useProgressWrite = function useProgressWrite() {
  var context = (0, _react.useContext)(ProgressWriteContext);
  if (!context) {
    throw new Error('useProgressWrite must be used within a ProgressProvider');
  }
  return context;
};
ProgressContext.propTypes = {
  children: _propTypes.default.any.isRequired
};
var _default = exports.default = ProgressContext;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29uc3RhbnRzIiwiX3Byb3BUeXBlcyIsIl9qc3hSdW50aW1lIiwiUHJvZ3Jlc3NDb250ZXh0IiwiZXhwb3J0cyIsImNyZWF0ZUNvbnRleHQiLCJQcm9ncmVzc1JlYWRDb250ZXh0IiwiUHJvZ3Jlc3NXcml0ZUNvbnRleHQiLCJjcmVhdGVJbml0aWFsUHJvZ3Jlc3MiLCJsZXZlbHMiLCJjb21wbGV0ZWQiLCJ0b3RhbCIsImV4ZXJjaXNlcyIsInZvY2FidWxhcnkiLCJwaHJhc2VzIiwiZ3JhbW1hciIsInN0YXRzIiwic3RyZWFrIiwidG90YWxUaW1lU3BlbnQiLCJjb3JyZWN0QW5zd2VycyIsInRvdGFsQW5zd2VycyIsImV4ZXJjaXNlc0NvbXBsZXRlZCIsImxhc3RMb2dpbiIsImxhc3RBY3Rpdml0eSIsInR5cGUiLCJsZXZlbCIsInRpbWVzdGFtcCIsIlByb2dyZXNzUHJvdmlkZXIiLCJfcmVmIiwiY2hpbGRyZW4iLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsIl91c2VTdGF0ZTIiLCJfc2xpY2VkVG9BcnJheTIiLCJkZWZhdWx0IiwicHJvZ3Jlc3MiLCJzZXRQcm9ncmVzcyIsIl91c2VTdGF0ZTMiLCJfdXNlU3RhdGU0IiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2F2ZVRpbWVvdXRSZWYiLCJ1c2VSZWYiLCJpc0luaXRpYWxMb2FkIiwidXNlRWZmZWN0IiwibG9hZFByb2dyZXNzIiwiX3JlZjIiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJzdG9yZWQiLCJBc3luY1N0b3JhZ2UiLCJnZXRJdGVtIiwiU1RPUkFHRV9LRVlTIiwiVVNFUl9QUk9HUkVTUyIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsImN1cnJlbnQiLCJhcHBseSIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidXBkYXRlRXhlcmNpc2VQcm9ncmVzcyIsInVzZUNhbGxiYWNrIiwiZXhlcmNpc2VUeXBlIiwicHJldiIsIm5ld1Byb2dyZXNzIiwiT2JqZWN0IiwiYXNzaWduIiwiTWF0aCIsIm1pbiIsIm1heCIsImxldmVsRXhlcmNpc2VzIiwia2V5cyIsIm1hcCIsIl9uZXdQcm9ncmVzcyRleGVyY2lzZSIsImZpbHRlciIsInZhbCIsImxlbmd0aCIsImF2ZXJhZ2VQcm9ncmVzcyIsInJlZHVjZSIsInN1bSIsInJvdW5kIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlU3RhdHMiLCJuZXdTdGF0cyIsImNhbGN1bGF0ZUdsb2JhbFByb2dyZXNzIiwidmFsdWVzIiwiY2FsY3VsYXRlTGV2ZWxQcm9ncmVzcyIsIl9wcm9ncmVzcyRsZXZlbHMkbGV2ZSIsInJlc2V0UHJvZ3Jlc3MiLCJyZW1vdmVJdGVtIiwiY29udGV4dFZhbHVlIiwidXNlTWVtbyIsInJlYWRWYWx1ZSIsIndyaXRlVmFsdWUiLCJqc3giLCJQcm92aWRlciIsInZhbHVlIiwidXNlUHJvZ3Jlc3MiLCJjb250ZXh0IiwidXNlQ29udGV4dCIsIkVycm9yIiwidXNlUHJvZ3Jlc3NSZWFkIiwidXNlUHJvZ3Jlc3NXcml0ZSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImFueSIsImlzUmVxdWlyZWQiLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbIlByb2dyZXNzQ29udGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29udGV4dHMvUHJvZ3Jlc3NDb250ZXh0LmpzIC0gVkVSU0lPTiBDT1JSSUfDiUUgU0FOUyBCT1VDTEVcclxuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ29udGV4dCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEFzeW5jU3RvcmFnZSBmcm9tICdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZSc7XHJcbmltcG9ydCB7IFNUT1JBR0VfS0VZUyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7aW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxyXG5cclxuLy8gQ3LDqWVyIGxlIGNvbnRleHRlXHJcbmV4cG9ydCBjb25zdCBQcm9ncmVzc0NvbnRleHQgPSBjcmVhdGVDb250ZXh0KCk7XHJcbmV4cG9ydCBjb25zdCBQcm9ncmVzc1JlYWRDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xyXG5leHBvcnQgY29uc3QgUHJvZ3Jlc3NXcml0ZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KCk7XHJcblxyXG4vLyBEb25uw6llcyBpbml0aWFsZXMgc2ltcGxlc1xyXG5jb25zdCBjcmVhdGVJbml0aWFsUHJvZ3Jlc3MgPSAoKSA9PiAoe1xyXG4gIC8vIFByb2dyZXNzaW9uIHBhciBuaXZlYXUgKDAtMTAwJSlcclxuICBsZXZlbHM6IHtcclxuICAgICcxJzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICcyJzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICczJzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICc0JzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICc1JzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICc2JzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICdib251cyc6IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH0sXHJcbiAgfSxcclxuICBcclxuICAvLyBQcm9ncmVzc2lvbiBwYXIgZXhlcmNpY2UgZXQgbml2ZWF1XHJcbiAgZXhlcmNpc2VzOiB7XHJcbiAgICB2b2NhYnVsYXJ5OiB7XHJcbiAgICAgICcxJzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICAgJzInOiB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9LFxyXG4gICAgICAnMyc6IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH0sXHJcbiAgICAgICc0JzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICAgJzUnOiB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9LFxyXG4gICAgICAnNic6IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH0sXHJcbiAgICAgICdib251cyc6IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH0sXHJcbiAgICB9LFxyXG4gICAgcGhyYXNlczoge1xyXG4gICAgICAnMSc6IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH0sXHJcbiAgICAgICcyJzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICAgJzMnOiB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9LFxyXG4gICAgICAnNCc6IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH0sXHJcbiAgICAgICc1JzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICAgJzYnOiB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9LFxyXG4gICAgICAnYm9udXMnOiB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9LFxyXG4gICAgfSxcclxuICAgIGdyYW1tYXI6IHtcclxuICAgICAgJzEnOiB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9LFxyXG4gICAgICAnMic6IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH0sXHJcbiAgICAgICczJzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgICAgJzQnOiB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9LFxyXG4gICAgICAnNSc6IHsgY29tcGxldGVkOiAwLCB0b3RhbDogMTAwIH0sXHJcbiAgICAgICc2JzogeyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAxMDAgfSxcclxuICAgIH0sXHJcbiAgICAvLyAuLi4gYXV0cmVzIGV4ZXJjaWNlcyBwZXV2ZW50IMOqdHJlIGFqb3V0w6lzIGF1IGJlc29pblxyXG4gIH0sXHJcblxyXG4gIC8vIFN0YXRzIGdsb2JhbGVzXHJcbiAgc3RhdHM6IHtcclxuICAgIHN0cmVhazogMCxcclxuICAgIHRvdGFsVGltZVNwZW50OiAwLFxyXG4gICAgY29ycmVjdEFuc3dlcnM6IDAsXHJcbiAgICB0b3RhbEFuc3dlcnM6IDAsXHJcbiAgICBleGVyY2lzZXNDb21wbGV0ZWQ6IDAsXHJcbiAgICBsYXN0TG9naW46IG51bGwsXHJcbiAgfSxcclxuXHJcbiAgLy8gRGVybmnDqHJlIGFjdGl2aXTDqVxyXG4gIGxhc3RBY3Rpdml0eToge1xyXG4gICAgdHlwZTogbnVsbCxcclxuICAgIGxldmVsOiBudWxsLFxyXG4gICAgdGltZXN0YW1wOiBudWxsLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gRm91cm5pc3NldXIgZHUgY29udGV4dGVcclxuZXhwb3J0IGNvbnN0IFByb2dyZXNzUHJvdmlkZXIgPSAoeyBjaGlsZHJlbiB9KSA9PiB7XHJcbiAgY29uc3QgW3Byb2dyZXNzLCBzZXRQcm9ncmVzc10gPSB1c2VTdGF0ZShjcmVhdGVJbml0aWFsUHJvZ3Jlc3MoKSk7XHJcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIFxyXG4gIC8vIOKchSBDT1JSRUNUSU9OIDogUmVmIHBvdXIgw6l2aXRlciBsYSBib3VjbGUgZGUgc2F1dmVnYXJkZVxyXG4gIGNvbnN0IHNhdmVUaW1lb3V0UmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IGlzSW5pdGlhbExvYWQgPSB1c2VSZWYodHJ1ZSk7XHJcblxyXG4gIC8vID09PT09PT09PT0gQ0hBUkdFTUVOVCBJTklUSUFMID09PT09PT09PT1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgbG9hZFByb2dyZXNzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZCA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZUy5VU0VSX1BST0dSRVNTKTtcclxuICAgICAgICBpZiAoc3RvcmVkKSB7XHJcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgICBzZXRQcm9ncmVzcyhwYXJzZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgY2hhcmdlbWVudCBwcm9ncmVzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBpc0luaXRpYWxMb2FkLmN1cnJlbnQgPSBmYWxzZTsgLy8g4pyFIE1hcnF1ZXIgcXVlIGxlIGNoYXJnZW1lbnQgaW5pdGlhbCBlc3QgZmluaVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxvYWRQcm9ncmVzcygpO1xyXG4gIH0sIFtdKTsgLy8g4pyFIENPUlJJR8OJIDogQXVjdW5lIGTDqXBlbmRhbmNlXHJcblxyXG4gIC8vID09PT09PT09PT0gU0FVVkVHQVJERSBBVVRPIENPUlJJR8OJRSA9PT09PT09PT09XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIOKchSBDT1JSRUNUSU9OIDogTmUgcGFzIHNhdXZlZ2FyZGVyIHBlbmRhbnQgbGUgY2hhcmdlbWVudCBpbml0aWFsXHJcbiAgICBpZiAoaXNMb2FkaW5nIHx8IGlzSW5pdGlhbExvYWQuY3VycmVudCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgdGltZW91dFxyXG4gICAgaWYgKHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCBuZXcgdGltZW91dCBmb3IgZGVib3VuY2VkIHNhdmVcclxuICAgIHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBBc3luY1N0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWVMuVVNFUl9QUk9HUkVTUywgSlNPTi5zdHJpbmdpZnkocHJvZ3Jlc3MpKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgc2F1dmVnYXJkZSBwcm9ncmVzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0sIDUwMCk7XHJcblxyXG4gICAgLy8gQ2xlYW51cCB0aW1lb3V0XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAoc2F2ZVRpbWVvdXRSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dChzYXZlVGltZW91dFJlZi5jdXJyZW50KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBTdXBwcmVzc2lvbiBkdSByZXR1cm4gbnVsbCAoYXVjdW4gcmV0dXJuIGF0dGVuZHUpXHJcbiAgICB9O1xyXG4gIH0sIFtwcm9ncmVzcywgaXNMb2FkaW5nXSk7IC8vIOKchSBJTVBPUlRBTlQgOiBJbmNsdXJlIGlzTG9hZGluZyBwb3VyIMOpdml0ZXIgc2F1dmVnYXJkZSBwZW5kYW50IGNoYXJnZW1lbnRcclxuXHJcbiAgLy8gPT09PT09PT09PSBNw4lUSE9ERVMgTcOJTU9SSVPDiUVTID09PT09PT09PT1cclxuXHJcbiAgLy8g4pyFIENPUlJFQ1RJT04gOiBNw6ltb3Jpc2VyIHRvdXRlcyBsZXMgZm9uY3Rpb25zXHJcbiAgY29uc3QgdXBkYXRlRXhlcmNpc2VQcm9ncmVzcyA9IHVzZUNhbGxiYWNrKChleGVyY2lzZVR5cGUsIGxldmVsLCBjb21wbGV0ZWQpID0+IHtcclxuICAgIHNldFByb2dyZXNzKHByZXYgPT4ge1xyXG4gICAgICBjb25zdCBuZXdQcm9ncmVzcyA9IHsgLi4ucHJldiB9O1xyXG4gICAgICBcclxuICAgICAgLy8gVsOpcmlmaWVyIHF1ZSBsJ2V4ZXJjaWNlIGV4aXN0ZVxyXG4gICAgICBpZiAoIW5ld1Byb2dyZXNzLmV4ZXJjaXNlc1tleGVyY2lzZVR5cGVdKSB7XHJcbiAgICAgICAgbmV3UHJvZ3Jlc3MuZXhlcmNpc2VzW2V4ZXJjaXNlVHlwZV0gPSB7fTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKCFuZXdQcm9ncmVzcy5leGVyY2lzZXNbZXhlcmNpc2VUeXBlXVtsZXZlbF0pIHtcclxuICAgICAgICBuZXdQcm9ncmVzcy5leGVyY2lzZXNbZXhlcmNpc2VUeXBlXVtsZXZlbF0gPSB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDEwMCB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBNZXR0cmUgw6Agam91ciBsJ2V4ZXJjaWNlXHJcbiAgICAgIG5ld1Byb2dyZXNzLmV4ZXJjaXNlc1tleGVyY2lzZVR5cGVdW2xldmVsXS5jb21wbGV0ZWQgPSBNYXRoLm1pbihNYXRoLm1heCgwLCBjb21wbGV0ZWQpLCAxMDApO1xyXG5cclxuICAgICAgLy8gUmVjYWxjdWxlciBwcm9ncmVzc2lvbiBkdSBuaXZlYXUgKG1veWVubmUgZGVzIGV4ZXJjaWNlcylcclxuICAgICAgY29uc3QgbGV2ZWxFeGVyY2lzZXMgPSBPYmplY3Qua2V5cyhuZXdQcm9ncmVzcy5leGVyY2lzZXMpLm1hcCh0eXBlID0+IFxyXG4gICAgICAgIG5ld1Byb2dyZXNzLmV4ZXJjaXNlc1t0eXBlXVtsZXZlbF0/LmNvbXBsZXRlZCB8fCAwXHJcbiAgICAgICkuZmlsdGVyKHZhbCA9PiB2YWwgPiAwKTtcclxuXHJcbiAgICAgIGlmIChsZXZlbEV4ZXJjaXNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgYXZlcmFnZVByb2dyZXNzID0gbGV2ZWxFeGVyY2lzZXMucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgdmFsLCAwKSAvIGxldmVsRXhlcmNpc2VzLmxlbmd0aDtcclxuICAgICAgICBuZXdQcm9ncmVzcy5sZXZlbHNbbGV2ZWxdLmNvbXBsZXRlZCA9IE1hdGgucm91bmQoYXZlcmFnZVByb2dyZXNzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTWV0dHJlIMOgIGpvdXIgZGVybmnDqHJlIGFjdGl2aXTDqVxyXG4gICAgICBuZXdQcm9ncmVzcy5sYXN0QWN0aXZpdHkgPSB7XHJcbiAgICAgICAgdHlwZTogZXhlcmNpc2VUeXBlLFxyXG4gICAgICAgIGxldmVsLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIG5ld1Byb2dyZXNzO1xyXG4gICAgfSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCB1cGRhdGVTdGF0cyA9IHVzZUNhbGxiYWNrKChuZXdTdGF0cykgPT4ge1xyXG4gICAgc2V0UHJvZ3Jlc3MocHJldiA9PiAoe1xyXG4gICAgICAuLi5wcmV2LFxyXG4gICAgICBzdGF0czogeyAuLi5wcmV2LnN0YXRzLCAuLi5uZXdTdGF0cyB9XHJcbiAgICB9KSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBjYWxjdWxhdGVHbG9iYWxQcm9ncmVzcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnN0IGxldmVscyA9IE9iamVjdC52YWx1ZXMocHJvZ3Jlc3MubGV2ZWxzKTtcclxuICAgIGlmIChsZXZlbHMubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcclxuICAgIFxyXG4gICAgY29uc3QgdG90YWwgPSBsZXZlbHMucmVkdWNlKChzdW0sIGxldmVsKSA9PiBzdW0gKyBsZXZlbC5jb21wbGV0ZWQsIDApO1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQodG90YWwgLyBsZXZlbHMubGVuZ3RoKTtcclxuICB9LCBbcHJvZ3Jlc3MubGV2ZWxzXSk7XHJcblxyXG4gIGNvbnN0IGNhbGN1bGF0ZUxldmVsUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygobGV2ZWwpID0+IHtcclxuICAgIHJldHVybiBwcm9ncmVzcy5sZXZlbHNbbGV2ZWxdPy5jb21wbGV0ZWQgfHwgMDtcclxuICB9LCBbcHJvZ3Jlc3MubGV2ZWxzXSk7XHJcblxyXG4gIGNvbnN0IHJlc2V0UHJvZ3Jlc3MgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBBc3luY1N0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0tFWVMuVVNFUl9QUk9HUkVTUyk7XHJcbiAgICAgIHNldFByb2dyZXNzKGNyZWF0ZUluaXRpYWxQcm9ncmVzcygpKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgcmVzZXQgcHJvZ3Jlc3Npb246JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyA9PT09PT09PT09IPCfmqggQ09SUkVDVElPTiBQUklOQ0lQQUxFIDogVkFMRVVSIE3DiU1PUklTw4lFID09PT09PT09PT1cclxuICBjb25zdCBjb250ZXh0VmFsdWUgPSB1c2VNZW1vKCgpID0+ICh7XHJcbiAgICBwcm9ncmVzcyxcclxuICAgIGlzTG9hZGluZyxcclxuICAgIHVwZGF0ZUV4ZXJjaXNlUHJvZ3Jlc3MsXHJcbiAgICB1cGRhdGVTdGF0cyxcclxuICAgIGNhbGN1bGF0ZUdsb2JhbFByb2dyZXNzLFxyXG4gICAgY2FsY3VsYXRlTGV2ZWxQcm9ncmVzcyxcclxuICAgIHJlc2V0UHJvZ3Jlc3MsXHJcbiAgfSksIFtcclxuICAgIHByb2dyZXNzLCBcclxuICAgIGlzTG9hZGluZywgXHJcbiAgICB1cGRhdGVFeGVyY2lzZVByb2dyZXNzLCBcclxuICAgIHVwZGF0ZVN0YXRzLCBcclxuICAgIGNhbGN1bGF0ZUdsb2JhbFByb2dyZXNzLCBcclxuICAgIGNhbGN1bGF0ZUxldmVsUHJvZ3Jlc3MsIFxyXG4gICAgcmVzZXRQcm9ncmVzc1xyXG4gIF0pO1xyXG5cclxuICAvLyBEw6ljb3VwYWdlIHJlYWQvd3JpdGUgKG5vbi1ydXB0dXJhbnQpOiBub3V2ZWF1eCBjb250ZXh0ZXMgcG91ciBzw6lwYXJlciBsZXMgcmVzcG9uc2FiaWxpdMOpc1xyXG4gIGNvbnN0IHJlYWRWYWx1ZSA9IHVzZU1lbW8oKCkgPT4gKHtcclxuICAgIHByb2dyZXNzLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgY2FsY3VsYXRlR2xvYmFsUHJvZ3Jlc3MsXHJcbiAgICBjYWxjdWxhdGVMZXZlbFByb2dyZXNzLFxyXG4gIH0pLCBbcHJvZ3Jlc3MsIGlzTG9hZGluZywgY2FsY3VsYXRlR2xvYmFsUHJvZ3Jlc3MsIGNhbGN1bGF0ZUxldmVsUHJvZ3Jlc3NdKTtcclxuXHJcbiAgY29uc3Qgd3JpdGVWYWx1ZSA9IHVzZU1lbW8oKCkgPT4gKHtcclxuICAgIHVwZGF0ZUV4ZXJjaXNlUHJvZ3Jlc3MsXHJcbiAgICB1cGRhdGVTdGF0cyxcclxuICAgIHJlc2V0UHJvZ3Jlc3MsXHJcbiAgfSksIFt1cGRhdGVFeGVyY2lzZVByb2dyZXNzLCB1cGRhdGVTdGF0cywgcmVzZXRQcm9ncmVzc10pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFByb2dyZXNzUmVhZENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3JlYWRWYWx1ZX0+XHJcbiAgICAgIDxQcm9ncmVzc1dyaXRlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17d3JpdGVWYWx1ZX0+XHJcbiAgICAgICAgPFByb2dyZXNzQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dFZhbHVlfT5cclxuICAgICAgICAgIHtjaGlsZHJlbn1cclxuICAgICAgICA8L1Byb2dyZXNzQ29udGV4dC5Qcm92aWRlcj5cclxuICAgICAgPC9Qcm9ncmVzc1dyaXRlQ29udGV4dC5Qcm92aWRlcj5cclxuICAgIDwvUHJvZ3Jlc3NSZWFkQ29udGV4dC5Qcm92aWRlcj5cclxuICApO1xyXG59O1xyXG5cclxuLy8gSG9vayBwb3VyIHV0aWxpc2VyIGxlIGNvbnRleHRlXHJcbmV4cG9ydCBjb25zdCB1c2VQcm9ncmVzcyA9ICgpID0+IHtcclxuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChQcm9ncmVzc0NvbnRleHQpO1xyXG4gIGlmICghY29udGV4dCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VQcm9ncmVzcyBtdXN0IGJlIHVzZWQgd2l0aGluIGEgUHJvZ3Jlc3NQcm92aWRlcicpO1xyXG4gIH1cclxuICByZXR1cm4gY29udGV4dDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VQcm9ncmVzc1JlYWQgPSAoKSA9PiB7XHJcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoUHJvZ3Jlc3NSZWFkQ29udGV4dCk7XHJcbiAgaWYgKCFjb250ZXh0KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZVByb2dyZXNzUmVhZCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgUHJvZ3Jlc3NQcm92aWRlcicpO1xyXG4gIH1cclxuICByZXR1cm4gY29udGV4dDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VQcm9ncmVzc1dyaXRlID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFByb2dyZXNzV3JpdGVDb250ZXh0KTtcclxuICBpZiAoIWNvbnRleHQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcigndXNlUHJvZ3Jlc3NXcml0ZSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgUHJvZ3Jlc3NQcm92aWRlcicpO1xyXG4gIH1cclxuICByZXR1cm4gY29udGV4dDtcclxufTtcclxuXHJcblxuUHJvZ3Jlc3NDb250ZXh0LnByb3BUeXBlcyA9IHtcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFByb2dyZXNzQ29udGV4dDsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxVQUFBLEdBQUFILE9BQUE7QUFBa0QsSUFBQUksVUFBQSxHQUFBRixzQkFBQSxDQUFBRixPQUFBO0FBQW1DLElBQUFLLFdBQUEsR0FBQUwsT0FBQTtBQUk5RSxJQUFNTSxlQUFlLEdBQUFDLE9BQUEsQ0FBQUQsZUFBQSxHQUFHLElBQUFFLG9CQUFhLEVBQUMsQ0FBQztBQUN2QyxJQUFNQyxtQkFBbUIsR0FBQUYsT0FBQSxDQUFBRSxtQkFBQSxHQUFHLElBQUFELG9CQUFhLEVBQUMsQ0FBQztBQUMzQyxJQUFNRSxvQkFBb0IsR0FBQUgsT0FBQSxDQUFBRyxvQkFBQSxHQUFHLElBQUFGLG9CQUFhLEVBQUMsQ0FBQztBQUduRCxJQUFNRyxxQkFBcUIsR0FBRyxTQUF4QkEscUJBQXFCQSxDQUFBO0VBQUEsT0FBVTtJQUVuQ0MsTUFBTSxFQUFFO01BQ04sR0FBRyxFQUFFO1FBQUVDLFNBQVMsRUFBRSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFJLENBQUM7TUFDakMsR0FBRyxFQUFFO1FBQUVELFNBQVMsRUFBRSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFJLENBQUM7TUFDakMsR0FBRyxFQUFFO1FBQUVELFNBQVMsRUFBRSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFJLENBQUM7TUFDakMsR0FBRyxFQUFFO1FBQUVELFNBQVMsRUFBRSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFJLENBQUM7TUFDakMsR0FBRyxFQUFFO1FBQUVELFNBQVMsRUFBRSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFJLENBQUM7TUFDakMsR0FBRyxFQUFFO1FBQUVELFNBQVMsRUFBRSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFJLENBQUM7TUFDakMsT0FBTyxFQUFFO1FBQUVELFNBQVMsRUFBRSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFJO0lBQ3RDLENBQUM7SUFHREMsU0FBUyxFQUFFO01BQ1RDLFVBQVUsRUFBRTtRQUNWLEdBQUcsRUFBRTtVQUFFSCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLE9BQU8sRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSTtNQUN0QyxDQUFDO01BQ0RHLE9BQU8sRUFBRTtRQUNQLEdBQUcsRUFBRTtVQUFFSixTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLEdBQUcsRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSSxDQUFDO1FBQ2pDLE9BQU8sRUFBRTtVQUFFRCxTQUFTLEVBQUUsQ0FBQztVQUFFQyxLQUFLLEVBQUU7UUFBSTtNQUN0QyxDQUFDO01BQ0RJLE9B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