e07020f4471eef7fe6b0a40917f4a5d7
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _classPrivateFieldLooseBase2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseBase"));
var _classPrivateFieldLooseKey2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseKey"));
var _NativeAnimatedValidation = require("../../../src/private/animated/NativeAnimatedValidation");
var _NativeAnimatedHelper = _interopRequireDefault(require("../../../src/private/animated/NativeAnimatedHelper"));
var _AnimatedNode = _interopRequireDefault(require("./AnimatedNode"));
var _AnimatedWithChildren2 = _interopRequireDefault(require("./AnimatedWithChildren"));
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = (0, _get2.default)((0, _getPrototypeOf2.default)(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
var _shallowNodes = (0, _classPrivateFieldLooseKey2.default)("shallowNodes");
var AnimatedTransform = exports.default = function (_AnimatedWithChildren) {
  function AnimatedTransform(transforms) {
    var _this;
    (0, _classCallCheck2.default)(this, AnimatedTransform);
    _this = _callSuper(this, AnimatedTransform);
    Object.defineProperty(_this, _shallowNodes, {
      writable: true,
      value: void 0
    });
    _this._transforms = transforms;
    var shallowNodes = [];
    if (Array.isArray(transforms)) {
      for (var ii = 0, length = transforms.length; ii < length; ii++) {
        var transform = transforms[ii];
        for (var key in transform) {
          var value = transform[key];
          if (value instanceof _AnimatedNode.default) {
            shallowNodes.push(value);
          }
        }
      }
    }
    (0, _classPrivateFieldLooseBase2.default)(_this, _shallowNodes)[_shallowNodes] = shallowNodes;
    return _this;
  }
  (0, _inherits2.default)(AnimatedTransform, _AnimatedWithChildren);
  return (0, _createClass2.default)(AnimatedTransform, [{
    key: "__makeNative",
    value: function __makeNative(platformConfig) {
      var nodes = (0, _classPrivateFieldLooseBase2.default)(this, _shallowNodes)[_shallowNodes];
      for (var ii = 0, length = nodes.length; ii < length; ii++) {
        var node = nodes[ii];
        node.__makeNative(platformConfig);
      }
      _superPropGet(AnimatedTransform, "__makeNative", this, 3)([platformConfig]);
    }
  }, {
    key: "__getValue",
    value: function __getValue() {
      return mapTransforms(this._transforms, function (animatedNode) {
        return animatedNode.__getValue();
      });
    }
  }, {
    key: "__getAnimatedValue",
    value: function __getAnimatedValue() {
      return mapTransforms(this._transforms, function (animatedNode) {
        return animatedNode.__getAnimatedValue();
      });
    }
  }, {
    key: "__attach",
    value: function __attach() {
      var nodes = (0, _classPrivateFieldLooseBase2.default)(this, _shallowNodes)[_shallowNodes];
      for (var ii = 0, length = nodes.length; ii < length; ii++) {
        var node = nodes[ii];
        node.__addChild(this);
      }
    }
  }, {
    key: "__detach",
    value: function __detach() {
      var nodes = (0, _classPrivateFieldLooseBase2.default)(this, _shallowNodes)[_shallowNodes];
      for (var ii = 0, length = nodes.length; ii < length; ii++) {
        var node = nodes[ii];
        node.__removeChild(this);
      }
      _superPropGet(AnimatedTransform, "__detach", this, 3)([]);
    }
  }, {
    key: "__getNativeConfig",
    value: function __getNativeConfig() {
      var transformsConfig = [];
      var transforms = this._transforms;
      for (var ii = 0, length = transforms.length; ii < length; ii++) {
        var transform = transforms[ii];
        for (var key in transform) {
          var value = transform[key];
          if (value instanceof _AnimatedNode.default) {
            transformsConfig.push({
              type: 'animated',
              property: key,
              nodeTag: value.__getNativeTag()
            });
          } else {
            transformsConfig.push({
              type: 'static',
              property: key,
              value: _NativeAnimatedHelper.default.transformDataType(value)
            });
          }
        }
      }
      if (__DEV__) {
        (0, _NativeAnimatedValidation.validateTransform)(transformsConfig);
      }
      return {
        type: 'transform',
        transforms: transformsConfig
      };
    }
  }]);
}(_AnimatedWithChildren2.default);
function mapTransforms(transforms, mapFunction) {
  return transforms.map(function (transform) {
    var result = {};
    for (var key in transform) {
      var value = transform[key];
      if (value instanceof _AnimatedNode.default) {
        result[key] = mapFunction(value);
      } else if (Array.isArray(value)) {
        result[key] = value.map(function (element) {
          return element instanceof _AnimatedNode.default ? mapFunction(element) : element;
        });
      } else if (typeof value === 'object') {
        var object = {};
        for (var propertyName in value) {
          var propertyValue = value[propertyName];
          object[propertyName] = propertyValue instanceof _AnimatedNode.default ? mapFunction(propertyValue) : propertyValue;
        }
        result[key] = object;
      } else {
        result[key] = value;
      }
    }
    return result;
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2dldFByb3RvdHlwZU9mMiIsIl9nZXQyIiwiX2luaGVyaXRzMiIsIl9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZTIiLCJfY2xhc3NQcml2YXRlRmllbGRMb29zZUtleTIiLCJfTmF0aXZlQW5pbWF0ZWRWYWxpZGF0aW9uIiwiX05hdGl2ZUFuaW1hdGVkSGVscGVyIiwiX0FuaW1hdGVkTm9kZSIsIl9BbmltYXRlZFdpdGhDaGlsZHJlbjIiLCJfY2FsbFN1cGVyIiwidCIsIm8iLCJlIiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJjb25zdHJ1Y3RvciIsImFwcGx5IiwiQm9vbGVhbiIsInByb3RvdHlwZSIsInZhbHVlT2YiLCJjYWxsIiwiX3N1cGVyUHJvcEdldCIsInIiLCJwIiwiX3NoYWxsb3dOb2RlcyIsIkFuaW1hdGVkVHJhbnNmb3JtIiwiX0FuaW1hdGVkV2l0aENoaWxkcmVuIiwidHJhbnNmb3JtcyIsIl90aGlzIiwid3JpdGFibGUiLCJfdHJhbnNmb3JtcyIsInNoYWxsb3dOb2RlcyIsIkFycmF5IiwiaXNBcnJheSIsImlpIiwibGVuZ3RoIiwidHJhbnNmb3JtIiwia2V5IiwiQW5pbWF0ZWROb2RlIiwicHVzaCIsIl9fbWFrZU5hdGl2ZSIsInBsYXRmb3JtQ29uZmlnIiwibm9kZXMiLCJub2RlIiwiX19nZXRWYWx1ZSIsIm1hcFRyYW5zZm9ybXMiLCJhbmltYXRlZE5vZGUiLCJfX2dldEFuaW1hdGVkVmFsdWUiLCJfX2F0dGFjaCIsIl9fYWRkQ2hpbGQiLCJfX2RldGFjaCIsIl9fcmVtb3ZlQ2hpbGQiLCJfX2dldE5hdGl2ZUNvbmZpZyIsInRyYW5zZm9ybXNDb25maWciLCJ0eXBlIiwicHJvcGVydHkiLCJub2RlVGFnIiwiX19nZXROYXRpdmVUYWciLCJOYXRpdmVBbmltYXRlZEhlbHBlciIsInRyYW5zZm9ybURhdGFUeXBlIiwiX19ERVZfXyIsInZhbGlkYXRlVHJhbnNmb3JtIiwiQW5pbWF0ZWRXaXRoQ2hpbGRyZW4iLCJtYXBGdW5jdGlvbiIsIm1hcCIsInJlc3VsdCIsImVsZW1lbnQiLCJvYmplY3QiLCJwcm9wZXJ0eU5hbWUiLCJwcm9wZXJ0eVZhbHVlIl0sInNvdXJjZXMiOlsiQW5pbWF0ZWRUcmFuc2Zvcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7UGxhdGZvcm1Db25maWd9IGZyb20gJy4uL0FuaW1hdGVkUGxhdGZvcm1Db25maWcnO1xuXG5pbXBvcnQge3ZhbGlkYXRlVHJhbnNmb3JtfSBmcm9tICcuLi8uLi8uLi9zcmMvcHJpdmF0ZS9hbmltYXRlZC9OYXRpdmVBbmltYXRlZFZhbGlkYXRpb24nO1xuaW1wb3J0IE5hdGl2ZUFuaW1hdGVkSGVscGVyIGZyb20gJy4uLy4uLy4uL3NyYy9wcml2YXRlL2FuaW1hdGVkL05hdGl2ZUFuaW1hdGVkSGVscGVyJztcbmltcG9ydCBBbmltYXRlZE5vZGUgZnJvbSAnLi9BbmltYXRlZE5vZGUnO1xuaW1wb3J0IEFuaW1hdGVkV2l0aENoaWxkcmVuIGZyb20gJy4vQW5pbWF0ZWRXaXRoQ2hpbGRyZW4nO1xuXG50eXBlIFRyYW5zZm9ybTxUID0gQW5pbWF0ZWROb2RlPiA9IHtcbiAgW3N0cmluZ106XG4gICAgfCBudW1iZXJcbiAgICB8IHN0cmluZ1xuICAgIHwgVFxuICAgIHwgJFJlYWRPbmx5QXJyYXk8bnVtYmVyIHwgc3RyaW5nIHwgVD5cbiAgICB8IHtbc3RyaW5nXTogbnVtYmVyIHwgc3RyaW5nIHwgVH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRlZFRyYW5zZm9ybSBleHRlbmRzIEFuaW1hdGVkV2l0aENoaWxkcmVuIHtcbiAgLy8gTk9URTogRm9yIHBvdGVudGlhbGx5IGhpc3RvcmljYWwgcmVhc29ucywgc29tZSBvcGVyYXRpb25zIG9ubHkgb3BlcmF0ZSBvblxuICAvLyB0aGUgZmlyc3QgbGV2ZWwgb2YgQW5pbWF0ZWROb2RlIGluc3RhbmNlcy4gVGhpcyBvcHRpbWl6ZXMgdGhhdCBiZXZhdmlvci5cbiAgI3NoYWxsb3dOb2RlczogJFJlYWRPbmx5QXJyYXk8QW5pbWF0ZWROb2RlPjtcblxuICBfdHJhbnNmb3JtczogJFJlYWRPbmx5QXJyYXk8VHJhbnNmb3JtPD4+O1xuXG4gIGNvbnN0cnVjdG9yKHRyYW5zZm9ybXM6ICRSZWFkT25seUFycmF5PFRyYW5zZm9ybTw+Pikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fdHJhbnNmb3JtcyA9IHRyYW5zZm9ybXM7XG5cbiAgICBjb25zdCBzaGFsbG93Tm9kZXMgPSBbXTtcbiAgICAvLyBOT1RFOiBUaGlzIGNoZWNrIHNob3VsZCBub3QgYmUgbmVjZXNzYXJ5LCBidXQgdGhlIHR5cGVzIGFyZSBub3QgZW5mb3JjZWRcbiAgICAvLyBhcyBvZiB0aGlzIHdyaXRpbmcuIFRoaXMgY2hlY2sgc2hvdWxkIGJlIGhvaXN0ZWQgdG8gaW5zdGFudGlhdGlvbiBzaXRlcy5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0cmFuc2Zvcm1zKSkge1xuICAgICAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSB0cmFuc2Zvcm1zLmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tpaV07XG4gICAgICAgIC8vIFRoZXJlIHNob3VsZCBiZSBleGFjdGx5IG9uZSBwcm9wZXJ0eSBpbiBgdHJhbnNmb3JtYC5cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdHJhbnNmb3JtKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSB0cmFuc2Zvcm1ba2V5XTtcbiAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGUpIHtcbiAgICAgICAgICAgIHNoYWxsb3dOb2Rlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4jc2hhbGxvd05vZGVzID0gc2hhbGxvd05vZGVzO1xuICB9XG5cbiAgX19tYWtlTmF0aXZlKHBsYXRmb3JtQ29uZmlnOiA/UGxhdGZvcm1Db25maWcpIHtcbiAgICBjb25zdCBub2RlcyA9IHRoaXMuI3NoYWxsb3dOb2RlcztcbiAgICBmb3IgKGxldCBpaSA9IDAsIGxlbmd0aCA9IG5vZGVzLmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpaV07XG4gICAgICBub2RlLl9fbWFrZU5hdGl2ZShwbGF0Zm9ybUNvbmZpZyk7XG4gICAgfVxuICAgIHN1cGVyLl9fbWFrZU5hdGl2ZShwbGF0Zm9ybUNvbmZpZyk7XG4gIH1cblxuICBfX2dldFZhbHVlKCk6ICRSZWFkT25seUFycmF5PFRyYW5zZm9ybTxhbnk+PiB7XG4gICAgcmV0dXJuIG1hcFRyYW5zZm9ybXModGhpcy5fdHJhbnNmb3JtcywgYW5pbWF0ZWROb2RlID0+XG4gICAgICBhbmltYXRlZE5vZGUuX19nZXRWYWx1ZSgpLFxuICAgICk7XG4gIH1cblxuICBfX2dldEFuaW1hdGVkVmFsdWUoKTogJFJlYWRPbmx5QXJyYXk8VHJhbnNmb3JtPGFueT4+IHtcbiAgICByZXR1cm4gbWFwVHJhbnNmb3Jtcyh0aGlzLl90cmFuc2Zvcm1zLCBhbmltYXRlZE5vZGUgPT5cbiAgICAgIGFuaW1hdGVkTm9kZS5fX2dldEFuaW1hdGVkVmFsdWUoKSxcbiAgICApO1xuICB9XG5cbiAgX19hdHRhY2goKTogdm9pZCB7XG4gICAgY29uc3Qgbm9kZXMgPSB0aGlzLiNzaGFsbG93Tm9kZXM7XG4gICAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSBub2Rlcy5sZW5ndGg7IGlpIDwgbGVuZ3RoOyBpaSsrKSB7XG4gICAgICBjb25zdCBub2RlID0gbm9kZXNbaWldO1xuICAgICAgbm9kZS5fX2FkZENoaWxkKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIF9fZGV0YWNoKCk6IHZvaWQge1xuICAgIGNvbnN0IG5vZGVzID0gdGhpcy4jc2hhbGxvd05vZGVzO1xuICAgIGZvciAobGV0IGlpID0gMCwgbGVuZ3RoID0gbm9kZXMubGVuZ3RoOyBpaSA8IGxlbmd0aDsgaWkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2lpXTtcbiAgICAgIG5vZGUuX19yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICB9XG4gICAgc3VwZXIuX19kZXRhY2goKTtcbiAgfVxuXG4gIF9fZ2V0TmF0aXZlQ29uZmlnKCk6IGFueSB7XG4gICAgY29uc3QgdHJhbnNmb3Jtc0NvbmZpZzogQXJyYXk8YW55PiA9IFtdO1xuXG4gICAgY29uc3QgdHJhbnNmb3JtcyA9IHRoaXMuX3RyYW5zZm9ybXM7XG4gICAgZm9yIChsZXQgaWkgPSAwLCBsZW5ndGggPSB0cmFuc2Zvcm1zLmxlbmd0aDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbaWldO1xuICAgICAgLy8gVGhlcmUgc2hvdWxkIGJlIGV4YWN0bHkgb25lIHByb3BlcnR5IGluIGB0cmFuc2Zvcm1gLlxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdHJhbnNmb3JtKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdHJhbnNmb3JtW2tleV07XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgICAgIHRyYW5zZm9ybXNDb25maWcucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAnYW5pbWF0ZWQnLFxuICAgICAgICAgICAgcHJvcGVydHk6IGtleSxcbiAgICAgICAgICAgIG5vZGVUYWc6IHZhbHVlLl9fZ2V0TmF0aXZlVGFnKCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJhbnNmb3Jtc0NvbmZpZy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdzdGF0aWMnLFxuICAgICAgICAgICAgcHJvcGVydHk6IGtleSxcbiAgICAgICAgICAgIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdIC0gYHZhbHVlYCBjYW4gYmUgYW4gYXJyYXkgb3IgYW5cbiAgICAgICAgICAgICAgIG9iamVjdC4gVGhpcyBpcyBub3QgY3VycmVudGx5IGhhbmRsZWQgYnkgYHRyYW5zZm9ybURhdGFUeXBlYC5cbiAgICAgICAgICAgICAgIE1pZ3JhdGluZyB0byBgVHJhbnNmb3JtT2JqZWN0YCBtaWdodCBzb2x2ZSB0aGlzLiAqL1xuICAgICAgICAgICAgdmFsdWU6IE5hdGl2ZUFuaW1hdGVkSGVscGVyLnRyYW5zZm9ybURhdGFUeXBlKHZhbHVlKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICB2YWxpZGF0ZVRyYW5zZm9ybSh0cmFuc2Zvcm1zQ29uZmlnKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0cmFuc2Zvcm0nLFxuICAgICAgdHJhbnNmb3JtczogdHJhbnNmb3Jtc0NvbmZpZyxcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hcFRyYW5zZm9ybXM8VD4oXG4gIHRyYW5zZm9ybXM6ICRSZWFkT25seUFycmF5PFRyYW5zZm9ybTw+PixcbiAgbWFwRnVuY3Rpb246IEFuaW1hdGVkTm9kZSA9PiBULFxuKTogJFJlYWRPbmx5QXJyYXk8VHJhbnNmb3JtPFQ+PiB7XG4gIHJldHVybiB0cmFuc2Zvcm1zLm1hcCh0cmFuc2Zvcm0gPT4ge1xuICAgIGNvbnN0IHJlc3VsdDogVHJhbnNmb3JtPFQ+ID0ge307XG4gICAgLy8gVGhlcmUgc2hvdWxkIGJlIGV4YWN0bHkgb25lIHByb3BlcnR5IGluIGB0cmFuc2Zvcm1gLlxuICAgIGZvciAoY29uc3Qga2V5IGluIHRyYW5zZm9ybSkge1xuICAgICAgY29uc3QgdmFsdWUgPSB0cmFuc2Zvcm1ba2V5XTtcbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IG1hcEZ1bmN0aW9uKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZS5tYXAoZWxlbWVudCA9PlxuICAgICAgICAgIGVsZW1lbnQgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGUgPyBtYXBGdW5jdGlvbihlbGVtZW50KSA6IGVsZW1lbnQsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29uc3Qgb2JqZWN0OiB7W3N0cmluZ106IG51bWJlciB8IHN0cmluZyB8IFR9ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIGluIHZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgcHJvcGVydHlWYWx1ZSA9IHZhbHVlW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgb2JqZWN0W3Byb3BlcnR5TmFtZV0gPVxuICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZVxuICAgICAgICAgICAgICA/IG1hcEZ1bmN0aW9uKHByb3BlcnR5VmFsdWUpXG4gICAgICAgICAgICAgIDogcHJvcGVydHlWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRba2V5XSA9IG9iamVjdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQUMsTUFBQSxDQUFBQyxjQUFBLENBQUFDLE9BQUE7RUFBQUMsS0FBQTtBQUFBO0FBQUFELE9BQUEsQ0FBQUUsT0FBQTtBQUFBLElBQUFDLGdCQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBTyxhQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBUSwyQkFBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQVMsZ0JBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFVLEtBQUEsR0FBQVgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFXLFVBQUEsR0FBQVosc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFZLDRCQUFBLEdBQUFiLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBYSwyQkFBQSxHQUFBZCxzQkFBQSxDQUFBQyxPQUFBO0FBSWIsSUFBQWMseUJBQUEsR0FBQWQsT0FBQTtBQUNBLElBQUFlLHFCQUFBLEdBQUFoQixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQWdCLGFBQUEsR0FBQWpCLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBaUIsc0JBQUEsR0FBQWxCLHNCQUFBLENBQUFDLE9BQUE7QUFBMEQsU0FBQWtCLFdBQUFDLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLFdBQUFELENBQUEsT0FBQVgsZ0JBQUEsQ0FBQUosT0FBQSxFQUFBZSxDQUFBLE9BQUFaLDJCQUFBLENBQUFILE9BQUEsRUFBQWMsQ0FBQSxFQUFBRyx5QkFBQSxLQUFBQyxPQUFBLENBQUFDLFNBQUEsQ0FBQUosQ0FBQSxFQUFBQyxDQUFBLFlB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LGdCQUFnQixDQUFDO01BQ3JDO01BQ0EsT0FBTztRQUNMQyxJQUFJLEVBQUUsV0FBVztRQUNqQjNCLFVBQVUsRUFBRTBCO01BQ2QsQ0FBQztJQUNIO0VBQUM7QUFBQSxFQXRHNENTLDhCQUFvQjtBQXlHbkUsU0FBU2pCLGFBQWFBLENBQ3BCbEIsVUFBdUMsRUFDdkNvQyxXQUE4QixFQUNBO0VBQzlCLE9BQU9wQyxVQUFVLENBQUNxQyxHQUFHLENBQUMsVUFBQTVCLFNBQVMsRUFBSTtJQUNqQyxJQUFNNkIsTUFBb0IsR0FBRyxDQUFDLENBQUM7SUFFL0IsS0FBSyxJQUFNNUIsR0FBRyxJQUFJRCxTQUFTLEVBQUU7TUFDM0IsSUFBTTFDLEtBQUssR0FBRzBDLFNBQVMsQ0FBQ0MsR0FBRyxDQUFDO01BQzVCLElBQUkzQyxLQUFLLFlBQVk0QyxxQkFBWSxFQUFFO1FBQ2pDMkIsTUFBTSxDQUFDNUIsR0FBRyxDQUFDLEdBQUcwQixXQUFXLENBQUNyRSxLQUFLLENBQUM7TUFDbEMsQ0FBQyxNQUFNLElBQUlzQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ3ZDLEtBQUssQ0FBQyxFQUFFO1FBQy9CdUUsTUFBTSxDQUFDNUIsR0FBRyxDQUFDLEdBQUczQyxLQUFLLENBQUNzRSxHQUFHLENBQUMsVUFBQUUsT0FBTztVQUFBLE9BQzdCQSxPQUFPLFlBQVk1QixxQkFBWSxHQUFHeUIsV0FBVyxDQUFDRyxPQUFPLENBQUMsR0FBR0EsT0FBTztRQUFBLENBQ2xFLENBQUM7TUFDSCxDQUFDLE1BQU0sSUFBSSxPQUFPeEUsS0FBSyxLQUFLLFFBQVEsRUFBRTtRQUNwQyxJQUFNeUUsTUFBdUMsR0FBRyxDQUFDLENBQUM7UUFDbEQsS0FBSyxJQUFNQyxZQUFZLElBQUkxRSxLQUFLLEVBQUU7VUFDaEMsSUFBTTJFLGFBQWEsR0FBRzNFLEtBQUssQ0FBQzBFLFlBQVksQ0FBQztVQUN6Q0QsTUFBTSxDQUFDQyxZQUFZLENBQUMsR0FDbEJDLGFBQWEsWUFBWS9CLHFCQUFZLEdBQ2pDeUIsV0FBVyxDQUFDTSxhQUFhLENBQUMsR0FDMUJBLGFBQWE7UUFDckI7UUFDQUosTUFBTSxDQUFDNUIsR0FBRyxDQUFDLEdBQUc4QixNQUFNO01BQ3RCLENBQUMsTUFBTTtRQUNMRixNQUFNLENBQUM1QixHQUFHLENBQUMsR0FBRzNDLEtBQUs7TUFDckI7SUFDRjtJQUNBLE9BQU91RSxNQUFNO0VBQ2YsQ0FBQyxDQUFDO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=