61370b4c15a78297e3a5b5c0c6d85443
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addHTMLMutationObserver = addHTMLMutationObserver;
exports.areDOMRectsEqual = areDOMRectsEqual;
exports.configureWebLayoutAnimations = configureWebLayoutAnimations;
exports.insertWebAnimation = insertWebAnimation;
exports.scheduleAnimationCleanup = scheduleAnimationCleanup;
var _PlatformChecker = require("../../PlatformChecker");
var _componentStyle = require("./componentStyle");
var _config = require("./config");
var _logger = require("../../logger");
var _errors = require("../../errors");
var PREDEFINED_WEB_ANIMATIONS_ID = 'ReanimatedPredefinedWebAnimationsStyle';
var CUSTOM_WEB_ANIMATIONS_ID = 'ReanimatedCustomWebAnimationsStyle';
var animationNameToIndex = new Map();
var animationNameList = [];
var isObserverSet = false;
function configureWebLayoutAnimations() {
  if (!(0, _PlatformChecker.isWindowAvailable)() || document.getElementById(PREDEFINED_WEB_ANIMATIONS_ID) !== null) {
    return;
  }
  var predefinedAnimationsStyleTag = document.createElement('style');
  predefinedAnimationsStyleTag.id = PREDEFINED_WEB_ANIMATIONS_ID;
  predefinedAnimationsStyleTag.onload = function () {
    if (!predefinedAnimationsStyleTag.sheet) {
      _logger.logger.error('Failed to create layout animations stylesheet.');
      return;
    }
    for (var animationName in _config.Animations) {
      predefinedAnimationsStyleTag.sheet.insertRule(_config.Animations[animationName].style);
    }
  };
  var customAnimationsStyleTag = document.createElement('style');
  customAnimationsStyleTag.id = CUSTOM_WEB_ANIMATIONS_ID;
  document.head.appendChild(predefinedAnimationsStyleTag);
  document.head.appendChild(customAnimationsStyleTag);
}
function insertWebAnimation(animationName, keyframe) {
  if (!(0, _PlatformChecker.isWindowAvailable)()) {
    return;
  }
  var styleTag = document.getElementById(CUSTOM_WEB_ANIMATIONS_ID);
  if (!styleTag.sheet) {
    _logger.logger.error('Failed to create layout animations stylesheet.');
    return;
  }
  styleTag.sheet.insertRule(keyframe, 0);
  animationNameList.unshift(animationName);
  animationNameToIndex.set(animationName, 0);
  for (var i = 1; i < animationNameList.length; ++i) {
    var nextAnimationName = animationNameList[i];
    var nextAnimationIndex = animationNameToIndex.get(nextAnimationName);
    if (nextAnimationIndex === undefined) {
      throw new _errors.ReanimatedError('Failed to obtain animation index.');
    }
    animationNameToIndex.set(animationNameList[i], nextAnimationIndex + 1);
  }
}
function removeWebAnimation(animationName, animationRemoveCallback) {
  var _styleTag$sheet;
  if (!(0, _PlatformChecker.isWindowAvailable)()) {
    return;
  }
  var styleTag = document.getElementById(CUSTOM_WEB_ANIMATIONS_ID);
  var currentAnimationIndex = animationNameToIndex.get(animationName);
  if (currentAnimationIndex === undefined) {
    throw new _errors.ReanimatedError('Failed to obtain animation index.');
  }
  animationRemoveCallback();
  (_styleTag$sheet = styleTag.sheet) == null || _styleTag$sheet.deleteRule(currentAnimationIndex);
  animationNameList.splice(currentAnimationIndex, 1);
  animationNameToIndex.delete(animationName);
  for (var i = currentAnimationIndex; i < animationNameList.length; ++i) {
    var nextAnimationName = animationNameList[i];
    var nextAnimationIndex = animationNameToIndex.get(nextAnimationName);
    if (nextAnimationIndex === undefined) {
      throw new _errors.ReanimatedError('Failed to obtain animation index.');
    }
    animationNameToIndex.set(animationNameList[i], nextAnimationIndex - 1);
  }
}
var timeoutScale = 1.25;
var frameDurationMs = 16;
var minimumFrames = 10;
function scheduleAnimationCleanup(animationName, animationDuration, animationRemoveCallback) {
  var timeoutValue = Math.max(animationDuration * timeoutScale * 1000, animationDuration + frameDurationMs * minimumFrames);
  setTimeout(function () {
    return removeWebAnimation(animationName, animationRemoveCallback);
  }, timeoutValue);
}
function reattachElementToAncestor(child, parent) {
  var childSnapshot = _componentStyle.snapshots.get(child);
  if (!childSnapshot) {
    _logger.logger.error('Failed to obtain snapshot.');
    return;
  }
  child.removedAfterAnimation = true;
  parent.appendChild(child);
  (0, _componentStyle.setElementPosition)(child, childSnapshot);
  var originalOnAnimationEnd = child.onanimationend;
  child.onanimationend = function (event) {
    parent.removeChild(child);
    originalOnAnimationEnd == null || originalOnAnimationEnd.call(this, event);
  };
}
function findDescendantWithExitingAnimation(node, root) {
  if (!(node instanceof HTMLElement)) {
    return;
  }
  if (node.reanimatedDummy && node.removedAfterAnimation === undefined) {
    reattachElementToAncestor(node, root);
  }
  var children = Array.from(node.children);
  for (var i = 0; i < children.length; ++i) {
    findDescendantWithExitingAnimation(children[i], root);
  }
}
function checkIfScreenWasChanged(mutationTarget) {
  var _mutationTarget$react;
  var reactFiberKey = '__reactFiber';
  for (var _key of Object.keys(mutationTarget)) {
    if (_key.startsWith('__reactFiber')) {
      reactFiberKey = _key;
      break;
    }
  }
  return ((_mutationTarget$react = mutationTarget[reactFiberKey]) == null || (_mutationTarget$react = _mutationTarget$react.child) == null || (_mutationTarget$react = _mutationTarget$react.memoizedProps) == null ? void 0 : _mutationTarget$react.navigation) !== undefined;
}
function addHTMLMutationObserver() {
  if (isObserverSet || !(0, _PlatformChecker.isWindowAvailable)()) {
    return;
  }
  isObserverSet = true;
  var observer = new MutationObserver(function (mutationsList) {
    var rootMutation = mutationsList[mutationsList.length - 1];
    if (checkIfScreenWasChanged(rootMutation.target)) {
      return;
    }
    for (var i = 0; i < rootMutation.removedNodes.length; ++i) {
      findDescendantWithExitingAnimation(rootMutation.removedNodes[i], rootMutation.target);
    }
  });
  observer.observe(document.body, {
    childList: true,
    subtree: true
  });
}
function areDOMRectsEqual(r1, r2) {
  return r1.x === r2.x && r1.y === r2.y && r1.width === r2.width && r1.height === r2.height;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImFkZEhUTUxNdXRhdGlvbk9ic2VydmVyIiwiYXJlRE9NUmVjdHNFcXVhbCIsImNvbmZpZ3VyZVdlYkxheW91dEFuaW1hdGlvbnMiLCJpbnNlcnRXZWJBbmltYXRpb24iLCJzY2hlZHVsZUFuaW1hdGlvbkNsZWFudXAiLCJfUGxhdGZvcm1DaGVja2VyIiwicmVxdWlyZSIsIl9jb21wb25lbnRTdHlsZSIsIl9jb25maWciLCJfbG9nZ2VyIiwiX2Vycm9ycyIsIlBSRURFRklORURfV0VCX0FOSU1BVElPTlNfSUQiLCJDVVNUT01fV0VCX0FOSU1BVElPTlNfSUQiLCJhbmltYXRpb25OYW1lVG9JbmRleCIsIk1hcCIsImFuaW1hdGlvbk5hbWVMaXN0IiwiaXNPYnNlcnZlclNldCIsImlzV2luZG93QXZhaWxhYmxlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInByZWRlZmluZWRBbmltYXRpb25zU3R5bGVUYWciLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJvbmxvYWQiLCJzaGVldCIsImxvZ2dlciIsImVycm9yIiwiYW5pbWF0aW9uTmFtZSIsIkFuaW1hdGlvbnMiLCJpbnNlcnRSdWxlIiwic3R5bGUiLCJjdXN0b21BbmltYXRpb25zU3R5bGVUYWciLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJrZXlmcmFtZSIsInN0eWxlVGFnIiwidW5zaGlmdCIsInNldCIsImkiLCJsZW5ndGgiLCJuZXh0QW5pbWF0aW9uTmFtZSIsIm5leHRBbmltYXRpb25JbmRleCIsImdldCIsInVuZGVmaW5lZCIsIlJlYW5pbWF0ZWRFcnJvciIsInJlbW92ZVdlYkFuaW1hdGlvbiIsImFuaW1hdGlvblJlbW92ZUNhbGxiYWNrIiwiX3N0eWxlVGFnJHNoZWV0IiwiY3VycmVudEFuaW1hdGlvbkluZGV4IiwiZGVsZXRlUnVsZSIsInNwbGljZSIsImRlbGV0ZSIsInRpbWVvdXRTY2FsZSIsImZyYW1lRHVyYXRpb25NcyIsIm1pbmltdW1GcmFtZXMiLCJhbmltYXRpb25EdXJhdGlvbiIsInRpbWVvdXRWYWx1ZSIsIk1hdGgiLCJtYXgiLCJzZXRUaW1lb3V0IiwicmVhdHRhY2hFbGVtZW50VG9BbmNlc3RvciIsImNoaWxkIiwicGFyZW50IiwiY2hpbGRTbmFwc2hvdCIsInNuYXBzaG90cyIsInJlbW92ZWRBZnRlckFuaW1hdGlvbiIsInNldEVsZW1lbnRQb3NpdGlvbiIsIm9yaWdpbmFsT25BbmltYXRpb25FbmQiLCJvbmFuaW1hdGlvbmVuZCIsImV2ZW50IiwicmVtb3ZlQ2hpbGQiLCJjYWxsIiwiZmluZERlc2NlbmRhbnRXaXRoRXhpdGluZ0FuaW1hdGlvbiIsIm5vZGUiLCJyb290IiwiSFRNTEVsZW1lbnQiLCJyZWFuaW1hdGVkRHVtbXkiLCJjaGlsZHJlbiIsIkFycmF5IiwiZnJvbSIsImNoZWNrSWZTY3JlZW5XYXNDaGFuZ2VkIiwibXV0YXRpb25UYXJnZXQiLCJfbXV0YXRpb25UYXJnZXQkcmVhY3QiLCJyZWFjdEZpYmVyS2V5Iiwia2V5Iiwia2V5cyIsInN0YXJ0c1dpdGgiLCJtZW1vaXplZFByb3BzIiwibmF2aWdhdGlvbiIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9uc0xpc3QiLCJyb290TXV0YXRpb24iLCJ0YXJnZXQiLCJyZW1vdmVkTm9kZXMiLCJvYnNlcnZlIiwiYm9keSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJyMSIsInIyIiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCJdLCJzb3VyY2VzIjpbImRvbVV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgeyBSZWFuaW1hdGVkSFRNTEVsZW1lbnQgfSBmcm9tICcuLi8uLi9qcy1yZWFuaW1hdGVkJztcblxuaW1wb3J0IHsgaXNXaW5kb3dBdmFpbGFibGUgfSBmcm9tICcuLi8uLi9QbGF0Zm9ybUNoZWNrZXInO1xuaW1wb3J0IHsgc2V0RWxlbWVudFBvc2l0aW9uLCBzbmFwc2hvdHMgfSBmcm9tICcuL2NvbXBvbmVudFN0eWxlJztcbmltcG9ydCB7IEFuaW1hdGlvbnMgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgdHlwZSB7IEFuaW1hdGlvbk5hbWVzIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vLi4vbG9nZ2VyJztcbmltcG9ydCB7IFJlYW5pbWF0ZWRFcnJvciB9IGZyb20gJy4uLy4uL2Vycm9ycyc7XG5cbmNvbnN0IFBSRURFRklORURfV0VCX0FOSU1BVElPTlNfSUQgPSAnUmVhbmltYXRlZFByZWRlZmluZWRXZWJBbmltYXRpb25zU3R5bGUnO1xuY29uc3QgQ1VTVE9NX1dFQl9BTklNQVRJT05TX0lEID0gJ1JlYW5pbWF0ZWRDdXN0b21XZWJBbmltYXRpb25zU3R5bGUnO1xuXG4vLyBTaW5jZSB3ZSBjYW5ub3QgcmVtb3ZlIGtleWZyYW1lIGZyb20gRE9NIGJ5IGl0cyBuYW1lLCB3ZSBoYXZlIHRvIHN0b3JlIGl0cyBpZFxuY29uc3QgYW5pbWF0aW9uTmFtZVRvSW5kZXggPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuY29uc3QgYW5pbWF0aW9uTmFtZUxpc3Q6IHN0cmluZ1tdID0gW107XG5cbmxldCBpc09ic2VydmVyU2V0ID0gZmFsc2U7XG5cbi8qKlxuICogQ3JlYXRlcyBgSFRNTFN0eWxlRWxlbWVudGAsIGluc2VydHMgaXQgaW50byBET00gYW5kIHRoZW4gaW5zZXJ0cyBDU1MgcnVsZXNcbiAqIGludG8gdGhlIHN0eWxlc2hlZXQuIElmIHN0eWxlIGVsZW1lbnQgYWxyZWFkeSBleGlzdHMsIG5vdGhpbmcgaGFwcGVucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZVdlYkxheW91dEFuaW1hdGlvbnMoKSB7XG4gIGlmIChcbiAgICAhaXNXaW5kb3dBdmFpbGFibGUoKSB8fCAvLyBXaXRob3V0IHRoaXMgY2hlY2sgU1NSIGNyYXNoZXMgYmVjYXVzZSBkb2N1bWVudCBpcyB1bmRlZmluZWQgKE5leHRFeGFtcGxlIG9uIENJKVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFBSRURFRklORURfV0VCX0FOSU1BVElPTlNfSUQpICE9PSBudWxsXG4gICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHByZWRlZmluZWRBbmltYXRpb25zU3R5bGVUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICBwcmVkZWZpbmVkQW5pbWF0aW9uc1N0eWxlVGFnLmlkID0gUFJFREVGSU5FRF9XRUJfQU5JTUFUSU9OU19JRDtcblxuICBwcmVkZWZpbmVkQW5pbWF0aW9uc1N0eWxlVGFnLm9ubG9hZCA9ICgpID0+IHtcbiAgICBpZiAoIXByZWRlZmluZWRBbmltYXRpb25zU3R5bGVUYWcuc2hlZXQpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBsYXlvdXQgYW5pbWF0aW9ucyBzdHlsZXNoZWV0LicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgYW5pbWF0aW9uTmFtZSBpbiBBbmltYXRpb25zKSB7XG4gICAgICBwcmVkZWZpbmVkQW5pbWF0aW9uc1N0eWxlVGFnLnNoZWV0Lmluc2VydFJ1bGUoXG4gICAgICAgIEFuaW1hdGlvbnNbYW5pbWF0aW9uTmFtZSBhcyBBbmltYXRpb25OYW1lc10uc3R5bGVcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGN1c3RvbUFuaW1hdGlvbnNTdHlsZVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIGN1c3RvbUFuaW1hdGlvbnNTdHlsZVRhZy5pZCA9IENVU1RPTV9XRUJfQU5JTUFUSU9OU19JRDtcblxuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHByZWRlZmluZWRBbmltYXRpb25zU3R5bGVUYWcpO1xuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGN1c3RvbUFuaW1hdGlvbnNTdHlsZVRhZyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRXZWJBbmltYXRpb24oYW5pbWF0aW9uTmFtZTogc3RyaW5nLCBrZXlmcmFtZTogc3RyaW5nKSB7XG4gIC8vIFdpdGhvdXQgdGhpcyBjaGVjayBTU1IgY3Jhc2hlcyBiZWNhdXNlIGRvY3VtZW50IGlzIHVuZGVmaW5lZCAoTmV4dEV4YW1wbGUgb24gQ0kpXG4gIGlmICghaXNXaW5kb3dBdmFpbGFibGUoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHN0eWxlVGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgQ1VTVE9NX1dFQl9BTklNQVRJT05TX0lEXG4gICkgYXMgSFRNTFN0eWxlRWxlbWVudDtcblxuICBpZiAoIXN0eWxlVGFnLnNoZWV0KSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGxheW91dCBhbmltYXRpb25zIHN0eWxlc2hlZXQuJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3R5bGVUYWcuc2hlZXQuaW5zZXJ0UnVsZShrZXlmcmFtZSwgMCk7XG4gIGFuaW1hdGlvbk5hbWVMaXN0LnVuc2hpZnQoYW5pbWF0aW9uTmFtZSk7XG4gIGFuaW1hdGlvbk5hbWVUb0luZGV4LnNldChhbmltYXRpb25OYW1lLCAwKTtcblxuICBmb3IgKGxldCBpID0gMTsgaSA8IGFuaW1hdGlvbk5hbWVMaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgY29uc3QgbmV4dEFuaW1hdGlvbk5hbWUgPSBhbmltYXRpb25OYW1lTGlzdFtpXTtcbiAgICBjb25zdCBuZXh0QW5pbWF0aW9uSW5kZXggPSBhbmltYXRpb25OYW1lVG9JbmRleC5nZXQobmV4dEFuaW1hdGlvbk5hbWUpO1xuXG4gICAgaWYgKG5leHRBbmltYXRpb25JbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgUmVhbmltYXRlZEVycm9yKCdGYWlsZWQgdG8gb2J0YWluIGFuaW1hdGlvbiBpbmRleC4nKTtcbiAgICB9XG5cbiAgICBhbmltYXRpb25OYW1lVG9JbmRleC5zZXQoYW5pbWF0aW9uTmFtZUxpc3RbaV0sIG5leHRBbmltYXRpb25JbmRleCArIDEpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVdlYkFuaW1hdGlvbihcbiAgYW5pbWF0aW9uTmFtZTogc3RyaW5nLFxuICBhbmltYXRpb25SZW1vdmVDYWxsYmFjazogKCkgPT4gdm9pZFxuKSB7XG4gIC8vIFdpdGhvdXQgdGhpcyBjaGVjayBTU1IgY3Jhc2hlcyBiZWNhdXNlIGRvY3VtZW50IGlzIHVuZGVmaW5lZCAoTmV4dEV4YW1wbGUgb24gQ0kpXG4gIGlmICghaXNXaW5kb3dBdmFpbGFibGUoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHN0eWxlVGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgQ1VTVE9NX1dFQl9BTklNQVRJT05TX0lEXG4gICkgYXMgSFRNTFN0eWxlRWxlbWVudDtcblxuICBjb25zdCBjdXJyZW50QW5pbWF0aW9uSW5kZXggPSBhbmltYXRpb25OYW1lVG9JbmRleC5nZXQoYW5pbWF0aW9uTmFtZSk7XG5cbiAgaWYgKGN1cnJlbnRBbmltYXRpb25JbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IFJlYW5pbWF0ZWRFcnJvcignRmFpbGVkIHRvIG9idGFpbiBhbmltYXRpb24gaW5kZXguJyk7XG4gIH1cblxuICBhbmltYXRpb25SZW1vdmVDYWxsYmFjaygpO1xuXG4gIHN0eWxlVGFnLnNoZWV0Py5kZWxldGVSdWxlKGN1cnJlbnRBbmltYXRpb25JbmRleCk7XG5cbiAgYW5pbWF0aW9uTmFtZUxpc3Quc3BsaWNlKGN1cnJlbnRBbmltYXRpb25JbmRleCwgMSk7XG4gIGFuaW1hdGlvbk5hbWVUb0luZGV4LmRlbGV0ZShhbmltYXRpb25OYW1lKTtcblxuICBmb3IgKGxldCBpID0gY3VycmVudEFuaW1hdGlvbkluZGV4OyBpIDwgYW5pbWF0aW9uTmFtZUxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICBjb25zdCBuZXh0QW5pbWF0aW9uTmFtZSA9IGFuaW1hdGlvbk5hbWVMaXN0W2ldO1xuICAgIGNvbnN0IG5leHRBbmltYXRpb25JbmRleCA9IGFuaW1hdGlvbk5hbWVUb0luZGV4LmdldChuZXh0QW5pbWF0aW9uTmFtZSk7XG5cbiAgICBpZiAobmV4dEFuaW1hdGlvbkluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBSZWFuaW1hdGVkRXJyb3IoJ0ZhaWxlZCB0byBvYnRhaW4gYW5pbWF0aW9uIGluZGV4LicpO1xuICAgIH1cblxuICAgIGFuaW1hdGlvbk5hbWVUb0luZGV4LnNldChhbmltYXRpb25OYW1lTGlzdFtpXSwgbmV4dEFuaW1hdGlvbkluZGV4IC0gMSk7XG4gIH1cbn1cblxuY29uc3QgdGltZW91dFNjYWxlID0gMS4yNTsgLy8gV2UgdXNlIHRoaXMgdmFsdWUgdG8gZW5sYXJnZSB0aW1lb3V0IGR1cmF0aW9uLiBJdCBjYW4gcHJvdmUgdXNlZnVsIGlmIGFuaW1hdGlvbiBsYWdzLlxuY29uc3QgZnJhbWVEdXJhdGlvbk1zID0gMTY7IC8vIEp1c3QgYW4gYXBwcm94aW1hdGlvbi5cbmNvbnN0IG1pbmltdW1GcmFtZXMgPSAxMDtcblxuZXhwb3J0IGZ1bmN0aW9uIHNjaGVkdWxlQW5pbWF0aW9uQ2xlYW51cChcbiAgYW5pbWF0aW9uTmFtZTogc3RyaW5nLFxuICBhbmltYXRpb25EdXJhdGlvbjogbnVtYmVyLFxuICBhbmltYXRpb25SZW1vdmVDYWxsYmFjazogKCkgPT4gdm9pZFxuKSB7XG4gIC8vIElmIGR1cmF0aW9uIGlzIHZlcnkgc2hvcnQsIHdlIHdhbnQgdG8ga2VlcCByZW1vdmUgZGVsYXkgdG8gYXQgbGVhc3QgMTAgZnJhbWVzXG4gIC8vIEluIG91ciBjYXNlIGl0IGlzIGV4YWN0bHkgMTYwLzEwOTkgcywgd2hpY2ggaXMgYXBwcm94aW1hdGVseSAwLjE1c1xuICBjb25zdCB0aW1lb3V0VmFsdWUgPSBNYXRoLm1heChcbiAgICBhbmltYXRpb25EdXJhdGlvbiAqIHRpbWVvdXRTY2FsZSAqIDEwMDAsXG4gICAgYW5pbWF0aW9uRHVyYXRpb24gKyBmcmFtZUR1cmF0aW9uTXMgKiBtaW5pbXVtRnJhbWVzXG4gICk7XG5cbiAgc2V0VGltZW91dChcbiAgICAoKSA9PiByZW1vdmVXZWJBbmltYXRpb24oYW5pbWF0aW9uTmFtZSwgYW5pbWF0aW9uUmVtb3ZlQ2FsbGJhY2spLFxuICAgIHRpbWVvdXRWYWx1ZVxuICApO1xufVxuXG5mdW5jdGlvbiByZWF0dGFjaEVsZW1lbnRUb0FuY2VzdG9yKGNoaWxkOiBSZWFuaW1hdGVkSFRNTEVsZW1lbnQsIHBhcmVudDogTm9kZSkge1xuICBjb25zdCBjaGlsZFNuYXBzaG90ID0gc25hcHNob3RzLmdldChjaGlsZCk7XG5cbiAgaWYgKCFjaGlsZFNuYXBzaG90KSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gb2J0YWluIHNuYXBzaG90LicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFdlIHVzZSB0aGF0IHNvIHdlIGRvbid0IGVuZCB1cCBpbiBpbmZpbml0ZSBsb29wXG4gIGNoaWxkLnJlbW92ZWRBZnRlckFuaW1hdGlvbiA9IHRydWU7XG4gIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG5cbiAgc2V0RWxlbWVudFBvc2l0aW9uKGNoaWxkLCBjaGlsZFNuYXBzaG90KTtcblxuICBjb25zdCBvcmlnaW5hbE9uQW5pbWF0aW9uRW5kID0gY2hpbGQub25hbmltYXRpb25lbmQ7XG5cbiAgY2hpbGQub25hbmltYXRpb25lbmQgPSBmdW5jdGlvbiAoZXZlbnQ6IEFuaW1hdGlvbkV2ZW50KSB7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcblxuICAgIC8vIEdpdmVuIHRoYXQgdGhpcyBmdW5jdGlvbiBvdmVycmlkZXMgb25BbmltYXRpb25FbmQsIGl0IHdvbid0IGJlIG51bGxcbiAgICBvcmlnaW5hbE9uQW5pbWF0aW9uRW5kPy5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmluZERlc2NlbmRhbnRXaXRoRXhpdGluZ0FuaW1hdGlvbihcbiAgbm9kZTogUmVhbmltYXRlZEhUTUxFbGVtZW50LFxuICByb290OiBOb2RlXG4pIHtcbiAgLy8gTm9kZSBjb3VsZCBiZSBzb21ldGhpbmcgZWxzZSB0aGFuIEhUTUxFbGVtZW50LCBmb3IgZXhhbXBsZSBUZXh0Tm9kZSAodHJlYXRlZCBhcyBwbGFpbiB0ZXh0LCBub3QgYXMgSFRNTCBvYmplY3QpLFxuICAvLyB0aGVyZWZvcmUgaXQgd29uJ3QgaGF2ZSBjaGlsZHJlbiBwcm9wIGFuZCBjYWxsaW5nIEFycmF5LmZyb20obm9kZS5jaGlsZHJlbikgd2lsbCBjYXVzZSBlcnJvci5cbiAgaWYgKCEobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChub2RlLnJlYW5pbWF0ZWREdW1teSAmJiBub2RlLnJlbW92ZWRBZnRlckFuaW1hdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmVhdHRhY2hFbGVtZW50VG9BbmNlc3Rvcihub2RlLCByb290KTtcbiAgfVxuXG4gIGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbShub2RlLmNoaWxkcmVuKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgZmluZERlc2NlbmRhbnRXaXRoRXhpdGluZ0FuaW1hdGlvbihcbiAgICAgIGNoaWxkcmVuW2ldIGFzIFJlYW5pbWF0ZWRIVE1MRWxlbWVudCxcbiAgICAgIHJvb3RcbiAgICApO1xuICB9XG59XG5cbnR5cGUgRmliZXJOb2RlS2V5ID0gYF9fcmVhY3RGaWJlciR7c3RyaW5nfWA7XG5cbmludGVyZmFjZSBGaWJlck5vZGUge1xuICBtZW1vaXplZFByb3BzPzoge1xuICAgIG5hdmlnYXRpb24/OiB1bmtub3duO1xuICB9O1xuXG4gIGNoaWxkPzogRmliZXJOb2RlO1xufVxuXG50eXBlIFdpdGhGaWJlck5vZGUgPSB7XG4gIFtrZXk6IEZpYmVyTm9kZUtleV06IEZpYmVyTm9kZTtcbn07XG5cbnR5cGUgTWF5YmVXaXRoRmliZXJOb2RlID0gUGFydGlhbDxXaXRoRmliZXJOb2RlPjtcblxuZnVuY3Rpb24gY2hlY2tJZlNjcmVlbldhc0NoYW5nZWQoXG4gIG11dGF0aW9uVGFyZ2V0OiBSZWFuaW1hdGVkSFRNTEVsZW1lbnQgJiBNYXliZVdpdGhGaWJlck5vZGVcbikge1xuICBsZXQgcmVhY3RGaWJlcktleTogRmliZXJOb2RlS2V5ID0gJ19fcmVhY3RGaWJlcic7XG5cbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobXV0YXRpb25UYXJnZXQpKSB7XG4gICAgaWYgKGtleS5zdGFydHNXaXRoKCdfX3JlYWN0RmliZXInKSkge1xuICAgICAgcmVhY3RGaWJlcktleSA9IGtleSBhcyBGaWJlck5vZGVLZXk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIG11dGF0aW9uVGFyZ2V0W3JlYWN0RmliZXJLZXldPy5jaGlsZD8ubWVtb2l6ZWRQcm9wcz8ubmF2aWdhdGlvbiAhPT1cbiAgICB1bmRlZmluZWRcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEhUTUxNdXRhdGlvbk9ic2VydmVyKCkge1xuICBpZiAoaXNPYnNlcnZlclNldCB8fCAhaXNXaW5kb3dBdmFpbGFibGUoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlzT2JzZXJ2ZXJTZXQgPSB0cnVlO1xuXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9uc0xpc3QpID0+IHtcbiAgICBjb25zdCByb290TXV0YXRpb24gPSBtdXRhdGlvbnNMaXN0W211dGF0aW9uc0xpc3QubGVuZ3RoIC0gMV07XG5cbiAgICBpZiAoXG4gICAgICBjaGVja0lmU2NyZWVuV2FzQ2hhbmdlZChcbiAgICAgICAgcm9vdE11dGF0aW9uLnRhcmdldCBhcyBSZWFuaW1hdGVkSFRNTEVsZW1lbnQgJiBNYXliZVdpdGhGaWJlck5vZGVcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvb3RNdXRhdGlvbi5yZW1vdmVkTm9kZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGZpbmREZXNjZW5kYW50V2l0aEV4aXRpbmdBbmltYXRpb24oXG4gICAgICAgIHJvb3RNdXRhdGlvbi5yZW1vdmVkTm9kZXNbaV0gYXMgUmVhbmltYXRlZEhUTUxFbGVtZW50LFxuICAgICAgICByb290TXV0YXRpb24udGFyZ2V0XG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFyZURPTVJlY3RzRXF1YWwocjE6IERPTVJlY3QsIHIyOiBET01SZWN0KSB7XG4gIC8vIFRoZXJlIGFyZSA0IG1vcmUgZmllbGRzLCBidXQgY2hlY2tpbmcgdGhlc2Ugc2hvdWxkIHN1ZmZpY2VcbiAgcmV0dXJuIChcbiAgICByMS54ID09PSByMi54ICYmXG4gICAgcjEueSA9PT0gcjIueSAmJlxuICAgIHIxLndpZHRoID09PSByMi53aWR0aCAmJlxuICAgIHIxLmhlaWdodCA9PT0gcjIuaGVpZ2h0XG4gICk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQUNBLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLHVCQUFBLEdBQUFBLHVCQUFBO0FBQUFGLE9BQUEsQ0FBQUcsZ0JBQUEsR0FBQUEsZ0JBQUE7QUFBQUgsT0FBQSxDQUFBSSw0QkFBQSxHQUFBQSw0QkFBQTtBQUFBSixPQUFBLENBQUFLLGtCQUFBLEdBQUFBLGtCQUFBO0FBQUFMLE9BQUEsQ0FBQU0sd0JBQUEsR0FBQUEsd0JBQUE7QUFJYixJQUFBQyxnQkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsZUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBRUEsSUFBQUcs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