94f2859f17a2bb64f31624fe6b6026bd
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _NativeEventEmitter = _interopRequireDefault(require("../EventEmitter/NativeEventEmitter"));
var _Platform = _interopRequireDefault(require("../Utilities/Platform"));
var _NativePushNotificationManagerIOS = _interopRequireDefault(require("./NativePushNotificationManagerIOS"));
var _invariant = _interopRequireDefault(require("invariant"));
var PushNotificationEmitter = new _NativeEventEmitter.default(_Platform.default.OS !== 'ios' ? null : _NativePushNotificationManagerIOS.default);
var _notifHandlers = new Map();
var DEVICE_NOTIF_EVENT = 'remoteNotificationReceived';
var NOTIF_REGISTER_EVENT = 'remoteNotificationsRegistered';
var NOTIF_REGISTRATION_ERROR_EVENT = 'remoteNotificationRegistrationError';
var DEVICE_LOCAL_NOTIF_EVENT = 'localNotificationReceived';
var PushNotificationIOS = function () {
  function PushNotificationIOS(nativeNotif) {
    var _this = this;
    (0, _classCallCheck2.default)(this, PushNotificationIOS);
    this._data = {};
    this._remoteNotificationCompleteCallbackCalled = false;
    this._isRemote = nativeNotif.remote;
    if (this._isRemote) {
      this._notificationId = nativeNotif.notificationId;
    }
    if (nativeNotif.remote) {
      Object.keys(nativeNotif).forEach(function (notifKey) {
        var notifVal = nativeNotif[notifKey];
        if (notifKey === 'aps') {
          _this._alert = notifVal.alert;
          _this._sound = notifVal.sound;
          _this._badgeCount = notifVal.badge;
          _this._category = notifVal.category;
          _this._contentAvailable = notifVal['content-available'];
          _this._threadID = notifVal['thread-id'];
        } else {
          _this._data[notifKey] = notifVal;
        }
      });
    } else {
      this._badgeCount = nativeNotif.applicationIconBadgeNumber;
      this._sound = nativeNotif.soundName;
      this._alert = nativeNotif.alertBody;
      this._data = nativeNotif.userInfo;
      this._category = nativeNotif.category;
    }
  }
  return (0, _createClass2.default)(PushNotificationIOS, [{
    key: "finish",
    value: function finish(fetchResult) {
      if (!this._isRemote || !this._notificationId || this._remoteNotificationCompleteCallbackCalled) {
        return;
      }
      this._remoteNotificationCompleteCallbackCalled = true;
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.onFinishRemoteNotification(this._notificationId, fetchResult);
    }
  }, {
    key: "getMessage",
    value: function getMessage() {
      return this._alert;
    }
  }, {
    key: "getSound",
    value: function getSound() {
      return this._sound;
    }
  }, {
    key: "getCategory",
    value: function getCategory() {
      return this._category;
    }
  }, {
    key: "getAlert",
    value: function getAlert() {
      return this._alert;
    }
  }, {
    key: "getContentAvailable",
    value: function getContentAvailable() {
      return this._contentAvailable;
    }
  }, {
    key: "getBadgeCount",
    value: function getBadgeCount() {
      return this._badgeCount;
    }
  }, {
    key: "getData",
    value: function getData() {
      return this._data;
    }
  }, {
    key: "getThreadID",
    value: function getThreadID() {
      return this._threadID;
    }
  }], [{
    key: "presentLocalNotification",
    value: function presentLocalNotification(details) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.presentLocalNotification(details);
    }
  }, {
    key: "scheduleLocalNotification",
    value: function scheduleLocalNotification(details) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.scheduleLocalNotification(details);
    }
  }, {
    key: "cancelAllLocalNotifications",
    value: function cancelAllLocalNotifications() {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.cancelAllLocalNotifications();
    }
  }, {
    key: "removeAllDeliveredNotifications",
    value: function removeAllDeliveredNotifications() {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.removeAllDeliveredNotifications();
    }
  }, {
    key: "getDeliveredNotifications",
    value: function getDeliveredNotifications(callback) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.getDeliveredNotifications(callback);
    }
  }, {
    key: "removeDeliveredNotifications",
    value: function removeDeliveredNotifications(identifiers) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.removeDeliveredNotifications(identifiers);
    }
  }, {
    key: "setApplicationIconBadgeNumber",
    value: function setApplicationIconBadgeNumber(number) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.setApplicationIconBadgeNumber(number);
    }
  }, {
    key: "getApplicationIconBadgeNumber",
    value: function getApplicationIconBadgeNumber(callback) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.getApplicationIconBadgeNumber(callback);
    }
  }, {
    key: "cancelLocalNotifications",
    value: function cancelLocalNotifications(userInfo) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.cancelLocalNotifications(userInfo);
    }
  }, {
    key: "getScheduledLocalNotifications",
    value: function getScheduledLocalNotifications(callback) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.getScheduledLocalNotifications(callback);
    }
  }, {
    key: "addEventListener",
    value: function addEventListener(type, handler) {
      (0, _invariant.default)(type === 'notification' || type === 'register' || type === 'registrationError' || type === 'localNotification', 'PushNotificationIOS only supports `notification`, `register`, `registrationError`, and `localNotification` events');
      var listener;
      if (type === 'notification') {
        listener = PushNotificationEmitter.addListener(DEVICE_NOTIF_EVENT, function (notifData) {
          handler(new PushNotificationIOS(notifData));
        });
      } else if (type === 'localNotification') {
        listener = PushNotificationEmitter.addListener(DEVICE_LOCAL_NOTIF_EVENT, function (notifData) {
          handler(new PushNotificationIOS(notifData));
        });
      } else if (type === 'register') {
        listener = PushNotificationEmitter.addListener(NOTIF_REGISTER_EVENT, function (registrationInfo) {
          handler(registrationInfo.deviceToken);
        });
      } else if (type === 'registrationError') {
        listener = PushNotificationEmitter.addListener(NOTIF_REGISTRATION_ERROR_EVENT, function (errorInfo) {
          handler(errorInfo);
        });
      }
      _notifHandlers.set(type, listener);
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(type) {
      (0, _invariant.default)(type === 'notification' || type === 'register' || type === 'registrationError' || type === 'localNotification', 'PushNotificationIOS only supports `notification`, `register`, `registrationError`, and `localNotification` events');
      var listener = _notifHandlers.get(type);
      if (!listener) {
        return;
      }
      listener.remove();
      _notifHandlers.delete(type);
    }
  }, {
    key: "requestPermissions",
    value: function requestPermissions(permissions) {
      var requestedPermissions = {
        alert: true,
        badge: true,
        sound: true
      };
      if (permissions) {
        requestedPermissions = {
          alert: !!permissions.alert,
          badge: !!permissions.badge,
          sound: !!permissions.sound
        };
      }
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      return _NativePushNotificationManagerIOS.default.requestPermissions(requestedPermissions);
    }
  }, {
    key: "abandonPermissions",
    value: function abandonPermissions() {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.abandonPermissions();
    }
  }, {
    key: "checkPermissions",
    value: function checkPermissions(callback) {
      (0, _invariant.default)(typeof callback === 'function', 'Must provide a valid callback');
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.checkPermissions(callback);
    }
  }, {
    key: "getInitialNotification",
    value: function getInitialNotification() {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      return _NativePushNotificationManagerIOS.default.getInitialNotification().then(function (notification) {
        return notification && new PushNotificationIOS(notification);
      });
    }
  }, {
    key: "getAuthorizationStatus",
    value: function getAuthorizationStatus(callback) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.getAuthorizationStatus(callback);
    }
  }]);
}();
PushNotificationIOS.FetchResult = {
  NewData: 'UIBackgroundFetchResultNewData',
  NoData: 'UIBackgroundFetchResultNoData',
  ResultFailed: 'UIBackgroundFetchResultFailed'
};
module.exports = PushNotificationIOS;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlRXZlbnRFbWl0dGVyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfUGxhdGZvcm0iLCJfTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MiLCJfaW52YXJpYW50IiwiUHVzaE5vdGlmaWNhdGlvbkVtaXR0ZXIiLCJOYXRpdmVFdmVudEVtaXR0ZXIiLCJQbGF0Zm9ybSIsIk9TIiwiTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MiLCJfbm90aWZIYW5kbGVycyIsIk1hcCIsIkRFVklDRV9OT1RJRl9FVkVOVCIsIk5PVElGX1JFR0lTVEVSX0VWRU5UIiwiTk9USUZfUkVHSVNUUkFUSU9OX0VSUk9SX0VWRU5UIiwiREVWSUNFX0xPQ0FMX05PVElGX0VWRU5UIiwiUHVzaE5vdGlmaWNhdGlvbklPUyIsIm5hdGl2ZU5vdGlmIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGVmYXVsdCIsIl9kYXRhIiwiX3JlbW90ZU5vdGlmaWNhdGlvbkNvbXBsZXRlQ2FsbGJhY2tDYWxsZWQiLCJfaXNSZW1vdGUiLCJyZW1vdGUiLCJfbm90aWZpY2F0aW9uSWQiLCJub3RpZmljYXRpb25JZCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwibm90aWZLZXkiLCJub3RpZlZhbCIsIl9hbGVydCIsImFsZXJ0IiwiX3NvdW5kIiwic291bmQiLCJfYmFkZ2VDb3VudCIsImJhZGdlIiwiX2NhdGVnb3J5IiwiY2F0ZWdvcnkiLCJfY29udGVudEF2YWlsYWJsZSIsIl90aHJlYWRJRCIsImFwcGxpY2F0aW9uSWNvbkJhZGdlTnVtYmVyIiwic291bmROYW1lIiwiYWxlcnRCb2R5IiwidXNlckluZm8iLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJmaW5pc2giLCJmZXRjaFJlc3VsdCIsImludmFyaWFudCIsIm9uRmluaXNoUmVtb3RlTm90aWZpY2F0aW9uIiwiZ2V0TWVzc2FnZSIsImdldFNvdW5kIiwiZ2V0Q2F0ZWdvcnkiLCJnZXRBbGVydCIsImdldENvbnRlbnRBdmFpbGFibGUiLCJnZXRCYWRnZUNvdW50IiwiZ2V0RGF0YSIsImdldFRocmVhZElEIiwicHJlc2VudExvY2FsTm90aWZpY2F0aW9uIiwiZGV0YWlscyIsInNjaGVkdWxlTG9jYWxOb3RpZmljYXRpb24iLCJjYW5jZWxBbGxMb2NhbE5vdGlmaWNhdGlvbnMiLCJyZW1vdmVBbGxEZWxpdmVyZWROb3RpZmljYXRpb25zIiwiZ2V0RGVsaXZlcmVkTm90aWZpY2F0aW9ucyIsImNhbGxiYWNrIiwicmVtb3ZlRGVsaXZlcmVkTm90aWZpY2F0aW9ucyIsImlkZW50aWZpZXJzIiwic2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIiLCJudW1iZXIiLCJnZXRBcHBsaWNhdGlvbkljb25CYWRnZU51bWJlciIsImNhbmNlbExvY2FsTm90aWZpY2F0aW9ucyIsImdldFNjaGVkdWxlZExvY2FsTm90aWZpY2F0aW9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0eXBlIiwiaGFuZGxlciIsImxpc3RlbmVyIiwiYWRkTGlzdGVuZXIiLCJub3RpZkRhdGEiLCJyZWdpc3RyYXRpb25JbmZvIiwiZGV2aWNlVG9rZW4iLCJlcnJvckluZm8iLCJzZXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0IiwicmVtb3ZlIiwiZGVsZXRlIiwicmVxdWVzdFBlcm1pc3Npb25zIiwicGVybWlzc2lvbnMiLCJyZXF1ZXN0ZWRQZXJtaXNzaW9ucyIsImFiYW5kb25QZXJtaXNzaW9ucyIsImNoZWNrUGVybWlzc2lvbnMiLCJnZXRJbml0aWFsTm90aWZpY2F0aW9uIiwidGhlbiIsIm5vdGlmaWNhdGlvbiIsImdldEF1dGhvcml6YXRpb25TdGF0dXMiLCJGZXRjaFJlc3VsdCIsIk5ld0RhdGEiLCJOb0RhdGEiLCJSZXN1bHRGYWlsZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiUHVzaE5vdGlmaWNhdGlvbklPUy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3dcbiAqL1xuXG5pbXBvcnQgdHlwZSB7RXZlbnRTdWJzY3JpcHRpb259IGZyb20gJy4uL3ZlbmRvci9lbWl0dGVyL0V2ZW50RW1pdHRlcic7XG5cbmltcG9ydCBOYXRpdmVFdmVudEVtaXR0ZXIgZnJvbSAnLi4vRXZlbnRFbWl0dGVyL05hdGl2ZUV2ZW50RW1pdHRlcic7XG5pbXBvcnQgUGxhdGZvcm0gZnJvbSAnLi4vVXRpbGl0aWVzL1BsYXRmb3JtJztcbmltcG9ydCBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyBmcm9tICcuL05hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcblxudHlwZSBOYXRpdmVQdXNoTm90aWZpY2F0aW9uSU9TRXZlbnREZWZpbml0aW9ucyA9IHtcbiAgcmVtb3RlTm90aWZpY2F0aW9uUmVjZWl2ZWQ6IFtcbiAgICB7XG4gICAgICBub3RpZmljYXRpb25JZDogc3RyaW5nLFxuICAgICAgcmVtb3RlOiBib29sZWFuLFxuICAgICAgLi4uXG4gICAgfSxcbiAgXSxcbiAgcmVtb3RlTm90aWZpY2F0aW9uc1JlZ2lzdGVyZWQ6IFtcbiAgICB7XG4gICAgICBkZXZpY2VUb2tlbj86ID9zdHJpbmcsXG4gICAgICAuLi5cbiAgICB9LFxuICBdLFxuICByZW1vdGVOb3RpZmljYXRpb25SZWdpc3RyYXRpb25FcnJvcjogW1xuICAgIHtcbiAgICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICAgIGNvZGU6IG51bWJlcixcbiAgICAgIGRldGFpbHM6IHsuLi59LFxuICAgIH0sXG4gIF0sXG4gIGxvY2FsTm90aWZpY2F0aW9uUmVjZWl2ZWQ6IFt7Li4ufV0sXG59O1xuXG5jb25zdCBQdXNoTm90aWZpY2F0aW9uRW1pdHRlciA9XG4gIG5ldyBOYXRpdmVFdmVudEVtaXR0ZXI8TmF0aXZlUHVzaE5vdGlmaWNhdGlvbklPU0V2ZW50RGVmaW5pdGlvbnM+KFxuICAgIC8vIFQ4ODcxNTA2MzogTmF0aXZlRXZlbnRFbWl0dGVyIG9ubHkgdXNlZCB0aGlzIHBhcmFtZXRlciBvbiBpT1MuIE5vdyBpdCB1c2VzIGl0IG9uIGFsbCBwbGF0Zm9ybXMsIHNvIHRoaXMgY29kZSB3YXMgbW9kaWZpZWQgYXV0b21hdGljYWxseSB0byBwcmVzZXJ2ZSBpdHMgYmVoYXZpb3JcbiAgICAvLyBJZiB5b3Ugd2FudCB0byB1c2UgdGhlIG5hdGl2ZSBtb2R1bGUgb24gb3RoZXIgcGxhdGZvcm1zLCBwbGVhc2UgcmVtb3ZlIHRoaXMgY29uZGl0aW9uIGFuZCB0ZXN0IGl0cyBiZWhhdmlvclxuICAgIFBsYXRmb3JtLk9TICE9PSAnaW9zJyA/IG51bGwgOiBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgKTtcblxuY29uc3QgX25vdGlmSGFuZGxlcnMgPSBuZXcgTWFwPHN0cmluZywgdm9pZCB8IEV2ZW50U3Vic2NyaXB0aW9uPigpO1xuXG5jb25zdCBERVZJQ0VfTk9USUZfRVZFTlQgPSAncmVtb3RlTm90aWZpY2F0aW9uUmVjZWl2ZWQnO1xuY29uc3QgTk9USUZfUkVHSVNURVJfRVZFTlQgPSAncmVtb3RlTm90aWZpY2F0aW9uc1JlZ2lzdGVyZWQnO1xuY29uc3QgTk9USUZfUkVHSVNUUkFUSU9OX0VSUk9SX0VWRU5UID0gJ3JlbW90ZU5vdGlmaWNhdGlvblJlZ2lzdHJhdGlvbkVycm9yJztcbmNvbnN0IERFVklDRV9MT0NBTF9OT1RJRl9FVkVOVCA9ICdsb2NhbE5vdGlmaWNhdGlvblJlY2VpdmVkJztcblxuZXhwb3J0IHR5cGUgQ29udGVudEF2YWlsYWJsZSA9IDEgfCBudWxsIHwgdm9pZDtcblxuZXhwb3J0IHR5cGUgRmV0Y2hSZXN1bHQgPSB7XG4gIE5ld0RhdGE6IHN0cmluZyxcbiAgTm9EYXRhOiBzdHJpbmcsXG4gIFJlc3VsdEZhaWxlZDogc3RyaW5nLFxuICAuLi5cbn07XG5cbi8qKlxuICogQW4gZXZlbnQgZW1pdHRlZCBieSBQdXNoTm90aWZpY2F0aW9uSU9TLlxuICovXG5leHBvcnQgdHlwZSBQdXNoTm90aWZpY2F0aW9uRXZlbnROYW1lID0gJEtleXM8e1xuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIHJlbW90ZSBub3RpZmljYXRpb24gaXMgcmVjZWl2ZWQuIFRoZSBoYW5kbGVyIHdpbGwgYmUgaW52b2tlZFxuICAgKiB3aXRoIGFuIGluc3RhbmNlIG9mIGBQdXNoTm90aWZpY2F0aW9uSU9TYC4gVGhpcyB3aWxsIGhhbmRsZSBub3RpZmljYXRpb25zXG4gICAqIHRoYXQgYXJyaXZlIGluIHRoZSBmb3JlZ3JvdW5kIG9yIHdlcmUgdGFwcGVkIHRvIG9wZW4gdGhlIGFwcCBmcm9tIHRoZVxuICAgKiBiYWNrZ3JvdW5kLlxuICAgKi9cbiAgbm90aWZpY2F0aW9uOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIGEgbG9jYWwgbm90aWZpY2F0aW9uIGlzIHJlY2VpdmVkLiBUaGUgaGFuZGxlciB3aWxsIGJlIGludm9rZWRcbiAgICogd2l0aCBhbiBpbnN0YW5jZSBvZiBgUHVzaE5vdGlmaWNhdGlvbklPU2AuIFRoaXMgd2lsbCBoYW5kbGUgbm90aWZpY2F0aW9uc1xuICAgKiB0aGF0IGFycml2ZSBpbiB0aGUgZm9yZWdyb3VuZCBvciB3ZXJlIHRhcHBlZCB0byBvcGVuIHRoZSBhcHAgZnJvbSB0aGVcbiAgICogYmFja2dyb3VuZC5cbiAgICovXG4gIGxvY2FsTm90aWZpY2F0aW9uOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB1c2VyIHJlZ2lzdGVycyBmb3IgcmVtb3RlIG5vdGlmaWNhdGlvbnMuIFRoZSBoYW5kbGVyIHdpbGwgYmVcbiAgICogaW52b2tlZCB3aXRoIGEgaGV4IHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRldmljZVRva2VuLlxuICAgKi9cbiAgcmVnaXN0ZXI6IHN0cmluZyxcbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHVzZXIgZmFpbHMgdG8gcmVnaXN0ZXIgZm9yIHJlbW90ZSBub3RpZmljYXRpb25zLiBUeXBpY2FsbHlcbiAgICogb2NjdXJzIGR1ZSB0byBBUE5TIGlzc3VlcyBvciBpZiB0aGUgZGV2aWNlIGlzIGEgc2ltdWxhdG9yLiBUaGUgaGFuZGxlclxuICAgKiB3aWxsIGJlIGludm9rZWQgd2l0aCB7bWVzc2FnZTogc3RyaW5nLCBjb2RlOiBudW1iZXIsIGRldGFpbHM6IGFueX0uXG4gICAqL1xuICByZWdpc3RyYXRpb25FcnJvcjogc3RyaW5nLFxuICAuLi5cbn0+O1xuXG4vKipcbiAqXG4gKiBIYW5kbGUgbm90aWZpY2F0aW9ucyBmb3IgeW91ciBhcHAsIGluY2x1ZGluZyBzY2hlZHVsaW5nIGFuZCBwZXJtaXNzaW9ucy5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zXG4gKi9cbmNsYXNzIFB1c2hOb3RpZmljYXRpb25JT1Mge1xuICBfZGF0YTogT2JqZWN0O1xuICBfYWxlcnQ6IHN0cmluZyB8IE9iamVjdDtcbiAgX3NvdW5kOiBzdHJpbmc7XG4gIF9jYXRlZ29yeTogc3RyaW5nO1xuICBfY29udGVudEF2YWlsYWJsZTogQ29udGVudEF2YWlsYWJsZTtcbiAgX2JhZGdlQ291bnQ6IG51bWJlcjtcbiAgX25vdGlmaWNhdGlvbklkOiBzdHJpbmc7XG4gIF9pc1JlbW90ZTogYm9vbGVhbjtcbiAgX3JlbW90ZU5vdGlmaWNhdGlvbkNvbXBsZXRlQ2FsbGJhY2tDYWxsZWQ6IGJvb2xlYW47XG4gIF90aHJlYWRJRDogc3RyaW5nO1xuXG4gIHN0YXRpYyBGZXRjaFJlc3VsdDogRmV0Y2hSZXN1bHQgPSB7XG4gICAgTmV3RGF0YTogJ1VJQmFja2dyb3VuZEZldGNoUmVzdWx0TmV3RGF0YScsXG4gICAgTm9EYXRhOiAnVUlCYWNrZ3JvdW5kRmV0Y2hSZXN1bHROb0RhdGEnLFxuICAgIFJlc3VsdEZhaWxlZDogJ1VJQmFja2dyb3VuZEZldGNoUmVzdWx0RmFpbGVkJyxcbiAgfTtcblxuICAvKipcbiAgICogU2NoZWR1bGVzIGEgbG9jYWwgbm90aWZpY2F0aW9uIGZvciBpbW1lZGlhdGUgcHJlc2VudGF0aW9uLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3ByZXNlbnRsb2NhbG5vdGlmaWNhdGlvblxuICAgKi9cbiAgc3RhdGljIHByZXNlbnRMb2NhbE5vdGlmaWNhdGlvbihkZXRhaWxzOiBPYmplY3QpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5wcmVzZW50TG9jYWxOb3RpZmljYXRpb24oZGV0YWlscyk7XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGVzIGEgbG9jYWwgbm90aWZpY2F0aW9uIGZvciBmdXR1cmUgcHJlc2VudGF0aW9uLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3NjaGVkdWxlbG9jYWxub3RpZmljYXRpb25cbiAgICovXG4gIHN0YXRpYyBzY2hlZHVsZUxvY2FsTm90aWZpY2F0aW9uKGRldGFpbHM6IE9iamVjdCk6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLnNjaGVkdWxlTG9jYWxOb3RpZmljYXRpb24oZGV0YWlscyk7XG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VscyBhbGwgc2NoZWR1bGVkIGxvY2FsIG5vdGlmaWNhdGlvbnMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjY2FuY2VsYWxsbG9jYWxub3RpZmljYXRpb25zXG4gICAqL1xuICBzdGF0aWMgY2FuY2VsQWxsTG9jYWxOb3RpZmljYXRpb25zKCk6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLmNhbmNlbEFsbExvY2FsTm90aWZpY2F0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIGRlbGl2ZXJlZCBub3RpZmljYXRpb25zIGZyb20gTm90aWZpY2F0aW9uIENlbnRlci5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNyZW1vdmVhbGxkZWxpdmVyZWRub3RpZmljYXRpb25zXG4gICAqL1xuICBzdGF0aWMgcmVtb3ZlQWxsRGVsaXZlcmVkTm90aWZpY2F0aW9ucygpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5yZW1vdmVBbGxEZWxpdmVyZWROb3RpZmljYXRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgYSBsaXN0IG9mIHRoZSBhcHDigJlzIG5vdGlmaWNhdGlvbnMgdGhhdCBhcmUgY3VycmVudGx5IGRpc3BsYXllZFxuICAgKiBpbiBOb3RpZmljYXRpb24gQ2VudGVyLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2dldGRlbGl2ZXJlZG5vdGlmaWNhdGlvbnNcbiAgICovXG4gIHN0YXRpYyBnZXREZWxpdmVyZWROb3RpZmljYXRpb25zKFxuICAgIGNhbGxiYWNrOiAobm90aWZpY2F0aW9uczogQXJyYXk8T2JqZWN0PikgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MuZ2V0RGVsaXZlcmVkTm90aWZpY2F0aW9ucyhjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIG5vdGlmaWNhdGlvbnMgZnJvbSBOb3RpZmljYXRpb24gQ2VudGVyLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3JlbW92ZWRlbGl2ZXJlZG5vdGlmaWNhdGlvbnNcbiAgICovXG4gIHN0YXRpYyByZW1vdmVEZWxpdmVyZWROb3RpZmljYXRpb25zKGlkZW50aWZpZXJzOiBBcnJheTxzdHJpbmc+KTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MucmVtb3ZlRGVsaXZlcmVkTm90aWZpY2F0aW9ucyhpZGVudGlmaWVycyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgYmFkZ2UgbnVtYmVyIGZvciB0aGUgYXBwIGljb24gb24gdGhlIEhvbWUgU2NyZWVuLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3NldGFwcGxpY2F0aW9uaWNvbmJhZGdlbnVtYmVyXG4gICAqL1xuICBzdGF0aWMgc2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIobnVtYmVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5zZXRBcHBsaWNhdGlvbkljb25CYWRnZU51bWJlcihudW1iZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgYmFkZ2UgbnVtYmVyIGZvciB0aGUgYXBwIGljb24gb24gdGhlIEhvbWUgU2NyZWVuLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2dldGFwcGxpY2F0aW9uaWNvbmJhZGdlbnVtYmVyXG4gICAqL1xuICBzdGF0aWMgZ2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MuZ2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgYW55IHNjaGVkdWxlZCBsb2NhbCBub3RpZmljYXRpb25zIHdoaWNoIG1hdGNoIHRoZSBmaWVsZHMgaW4gdGhlXG4gICAqIHByb3ZpZGVkIGB1c2VySW5mb2AuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjY2FuY2VsbG9jYWxub3RpZmljYXRpb25cbiAgICovXG4gIHN0YXRpYyBjYW5jZWxMb2NhbE5vdGlmaWNhdGlvbnModXNlckluZm86IE9iamVjdCk6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLmNhbmNlbExvY2FsTm90aWZpY2F0aW9ucyh1c2VySW5mbyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbGlzdCBvZiBsb2NhbCBub3RpZmljYXRpb25zIHRoYXQgYXJlIGN1cnJlbnRseSBzY2hlZHVsZWQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0c2NoZWR1bGVkbG9jYWxub3RpZmljYXRpb25zXG4gICAqL1xuICBzdGF0aWMgZ2V0U2NoZWR1bGVkTG9jYWxOb3RpZmljYXRpb25zKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLmdldFNjaGVkdWxlZExvY2FsTm90aWZpY2F0aW9ucyhjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoZXMgYSBsaXN0ZW5lciB0byBub3RpZmljYXRpb24gZXZlbnRzIGluY2x1ZGluZyBsb2NhbCBub3RpZmljYXRpb25zLFxuICAgKiByZW1vdGUgbm90aWZpY2F0aW9ucywgYW5kIG5vdGlmaWNhdGlvbiByZWdpc3RyYXRpb24gcmVzdWx0cy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNhZGRldmVudGxpc3RlbmVyXG4gICAqL1xuICBzdGF0aWMgYWRkRXZlbnRMaXN0ZW5lcihcbiAgICB0eXBlOiBQdXNoTm90aWZpY2F0aW9uRXZlbnROYW1lLFxuICAgIGhhbmRsZXI6IEZ1bmN0aW9uLFxuICApOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0eXBlID09PSAnbm90aWZpY2F0aW9uJyB8fFxuICAgICAgICB0eXBlID09PSAncmVnaXN0ZXInIHx8XG4gICAgICAgIHR5cGUgPT09ICdyZWdpc3RyYXRpb25FcnJvcicgfHxcbiAgICAgICAgdHlwZSA9PT0gJ2xvY2FsTm90aWZpY2F0aW9uJyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uSU9TIG9ubHkgc3VwcG9ydHMgYG5vdGlmaWNhdGlvbmAsIGByZWdpc3RlcmAsIGByZWdpc3RyYXRpb25FcnJvcmAsIGFuZCBgbG9jYWxOb3RpZmljYXRpb25gIGV2ZW50cycsXG4gICAgKTtcbiAgICBsZXQgbGlzdGVuZXI7XG4gICAgaWYgKHR5cGUgPT09ICdub3RpZmljYXRpb24nKSB7XG4gICAgICBsaXN0ZW5lciA9IFB1c2hOb3RpZmljYXRpb25FbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICBERVZJQ0VfTk9USUZfRVZFTlQsXG4gICAgICAgIG5vdGlmRGF0YSA9PiB7XG4gICAgICAgICAgaGFuZGxlcihuZXcgUHVzaE5vdGlmaWNhdGlvbklPUyhub3RpZkRhdGEpKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnbG9jYWxOb3RpZmljYXRpb24nKSB7XG4gICAgICBsaXN0ZW5lciA9IFB1c2hOb3RpZmljYXRpb25FbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICBERVZJQ0VfTE9DQUxfTk9USUZfRVZFTlQsXG4gICAgICAgIG5vdGlmRGF0YSA9PiB7XG4gICAgICAgICAgaGFuZGxlcihuZXcgUHVzaE5vdGlmaWNhdGlvbklPUyhub3RpZkRhdGEpKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAncmVnaXN0ZXInKSB7XG4gICAgICBsaXN0ZW5lciA9IFB1c2hOb3RpZmljYXRpb25FbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICBOT1RJRl9SRUdJU1RFUl9FVkVOVCxcbiAgICAgICAgcmVnaXN0cmF0aW9uSW5mbyA9PiB7XG4gICAgICAgICAgaGFuZGxlcihyZWdpc3RyYXRpb25JbmZvLmRldmljZVRva2VuKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAncmVnaXN0cmF0aW9uRXJyb3InKSB7XG4gICAgICBsaXN0ZW5lciA9IFB1c2hOb3RpZmljYXRpb25FbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICBOT1RJRl9SRUdJU1RSQVRJT05fRVJST1JfRVZFTlQsXG4gICAgICAgIGVycm9ySW5mbyA9PiB7XG4gICAgICAgICAgaGFuZGxlcihlcnJvckluZm8pO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG4gICAgX25vdGlmSGFuZGxlcnMuc2V0KHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lci4gRG8gdGhpcyBpbiBgY29tcG9uZW50V2lsbFVubW91bnRgIHRvIHByZXZlbnRcbiAgICogbWVtb3J5IGxlYWtzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3JlbW92ZWV2ZW50bGlzdGVuZXJcbiAgICovXG4gIHN0YXRpYyByZW1vdmVFdmVudExpc3RlbmVyKHR5cGU6IFB1c2hOb3RpZmljYXRpb25FdmVudE5hbWUpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0eXBlID09PSAnbm90aWZpY2F0aW9uJyB8fFxuICAgICAgICB0eXBlID09PSAncmVnaXN0ZXInIHx8XG4gICAgICAgIHR5cGUgPT09ICdyZWdpc3RyYXRpb25FcnJvcicgfHxcbiAgICAgICAgdHlwZSA9PT0gJ2xvY2FsTm90aWZpY2F0aW9uJyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uSU9TIG9ubHkgc3VwcG9ydHMgYG5vdGlmaWNhdGlvbmAsIGByZWdpc3RlcmAsIGByZWdpc3RyYXRpb25FcnJvcmAsIGFuZCBgbG9jYWxOb3RpZmljYXRpb25gIGV2ZW50cycsXG4gICAgKTtcbiAgICBjb25zdCBsaXN0ZW5lciA9IF9ub3RpZkhhbmRsZXJzLmdldCh0eXBlKTtcbiAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxpc3RlbmVyLnJlbW92ZSgpO1xuICAgIF9ub3RpZkhhbmRsZXJzLmRlbGV0ZSh0eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0cyBub3RpZmljYXRpb24gcGVybWlzc2lvbnMgZnJvbSBpT1MsIHByb21wdGluZyB0aGUgdXNlciB3aXRoIGFcbiAgICogZGlhbG9nIGJveC4gQnkgZGVmYXVsdCwgaXQgd2lsbCByZXF1ZXN0IGFsbCBub3RpZmljYXRpb24gcGVybWlzc2lvbnMsIGJ1dFxuICAgKiB5b3UgY2FuIG9wdGlvbmFsbHkgc3BlY2lmeSB3aGljaCBwZXJtaXNzaW9ucyB0byByZXF1ZXN0LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3JlcXVlc3RwZXJtaXNzaW9uc1xuICAgKi9cbiAgc3RhdGljIHJlcXVlc3RQZXJtaXNzaW9ucyhwZXJtaXNzaW9ucz86IHtcbiAgICBhbGVydD86IGJvb2xlYW4sXG4gICAgYmFkZ2U/OiBib29sZWFuLFxuICAgIHNvdW5kPzogYm9vbGVhbixcbiAgICAuLi5cbiAgfSk6IFByb21pc2U8e1xuICAgIGFsZXJ0OiBib29sZWFuLFxuICAgIGJhZGdlOiBib29sZWFuLFxuICAgIHNvdW5kOiBib29sZWFuLFxuICAgIC4uLlxuICB9PiB7XG4gICAgbGV0IHJlcXVlc3RlZFBlcm1pc3Npb25zID0ge1xuICAgICAgYWxlcnQ6IHRydWUsXG4gICAgICBiYWRnZTogdHJ1ZSxcbiAgICAgIHNvdW5kOiB0cnVlLFxuICAgIH07XG4gICAgaWYgKHBlcm1pc3Npb25zKSB7XG4gICAgICByZXF1ZXN0ZWRQZXJtaXNzaW9ucyA9IHtcbiAgICAgICAgYWxlcnQ6ICEhcGVybWlzc2lvbnMuYWxlcnQsXG4gICAgICAgIGJhZGdlOiAhIXBlcm1pc3Npb25zLmJhZGdlLFxuICAgICAgICBzb3VuZDogISFwZXJtaXNzaW9ucy5zb3VuZCxcbiAgICAgIH07XG4gICAgfVxuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIHJldHVybiBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5yZXF1ZXN0UGVybWlzc2lvbnMoXG4gICAgICByZXF1ZXN0ZWRQZXJtaXNzaW9ucyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXIgZm9yIGFsbCByZW1vdGUgbm90aWZpY2F0aW9ucyByZWNlaXZlZCB2aWEgQXBwbGUgUHVzaCBOb3RpZmljYXRpb25cbiAgICogc2VydmljZS4gVGhpcyBzaG91bGQgYmUgY2FsbGVkIGluIHJhcmUgY2lyY3Vtc3RhbmNlcyBvbmx5LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2FiYW5kb25wZXJtaXNzaW9uc1xuICAgKi9cbiAgc3RhdGljIGFiYW5kb25QZXJtaXNzaW9ucygpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5hYmFuZG9uUGVybWlzc2lvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB3aGljaCBwdXNoIHBlcm1pc3Npb25zIGFyZSBjdXJyZW50bHkgZW5hYmxlZC4gYGNhbGxiYWNrYCB3aWxsIGJlXG4gICAqIGludm9rZWQgd2l0aCBhIGBQZXJtaXNzaW9uc2Agb2JqZWN0LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2NoZWNrcGVybWlzc2lvbnNcbiAgICovXG4gIHN0YXRpYyBjaGVja1Blcm1pc3Npb25zKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGludmFyaWFudCh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicsICdNdXN0IHByb3ZpZGUgYSB2YWxpZCBjYWxsYmFjaycpO1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLmNoZWNrUGVybWlzc2lvbnMoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gZWl0aGVyIHRoZSBub3RpZmljYXRpb25cbiAgICogb2JqZWN0IGlmIHRoZSBhcHAgd2FzIGxhdW5jaGVkIGJ5IGEgcHVzaCBub3RpZmljYXRpb24sIG9yIGBudWxsYCBvdGhlcndpc2UuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0aW5pdGlhbG5vdGlmaWNhdGlvblxuICAgKi9cbiAgc3RhdGljIGdldEluaXRpYWxOb3RpZmljYXRpb24oKTogUHJvbWlzZTw/UHVzaE5vdGlmaWNhdGlvbklPUz4ge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIHJldHVybiBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5nZXRJbml0aWFsTm90aWZpY2F0aW9uKCkudGhlbihcbiAgICAgIG5vdGlmaWNhdGlvbiA9PiB7XG4gICAgICAgIHJldHVybiBub3RpZmljYXRpb24gJiYgbmV3IFB1c2hOb3RpZmljYXRpb25JT1Mobm90aWZpY2F0aW9uKTtcbiAgICAgIH0sXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBjdXJyZW50IG5vdGlmaWNhdGlvblxuICAgKiBhdXRob3JpemF0aW9uIHN0YXR1cy4gU2VlIFVOQXV0aG9yaXphdGlvblN0YXR1cyBmb3IgcG9zc2libGUgdmFsdWVzLlxuICAgKi9cbiAgc3RhdGljIGdldEF1dGhvcml6YXRpb25TdGF0dXMoXG4gICAgY2FsbGJhY2s6IChhdXRob3JpemF0aW9uU3RhdHVzOiBudW1iZXIpID0+IHZvaWQsXG4gICk6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuXG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MuZ2V0QXV0aG9yaXphdGlvblN0YXR1cyhjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogWW91IHdpbGwgbmV2ZXIgbmVlZCB0byBpbnN0YW50aWF0ZSBgUHVzaE5vdGlmaWNhdGlvbklPU2AgeW91cnNlbGYuXG4gICAqIExpc3RlbmluZyB0byB0aGUgYG5vdGlmaWNhdGlvbmAgZXZlbnQgYW5kIGludm9raW5nXG4gICAqIGBnZXRJbml0aWFsTm90aWZpY2F0aW9uYCBpcyBzdWZmaWNpZW50LlxuICAgKlxuICAgKi9cbiAgY29uc3RydWN0b3IobmF0aXZlTm90aWY6IE9iamVjdCkge1xuICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICB0aGlzLl9yZW1vdGVOb3RpZmljYXRpb25Db21wbGV0ZUNhbGxiYWNrQ2FsbGVkID0gZmFsc2U7XG4gICAgdGhpcy5faXNSZW1vdGUgPSBuYXRpdmVOb3RpZi5yZW1vdGU7XG4gICAgaWYgKHRoaXMuX2lzUmVtb3RlKSB7XG4gICAgICB0aGlzLl9ub3RpZmljYXRpb25JZCA9IG5hdGl2ZU5vdGlmLm5vdGlmaWNhdGlvbklkO1xuICAgIH1cblxuICAgIGlmIChuYXRpdmVOb3RpZi5yZW1vdGUpIHtcbiAgICAgIC8vIEV4dHJhY3QgZGF0YSBmcm9tIEFwcGxlJ3MgYGFwc2AgZGljdCBhcyBkZWZpbmVkOlxuICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvaW9zL2RvY3VtZW50YXRpb24vTmV0d29ya2luZ0ludGVybmV0L0NvbmNlcHR1YWwvUmVtb3RlTm90aWZpY2F0aW9uc1BHL0NoYXB0ZXJzL0FwcGxlUHVzaFNlcnZpY2VcbiAgICAgIE9iamVjdC5rZXlzKG5hdGl2ZU5vdGlmKS5mb3JFYWNoKG5vdGlmS2V5ID0+IHtcbiAgICAgICAgY29uc3Qgbm90aWZWYWwgPSBuYXRpdmVOb3RpZltub3RpZktleV07XG4gICAgICAgIGlmIChub3RpZktleSA9PT0gJ2FwcycpIHtcbiAgICAgICAgICB0aGlzLl9hbGVydCA9IG5vdGlmVmFsLmFsZXJ0O1xuICAgICAgICAgIHRoaXMuX3NvdW5kID0gbm90aWZWYWwuc291bmQ7XG4gICAgICAgICAgdGhpcy5fYmFkZ2VDb3VudCA9IG5vdGlmVmFsLmJhZGdlO1xuICAgICAgICAgIHRoaXMuX2NhdGVnb3J5ID0gbm90aWZWYWwuY2F0ZWdvcnk7XG4gICAgICAgICAgdGhpcy5fY29udGVudEF2YWlsYWJsZSA9IG5vdGlmVmFsWydjb250ZW50LWF2YWlsYWJsZSddO1xuICAgICAgICAgIHRoaXMuX3RocmVhZElEID0gbm90aWZWYWxbJ3RocmVhZC1pZCddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2RhdGFbbm90aWZLZXldID0gbm90aWZWYWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb2NhbCBub3RpZmljYXRpb25zIGFyZW4ndCBiZWluZyBzZW50IGRvd24gd2l0aCBgYXBzYCBkaWN0LlxuICAgICAgdGhpcy5fYmFkZ2VDb3VudCA9IG5hdGl2ZU5vdGlmLmFwcGxpY2F0aW9uSWNvbkJhZGdlTnVtYmVyO1xuICAgICAgdGhpcy5fc291bmQgPSBuYXRpdmVOb3RpZi5zb3VuZE5hbWU7XG4gICAgICB0aGlzLl9hbGVydCA9IG5hdGl2ZU5vdGlmLmFsZXJ0Qm9keTtcbiAgICAgIHRoaXMuX2RhdGEgPSBuYXRpdmVOb3RpZi51c2VySW5mbztcbiAgICAgIHRoaXMuX2NhdGVnb3J5ID0gbmF0aXZlTm90aWYuY2F0ZWdvcnk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBmb3IgcmVtb3RlIG5vdGlmaWNhdGlvbnMgdGhhdCBoYXZlIGJlZW4gcmVjZWl2ZWQgdmlhOlxuICAgKiBgYXBwbGljYXRpb246ZGlkUmVjZWl2ZVJlbW90ZU5vdGlmaWNhdGlvbjpmZXRjaENvbXBsZXRpb25IYW5kbGVyOmAuIFNlZSBkb2NzXG4gICAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2ZpbmlzaFxuICAgKi9cbiAgZmluaXNoKGZldGNoUmVzdWx0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5faXNSZW1vdGUgfHxcbiAgICAgICF0aGlzLl9ub3RpZmljYXRpb25JZCB8fFxuICAgICAgdGhpcy5fcmVtb3RlTm90aWZpY2F0aW9uQ29tcGxldGVDYWxsYmFja0NhbGxlZFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9yZW1vdGVOb3RpZmljYXRpb25Db21wbGV0ZUNhbGxiYWNrQ2FsbGVkID0gdHJ1ZTtcblxuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLm9uRmluaXNoUmVtb3RlTm90aWZpY2F0aW9uKFxuICAgICAgdGhpcy5fbm90aWZpY2F0aW9uSWQsXG4gICAgICBmZXRjaFJlc3VsdCxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIGFsaWFzIGZvciBgZ2V0QWxlcnRgIHRvIGdldCB0aGUgbm90aWZpY2F0aW9uJ3MgbWFpbiBtZXNzYWdlIHN0cmluZy5cbiAgICovXG4gIGdldE1lc3NhZ2UoKTogP3N0cmluZyB8ID9PYmplY3Qge1xuICAgIC8vIGFsaWFzIGJlY2F1c2UgXCJhbGVydFwiIGlzIGFuIGFtYmlndW91cyBuYW1lXG4gICAgcmV0dXJuIHRoaXMuX2FsZXJ0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHNvdW5kIHN0cmluZyBmcm9tIHRoZSBgYXBzYCBvYmplY3QuIFRoaXMgd2lsbCBiZSBgbnVsbGAgZm9yIGxvY2FsXG4gICAqIG5vdGlmaWNhdGlvbnMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0c291bmRcbiAgICovXG4gIGdldFNvdW5kKCk6ID9zdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9zb3VuZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjYXRlZ29yeSBzdHJpbmcgZnJvbSB0aGUgYGFwc2Agb2JqZWN0LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2dldGNhdGVnb3J5XG4gICAqL1xuICBnZXRDYXRlZ29yeSgpOiA/c3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fY2F0ZWdvcnk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbm90aWZpY2F0aW9uJ3MgbWFpbiBtZXNzYWdlIGZyb20gdGhlIGBhcHNgIG9iamVjdC4gQWxzbyBzZWUgdGhlXG4gICAqIGFsaWFzOiBgZ2V0TWVzc2FnZSgpYC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNnZXRhbGVydFxuICAgKi9cbiAgZ2V0QWxlcnQoKTogP3N0cmluZyB8ID9PYmplY3Qge1xuICAgIHJldHVybiB0aGlzLl9hbGVydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb250ZW50LWF2YWlsYWJsZSBudW1iZXIgZnJvbSB0aGUgYGFwc2Agb2JqZWN0LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2dldGNvbnRlbnRhdmFpbGFibGVcbiAgICovXG4gIGdldENvbnRlbnRBdmFpbGFibGUoKTogQ29udGVudEF2YWlsYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRBdmFpbGFibGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYmFkZ2UgY291bnQgbnVtYmVyIGZyb20gdGhlIGBhcHNgIG9iamVjdC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNnZXRiYWRnZWNvdW50XG4gICAqL1xuICBnZXRCYWRnZUNvdW50KCk6ID9udW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9iYWRnZUNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRhdGEgb2JqZWN0IG9uIHRoZSBub3RpZmljYXRpb24uXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0ZGF0YVxuICAgKi9cbiAgZ2V0RGF0YSgpOiA/T2JqZWN0IHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aHJlYWQgSUQgb24gdGhlIG5vdGlmaWNhdGlvbi5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNnZXR0aHJlYWRpZFxuICAgKi9cbiAgZ2V0VGhyZWFkSUQoKTogP3N0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3RocmVhZElEO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUHVzaE5vdGlmaWNhdGlvbklPUztcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBWUEsSUFBQUEsbUJBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGlDQUFBLEdBQUFILHNCQUFB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