{"version":3,"names":["getBetterRandomIndex","max","_performance","_crypto","cov_bv1jn9vb7","f","entropySources","s","Date","now","process","hrtime","b","Math","floor","performance","crypto","getRandomValues","Uint8Array","randomValue","reduce","acc","source","index","randomBytes","error","console","warn","message","timeEntropy","shuffleArray","exports","array","Array","isArray","length","_toConsumableArray2","default","shuffled","i","j","_ref","shuffleAndTake","count","slice","min","shuffleWithFallback","fallbackArray","combined","concat","shuffleInPlace","_ref2"],"sources":["arrayUtils.js"],"sourcesContent":["// src/utils/arrayUtils.js - Utilitaires pour la manipulation d'arrays\r\n\r\n/**\r\n * Génère un nombre aléatoire de meilleure qualité pour le mélange d'exercices\r\n * @param {number} max - Valeur maximale (exclusive)\r\n * @returns {number} Index aléatoire\r\n */\r\nfunction getBetterRandomIndex(max) {\r\n  // Utilise uniquement des sources d'entropie système, pas Math.random\r\n  const entropySources = [\r\n    Date.now() % 1000000,\r\n    process.hrtime ? process.hrtime()[1] : 0,\r\n    Math.floor(performance?.now() || 0),\r\n    crypto?.getRandomValues ? crypto.getRandomValues(new Uint8Array(1))[0] : 0\r\n  ];\r\n  \r\n  // Combine les sources d'entropie pour créer un index\r\n  let randomValue = entropySources.reduce((acc, source, index) => {\r\n    return (acc + source * (index + 1)) % max;\r\n  }, 0);\r\n  \r\n  // Ajoute de l'entropie supplémentaire si disponible\r\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\r\n    try {\r\n      const randomBytes = new Uint8Array(1);\r\n      crypto.getRandomValues(randomBytes);\r\n      // Combine avec l'entropie système pour améliorer la distribution\r\n      randomValue = (randomValue + randomBytes[0] % max) % max;\r\n    } catch (error) {\r\n      // Ignore les erreurs et continue avec l'entropie système\r\n      console.warn('Crypto API failed, using system entropy only:', error.message);\r\n    }\r\n  }\r\n  \r\n  // Ajoute de l'entropie basée sur le temps\r\n  const timeEntropy = (Date.now() % 1000000) % max;\r\n  randomValue = (randomValue + timeEntropy) % max;\r\n  \r\n  return randomValue;\r\n}\r\n\r\n/**\r\n * Mélange un array en utilisant l'algorithme Fisher-Yates (shuffle)\r\n * Plus efficace et prévisible que sort(() => Math.random() - 0.5)\r\n * @param {Array} array - L'array à mélanger\r\n * @returns {Array} - Une copie mélangée de l'array\r\n */\r\nexport const shuffleArray = (array) => {\r\n  if (!Array.isArray(array)) {\r\n    return [];\r\n  }\r\n  \r\n  if (array.length <= 1) {\r\n    return [...array];\r\n  }\r\n\r\n  const shuffled = [...array];\r\n  for (let i = shuffled.length - 1; i > 0; i--) {\r\n    const j = getBetterRandomIndex(i + 1);\r\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n  }\r\n  \r\n  return shuffled;\r\n};\r\n\r\n/**\r\n * Mélange un array et retourne les n premiers éléments\r\n * @param {Array} array - L'array à mélanger\r\n * @param {number} count - Nombre d'éléments à retourner\r\n * @returns {Array} - Les n premiers éléments mélangés\r\n */\r\nexport const shuffleAndTake = (array, count) => {\r\n  if (!Array.isArray(array) || array.length === 0 || count <= 0) {\r\n    return [];\r\n  }\r\n  \r\n  const shuffled = shuffleArray(array);\r\n  return shuffled.slice(0, Math.min(count, array.length));\r\n};\r\n\r\n/**\r\n * Mélange un array et retourne les n premiers éléments avec fallback\r\n * @param {Array} array - L'array principal\r\n * @param {Array} fallbackArray - Array de fallback si le principal est insuffisant\r\n * @param {number} count - Nombre d'éléments à retourner\r\n * @returns {Array} - Les n premiers éléments mélangés\r\n */\r\nexport const shuffleWithFallback = (array, fallbackArray, count) => {\r\n  if (!Array.isArray(array) || array.length === 0) {\r\n    return shuffleAndTake(fallbackArray, count);\r\n  }\r\n  \r\n  if (array.length >= count) {\r\n    return shuffleAndTake(array, count);\r\n  }\r\n  \r\n  // Combiner les deux arrays et mélanger\r\n  const combined = [...array, ...fallbackArray];\r\n  return shuffleAndTake(combined, count);\r\n};\r\n\r\n/**\r\n * Mélange un array en place (modifie l'array original)\r\n * @param {Array} array - L'array à mélanger\r\n */\r\nexport const shuffleInPlace = (array) => {\r\n  if (!Array.isArray(array) || array.length <= 1) {\r\n    return;\r\n  }\r\n\r\n  for (let i = array.length - 1; i > 0; i--) {\r\n    const j = getBetterRandomIndex(i + 1);\r\n    [array[i], array[j]] = [array[j], array[i]];\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]}