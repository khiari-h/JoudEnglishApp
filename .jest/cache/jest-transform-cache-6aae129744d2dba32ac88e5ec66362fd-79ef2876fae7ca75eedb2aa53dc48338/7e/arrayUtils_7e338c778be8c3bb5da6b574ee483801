0ad5a951d572efe5774826a25595dcd0
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.shuffleWithFallback = exports.shuffleInPlace = exports.shuffleArray = exports.shuffleAndTake = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
function getBetterRandomIndex(max) {
  var randomValue = Math.random();
  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {
    try {
      var randomBytes = new Uint8Array(1);
      crypto.getRandomValues(randomBytes);
      randomValue = (randomValue + randomBytes[0] / 255) / 2;
    } catch (error) {}
  }
  var timeEntropy = Date.now() % 1000 / 1000;
  randomValue = (randomValue + timeEntropy) / 2;
  return Math.floor(randomValue * max);
}
var shuffleArray = exports.shuffleArray = function shuffleArray(array) {
  if (!Array.isArray(array)) {
    return [];
  }
  if (array.length <= 1) {
    return (0, _toConsumableArray2.default)(array);
  }
  var shuffled = (0, _toConsumableArray2.default)(array);
  for (var i = shuffled.length - 1; i > 0; i--) {
    var j = getBetterRandomIndex(i + 1);
    var _ref = [shuffled[j], shuffled[i]];
    shuffled[i] = _ref[0];
    shuffled[j] = _ref[1];
  }
  return shuffled;
};
var shuffleAndTake = exports.shuffleAndTake = function shuffleAndTake(array, count) {
  if (!Array.isArray(array) || array.length === 0 || count <= 0) {
    return [];
  }
  var shuffled = shuffleArray(array);
  return shuffled.slice(0, Math.min(count, array.length));
};
var shuffleWithFallback = exports.shuffleWithFallback = function shuffleWithFallback(array, fallbackArray, count) {
  if (!Array.isArray(array) || array.length === 0) {
    return shuffleAndTake(fallbackArray, count);
  }
  if (array.length >= count) {
    return shuffleAndTake(array, count);
  }
  var combined = [].concat((0, _toConsumableArray2.default)(array), (0, _toConsumableArray2.default)(fallbackArray));
  return shuffleAndTake(combined, count);
};
var shuffleInPlace = exports.shuffleInPlace = function shuffleInPlace(array) {
  if (!Array.isArray(array) || array.length <= 1) {
    return;
  }
  for (var i = array.length - 1; i > 0; i--) {
    var j = getBetterRandomIndex(i + 1);
    var _ref2 = [array[j], array[i]];
    array[i] = _ref2[0];
    array[j] = _ref2[1];
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRCZXR0ZXJSYW5kb21JbmRleCIsIm1heCIsInJhbmRvbVZhbHVlIiwiTWF0aCIsInJhbmRvbSIsImNyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsInJhbmRvbUJ5dGVzIiwiVWludDhBcnJheSIsImVycm9yIiwidGltZUVudHJvcHkiLCJEYXRlIiwibm93IiwiZmxvb3IiLCJzaHVmZmxlQXJyYXkiLCJleHBvcnRzIiwiYXJyYXkiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJfdG9Db25zdW1hYmxlQXJyYXkyIiwiZGVmYXVsdCIsInNodWZmbGVkIiwiaSIsImoiLCJfcmVmIiwic2h1ZmZsZUFuZFRha2UiLCJjb3VudCIsInNsaWNlIiwibWluIiwic2h1ZmZsZVdpdGhGYWxsYmFjayIsImZhbGxiYWNrQXJyYXkiLCJjb21iaW5lZCIsImNvbmNhdCIsInNodWZmbGVJblBsYWNlIiwiX3JlZjIiXSwic291cmNlcyI6WyJhcnJheVV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9hcnJheVV0aWxzLmpzIC0gVXRpbGl0YWlyZXMgcG91ciBsYSBtYW5pcHVsYXRpb24gZCdhcnJheXNcclxuXHJcbi8qKlxyXG4gKiBHw6luw6hyZSB1biBub21icmUgYWzDqWF0b2lyZSBkZSBtZWlsbGV1cmUgcXVhbGl0w6kgcG91ciBsZSBtw6lsYW5nZSBkJ2V4ZXJjaWNlc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IC0gVmFsZXVyIG1heGltYWxlIChleGNsdXNpdmUpXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IEluZGV4IGFsw6lhdG9pcmVcclxuICovXHJcbmZ1bmN0aW9uIGdldEJldHRlclJhbmRvbUluZGV4KG1heCkge1xyXG4gIC8vIENvbWJpbmUgcGx1c2lldXJzIHNvdXJjZXMgZCdhbMOpYXRvaXJlIHBvdXIgYW3DqWxpb3JlciBsYSBxdWFsaXTDqVxyXG4gIGxldCByYW5kb21WYWx1ZSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgXHJcbiAgLy8gQWpvdXRlIGRlIGwnZW50cm9waWUgc3VwcGzDqW1lbnRhaXJlIHNpIGRpc3BvbmlibGVcclxuICBpZiAodHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmFuZG9tQnl0ZXMgPSBuZXcgVWludDhBcnJheSgxKTtcclxuICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhyYW5kb21CeXRlcyk7XHJcbiAgICAgIC8vIENvbWJpbmUgYXZlYyBNYXRoLnJhbmRvbSBwb3VyIGFtw6lsaW9yZXIgbGEgZGlzdHJpYnV0aW9uXHJcbiAgICAgIHJhbmRvbVZhbHVlID0gKHJhbmRvbVZhbHVlICsgcmFuZG9tQnl0ZXNbMF0gLyAyNTUpIC8gMjtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIElnbm9yZSBsZXMgZXJyZXVycyBldCBjb250aW51ZSBhdmVjIE1hdGgucmFuZG9tXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEFqb3V0ZSBkZSBsJ2VudHJvcGllIGJhc8OpZSBzdXIgbGUgdGVtcHNcclxuICBjb25zdCB0aW1lRW50cm9weSA9IChEYXRlLm5vdygpICUgMTAwMCkgLyAxMDAwO1xyXG4gIHJhbmRvbVZhbHVlID0gKHJhbmRvbVZhbHVlICsgdGltZUVudHJvcHkpIC8gMjtcclxuICBcclxuICByZXR1cm4gTWF0aC5mbG9vcihyYW5kb21WYWx1ZSAqIG1heCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNw6lsYW5nZSB1biBhcnJheSBlbiB1dGlsaXNhbnQgbCdhbGdvcml0aG1lIEZpc2hlci1ZYXRlcyAoc2h1ZmZsZSlcclxuICogUGx1cyBlZmZpY2FjZSBldCBwcsOpdmlzaWJsZSBxdWUgc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KVxyXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSAtIEwnYXJyYXkgw6AgbcOpbGFuZ2VyXHJcbiAqIEByZXR1cm5zIHtBcnJheX0gLSBVbmUgY29waWUgbcOpbGFuZ8OpZSBkZSBsJ2FycmF5XHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc2h1ZmZsZUFycmF5ID0gKGFycmF5KSA9PiB7XHJcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkge1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuICBcclxuICBpZiAoYXJyYXkubGVuZ3RoIDw9IDEpIHtcclxuICAgIHJldHVybiBbLi4uYXJyYXldO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2h1ZmZsZWQgPSBbLi4uYXJyYXldO1xyXG4gIGZvciAobGV0IGkgPSBzaHVmZmxlZC5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcbiAgICBjb25zdCBqID0gZ2V0QmV0dGVyUmFuZG9tSW5kZXgoaSArIDEpO1xyXG4gICAgW3NodWZmbGVkW2ldLCBzaHVmZmxlZFtqXV0gPSBbc2h1ZmZsZWRbal0sIHNodWZmbGVkW2ldXTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHNodWZmbGVkO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE3DqWxhbmdlIHVuIGFycmF5IGV0IHJldG91cm5lIGxlcyBuIHByZW1pZXJzIMOpbMOpbWVudHNcclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgLSBMJ2FycmF5IMOgIG3DqWxhbmdlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnQgLSBOb21icmUgZCfDqWzDqW1lbnRzIMOgIHJldG91cm5lclxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IC0gTGVzIG4gcHJlbWllcnMgw6lsw6ltZW50cyBtw6lsYW5nw6lzXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc2h1ZmZsZUFuZFRha2UgPSAoYXJyYXksIGNvdW50KSA9PiB7XHJcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCBhcnJheS5sZW5ndGggPT09IDAgfHwgY291bnQgPD0gMCkge1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuICBcclxuICBjb25zdCBzaHVmZmxlZCA9IHNodWZmbGVBcnJheShhcnJheSk7XHJcbiAgcmV0dXJuIHNodWZmbGVkLnNsaWNlKDAsIE1hdGgubWluKGNvdW50LCBhcnJheS5sZW5ndGgpKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNw6lsYW5nZSB1biBhcnJheSBldCByZXRvdXJuZSBsZXMgbiBwcmVtaWVycyDDqWzDqW1lbnRzIGF2ZWMgZmFsbGJhY2tcclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgLSBMJ2FycmF5IHByaW5jaXBhbFxyXG4gKiBAcGFyYW0ge0FycmF5fSBmYWxsYmFja0FycmF5IC0gQXJyYXkgZGUgZmFsbGJhY2sgc2kgbGUgcHJpbmNpcGFsIGVzdCBpbnN1ZmZpc2FudFxyXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnQgLSBOb21icmUgZCfDqWzDqW1lbnRzIMOgIHJldG91cm5lclxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IC0gTGVzIG4gcHJlbWllcnMgw6lsw6ltZW50cyBtw6lsYW5nw6lzXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc2h1ZmZsZVdpdGhGYWxsYmFjayA9IChhcnJheSwgZmFsbGJhY2tBcnJheSwgY291bnQpID0+IHtcclxuICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpIHx8IGFycmF5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIHNodWZmbGVBbmRUYWtlKGZhbGxiYWNrQXJyYXksIGNvdW50KTtcclxuICB9XHJcbiAgXHJcbiAgaWYgKGFycmF5Lmxlbmd0aCA+PSBjb3VudCkge1xyXG4gICAgcmV0dXJuIHNodWZmbGVBbmRUYWtlKGFycmF5LCBjb3VudCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIENvbWJpbmVyIGxlcyBkZXV4IGFycmF5cyBldCBtw6lsYW5nZXJcclxuICBjb25zdCBjb21iaW5lZCA9IFsuLi5hcnJheSwgLi4uZmFsbGJhY2tBcnJheV07XHJcbiAgcmV0dXJuIHNodWZmbGVBbmRUYWtlKGNvbWJpbmVkLCBjb3VudCk7XHJcbn07XHJcblxyXG4vKipcclxuICogTcOpbGFuZ2UgdW4gYXJyYXkgZW4gcGxhY2UgKG1vZGlmaWUgbCdhcnJheSBvcmlnaW5hbClcclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgLSBMJ2FycmF5IMOgIG3DqWxhbmdlclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNodWZmbGVJblBsYWNlID0gKGFycmF5KSA9PiB7XHJcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCBhcnJheS5sZW5ndGggPD0gMSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgZm9yIChsZXQgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgIGNvbnN0IGogPSBnZXRCZXR0ZXJSYW5kb21JbmRleChpICsgMSk7XHJcbiAgICBbYXJyYXlbaV0sIGFycmF5W2pdXSA9IFthcnJheVtqXSwgYXJyYXlbaV1dO1xyXG4gIH1cclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFPQSxTQUFTQSxvQkFBb0JBLENBQUNDLEdBQUcsRUFBRTtFQUVqQyxJQUFJQyxXQUFXLEdBQUdDLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUM7RUFHL0IsSUFBSSxPQUFPQyxNQUFNLEtBQUssV0FBVyxJQUFJQSxNQUFNLENBQUNDLGVBQWUsRUFBRTtJQUMzRCxJQUFJO01BQ0YsSUFBTUMsV0FBVyxHQUFHLElBQUlDLFVBQVUsQ0FBQyxDQUFDLENBQUM7TUFDckNILE1BQU0sQ0FBQ0MsZUFBZSxDQUFDQyxXQUFXLENBQUM7TUFFbkNMLFdBQVcsR0FBRyxDQUFDQSxXQUFXLEdBQUdLLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztJQUN4RCxDQUFDLENBQUMsT0FBT0UsS0FBSyxFQUFFLENBRWhCO0VBQ0Y7RUFHQSxJQUFNQyxXQUFXLEdBQUlDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUksSUFBSTtFQUM5Q1YsV0FBVyxHQUFHLENBQUNBLFdBQVcsR0FBR1EsV0FBVyxJQUFJLENBQUM7RUFFN0MsT0FBT1AsSUFBSSxDQUFDVSxLQUFLLENBQUNYLFdBQVcsR0FBR0QsR0FBRyxDQUFDO0FBQ3RDO0FBUU8sSUFBTWEsWUFBWSxHQUFBQyxPQUFBLENBQUFELFlBQUEsR0FBRyxTQUFmQSxZQUFZQSxDQUFJRSxLQUFLLEVBQUs7RUFDckMsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0YsS0FBSyxDQUFDLEVBQUU7SUFDekIsT0FBTyxFQUFFO0VBQ1g7RUFFQSxJQUFJQSxLQUFLLENBQUNHLE1BQU0sSUFBSSxDQUFDLEVBQUU7SUFDckIsV0FBQUMsbUJBQUEsQ0FBQUMsT0FBQSxFQUFXTCxLQUFLO0VBQ2xCO0VBRUEsSUFBTU0sUUFBUSxPQUFBRixtQkFBQSxDQUFBQyxPQUFBLEVBQU9MLEtBQUssQ0FBQztFQUMzQixLQUFLLElBQUlPLENBQUMsR0FBR0QsUUFBUSxDQUFDSCxNQUFNLEdBQUcsQ0FBQyxFQUFFSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFBRTtJQUM1QyxJQUFNQyxDQUFDLEdBQUd4QixvQkFBb0IsQ0FBQ3VCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFBQyxJQUFBRSxJQUFBLEdBQ1QsQ0FBQ0gsUUFBUSxDQUFDRSxDQUFDLENBQUMsRUFBRUYsUUFBUSxDQUFDQyxDQUFDLENBQUMsQ0FBQztJQUF0REQsUUFBUSxDQUFDQyxDQUFDLENBQUMsR0FBQUUsSUFBQTtJQUFFSCxRQUFRLENBQUNFLENBQUMsQ0FBQyxHQUFBQyxJQUFBO0VBQzNCO0VBRUEsT0FBT0gsUUFBUTtBQUNqQixDQUFDO0FBUU0sSUFBTUksY0FBYyxHQUFBWCxPQUFBLENBQUFXLGNBQUEsR0FBRyxTQUFqQkEsY0FBY0EsQ0FBSVYsS0FBSyxFQUFFVyxLQUFLLEVBQUs7RUFDOUMsSUFBSSxDQUFDVixLQUFLLENBQUNDLE9BQU8sQ0FBQ0YsS0FBSyxDQUFDLElBQUlBLEtBQUssQ0FBQ0csTUFBTSxLQUFLLENBQUMsSUFBSVEsS0FBSyxJQUFJLENBQUMsRUFBRTtJQUM3RCxPQUFPLEVBQUU7RUFDWDtFQUVBLElBQU1MLFFBQVEsR0FBR1IsWUFBWSxDQUFDRSxLQUFLLENBQUM7RUFDcEMsT0FBT00sUUFBUSxDQUFDTSxLQUFLLENBQUMsQ0FBQyxFQUFFekIsSUFBSSxDQUFDMEIsR0FBRyxDQUFDRixLQUFLLEVBQUVYLEtBQUssQ0FBQ0csTUFBTSxDQUFDLENBQUM7QUFDekQsQ0FBQztBQVNNLElBQU1XLG1CQUFtQixHQUFBZixPQUFBLENBQUFlLG1CQUFBLEdBQUcsU0FBdEJBLG1CQUFtQkEsQ0FBSWQsS0FBSyxFQUFFZSxhQUFhLEVBQUVKLEtBQUssRUFBSztFQUNsRSxJQUFJLENBQUNWLEtBQUssQ0FBQ0MsT0FBTyxDQUFDRixLQUFLLENBQUMsSUFBSUEsS0FBSyxDQUFDRyxNQUFNLEtBQUssQ0FBQyxFQUFFO0lBQy9DLE9BQU9PLGNBQWMsQ0FBQ0ssYUFBYSxFQUFFSixLQUFLLENBQUM7RUFDN0M7RUFFQSxJQUFJWCxLQUFLLENBQUNHLE1BQU0sSUFBSVEsS0FBSyxFQUFFO0lBQ3pCLE9BQU9ELGNBQWMsQ0FBQ1YsS0FBSyxFQUFFVyxLQUFLLENBQUM7RUFDckM7RUFHQSxJQUFNSyxRQUFRLE1BQUFDLE1BQUEsS0FBQWIsbUJBQUEsQ0FBQUMsT0FBQSxFQUFPTCxLQUFLLE9BQUFJLG1CQUFBLENBQUFDLE9BQUEsRUFBS1UsYUFBYSxFQUFDO0VBQzdDLE9BQU9MLGNBQWMsQ0FBQ00sUUFBUSxFQUFFTCxLQUFLLENBQUM7QUFDeEMsQ0FBQztBQU1NLElBQU1PLGNBQWMsR0FBQW5CLE9BQUEsQ0FBQW1CLGNBQUEsR0FBRyxTQUFqQkEsY0FBY0EsQ0FBSWxCLEtBQUssRUFBSztFQUN2QyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDRixLQUFLLENBQUMsSUFBSUEsS0FBSyxDQUFDRyxNQUFNLElBQUksQ0FBQyxFQUFFO0lBQzlDO0VBQ0Y7RUFFQSxLQUFLLElBQUlJLENBQUMsR0FBR1AsS0FBSyxDQUFDRyxNQUFNLEdBQUcsQ0FBQyxFQUFFSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFBRTtJQUN6QyxJQUFNQyxDQUFDLEdBQUd4QixvQkFBb0IsQ0FBQ3VCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFBQyxJQUFBWSxLQUFBLEdBQ2YsQ0FBQ25CLEtBQUssQ0FBQ1EsQ0FBQyxDQUFDLEVBQUVSLEtBQUssQ0FBQ08sQ0FBQyxDQUFDLENBQUM7SUFBMUNQLEtBQUssQ0FBQ08sQ0FBQyxDQUFDLEdBQUFZLEtBQUE7SUFBRW5CLEtBQUssQ0FBQ1EsQ0FBQyxDQUFDLEdBQUFXLEtBQUE7RUFDckI7QUFDRixDQUFDIiwiaWdub3JlTGlzdCI6W119