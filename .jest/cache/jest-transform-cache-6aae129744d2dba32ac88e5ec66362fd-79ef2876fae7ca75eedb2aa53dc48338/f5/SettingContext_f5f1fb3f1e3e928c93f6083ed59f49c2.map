{"version":3,"names":["_react","require","_storageUtils","_constants","_jsxRuntime","SettingsContext","exports","createContext","SettingsProvider","_ref","children","_useState","useState","DEFAULT_SETTINGS","_useState2","_slicedToArray2","default","settings","setSettings","_useState3","_useState4","isLoading","setIsLoading","useEffect","loadSettings","_ref2","_asyncToGenerator2","savedSettings","getData","Object","assign","error","apply","arguments","storeData","updateSetting","key","value","undefined","prevSettings","_defineProperty2","updateSettings","newSettings","resetSettings","areNotificationsEnabled","notifications","getDailyGoal","dailyGoal","setDailyGoal","minutes","Math","max","min","contextValue","jsx","Provider","_default"],"sources":["SettingContext.js"],"sourcesContent":["// src/contexts/SettingsContext.js\r\nimport { createContext, useState, useEffect } from 'react';\r\nimport { storeData, getData } from '../utils/storageUtils';\r\nimport { DEFAULT_SETTINGS } from '../utils/constants';\r\n\r\n// Créer le contexte\r\nexport const SettingsContext = createContext();\r\n\r\n/**\r\n * Fournisseur de contexte pour gérer les paramètres de l'application\r\n */\r\nexport const SettingsProvider = ({ children }) => {\r\n  // État des paramètres\r\n  const [settings, setSettings] = useState(DEFAULT_SETTINGS);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Charger les paramètres au démarrage\r\n  useEffect(() => {\r\n    const loadSettings = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const savedSettings = await getData('userSettings');\r\n\r\n        if (savedSettings) {\r\n          // Fusionner avec les paramètres par défaut pour s'assurer que tous les champs sont présents\r\n          setSettings({ ...DEFAULT_SETTINGS, ...savedSettings });\r\n        }\r\n      } catch (error) {\r\n        // Ignored on purpose\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadSettings();\r\n  }, []);\r\n\r\n  // Sauvegarder les paramètres lorsqu'ils changent\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      storeData('userSettings', settings);\r\n    }\r\n  }, [settings, isLoading]);\r\n\r\n  // Mettre à jour un paramètre spécifique\r\n  const updateSetting = (key, value) => {\r\n    if (settings[key] === undefined) {\r\n\r\n      return;\r\n    }\r\n\r\n    setSettings(prevSettings => ({\r\n      ...prevSettings,\r\n      [key]: value\r\n    }));\r\n  };\r\n\r\n  // Mettre à jour plusieurs paramètres à la fois\r\n  const updateSettings = (newSettings) => {\r\n    setSettings(prevSettings => ({\r\n      ...prevSettings,\r\n      ...newSettings\r\n    }));\r\n  };\r\n\r\n  // Réinitialiser tous les paramètres\r\n  const resetSettings = () => {\r\n    setSettings(DEFAULT_SETTINGS);\r\n  };\r\n\r\n  // Vérifier si les notifications sont activées\r\n  const areNotificationsEnabled = () => {\r\n    return settings.notifications;\r\n  };\r\n\r\n  // Obtenir le délai journalier\r\n  const getDailyGoal = () => {\r\n    return settings.dailyGoal;\r\n  };\r\n\r\n  // Définir le délai journalier\r\n  const setDailyGoal = (minutes) => {\r\n    updateSetting('dailyGoal', Math.max(1, Math.min(120, minutes))); // Entre 1 et 120 minutes\r\n  };\r\n\r\n  // Valeur fournie par le contexte\r\n  const contextValue = {\r\n    settings,\r\n    updateSetting,\r\n    updateSettings,\r\n    resetSettings,\r\n    areNotificationsEnabled,\r\n    getDailyGoal,\r\n    setDailyGoal,\r\n    isLoading,\r\n  };\r\n\r\n  return (\r\n    <SettingsContext.Provider value={contextValue}>\r\n      {children}\r\n    </SettingsContext.Provider>\r\n  );\r\n};\r\n\r\nexport default SettingsContext;"],"mappings":";;;;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,aAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAF,OAAA;AAAsD,IAAAG,WAAA,GAAAH,OAAA;AAG/C,IAAMI,eAAe,GAAAC,OAAA,CAAAD,eAAA,GAAG,IAAAE,oBAAa,EAAC,CAAC;AAKvC,IAAMC,gBAAgB,GAAAF,OAAA,CAAAE,gBAAA,GAAG,SAAnBA,gBAAgBA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAEzC,IAAAC,SAAA,GAAgC,IAAAC,eAAQ,EAACC,2BAAgB,CAAC;IAAAC,UAAA,OAAAC,eAAA,CAAAC,OAAA,EAAAL,SAAA;IAAnDM,QAAQ,GAAAH,UAAA;IAAEI,WAAW,GAAAJ,UAAA;EAC5B,IAAAK,UAAA,GAAkC,IAAAP,eAAQ,EAAC,IAAI,CAAC;IAAAQ,UAAA,OAAAL,eAAA,CAAAC,OAAA,EAAAG,UAAA;IAAzCE,SAAS,GAAAD,UAAA;IAAEE,YAAY,GAAAF,UAAA;EAG9B,IAAAG,gBAAS,EAAC,YAAM;IACd,IAAMC,YAAY;MAAA,IAAAC,KAAA,OAAAC,kBAAA,CAAAV,OAAA,EAAG,aAAY;QAC/B,IAAI;UACFM,YAAY,CAAC,IAAI,CAAC;UAClB,IAAMK,aAAa,SAAS,IAAAC,qBAAO,EAAC,cAAc,CAAC;UAEnD,IAAID,aAAa,EAAE;YAEjBT,WAAW,CAAAW,MAAA,CAAAC,MAAA,KAAMjB,2BAAgB,EAAKc,aAAa,CAAE,CAAC;UACxD;QACF,CAAC,CAAC,OAAOI,KAAK,EAAE,CAEhB,CAAC,SAAS;UACRT,YAAY,CAAC,KAAK,CAAC;QACrB;MACF,CAAC;MAAA,gBAdKE,YAAYA,CAAA;QAAA,OAAAC,KAAA,CAAAO,KAAA,OAAAC,SAAA;MAAA;IAAA,GAcjB;IAEDT,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,EAAE,CAAC;EAGN,IAAAD,gBAAS,EAAC,YAAM;IACd,IAAI,CAACF,SAAS,EAAE;MACd,IAAAa,uBAAS,EAAC,cAAc,EAAEjB,QAAQ,CAAC;IACrC;EACF,CAAC,EAAE,CAACA,QAAQ,EAAEI,SAAS,CAAC,CAAC;EAGzB,IAAMc,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,GAAG,EAAEC,KAAK,EAAK;IACpC,IAAIpB,QAAQ,CAACmB,GAAG,CAAC,KAAKE,SAAS,EAAE;MAE/B;IACF;IAEApB,WAAW,CAAC,UAAAqB,YAAY;MAAA,OAAAV,MAAA,CAAAC,MAAA,KACnBS,YAAY,MAAAC,gBAAA,CAAAxB,OAAA,MACdoB,GAAG,EAAGC,KAAK;IAAA,CACZ,CAAC;EACL,CAAC;EAGD,IAAMI,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,WAAW,EAAK;IACtCxB,WAAW,CAAC,UAAAqB,YAAY;MAAA,OAAAV,MAAA,CAAAC,MAAA,KACnBS,YAAY,EACZG,WAAW;IAAA,CACd,CAAC;EACL,CAAC;EAGD,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IAC1BzB,WAAW,CAACL,2BAAgB,CAAC;EAC/B,CAAC;EAGD,IAAM+B,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;IACpC,OAAO3B,QAAQ,CAAC4B,aAAa;EAC/B,CAAC;EAGD,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACzB,OAAO7B,QAAQ,CAAC8B,SAAS;EAC3B,CAAC;EAGD,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,OAAO,EAAK;IAChCd,aAAa,CAAC,WAAW,EAAEe,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,GAAG,EAAEH,OAAO,CAAC,CAAC,CAAC;EACjE,CAAC;EAGD,IAAMI,YAAY,GAAG;IACnBpC,QAAQ,EAARA,QAAQ;IACRkB,aAAa,EAAbA,aAAa;IACbM,cAAc,EAAdA,cAAc;IACdE,aAAa,EAAbA,aAAa;IACbC,uBAAuB,EAAvBA,uBAAuB;IACvBE,YAAY,EAAZA,YAAY;IACZE,YAAY,EAAZA,YAAY;IACZ3B,SAAS,EAATA;EACF,CAAC;EAED,OACE,IAAAjB,WAAA,CAAAkD,GAAA,EAACjD,eAAe,CAACkD,QAAQ;IAAClB,KAAK,EAAEgB,YAAa;IAAA3C,QAAA,EAC3CA;EAAQ,CACe,CAAC;AAE/B,CAAC;AAAC,IAAA8C,QAAA,GAAAlD,OAAA,CAAAU,OAAA,GAEaX,eAAe","ignoreList":[]}