{"version":3,"names":["_getJestObj","mock","_require","require","Text","Ionicons","props","_jsxRuntime","jsx","testID","name","children","_interopRequireDefault","_asyncToGenerator2","_react","_reactNative","_reactNative2","_ExerciseFeedback","_require2","jest","describe","onDismissMock","fn","beforeAll","useFakeTimers","afterAll","useRealTimers","afterEach","mockClear","clearAllMocks","it","_render","render","default","message","getByText","expect","toBeTruthy","_render2","explanation","_render3","queryByText","toBeNull","_render4","type","getByTestId","_render5","_render6","_render7","showDismissButton","queryByTestId","_render8","spyOn","Animated","mockImplementation","start","callback","finished","_render9","onDismiss","fireEvent","press","not","toHaveBeenCalled","autoHide","autoHideDuration","act","runAllTimers","waitFor","toHaveBeenCalledTimes"],"sources":["ExerciseFeedback.test.js"],"sourcesContent":["// __tests__/components/exercise-common/ExerciseFeedback.test.js\nimport React from 'react';\nimport { Animated } from 'react-native';\nimport { render, fireEvent, act, waitFor } from '@testing-library/react-native';\nimport ExerciseFeedback from '../../../src/components/exercise-common/ExerciseFeedback';\n\n// Mock des icônes pour l'environnement de test\njest.mock('@expo/vector-icons', () => {\n  const { Text } = require('react-native');\n  return {\n    Ionicons: (props) => <Text testID={`icon-${props.name}`}>{props.name}</Text>,\n  };\n});\n\ndescribe('ExerciseFeedback', () => {\n  const onDismissMock = jest.fn();\n\n  // Activer les fake timers pour tester les délais\n  beforeAll(() => {\n    jest.useFakeTimers();\n  });\n\n  afterAll(() => {\n    jest.useRealTimers();\n  });\n\n  afterEach(() => {\n    onDismissMock.mockClear();\n    jest.clearAllMocks();\n  });\n\n  it('renders the message correctly', () => {\n    const { getByText } = render(<ExerciseFeedback message=\"Correct!\" />);\n    expect(getByText('Correct!')).toBeTruthy();\n  });\n\n  it('renders the explanation when provided', () => {\n    const { getByText } = render(\n      <ExerciseFeedback message=\"Incorrect\" explanation=\"The answer was X.\" />\n    );\n    expect(getByText('The answer was X.')).toBeTruthy();\n  });\n\n  it('does not render the explanation when not provided', () => {\n    const { queryByText } = render(<ExerciseFeedback message=\"Correct!\" />);\n    expect(queryByText('The answer was X.')).toBeNull();\n  });\n\n  it('shows a success icon for type \"success\"', () => {\n    const { getByTestId } = render(<ExerciseFeedback message=\"Success\" type=\"success\" />);\n    expect(getByTestId('icon-checkmark-circle')).toBeTruthy();\n  });\n\n  it('shows an error icon for type \"error\"', () => {\n    const { getByTestId } = render(<ExerciseFeedback message=\"Error\" type=\"error\" />);\n    expect(getByTestId('icon-close-circle')).toBeTruthy();\n  });\n\n  it('shows an info icon for type \"info\"', () => {\n    const { getByTestId } = render(<ExerciseFeedback message=\"Info\" type=\"info\" />);\n    expect(getByTestId('icon-information-circle')).toBeTruthy();\n  });\n\n  it('does not show the dismiss button if showDismissButton is false', () => {\n    const { queryByTestId } = render(\n      <ExerciseFeedback message=\"Test\" showDismissButton={false} />\n    );\n    expect(queryByTestId('icon-close')).toBeNull();\n  });\n\n  it('uses default styling for unknown type', () => {\n    const { getByTestId } = render(<ExerciseFeedback message=\"Test\" type=\"unknown\" />);\n    expect(getByTestId('icon-information-circle')).toBeTruthy();\n  });\n\n  it('does not call onDismiss if animation finishes with false', () => {\n    jest.spyOn(Animated, 'timing').mockImplementation(() => ({\n      start: (callback) => callback && callback({ finished: false }),\n    }));\n\n    const { getByTestId } = render(\n      <ExerciseFeedback message=\"Test\" onDismiss={onDismissMock} />\n    );\n\n    fireEvent.press(getByTestId('icon-close'));\n\n    expect(onDismissMock).not.toHaveBeenCalled();\n  });\n\n  it('calls onDismiss automatically when autoHide is true', async () => {\n    jest.spyOn(Animated, 'timing').mockImplementation(() => ({\n      start: (callback) => callback && callback({ finished: true }),\n    }));\n\n    render(\n      <ExerciseFeedback\n        message=\"Hiding soon...\"\n        onDismiss={onDismissMock}\n        autoHide={true}\n        autoHideDuration={5000}\n      />\n    );\n\n    act(() => {\n      jest.runAllTimers();\n    });\n\n    await waitFor(() => {\n      expect(onDismissMock).toHaveBeenCalledTimes(1);\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}