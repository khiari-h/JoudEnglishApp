{"version":3,"names":["_getJestObj","mock","RN","jest","requireActual","Object","assign","Animated","Value","mockAnimatedValue","timing","mockTiming","parallel","mockParallel","multiply","mockMultiply","View","LinearGradient","_ref","children","_require","require","_jsxRuntime","jsx","_interopRequireDefault","_asyncToGenerator2","_react","_reactNative","_CategorySelector","_require2","fn","interpolate","start","cb","a","b","describe","categories","id","name","beforeEach","clearAllMocks","it","default","_render","render","selectedCategory","onSelectCategory","rerender","expect","toHaveBeenCalled","mockClear","act","toHaveBeenCalledTimes","_render2"],"sources":["CategorySelector.test.js"],"sourcesContent":["// __tests__/components/exercise-common/CategorySelector.test.js\nimport React from \"react\";\nimport { render, act, waitFor } from \"@testing-library/react-native\";\nimport CategorySelector from \"../../../src/components/exercise-common/CategorySelector\";\n\n// ðŸ”§ Mock Animated API\nconst mockAnimatedValue = jest.fn(() => ({ interpolate: jest.fn() }));\nconst mockTiming = jest.fn(() => ({ start: jest.fn(cb => cb && cb()) }));\nconst mockParallel = jest.fn(() => ({ start: jest.fn(cb => cb && cb()) }));\nconst mockMultiply = jest.fn((a, b) => a || b);\n\njest.mock(\"react-native\", () => {\n  const RN = jest.requireActual(\"react-native\");\n  return {\n    ...RN,\n    Animated: {\n      ...RN.Animated,\n      Value: mockAnimatedValue,\n      timing: mockTiming,\n      parallel: mockParallel,\n      multiply: mockMultiply,\n      // You should mock Animated.View as well, since your component uses it.\n      View: RN.Animated.View,\n    },\n  };\n});\n\n// Mock other dependencies\njest.mock('expo-linear-gradient', () => ({\n  LinearGradient: ({ children }) => {\n    const { View } = require('react-native');\n    return <View>{children}</View>;\n  },\n}));\n\ndescribe(\"CategorySelector - Animations\", () => {\n  const categories = [\n    { id: \"1\", name: \"Category 1\" },\n    { id: \"2\", name: \"Category 2\" },\n  ];\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it(\"triggers parallel animations when selectedCategory changes\", async () => {\n    const { rerender } = render(\n      <CategorySelector\n        categories={categories}\n        selectedCategory=\"1\"\n        onSelectCategory={jest.fn()}\n      />\n    );\n\n    // The initial Animated.Value call should happen synchronously during the first render\n    expect(mockAnimatedValue).toHaveBeenCalled();\n\n    // Reset mocks to check for new calls during re-render\n    mockParallel.mockClear();\n    mockTiming.mockClear();\n    \n    // Changing props inside `act` will trigger useEffect and animations\n    await act(async () => {\n      rerender(\n        <CategorySelector\n          categories={categories}\n          selectedCategory=\"2\"\n          onSelectCategory={jest.fn()}\n        />\n      );\n    });\n    \n    // Now, assert that the animations were called\n    expect(mockParallel).toHaveBeenCalledTimes(1);\n    expect(mockTiming).toHaveBeenCalledTimes(2);\n  });\n\n  it(\"prevents animation conflicts with isAnimatingRef\", async () => {\n    const { rerender } = render(\n      <CategorySelector\n        categories={categories}\n        selectedCategory=\"1\"\n        onSelectCategory={jest.fn()}\n      />\n    );\n\n    // Initial check to make sure the component rendered\n    expect(mockAnimatedValue).toHaveBeenCalled();\n\n    mockParallel.mockClear();\n\n    // First transition: should trigger an animation\n    await act(async () => {\n      rerender(\n        <CategorySelector\n          categories={categories}\n          selectedCategory=\"2\"\n          onSelectCategory={jest.fn()}\n        />\n      );\n    });\n\n    expect(mockParallel).toHaveBeenCalledTimes(1);\n    \n    // Second, immediate transition: should be prevented by isAnimatingRef\n    await act(async () => {\n      rerender(\n        <CategorySelector\n          categories={categories}\n          selectedCategory=\"1\"\n          onSelectCategory={jest.fn()}\n        />\n      );\n    });\n\n    // mockParallel should not have increased\n    expect(mockParallel).toHaveBeenCalledTimes(1);\n  });\n});"],"mappings":"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","ignoreList":[]}