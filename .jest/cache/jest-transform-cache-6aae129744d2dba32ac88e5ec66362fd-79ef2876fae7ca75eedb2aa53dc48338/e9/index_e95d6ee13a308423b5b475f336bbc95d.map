{"version":3,"names":["_react","require","_reactNative","_expoRouter","_propTypes","_interopRequireDefault","_Container","_interopRequireWildcard","_ErrorCorrectionHeader","_ErrorCorrectionCategorySelector","_ErrorCorrectionModeSelector","_ErrorCorrectionProgress","_ErrorCorrectionWordSection","_ErrorCorrectionNavigation","_ErrorCorrectionResultsCard","_MultipleChoiceMode","_useErrorCorrection2","_useLastActivity2","_errorCorrectionDataHelper","_style","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ErrorCorrectionExercise","_ref","route","_ref2","params","_ref2$level","level","styles","createStyles","_useLastActivity","useLastActivity","saveActivity","levelColor","getLevelColor","errorCorrectionData","useMemo","getErrorsData","_useErrorCorrection","useErrorCorrection","selectedCategory","currentExerciseIndex","correctionMode","showFeedback","isCorrect","showResults","loaded","showDetailedProgress","userCorrection","selectedErrorIndices","selectedChoiceIndex","exercises","changeCategory","startExercise","toggleDetailedProgress","handleNext","handlePrevious","checkAnswer","handleWordPress","handleChoiceSelect","setUserCorrection","setShowResults","tryAgain","isLastExerciseInCategory","hasValidData","stats","display","filteredExercises","_useState","useState","_useState2","_slicedToArray2","viewMode","setViewMode","currentExercise","length","currentCategoryName","_errorCorrectionData$","categories","find","cat","id","name","activityMetadata","exercise","totalExercises","category","mode","categoryId","handleSaveActivity","useCallback","title","type","metadata","useEffect","handleBackPress","router","push","pathname","handleStartExercise","handleCategoryChange","handleCategoryProgressPress","index","_errorCorrectionData$2","handleToggleProgressDetails","handleNextAction","result","completed","handlePreviousAction","handleRetryResults","handleContinueResults","handleExitExercise","jsx","safeArea","safeAreaEdges","CONTAINER_SAFE_EDGES","ALL","backgroundColor","statusBarStyle","children","View","style","loadingContainer","ActivityIndicator","size","color","jsxs","withScrollView","withPadding","scrollViewProps","showsVerticalScrollIndicator","contentContainerStyle","scrollContent","onBackPress","completedExercises","expanded","onToggleExpand","onCategoryPress","currentCategoryId","Fragment","onSelectCategory","onSelectMode","disabled","categoryName","onChangeUserCorrection","onToggleErrorIndex","onSelectChoice","MultipleChoiceMode","score","onRetry","onContinue","onExit","onNext","onPrevious","onTryAgain","currentIndex","totalCount","disableNext","trim","isLastExercise","propTypes","PropTypes","shape","string","isRequired","_default","exports"],"sources":["index.js"],"sourcesContent":["// ErrorCorrectionExercise/index.js - VERSION CORRIGÃ‰E\r\n\r\nimport { useMemo, useState, useEffect, useCallback } from \"react\";\r\nimport { View, ActivityIndicator } from \"react-native\";\r\nimport { router } from \"expo-router\";\r\nimport PropTypes from 'prop-types'; // Import de PropTypes\r\n\r\n// Layout\r\nimport Container, { CONTAINER_SAFE_EDGES } from \"../../../components/layout/Container\";\r\n\r\n// Composants refactorisÃ©s\r\nimport ErrorCorrectionHeader from \"./ErrorCorrectionHeader\";\r\nimport ErrorCorrectionCategorySelector from \"./ErrorCorrectionCategorySelector\";\r\nimport ErrorCorrectionModeSelector from \"./ErrorCorrectionModeSelector\";\r\nimport ErrorCorrectionProgress from \"./ErrorCorrectionProgress\";\r\nimport ErrorCorrectionWordSection from \"./ErrorCorrectionWordSection\";\r\nimport ErrorCorrectionNavigation from \"./ErrorCorrectionNavigation\";\r\nimport ErrorCorrectionResultsCard from \"./ErrorCorrectionResultsCard\";\r\nimport MultipleChoiceMode from \"./modes/MultipleChoiceMode\";\r\n\r\n// Hook unifiÃ© & Utils\r\nimport useErrorCorrection from \"./hooks/useErrorCorrection\";\r\nimport useLastActivity from \"../../../hooks/useLastActivity\";\r\nimport { getErrorsData, getLevelColor } from \"../../../utils/errorCorrection/errorCorrectionDataHelper\";\r\nimport createStyles from \"./style\";\r\n\r\n/**\r\n * ðŸŽ¯ ErrorCorrectionExercise - VERSION CORRIGÃ‰E\r\n */\r\nconst ErrorCorrectionExercise = ({ route }) => {\r\n  const { level = \"A1\" } = route.params || {};\r\n  const styles = createStyles();\r\n\r\n  // Hook pour sauvegarder l'activitÃ©\r\n  const { saveActivity } = useLastActivity();\r\n\r\n  // Data\r\n  const levelColor = getLevelColor(level);\r\n  const errorCorrectionData = useMemo(() => getErrorsData(level), [level]);\r\n\r\n  // Hook unifiÃ©\r\n  const {\r\n    selectedCategory,\r\n    currentExerciseIndex,\r\n    correctionMode,\r\n    showFeedback,\r\n    isCorrect,\r\n    showResults,\r\n    loaded,\r\n    showDetailedProgress,\r\n    // Mode-specific state\r\n    userCorrection,\r\n    selectedErrorIndices,\r\n    selectedChoiceIndex,\r\n    // Data\r\n    exercises,\r\n    // Actions\r\n    changeCategory,\r\n    startExercise,\r\n    toggleDetailedProgress,\r\n    handleNext,\r\n    handlePrevious,\r\n    checkAnswer,\r\n    handleWordPress,\r\n    handleChoiceSelect,\r\n    setUserCorrection,\r\n    setShowResults,\r\n    tryAgain,\r\n    // Computed\r\n    isLastExerciseInCategory,\r\n    hasValidData,\r\n    stats,\r\n    display,\r\n    filteredExercises,\r\n  } = useErrorCorrection(errorCorrectionData, level);\r\n\r\n  // Ã‰tats locaux\r\n  const [viewMode, setViewMode] = useState(\"browse\"); // \"browse\", \"exercise\", \"results\"\r\n\r\n  // âœ… CORRECTION : Utiliser l'exercice filtrÃ© quand on est en mode exercice\r\n  const currentExercise = useMemo(() => {\r\n    if (viewMode === \"exercise\" && filteredExercises && filteredExercises.length > 0) {\r\n      return filteredExercises[currentExerciseIndex] || null;\r\n    }\r\n    return null;\r\n  }, [viewMode, filteredExercises, currentExerciseIndex]);\r\n\r\n  // âœ… CORRECTION : MÃ©moriser le nom de catÃ©gorie\r\n  const currentCategoryName = useMemo(() => {\r\n    return errorCorrectionData?.categories?.find(cat => cat.id === selectedCategory)?.name || \"GÃ©nÃ©ral\";\r\n  }, [errorCorrectionData?.categories, selectedCategory]);\r\n\r\n  // âœ… CORRECTION : MÃ©moriser les mÃ©tadonnÃ©es\r\n  const activityMetadata = useMemo(() => ({\r\n    exercise: currentExerciseIndex,\r\n    totalExercises: exercises.length,\r\n    category: currentCategoryName,\r\n    mode: correctionMode,\r\n    categoryId: selectedCategory\r\n  }), [currentExerciseIndex, exercises.length, currentCategoryName, correctionMode, selectedCategory]);\r\n\r\n  // âœ… CORRECTION : Callback mÃ©morisÃ© pour saveActivity\r\n  const handleSaveActivity = useCallback(() => {\r\n    if (loaded && hasValidData && viewMode === \"exercise\" && currentExercise && !showResults) {\r\n      saveActivity({\r\n        title: \"Correction d'erreurs\",\r\n        level,\r\n        type: \"errorCorrection\",\r\n        metadata: activityMetadata\r\n      });\r\n    }\r\n  }, [loaded, hasValidData, viewMode, currentExercise, showResults, level, saveActivity, activityMetadata]);\r\n\r\n  // âœ… CORRECTION : useEffect optimisÃ©\r\n  useEffect(() => {\r\n    handleSaveActivity();\r\n  }, [handleSaveActivity]);\r\n\r\n  // Handlers\r\nconst handleBackPress = useCallback(() => {\r\n  if (viewMode === \"exercise\") {\r\n    setViewMode(\"browse\");\r\n  } else {\r\n    router.push({\r\n      pathname: \"/tabs/exerciseSelection\",\r\n      params: { level }\r\n    });\r\n  }\r\n}, [viewMode, level]);\r\n\r\nconst handleStartExercise = useCallback((mode) => {\r\n  startExercise(mode);\r\n  setViewMode(\"exercise\");\r\n}, [startExercise]);\r\n\r\nconst handleCategoryChange = useCallback((categoryId) => {\r\n  changeCategory(categoryId);\r\n}, [changeCategory]);\r\n\r\nconst handleCategoryProgressPress = useCallback((index) => {\r\n  const category = errorCorrectionData?.categories?.[index];\r\n  if (category) {\r\n    changeCategory(category.id);\r\n  }\r\n}, [errorCorrectionData?.categories, changeCategory]);\r\n\r\nconst handleToggleProgressDetails = useCallback(() => {\r\n  toggleDetailedProgress();\r\n}, [toggleDetailedProgress]);\r\n\r\nconst handleNextAction = useCallback(() => {\r\n  if (showFeedback) {\r\n    const result = handleNext();\r\n    if (result.completed) {\r\n      setViewMode(\"browse\");\r\n    }\r\n  } else {\r\n    checkAnswer();\r\n  }\r\n}, [showFeedback, handleNext, checkAnswer]);\r\n\r\nconst handlePreviousAction = useCallback(() => {\r\n  handlePrevious();\r\n}, [handlePrevious]);\r\n\r\nconst handleRetryResults = useCallback(() => {\r\n  setShowResults(false);\r\n  setViewMode(\"exercise\");\r\n}, []);\r\n\r\nconst handleContinueResults = useCallback(() => {\r\n  setViewMode(\"browse\");\r\n}, []);\r\n\r\nconst handleExitExercise = useCallback(() => {\r\n  setViewMode(\"browse\");\r\n}, []);\r\n\r\n  // Loading state\r\n  if (!loaded || !hasValidData) {\r\n    return (\r\n      <Container\r\n        safeArea\r\n        safeAreaEdges={CONTAINER_SAFE_EDGES.ALL}\r\n        backgroundColor=\"#f8fafc\"\r\n        statusBarStyle=\"dark-content\"\r\n      >\r\n        <View style={styles.loadingContainer}>\r\n          <ActivityIndicator size=\"large\" color={levelColor} />\r\n        </View>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      safeArea\r\n      safeAreaEdges={CONTAINER_SAFE_EDGES.ALL}\r\n      withScrollView\r\n      backgroundColor=\"#f8fafc\"\r\n      statusBarStyle=\"dark-content\"\r\n      withPadding={false}\r\n      scrollViewProps={{\r\n        showsVerticalScrollIndicator: false,\r\n        contentContainerStyle: styles.scrollContent,\r\n      }}\r\n    >\r\n      {/* Header */}\r\n      <ErrorCorrectionHeader\r\n        level={level}\r\n        onBackPress={handleBackPress}\r\n      />\r\n\r\n      {/* Progress (seulement en mode exercice) */}\r\n      {viewMode === \"exercise\" && !showResults && (\r\n        <ErrorCorrectionProgress\r\n          categories={errorCorrectionData.categories || []}\r\n          exercises={exercises}\r\n          completedExercises={stats.completedExercises || {}}\r\n          levelColor={levelColor}\r\n          expanded={showDetailedProgress}\r\n          onToggleExpand={handleToggleProgressDetails}\r\n          onCategoryPress={handleCategoryProgressPress}\r\n          // âœ… AJOUTÃ‰ : Passer la catÃ©gorie actuelle pour une progression plus claire\r\n          currentCategoryId={selectedCategory}\r\n        />\r\n      )}\r\n\r\n      {/* Contenu principal */}\r\n      {viewMode === \"browse\" && (\r\n        <>\r\n          {/* Category Selector */}\r\n          <ErrorCorrectionCategorySelector\r\n            categories={errorCorrectionData.categories || []}\r\n            selectedCategory={selectedCategory}\r\n            onSelectCategory={handleCategoryChange}\r\n            levelColor={levelColor}\r\n          />\r\n\r\n          {/* Mode Selector */}\r\n          <ErrorCorrectionModeSelector\r\n            onSelectMode={handleStartExercise}\r\n            disabled={exercises.length === 0}\r\n            levelColor={levelColor}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"exercise\" && !showResults && (\r\n        <>\r\n          {/* Word Section */}\r\n          <ErrorCorrectionWordSection\r\n            currentExercise={currentExercise}\r\n            categoryName={currentCategoryName}\r\n            correctionMode={correctionMode}\r\n            level={level}\r\n            levelColor={levelColor}\r\n            showFeedback={showFeedback}\r\n            isCorrect={isCorrect}\r\n            // Mode-specific props\r\n            userCorrection={userCorrection}\r\n            selectedErrorIndices={selectedErrorIndices}\r\n            selectedChoiceIndex={selectedChoiceIndex}\r\n            onChangeUserCorrection={setUserCorrection}\r\n            onToggleErrorIndex={handleWordPress}\r\n            onSelectChoice={handleChoiceSelect}\r\n            MultipleChoiceMode={MultipleChoiceMode}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {showResults && (\r\n        <ErrorCorrectionResultsCard\r\n          score={stats.score || 0}\r\n          totalExercises={exercises.length}\r\n          level={level}\r\n          levelColor={levelColor}\r\n          onRetry={handleRetryResults}\r\n          onContinue={handleContinueResults}\r\n          onExit={handleBackPress}\r\n        />\r\n      )}\r\n\r\n      {/* Navigation (seulement en mode exercice) */}\r\n      {viewMode === \"exercise\" && !showResults && (\r\n        <ErrorCorrectionNavigation\r\n          onNext={handleNextAction}\r\n          onPrevious={handlePreviousAction}\r\n          onExit={handleExitExercise}\r\n          onTryAgain={tryAgain}\r\n          currentIndex={currentExerciseIndex}\r\n          totalCount={exercises.length}\r\n          disableNext={\r\n            (correctionMode === \"full\" && userCorrection.trim() === \"\") ||\r\n            (correctionMode === \"identify\" && selectedErrorIndices.length === 0) ||\r\n            (correctionMode === \"multiple_choice\" && selectedChoiceIndex === null)\r\n          }\r\n          isLastExercise={isLastExerciseInCategory}\r\n          showFeedback={showFeedback}\r\n          isCorrect={isCorrect}\r\n          levelColor={levelColor}\r\n        />\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\n// âœ… DÃ©finition de PropTypes pour la validation des props\r\nErrorCorrectionExercise.propTypes = {\r\n  route: PropTypes.shape({\r\n    params: PropTypes.shape({\r\n      level: PropTypes.string,\r\n    }),\r\n  }).isRequired,\r\n};\r\n\r\nexport default ErrorCorrectionExercise;"],"mappings":";;;;;;AAEA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAF,OAAA;AACA,IAAAG,UAAA,GAAAC,sBAAA,CAAAJ,OAAA;AAGA,IAAAK,UAAA,GAAAC,uBAAA,CAAAN,OAAA;AAGA,IAAAO,sBAAA,GAAAH,sBAAA,CAAAJ,OAAA;AACA,IAAAQ,gCAAA,GAAAJ,sBAAA,CAAAJ,OAAA;AACA,IAAAS,4BAAA,GAAAL,sBAAA,CAAAJ,OAAA;AACA,IAAAU,wBAAA,GAAAN,sBAAA,CAAAJ,OAAA;AACA,IAAAW,2BAAA,GAAAP,sBAAA,CAAAJ,OAAA;AACA,IAAAY,0BAAA,GAAAR,sBAAA,CAAAJ,OAAA;AACA,IAAAa,2BAAA,GAAAT,sBAAA,CAAAJ,OAAA;AACA,IAAAc,mBAAA,GAAAV,sBAAA,CAAAJ,OAAA;AAGA,IAAAe,oBAAA,GAAAX,sBAAA,CAAAJ,OAAA;AACA,IAAAgB,iBAAA,GAAAZ,sBAAA,CAAAJ,OAAA;AACA,IAAAiB,0BAAA,GAAAjB,OAAA;AACA,IAAAkB,MAAA,GAAAd,sBAAA,CAAAJ,OAAA;AAAmC,IAAAmB,WAAA,GAAAnB,OAAA;AAAA,SAAAM,wBAAAc,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAhB,uBAAA,YAAAA,wBAAAc,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,cAAAM,EAAA,IAAAd,CAAA,gBAAAc,EAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,EAAA,OAAAP,CAAA,IAAAD,CAAA,GAAAW,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAc,EAAA,OAAAP,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAM,EAAA,EAAAP,CAAA,IAAAC,CAAA,CAAAM,EAAA,IAAAd,CAAA,CAAAc,EAAA,WAAAN,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAKnC,IAAMmB,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAAC,IAAA,EAAkB;EAAA,IAAZC,KAAK,GAAAD,IAAA,CAALC,KAAK;EACtC,IAAAC,KAAA,GAAyBD,KAAK,CAACE,MAAM,IAAI,CAAC,CAAC;IAAAC,WAAA,GAAAF,KAAA,CAAnCG,KAAK;IAALA,KAAK,GAAAD,WAAA,cAAG,IAAI,GAAAA,WAAA;EACpB,IAAME,MAAM,GAAG,IAAAC,cAAY,EAAC,CAAC;EAG7B,IAAAC,gBAAA,GAAyB,IAAAC,yBAAe,EAAC,CAAC;IAAlCC,YAAY,GAAAF,gBAAA,CAAZE,YAAY;EAGpB,IAAMC,UAAU,GAAG,IAAAC,wCAAa,EAACP,KAAK,CAAC;EACvC,IAAMQ,mBAAmB,GAAG,IAAAC,cAAO,EAAC;IAAA,OAAM,IAAAC,wCAAa,EAACV,KAAK,CAAC;EAAA,GAAE,CAACA,KAAK,CAAC,CAAC;EAGxE,IAAAW,mBAAA,GAiCI,IAAAC,4BAAkB,EAACJ,mBAAmB,EAAER,KAAK,CAAC;IAhChDa,gBAAgB,GAAAF,mBAAA,CAAhBE,gBAAgB;IAChBC,oBAAoB,GAAAH,mBAAA,CAApBG,oBAAoB;IACpBC,cAAc,GAAAJ,mBAAA,CAAdI,cAAc;IACdC,YAAY,GAAAL,mBAAA,CAAZK,YAAY;IACZC,SAAS,GAAAN,mBAAA,CAATM,SAAS;IACTC,WAAW,GAAAP,mBAAA,CAAXO,WAAW;IACXC,MAAM,GAAAR,mBAAA,CAANQ,MAAM;IACNC,oBAAoB,GAAAT,mBAAA,CAApBS,oBAAoB;IAEpBC,cAAc,GAAAV,mBAAA,CAAdU,cAAc;IACdC,oBAAoB,GAAAX,mBAAA,CAApBW,oBAAoB;IACpBC,mBAAmB,GAAAZ,mBAAA,CAAnBY,mBAAmB;IAEnBC,SAAS,GAAAb,mBAAA,CAATa,SAAS;IAETC,cAAc,GAAAd,mBAAA,CAAdc,cAAc;IACdC,aAAa,GAAAf,mBAAA,CAAbe,aAAa;IACbC,sBAAsB,GAAAhB,mBAAA,CAAtBgB,sBAAsB;IACtBC,UAAU,GAAAjB,mBAAA,CAAViB,UAAU;IACVC,cAAc,GAAAlB,mBAAA,CAAdkB,cAAc;IACdC,WAAW,GAAAnB,mBAAA,CAAXmB,WAAW;IACXC,eAAe,GAAApB,mBAAA,CAAfoB,eAAe;IACfC,kBAAkB,GAAArB,mBAAA,CAAlBqB,kBAAkB;IAClBC,iBAAiB,GAAAtB,mBAAA,CAAjBsB,iBAAiB;IACjBC,cAAc,GAAAvB,mBAAA,CAAduB,cAAc;IACdC,QAAQ,GAAAxB,mBAAA,CAARwB,QAAQ;IAERC,wBAAwB,GAAAzB,mBAAA,CAAxByB,wBAAwB;IACxBC,YAAY,GAAA1B,mBAAA,CAAZ0B,YAAY;IACZC,KAAK,GAAA3B,mBAAA,CAAL2B,KAAK;IACLC,OAAO,GAAA5B,mBAAA,CAAP4B,OAAO;IACPC,iBAAiB,GAAA7B,mBAAA,CAAjB6B,iBAAiB;EAInB,IAAAC,SAAA,GAAgC,IAAAC,eAAQ,EAAC,QAAQ,CAAC;IAAAC,UAAA,OAAAC,eAAA,CAAA5D,OAAA,EAAAyD,SAAA;IAA3CI,QAAQ,GAAAF,UAAA;IAAEG,WAAW,GAAAH,UAAA;EAG5B,IAAMI,eAAe,GAAG,IAAAtC,cAAO,EAAC,YAAM;IACpC,IAAIoC,QAAQ,KAAK,UAAU,IAAIL,iBAAiB,IAAIA,iBAAiB,CAACQ,MAAM,GAAG,CAAC,EAAE;MAChF,OAAOR,iBAAiB,CAAC1B,oBAAoB,CAAC,IAAI,IAAI;IACxD;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAAC+B,QAAQ,EAAEL,iBAAiB,EAAE1B,oBAAoB,CAAC,CAAC;EAGvD,IAAMmC,mBAAmB,GAAG,IAAAxC,cAAO,EAAC,YAAM;IAAA,IAAAyC,qBAAA;IACxC,OAAO,CAAA1C,mBAAmB,aAAA0C,qBAAA,GAAnB1C,mBAAmB,CAAE2C,UAAU,cAAAD,qBAAA,GAA/BA,qBAAA,CAAiCE,IAAI,CAAC,UAAAC,GAAG;MAAA,OAAIA,GAAG,CAACC,EAAE,KAAKzC,gBAAgB;IAAA,EAAC,qBAAzEqC,qBAAA,CAA2EK,IAAI,KAAI,SAAS;EACrG,CAAC,EAAE,CAAC/C,mBAAmB,oBAAnBA,mBAAmB,CAAE2C,UAAU,EAAEtC,gBAAgB,CAAC,CAAC;EAGvD,IAAM2C,gBAAgB,GAAG,IAAA/C,cAAO,EAAC;IAAA,OAAO;MACtCgD,QAAQ,EAAE3C,oBAAoB;MAC9B4C,cAAc,EAAElC,SAAS,CAACwB,MAAM;MAChCW,QAAQ,EAAEV,mBAAmB;MAC7BW,IAAI,EAAE7C,cAAc;MACpB8C,UAAU,EAAEhD;IACd,CAAC;EAAA,CAAC,EAAE,CAACC,oBAAoB,EAAEU,SAAS,CAACwB,MAAM,EAAEC,mBAAmB,EAAElC,cAAc,EAAEF,gBAAgB,CAAC,CAAC;EAGpG,IAAMiD,kBAAkB,GAAG,IAAAC,kBAAW,EAAC,YAAM;IAC3C,IAAI5C,MAAM,IAAIkB,YAAY,IAAIQ,QAAQ,KAAK,UAAU,IAAIE,eAAe,IAAI,CAAC7B,WAAW,EAAE;MACxFb,YAAY,CAAC;QACX2D,KAAK,EAAE,sBAAsB;QAC7BhE,KAAK,EAALA,KAAK;QACLiE,IAAI,EAAE,iBAAiB;QACvBC,QAAQ,EAAEV;MACZ,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACrC,MAAM,EAAEkB,YAAY,EAAEQ,QAAQ,EAAEE,eAAe,EAAE7B,WAAW,EAAElB,KAAK,EAAEK,YAAY,EAAEmD,gBAAgB,CAAC,CAAC;EAGzG,IAAAW,gBAAS,EAAC,YAAM;IACdL,kBAAkB,CAAC,CAAC;EACtB,CAAC,EAAE,CAACA,kBAAkB,CAAC,CAAC;EAG1B,IAAMM,eAAe,GAAG,IAAAL,kBAAW,EAAC,YAAM;IACxC,IAAIlB,QAAQ,KAAK,UAAU,EAAE;MAC3BC,WAAW,CAAC,QAAQ,CAAC;IACvB,CAAC,MAAM;MACLuB,kBAAM,CAACC,IAAI,CAAC;QACVC,QAAQ,EAAE,yBAAyB;QACnCzE,MAAM,EAAE;UAAEE,KAAK,EAALA;QAAM;MAClB,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAAC6C,QAAQ,EAAE7C,KAAK,CAAC,CAAC;EAErB,IAAMwE,mBAAmB,GAAG,IAAAT,kBAAW,EAAC,UAACH,IAAI,EAAK;IAChDlC,aAAa,CAACkC,IAAI,CAAC;IACnBd,WAAW,CAAC,UAAU,CAAC;EACzB,CAAC,EAAE,CAACpB,aAAa,CAAC,CAAC;EAEnB,IAAM+C,oBAAoB,GAAG,IAAAV,kBAAW,EAAC,UAACF,UAAU,EAAK;IACvDpC,cAAc,CAACoC,UAAU,CAAC;EAC5B,CAAC,EAAE,CAACpC,cAAc,CAAC,CAAC;EAEpB,IAAMiD,2BAA2B,GAAG,IAAAX,kBAAW,EAAC,UAACY,KAAK,EAAK;IAAA,IAAAC,sBAAA;IACzD,IAAMjB,QAAQ,GAAGnD,mBAAmB,aAAAoE,sBAAA,GAAnBpE,mBAAmB,CAAE2C,UAAU,qBAA/ByB,sBAAA,CAAkCD,KAAK,CAAC;IACzD,IAAIhB,QAAQ,EAAE;MACZlC,cAAc,CAACkC,QAAQ,CAACL,EAAE,CAAC;IAC7B;EACF,CAAC,EAAE,CAAC9C,mBAAmB,oBAAnBA,mBAAmB,CAAE2C,UAAU,EAAE1B,cAAc,CAAC,CAAC;EAErD,IAAMoD,2BAA2B,GAAG,IAAAd,kBAAW,EAAC,YAAM;IACpDpC,sBAAsB,CAAC,CAAC;EAC1B,CAAC,EAAE,CAACA,sBAAsB,CAAC,CAAC;EAE5B,IAAMmD,gBAAgB,GAAG,IAAAf,kBAAW,EAAC,YAAM;IACzC,IAAI/C,YAAY,EAAE;MAChB,IAAM+D,MAAM,GAAGnD,UAAU,CAAC,CAAC;MAC3B,IAAImD,MAAM,CAACC,SAAS,EAAE;QACpBlC,WAAW,CAAC,QAAQ,CAAC;MACvB;IACF,CAAC,MAAM;MACLhB,WAAW,CAAC,CAAC;IACf;EACF,CAAC,EAAE,CAACd,YAAY,EAAEY,UAAU,EAAEE,WAAW,CAAC,CAAC;EAE3C,IAAMmD,oBAAoB,GAAG,IAAAlB,kBAAW,EAAC,YAAM;IAC7ClC,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACA,cAAc,CAAC,CAAC;EAEpB,IAAMqD,kBAAkB,GAAG,IAAAnB,kBAAW,EAAC,YAAM;IAC3C7B,cAAc,CAAC,KAAK,CAAC;IACrBY,WAAW,CAAC,UAAU,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMqC,qBAAqB,GAAG,IAAApB,kBAAW,EAAC,YAAM;IAC9CjB,WAAW,CAAC,QAAQ,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMsC,kBAAkB,GAAG,IAAArB,kBAAW,EAAC,YAAM;IAC3CjB,WAAW,CAAC,QAAQ,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;EAGJ,IAAI,CAAC3B,MAAM,IAAI,CAACkB,YAAY,EAAE;IAC5B,OACE,IAAAhE,WAAA,CAAAgH,GAAA,EAAC9H,UAAA,CAAAyB,OAAS;MACRsG,QAAQ;MACRC,aAAa,EAAEC,+BAAoB,CAACC,GAAI;MACxCC,eAAe,EAAC,SAAS;MACzBC,cAAc,EAAC,cAAc;MAAAC,QAAA,EAE7B,IAAAvH,WAAA,CAAAgH,GAAA,EAAClI,YAAA,CAAA0I,IAAI;QAACC,KAAK,EAAE7F,MAAM,CAAC8F,gBAAiB;QAAAH,QAAA,EACnC,IAAAvH,WAAA,CAAAgH,GAAA,EAAClI,YAAA,CAAA6I,iBAAiB;UAACC,IAAI,EAAC,OAAO;UAACC,KAAK,EAAE5F;QAAW,CAAE;MAAC,CACjD;IAAC,CACE,CAAC;EAEhB;EAEA,OACE,IAAAjC,WAAA,CAAA8H,IAAA,EAAC5I,UAAA,CAAAyB,OAAS;IACRsG,QAAQ;IACRC,aAAa,EAAEC,+BAAoB,CAACC,GAAI;IACxCW,cAAc;IACdV,eAAe,EAAC,SAAS;IACzBC,cAAc,EAAC,cAAc;IAC7BU,WAAW,EAAE,KAAM;IACnBC,eAAe,EAAE;MACfC,4BAA4B,EAAE,KAAK;MACnCC,qBAAqB,EAAEvG,MAAM,CAACwG;IAChC,CAAE;IAAAb,QAAA,GAGF,IAAAvH,WAAA,CAAAgH,GAAA,EAAC5H,sBAAA,CAAAuB,OAAqB;MACpBgB,KAAK,EAAEA,KAAM;MACb0G,WAAW,EAAEtC;IAAgB,CAC9B,CAAC,EAGDvB,QAAQ,KAAK,UAAU,IAAI,CAAC3B,WAAW,IACtC,IAAA7C,WAAA,CAAAgH,GAAA,EAACzH,wBAAA,CAAAoB,OAAuB;MACtBmE,UAAU,EAAE3C,mBAAmB,CAAC2C,UAAU,IAAI,EAAG;MACjD3B,SAAS,EAAEA,SAAU;MACrBmF,kBAAkB,EAAErE,KAAK,CAACqE,kBAAkB,IAAI,CAAC,CAAE;MACnDrG,UAAU,EAAEA,UAAW;MACvBsG,QAAQ,EAAExF,oBAAqB;MAC/ByF,cAAc,EAAEhC,2BAA4B;MAC5CiC,eAAe,EAAEpC,2BAA4B;MAE7CqC,iBAAiB,EAAElG;IAAiB,CACrC,CACF,EAGAgC,QAAQ,KAAK,QAAQ,IACpB,IAAAxE,WAAA,CAAA8H,IAAA,EAAA9H,WAAA,CAAA2I,QAAA;MAAApB,QAAA,GAEE,IAAAvH,WAAA,CAAAgH,GAAA,EAAC3H,gCAAA,CAAAsB,OAA+B;QAC9BmE,UAAU,EAAE3C,mBAAmB,CAAC2C,UAAU,IAAI,EAAG;QACjDtC,gBAAgB,EAAEA,gBAAiB;QACnCoG,gBAAgB,EAAExC,oBAAqB;QACvCnE,UAAU,EAAEA;MAAW,CACxB,CAAC,EAGF,IAAAjC,WAAA,CAAAgH,GAAA,EAAC1H,4BAAA,CAAAqB,OAA2B;QAC1BkI,YAAY,EAAE1C,mBAAoB;QAClC2C,QAAQ,EAAE3F,SAAS,CAACwB,MAAM,KAAK,CAAE;QACjC1C,UAAU,EAAEA;MAAW,CACxB,CAAC;IAAA,CACF,CACH,EAEAuC,QAAQ,KAAK,UAAU,IAAI,CAAC3B,WAAW,IACtC,IAAA7C,WAAA,CAAAgH,GAAA,EAAAhH,WAAA,CAAA2I,QAAA;MAAApB,QAAA,EAEE,IAAAvH,WAAA,CAAAgH,GAAA,EAACxH,2BAAA,CAAAmB,OAA0B;QACzB+D,eAAe,EAAEA,eAAgB;QACjCqE,YAAY,EAAEnE,mBAAoB;QAClClC,cAAc,EAAEA,cAAe;QAC/Bf,KAAK,EAAEA,KAAM;QACbM,UAAU,EAAEA,UAAW;QACvBU,YAAY,EAAEA,YAAa;QAC3BC,SAAS,EAAEA,SAAU;QAErBI,cAAc,EAAEA,cAAe;QAC/BC,oBAAoB,EAAEA,oBAAqB;QAC3CC,mBAAmB,EAAEA,mBAAoB;QACzC8F,sBAAsB,EAAEpF,iBAAkB;QAC1CqF,kBAAkB,EAAEvF,eAAgB;QACpCwF,cAAc,EAAEvF,kBAAmB;QACnCwF,kBAAkB,EAAEA;MAAmB,CACxC;IAAC,CACF,CACH,EAEAtG,WAAW,IACV,IAAA7C,WAAA,CAAAgH,GAAA,EAACtH,2BAAA,CAAAiB,OAA0B;MACzByI,KAAK,EAAEnF,KAAK,CAACmF,KAAK,IAAI,CAAE;MACxB/D,cAAc,EAAElC,SAAS,CAACwB,MAAO;MACjChD,KAAK,EAAEA,KAAM;MACbM,UAAU,EAAEA,UAAW;MACvBoH,OAAO,EAAExC,kBAAmB;MAC5ByC,UAAU,EAAExC,qBAAsB;MAClCyC,MAAM,EAAExD;IAAgB,CACzB,CACF,EAGAvB,QAAQ,KAAK,UAAU,IAAI,CAAC3B,WAAW,IACtC,IAAA7C,WAAA,CAAAgH,GAAA,EAACvH,0BAAA,CAAAkB,OAAyB;MACxB6I,MAAM,EAAE/C,gBAAiB;MACzBgD,UAAU,EAAE7C,oBAAqB;MACjC2C,MAAM,EAAExC,kBAAmB;MAC3B2C,UAAU,EAAE5F,QAAS;MACrB6F,YAAY,EAAElH,oBAAqB;MACnCmH,UAAU,EAAEzG,SAAS,CAACwB,MAAO;MAC7BkF,WAAW,EACRnH,cAAc,KAAK,MAAM,IAAIM,cAAc,CAAC8G,IAAI,CAAC,CAAC,KAAK,EAAE,IACzDpH,cAAc,KAAK,UAAU,IAAIO,oBAAoB,CAAC0B,MAAM,KAAK,CAAE,IACnEjC,cAAc,KAAK,iBAAiB,IAAIQ,mBAAmB,KAAK,IAClE;MACD6G,cAAc,EAAEhG,wBAAyB;MACzCpB,YAAY,EAAEA,YAAa;MAC3BC,SAAS,EAAEA,SAAU;MACrBX,UAAU,EAAEA;IAAW,CACxB,CACF;EAAA,CACQ,CAAC;AAEhB,CAAC;AAGDZ,uBAAuB,CAAC2I,SAAS,GAAG;EAClCzI,KAAK,EAAE0I,kBAAS,CAACC,KAAK,CAAC;IACrBzI,MAAM,EAAEwI,kBAAS,CAACC,KAAK,CAAC;MACtBvI,KAAK,EAAEsI,kBAAS,CAACE;IACnB,CAAC;EACH,CAAC,CAAC,CAACC;AACL,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAA3J,OAAA,GAEaU,uBAAuB","ignoreList":[]}