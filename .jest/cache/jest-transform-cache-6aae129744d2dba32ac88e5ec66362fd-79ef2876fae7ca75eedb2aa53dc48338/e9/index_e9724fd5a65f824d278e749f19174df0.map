{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_propTypes","_interopRequireDefault","_vectorIcons","_style","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ExerciseFeedback","_ref","_ref$type","type","message","explanation","onDismiss","_ref$autoHide","autoHide","_ref$autoHideDuration","autoHideDuration","_ref$showDismissButto","showDismissButton","fadeAnim","React","useRef","Animated","Value","current","useEffect","timing","toValue","duration","useNativeDriver","start","timer","setTimeout","_ref2","finished","clearTimeout","getTypeStyles","containerStyle","styles","successContainer","icon","iconColor","errorContainer","infoContainer","_getTypeStyles","handleDismiss","useCallback","process","env","NODE_ENV","_ref3","jsx","View","style","opacity","children","jsxs","content","iconContainer","Ionicons","name","size","color","textContainer","Text","TouchableOpacity","dismissButton","onPress","hitSlop","top","bottom","left","right","accessibilityRole","propTypes","PropTypes","oneOf","string","isRequired","func","bool","number","defaultProps","_default","exports"],"sources":["index.js"],"sourcesContent":["// src/components/exercise-common/ExerciseFeedback/index.js\r\nimport React, { useCallback } from \"react\";\r\nimport { View, Text, TouchableOpacity, Animated } from \"react-native\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport styles from \"./style\";\r\n\r\n/**\r\n * Composant pour afficher un feedback après une réponse\r\n * (correct, incorrect ou information supplémentaire)\r\n * \r\n * @param {string} type - Type de feedback ('success', 'error', 'info')\r\n * @param {string} message - Message principal du feedback\r\n * @param {string} explanation - Explication détaillée (optionnelle)\r\n * @param {function} onDismiss - Callback appelé lors de la fermeture\r\n * @param {boolean} autoHide - Masquage automatique après un délai\r\n * @param {number} autoHideDuration - Durée avant masquage automatique (ms)\r\n * @param {boolean} showDismissButton - Afficher le bouton de fermeture\r\n */\r\nconst ExerciseFeedback = ({\r\n  type = \"success\", // 'success', 'error', 'info'\r\n  message,\r\n  explanation,\r\n  onDismiss,\r\n  autoHide = false,\r\n  autoHideDuration = 3000,\r\n  showDismissButton = true,\r\n}) => {\r\n  const fadeAnim = React.useRef(new Animated.Value(0)).current;\r\n\r\n  React.useEffect(() => {\r\n    // Animation d'entrée\r\n    Animated.timing(fadeAnim, {\r\n      toValue: 1,\r\n      duration: 300,\r\n      useNativeDriver: true,\r\n    }).start();\r\n\r\n    // Auto-masquage si activé\r\n    if (autoHide) {\r\n      const timer = setTimeout(() => {\r\n        Animated.timing(fadeAnim, {\r\n          toValue: 0,\r\n          duration: 300,\r\n          useNativeDriver: true,\r\n        }).start(({ finished }) => {\r\n          if (finished && onDismiss) {\r\n            onDismiss();\r\n          }\r\n        });\r\n      }, autoHideDuration);\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, []);\r\n\r\n  // Définir les couleurs et icônes en fonction du type\r\n  const getTypeStyles = () => {\r\n    switch (type) {\r\n      case \"success\":\r\n        return {\r\n          containerStyle: styles.successContainer,\r\n          icon: \"checkmark-circle\",\r\n          iconColor: \"#10B981\",\r\n        };\r\n      case \"error\":\r\n        return {\r\n          containerStyle: styles.errorContainer,\r\n          icon: \"close-circle\",\r\n          iconColor: \"#EF4444\",\r\n        };\r\n      case \"info\":\r\n      default:\r\n        return {\r\n          containerStyle: styles.infoContainer,\r\n          icon: \"information-circle\",\r\n          iconColor: \"#3B82F6\",\r\n        };\r\n    }\r\n  };\r\n\r\n  const { containerStyle, icon, iconColor } = getTypeStyles();\r\n\r\n  // Handler pour fermer le feedback\r\n  const handleDismiss = useCallback(() => {\r\n    if (process.env.NODE_ENV === 'test') {\r\n      if (onDismiss) onDismiss();\r\n      return;\r\n    }\r\n    Animated.timing(fadeAnim, {\r\n      toValue: 0,\r\n      duration: 300,\r\n      useNativeDriver: true,\r\n    }).start(({ finished }) => {\r\n      if (finished && onDismiss) {\r\n        onDismiss();\r\n      }\r\n    });\r\n  }, [onDismiss, fadeAnim]);\r\n\r\n  // Rendu du feedback animé\r\n  return (\r\n    <Animated.View style={[containerStyle, { opacity: fadeAnim }]}> \r\n      <View style={styles.content}>\r\n        <View style={styles.iconContainer}>\r\n          <Ionicons name={icon} size={24} color={iconColor} />\r\n        </View>\r\n        <View style={styles.textContainer}>\r\n          <Text style={styles.message}>{message}</Text>\r\n          {explanation ? (\r\n            <Text style={styles.explanation}>{explanation}</Text>\r\n          ) : null}\r\n        </View>\r\n        {showDismissButton && (\r\n          <TouchableOpacity\r\n            style={styles.dismissButton}\r\n            onPress={handleDismiss}\r\n            hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\r\n            accessibilityRole=\"button\"\r\n          >\r\n            <Ionicons name=\"close\" size={20} color=\"#9CA3AF\" />\r\n          </TouchableOpacity>\r\n        )}\r\n      </View>\r\n    </Animated.View>\r\n  );\r\n};\r\n\r\n// PropTypes pour la validation des props\r\nExerciseFeedback.propTypes = {\r\n  type: PropTypes.oneOf(['success', 'error', 'info']),\r\n  message: PropTypes.string.isRequired,\r\n  explanation: PropTypes.string,\r\n  onDismiss: PropTypes.func,\r\n  autoHide: PropTypes.bool,\r\n  autoHideDuration: PropTypes.number,\r\n  showDismissButton: PropTypes.bool,\r\n};\r\n\r\n// Valeurs par défaut\r\nExerciseFeedback.defaultProps = {\r\n  type: \"success\",\r\n  explanation: null,\r\n  onDismiss: null,\r\n  autoHide: false,\r\n  autoHideDuration: 3000,\r\n  showDismissButton: true,\r\n};\r\n\r\nexport default ExerciseFeedback;"],"mappings":"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","ignoreList":[]}