b2802c62c3a0c819e28d723f74065ac6
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _reactNative = require("react-native");
var _native = require("@react-navigation/native");
var _expoRouter = require("expo-router");
var _react = require("react");
var _propTypes = _interopRequireDefault(require("prop-types"));
var _Container = _interopRequireWildcard(require("../../../components/layout/Container"));
var _VocabularyHeader = _interopRequireDefault(require("./VocabularyHeader"));
var _VocabularyCategorySelector = _interopRequireDefault(require("./VocabularyCategorySelector"));
var _VocabularyProgress = _interopRequireDefault(require("./VocabularyProgress"));
var _VocabularyWordSection = _interopRequireDefault(require("./VocabularyWordSection"));
var _VocabularyNavigation = _interopRequireDefault(require("./VocabularyNavigation"));
var _useVocabulary2 = _interopRequireDefault(require("./hooks/useVocabulary"));
var _useLastActivity2 = _interopRequireDefault(require("../../../hooks/useLastActivity"));
var _vocabularyDataHelper = require("../../../utils/vocabulary/vocabularyDataHelper");
var _style = _interopRequireDefault(require("./style"));
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
var VocabularyExercise = function VocabularyExercise(_ref) {
  var route = _ref.route;
  var _ref2 = route.params || {},
    level = _ref2.level,
    mode = _ref2.mode;
  var navigation = (0, _native.useNavigation)();
  var styles = (0, _style.default)();
  var _useLastActivity = (0, _useLastActivity2.default)(),
    saveActivity = _useLastActivity.saveActivity;
  var finalMode = mode || ((0, _vocabularyDataHelper.isBonusLevel)(level) ? "fast" : "classic");
  var levelColor = (0, _vocabularyDataHelper.getLevelColor)(level);
  var _useState = (0, _react.useState)(null),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    vocabularyData = _useState2[0],
    setVocabularyData = _useState2[1];
  (0, _react.useEffect)(function () {
    var isMounted = true;
    var load = function () {
      var _ref3 = (0, _asyncToGenerator2.default)(function* () {
        var data = yield (0, _vocabularyDataHelper.loadVocabularyData)(level, finalMode);
        if (isMounted) setVocabularyData(data);
      });
      return function load() {
        return _ref3.apply(this, arguments);
      };
    }();
    load();
    return function () {
      isMounted = false;
    };
  }, [level, finalMode]);
  var _useVocabulary = (0, _useVocabulary2.default)(vocabularyData, level, finalMode),
    categoryIndex = _useVocabulary.categoryIndex,
    wordIndex = _useVocabulary.wordIndex,
    showTranslation = _useVocabulary.showTranslation,
    completedWords = _useVocabulary.completedWords,
    loaded = _useVocabulary.loaded,
    showDetailedProgress = _useVocabulary.showDetailedProgress,
    currentWord = _useVocabulary.currentWord,
    currentCategory = _useVocabulary.currentCategory,
    changeCategory = _useVocabulary.changeCategory,
    toggleTranslation = _useVocabulary.toggleTranslation,
    toggleDetailedProgress = _useVocabulary.toggleDetailedProgress,
    handleNext = _useVocabulary.handleNext,
    handlePrevious = _useVocabulary.handlePrevious,
    canGoToPrevious = _useVocabulary.canGoToPrevious,
    isLastWordInExercise = _useVocabulary.isLastWordInExercise,
    display = _useVocabulary.display,
    saveData = _useVocabulary.saveData;
  (0, _react.useEffect)(function () {
    if (!loaded || !vocabularyData || !currentWord) return;
    var totalWords = 15;
    if (vocabularyData.categories && Array.isArray(vocabularyData.categories)) {
      totalWords = vocabularyData.categories.reduce(function (total, cat) {
        var _cat$words;
        return total + (((_cat$words = cat.words) == null ? void 0 : _cat$words.length) || 0);
      }, 0);
    } else if (vocabularyData.exercises && Array.isArray(vocabularyData.exercises)) {
      totalWords = vocabularyData.exercises.reduce(function (total, ex) {
        var _ex$words;
        return total + (((_ex$words = ex.words) == null ? void 0 : _ex$words.length) || 0);
      }, 0);
    } else if (vocabularyData.words && Array.isArray(vocabularyData.words)) {
      totalWords = vocabularyData.words.length;
    }
    var activityData = {
      title: `Vocabulaire ${finalMode === "fast" ? "Fast" : ""}`,
      level: level,
      type: "vocabulary",
      mode: finalMode,
      metadata: {
        word: wordIndex,
        totalWords: totalWords,
        category: (currentCategory == null ? void 0 : currentCategory.name) || "Général",
        categoryIndex: categoryIndex,
        wordIndex: wordIndex
      }
    };
    saveActivity(activityData);
  }, [wordIndex]);
  (0, _react.useEffect)(function () {
    if (!loaded || !vocabularyData || !currentWord) return;
    var totalWords = 15;
    if (vocabularyData.categories && Array.isArray(vocabularyData.categories)) {
      totalWords = vocabularyData.categories.reduce(function (total, cat) {
        var _cat$words2;
        return total + (((_cat$words2 = cat.words) == null ? void 0 : _cat$words2.length) || 0);
      }, 0);
    } else if (vocabularyData.exercises && Array.isArray(vocabularyData.exercises)) {
      totalWords = vocabularyData.exercises.reduce(function (total, ex) {
        var _ex$words2;
        return total + (((_ex$words2 = ex.words) == null ? void 0 : _ex$words2.length) || 0);
      }, 0);
    } else if (vocabularyData.words && Array.isArray(vocabularyData.words)) {
      totalWords = vocabularyData.words.length;
    }
    var activityData = {
      title: `Vocabulaire ${finalMode === "fast" ? "Fast" : ""}`,
      level: level,
      type: "vocabulary",
      mode: finalMode,
      metadata: {
        word: wordIndex,
        totalWords: totalWords,
        category: (currentCategory == null ? void 0 : currentCategory.name) || "Général",
        categoryIndex: categoryIndex,
        wordIndex: wordIndex
      }
    };
    saveActivity(activityData);
  }, [loaded, vocabularyData]);
  var handleBackPress = (0, _react.useCallback)(function () {
    _expoRouter.router.push({
      pathname: "/tabs/exerciseSelection",
      params: {
        level: level
      }
    });
  }, [level]);
  var handleCategoryChange = (0, _react.useCallback)(function (index) {
    return changeCategory(index);
  }, [changeCategory]);
  var handleCategoryProgressPress = (0, _react.useCallback)(function (index) {
    return changeCategory(index);
  }, [changeCategory]);
  var handleToggleProgressDetails = (0, _react.useCallback)(function () {
    return toggleDetailedProgress();
  }, [toggleDetailedProgress]);
  var handleNextWord = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    var result = handleNext();
    if (typeof saveData === 'function') {
      yield saveData();
    }
    if (result.completed) {
      navigation.goBack();
    }
  }), [handleNext, navigation, saveData]);
  var handlePreviousWord = (0, _react.useCallback)(function () {
    return handlePrevious();
  }, [handlePrevious]);
  if (!loaded || !vocabularyData) {
    return (0, _jsxRuntime.jsx)(_Container.default, {
      safeArea: true,
      safeAreaEdges: _Container.CONTAINER_SAFE_EDGES.ALL,
      backgroundColor: "#f8fafc",
      statusBarStyle: "dark-content",
      children: (0, _jsxRuntime.jsx)(_reactNative.View, {
        style: styles.loadingContainer,
        children: (0, _jsxRuntime.jsx)(_reactNative.ActivityIndicator, {
          testID: "activity-indicator",
          size: "large",
          color: levelColor
        })
      })
    });
  }
  return (0, _jsxRuntime.jsxs)(_Container.default, {
    safeArea: true,
    safeAreaEdges: _Container.CONTAINER_SAFE_EDGES.ALL,
    withScrollView: true,
    backgroundColor: "#f8fafc",
    statusBarStyle: "dark-content",
    withPadding: false,
    scrollViewProps: {
      showsVerticalScrollIndicator: false,
      contentContainerStyle: styles.scrollContent
    },
    children: [(0, _jsxRuntime.jsx)(_VocabularyHeader.default, {
      level: level,
      mode: finalMode,
      onBackPress: handleBackPress
    }), (0, _jsxRuntime.jsx)(_VocabularyProgress.default, {
      vocabularyData: vocabularyData,
      completedWords: completedWords,
      levelColor: levelColor,
      expanded: showDetailedProgress,
      onToggleExpand: handleToggleProgressDetails,
      onCategoryPress: handleCategoryProgressPress
    }), (0, _jsxRuntime.jsx)(_VocabularyCategorySelector.default, {
      categories: display.categories,
      selectedIndex: categoryIndex,
      onSelectCategory: handleCategoryChange,
      levelColor: levelColor
    }), (0, _jsxRuntime.jsx)(_VocabularyWordSection.default, {
      currentWord: currentWord,
      wordCounter: display.wordCounter,
      mode: finalMode,
      level: level,
      levelColor: levelColor,
      showTranslation: showTranslation,
      onToggleTranslation: toggleTranslation
    }), (0, _jsxRuntime.jsx)(_VocabularyNavigation.default, {
      onNext: handleNextWord,
      onPrevious: handlePreviousWord,
      canGoPrevious: canGoToPrevious,
      isLast: isLastWordInExercise,
      levelColor: levelColor
    })]
  });
};
var _default = exports.default = VocabularyExercise;
VocabularyExercise.propTypes = {
  route: _propTypes.default.shape({
    params: _propTypes.default.shape({
      level: _propTypes.default.string,
      mode: _propTypes.default.string
    })
  }).isRequired
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX25hdGl2ZSIsIl9leHBvUm91dGVyIiwiX3JlYWN0IiwiX3Byb3BUeXBlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfQ29udGFpbmVyIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfVm9jYWJ1bGFyeUhlYWRlciIsIl9Wb2NhYnVsYXJ5Q2F0ZWdvcnlTZWxlY3RvciIsIl9Wb2NhYnVsYXJ5UHJvZ3Jlc3MiLCJfVm9jYWJ1bGFyeVdvcmRTZWN0aW9uIiwiX1ZvY2FidWxhcnlOYXZpZ2F0aW9uIiwiX3VzZVZvY2FidWxhcnkyIiwiX3VzZUxhc3RBY3Rpdml0eTIiLCJfdm9jYWJ1bGFyeURhdGFIZWxwZXIiLCJfc3R5bGUiLCJfanN4UnVudGltZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiVm9jYWJ1bGFyeUV4ZXJjaXNlIiwiX3JlZiIsInJvdXRlIiwiX3JlZjIiLCJwYXJhbXMiLCJsZXZlbCIsIm1vZGUiLCJuYXZpZ2F0aW9uIiwidXNlTmF2aWdhdGlvbiIsInN0eWxlcyIsImNyZWF0ZVN0eWxlcyIsIl91c2VMYXN0QWN0aXZpdHkiLCJ1c2VMYXN0QWN0aXZpdHkiLCJzYXZlQWN0aXZpdHkiLCJmaW5hbE1vZGUiLCJpc0JvbnVzTGV2ZWwiLCJsZXZlbENvbG9yIiwiZ2V0TGV2ZWxDb2xvciIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsInZvY2FidWxhcnlEYXRhIiwic2V0Vm9jYWJ1bGFyeURhdGEiLCJ1c2VFZmZlY3QiLCJpc01vdW50ZWQiLCJsb2FkIiwiX3JlZjMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkYXRhIiwibG9hZFZvY2FidWxhcnlEYXRhIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfdXNlVm9jYWJ1bGFyeSIsInVzZVZvY2FidWxhcnkiLCJjYXRlZ29yeUluZGV4Iiwid29yZEluZGV4Iiwic2hvd1RyYW5zbGF0aW9uIiwiY29tcGxldGVkV29yZHMiLCJsb2FkZWQiLCJzaG93RGV0YWlsZWRQcm9ncmVzcyIsImN1cnJlbnRXb3JkIiwiY3VycmVudENhdGVnb3J5IiwiY2hhbmdlQ2F0ZWdvcnkiLCJ0b2dnbGVUcmFuc2xhdGlvbiIsInRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MiLCJoYW5kbGVOZXh0IiwiaGFuZGxlUHJldmlvdXMiLCJjYW5Hb1RvUHJldmlvdXMiLCJpc0xhc3RXb3JkSW5FeGVyY2lzZSIsImRpc3BsYXkiLCJzYXZlRGF0YSIsInRvdGFsV29yZHMiLCJjYXRlZ29yaWVzIiwiQXJyYXkiLCJpc0FycmF5IiwicmVkdWNlIiwidG90YWwiLCJjYXQiLCJfY2F0JHdvcmRzIiwid29yZHMiLCJsZW5ndGgiLCJleGVyY2lzZXMiLCJleCIsIl9leCR3b3JkcyIsImFjdGl2aXR5RGF0YSIsInRpdGxlIiwidHlwZSIsIm1ldGFkYXRhIiwid29yZCIsImNhdGVnb3J5IiwibmFtZSIsIl9jYXQkd29yZHMyIiwiX2V4JHdvcmRzMiIsImhhbmRsZUJhY2tQcmVzcyIsInVzZUNhbGxiYWNrIiwicm91dGVyIiwicHVzaCIsInBhdGhuYW1lIiwiaGFuZGxlQ2F0ZWdvcnlDaGFuZ2UiLCJpbmRleCIsImhhbmRsZUNhdGVnb3J5UHJvZ3Jlc3NQcmVzcyIsImhhbmRsZVRvZ2dsZVByb2dyZXNzRGV0YWlscyIsImhhbmRsZU5leHRXb3JkIiwicmVzdWx0IiwiY29tcGxldGVkIiwiZ29CYWNrIiwiaGFuZGxlUHJldmlvdXNXb3JkIiwianN4Iiwic2FmZUFyZWEiLCJzYWZlQXJlYUVkZ2VzIiwiQ09OVEFJTkVSX1NBRkVfRURHRVMiLCJBTEwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJzdGF0dXNCYXJTdHlsZSIsImNoaWxkcmVuIiwiVmlldyIsInN0eWxlIiwibG9hZGluZ0NvbnRhaW5lciIsIkFjdGl2aXR5SW5kaWNhdG9yIiwidGVzdElEIiwic2l6ZSIsImNvbG9yIiwianN4cyIsIndpdGhTY3JvbGxWaWV3Iiwid2l0aFBhZGRpbmciLCJzY3JvbGxWaWV3UHJvcHMiLCJzaG93c1ZlcnRpY2FsU2Nyb2xsSW5kaWNhdG9yIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwic2Nyb2xsQ29udGVudCIsIm9uQmFja1ByZXNzIiwiZXhwYW5kZWQiLCJvblRvZ2dsZUV4cGFuZCIsIm9uQ2F0ZWdvcnlQcmVzcyIsInNlbGVjdGVkSW5kZXgiLCJvblNlbGVjdENhdGVnb3J5Iiwid29yZENvdW50ZXIiLCJvblRvZ2dsZVRyYW5zbGF0aW9uIiwib25OZXh0Iiwib25QcmV2aW91cyIsImNhbkdvUHJldmlvdXMiLCJpc0xhc3QiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJzaGFwZSIsInN0cmluZyIsImlzUmVxdWlyZWQiXSwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBWb2NhYnVsYXJ5RXhlcmNpc2UvaW5kZXguanMgLSBCT1VDTEUgSU5GSU5JRSBDT1JSSUfDiUVcclxuXHJcbmltcG9ydCB7IFZpZXcsIEFjdGl2aXR5SW5kaWNhdG9yIH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiO1xyXG5pbXBvcnQgeyB1c2VOYXZpZ2F0aW9uIH0gZnJvbSBcIkByZWFjdC1uYXZpZ2F0aW9uL25hdGl2ZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiZXhwby1yb3V0ZXJcIjtcclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmltcG9ydCBDb250YWluZXIsIHsgQ09OVEFJTkVSX1NBRkVfRURHRVMgfSBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQvQ29udGFpbmVyXCI7XHJcbmltcG9ydCBWb2NhYnVsYXJ5SGVhZGVyIGZyb20gXCIuL1ZvY2FidWxhcnlIZWFkZXJcIjtcclxuaW1wb3J0IFZvY2FidWxhcnlDYXRlZ29yeVNlbGVjdG9yIGZyb20gXCIuL1ZvY2FidWxhcnlDYXRlZ29yeVNlbGVjdG9yXCI7XHJcbmltcG9ydCBWb2NhYnVsYXJ5UHJvZ3Jlc3MgZnJvbSBcIi4vVm9jYWJ1bGFyeVByb2dyZXNzXCI7XHJcbmltcG9ydCBWb2NhYnVsYXJ5V29yZFNlY3Rpb24gZnJvbSBcIi4vVm9jYWJ1bGFyeVdvcmRTZWN0aW9uXCI7XHJcbmltcG9ydCBWb2NhYnVsYXJ5TmF2aWdhdGlvbiBmcm9tIFwiLi9Wb2NhYnVsYXJ5TmF2aWdhdGlvblwiO1xyXG5cclxuaW1wb3J0IHVzZVZvY2FidWxhcnkgZnJvbSBcIi4vaG9va3MvdXNlVm9jYWJ1bGFyeVwiO1xyXG5pbXBvcnQgdXNlTGFzdEFjdGl2aXR5IGZyb20gXCIuLi8uLi8uLi9ob29rcy91c2VMYXN0QWN0aXZpdHlcIjtcclxuaW1wb3J0IHsgaXNCb251c0xldmVsLCBnZXRMZXZlbENvbG9yLCBnZXRWb2NhYnVsYXJ5RGF0YSwgbG9hZFZvY2FidWxhcnlEYXRhIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3ZvY2FidWxhcnkvdm9jYWJ1bGFyeURhdGFIZWxwZXJcIjtcclxuaW1wb3J0IGNyZWF0ZVN0eWxlcyBmcm9tIFwiLi9zdHlsZVwiO1xyXG5cclxuY29uc3QgVm9jYWJ1bGFyeUV4ZXJjaXNlID0gKHsgcm91dGUgfSkgPT4ge1xyXG4gIGNvbnN0IHsgbGV2ZWwsIG1vZGUgfSA9IHJvdXRlLnBhcmFtcyB8fCB7fTtcclxuICBjb25zdCBuYXZpZ2F0aW9uID0gdXNlTmF2aWdhdGlvbigpO1xyXG4gIGNvbnN0IHN0eWxlcyA9IGNyZWF0ZVN0eWxlcygpO1xyXG4gIGNvbnN0IHsgc2F2ZUFjdGl2aXR5IH0gPSB1c2VMYXN0QWN0aXZpdHkoKTtcclxuXHJcbiAgLy8gRGF0YVxyXG4gIGNvbnN0IGZpbmFsTW9kZSA9IG1vZGUgfHwgKGlzQm9udXNMZXZlbChsZXZlbCkgPyBcImZhc3RcIiA6IFwiY2xhc3NpY1wiKTtcclxuICBjb25zdCBsZXZlbENvbG9yID0gZ2V0TGV2ZWxDb2xvcihsZXZlbCk7XHJcbiAgY29uc3QgW3ZvY2FidWxhcnlEYXRhLCBzZXRWb2NhYnVsYXJ5RGF0YV0gPSB1c2VTdGF0ZShudWxsKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlO1xyXG4gICAgY29uc3QgbG9hZCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGxvYWRWb2NhYnVsYXJ5RGF0YShsZXZlbCwgZmluYWxNb2RlKTtcclxuICAgICAgaWYgKGlzTW91bnRlZCkgc2V0Vm9jYWJ1bGFyeURhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgbG9hZCgpO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaXNNb3VudGVkID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH0sIFtsZXZlbCwgZmluYWxNb2RlXSk7XHJcblxyXG4gIC8vIEhvb2sgdW5pZmnDqVxyXG4gIGNvbnN0IHtcclxuICAgIGNhdGVnb3J5SW5kZXgsXHJcbiAgICB3b3JkSW5kZXgsXHJcbiAgICBzaG93VHJhbnNsYXRpb24sXHJcbiAgICBjb21wbGV0ZWRXb3JkcyxcclxuICAgIGxvYWRlZCxcclxuICAgIHNob3dEZXRhaWxlZFByb2dyZXNzLFxyXG4gICAgY3VycmVudFdvcmQsXHJcbiAgICBjdXJyZW50Q2F0ZWdvcnksXHJcbiAgICBjaGFuZ2VDYXRlZ29yeSxcclxuICAgIHRvZ2dsZVRyYW5zbGF0aW9uLFxyXG4gICAgdG9nZ2xlRGV0YWlsZWRQcm9ncmVzcyxcclxuICAgIGhhbmRsZU5leHQsXHJcbiAgICBoYW5kbGVQcmV2aW91cyxcclxuICAgIGNhbkdvVG9QcmV2aW91cyxcclxuICAgIGlzTGFzdFdvcmRJbkV4ZXJjaXNlLFxyXG4gICAgZGlzcGxheSxcclxuICAgIHNhdmVEYXRhLCAvLyBBam91dMOpIGljaVxyXG4gIH0gPSB1c2VWb2NhYnVsYXJ5KHZvY2FidWxhcnlEYXRhLCBsZXZlbCwgZmluYWxNb2RlKTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PSBTQVVWRUdBUkRFIEFDVElWSVTDiSBTSU1QTElGScOJRSA9PT09PT09PT09PT09PT09PT09XHJcbiAgXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIOKchSBDT05ESVRJT04gU0lNUExJRknDiUUgcG91ciDDqXZpdGVyIGJvdWNsZSBpbmZpbmllXHJcbiAgICBpZiAoIWxvYWRlZCB8fCAhdm9jYWJ1bGFyeURhdGEgfHwgIWN1cnJlbnRXb3JkKSByZXR1cm47XHJcblxyXG4gICAgLy8g4pyFIETDiVBFTkRBTkNFUyBMSU1JVMOJRVMgLSBzZXVsZW1lbnQgd29yZEluZGV4IGNoYW5nZVxyXG4gICAgbGV0IHRvdGFsV29yZHMgPSAxNTsgLy8gZmFsbGJhY2tcclxuICAgIFxyXG4gICAgaWYgKHZvY2FidWxhcnlEYXRhLmNhdGVnb3JpZXMgJiYgQXJyYXkuaXNBcnJheSh2b2NhYnVsYXJ5RGF0YS5jYXRlZ29yaWVzKSkge1xyXG4gICAgICB0b3RhbFdvcmRzID0gdm9jYWJ1bGFyeURhdGEuY2F0ZWdvcmllcy5yZWR1Y2UoKHRvdGFsLCBjYXQpID0+IHRvdGFsICsgKGNhdC53b3Jkcz8ubGVuZ3RoIHx8IDApLCAwKTtcclxuICAgIH0gZWxzZSBpZiAodm9jYWJ1bGFyeURhdGEuZXhlcmNpc2VzICYmIEFycmF5LmlzQXJyYXkodm9jYWJ1bGFyeURhdGEuZXhlcmNpc2VzKSkge1xyXG4gICAgICB0b3RhbFdvcmRzID0gdm9jYWJ1bGFyeURhdGEuZXhlcmNpc2VzLnJlZHVjZSgodG90YWwsIGV4KSA9PiB0b3RhbCArIChleC53b3Jkcz8ubGVuZ3RoIHx8IDApLCAwKTtcclxuICAgIH0gZWxzZSBpZiAodm9jYWJ1bGFyeURhdGEud29yZHMgJiYgQXJyYXkuaXNBcnJheSh2b2NhYnVsYXJ5RGF0YS53b3JkcykpIHtcclxuICAgICAgdG90YWxXb3JkcyA9IHZvY2FidWxhcnlEYXRhLndvcmRzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY3Rpdml0eURhdGEgPSB7XHJcbiAgICAgIHRpdGxlOiBgVm9jYWJ1bGFpcmUgJHtmaW5hbE1vZGUgPT09IFwiZmFzdFwiID8gXCJGYXN0XCIgOiBcIlwifWAsXHJcbiAgICAgIGxldmVsLFxyXG4gICAgICB0eXBlOiBcInZvY2FidWxhcnlcIixcclxuICAgICAgbW9kZTogZmluYWxNb2RlLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHdvcmQ6IHdvcmRJbmRleCwgLy8g4pyFIEluZGV4IHBvdXIgcHJvZ3Jlc3Npb24gKDAtYmFzZWQpXHJcbiAgICAgICAgdG90YWxXb3JkcyxcclxuICAgICAgICBjYXRlZ29yeTogY3VycmVudENhdGVnb3J5Py5uYW1lIHx8IFwiR8OpbsOpcmFsXCIsXHJcbiAgICAgICAgY2F0ZWdvcnlJbmRleCxcclxuICAgICAgICB3b3JkSW5kZXhcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBzYXZlQWN0aXZpdHkoYWN0aXZpdHlEYXRhKTtcclxuICB9LCBbd29yZEluZGV4XSk7IC8vIOKchSBTRVVMRU1FTlQgd29yZEluZGV4IC0gcGx1cyBkZSBib3VjbGUgIVxyXG5cclxuICAvLyBBcHBlbCBpbml0aWFsIHBvdXIgZW5yZWdpc3RyZXIgbCdhY3Rpdml0w6kgZMOocyBxdWUgbGVzIGRvbm7DqWVzIHNvbnQgcHLDqnRlc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWxvYWRlZCB8fCAhdm9jYWJ1bGFyeURhdGEgfHwgIWN1cnJlbnRXb3JkKSByZXR1cm47XHJcblxyXG4gICAgbGV0IHRvdGFsV29yZHMgPSAxNTtcclxuICAgIGlmICh2b2NhYnVsYXJ5RGF0YS5jYXRlZ29yaWVzICYmIEFycmF5LmlzQXJyYXkodm9jYWJ1bGFyeURhdGEuY2F0ZWdvcmllcykpIHtcclxuICAgICAgdG90YWxXb3JkcyA9IHZvY2FidWxhcnlEYXRhLmNhdGVnb3JpZXMucmVkdWNlKCh0b3RhbCwgY2F0KSA9PiB0b3RhbCArIChjYXQud29yZHM/Lmxlbmd0aCB8fCAwKSwgMCk7XHJcbiAgICB9IGVsc2UgaWYgKHZvY2FidWxhcnlEYXRhLmV4ZXJjaXNlcyAmJiBBcnJheS5pc0FycmF5KHZvY2FidWxhcnlEYXRhLmV4ZXJjaXNlcykpIHtcclxuICAgICAgdG90YWxXb3JkcyA9IHZvY2FidWxhcnlEYXRhLmV4ZXJjaXNlcy5yZWR1Y2UoKHRvdGFsLCBleCkgPT4gdG90YWwgKyAoZXgud29yZHM/Lmxlbmd0aCB8fCAwKSwgMCk7XHJcbiAgICB9IGVsc2UgaWYgKHZvY2FidWxhcnlEYXRhLndvcmRzICYmIEFycmF5LmlzQXJyYXkodm9jYWJ1bGFyeURhdGEud29yZHMpKSB7XHJcbiAgICAgIHRvdGFsV29yZHMgPSB2b2NhYnVsYXJ5RGF0YS53b3Jkcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWN0aXZpdHlEYXRhID0ge1xyXG4gICAgICB0aXRsZTogYFZvY2FidWxhaXJlICR7ZmluYWxNb2RlID09PSBcImZhc3RcIiA/IFwiRmFzdFwiIDogXCJcIn1gLFxyXG4gICAgICBsZXZlbCxcclxuICAgICAgdHlwZTogXCJ2b2NhYnVsYXJ5XCIsXHJcbiAgICAgIG1vZGU6IGZpbmFsTW9kZSxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICB3b3JkOiB3b3JkSW5kZXgsXHJcbiAgICAgICAgdG90YWxXb3JkcyxcclxuICAgICAgICBjYXRlZ29yeTogY3VycmVudENhdGVnb3J5Py5uYW1lIHx8IFwiR8OpbsOpcmFsXCIsXHJcbiAgICAgICAgY2F0ZWdvcnlJbmRleCxcclxuICAgICAgICB3b3JkSW5kZXgsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIHNhdmVBY3Rpdml0eShhY3Rpdml0eURhdGEpO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gIH0sIFtsb2FkZWQsIHZvY2FidWxhcnlEYXRhXSk7XHJcblxyXG4gIC8vIEhhbmRsZXJzXHJcbiAgY29uc3QgaGFuZGxlQmFja1ByZXNzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgcm91dGVyLnB1c2goe1xyXG4gICAgICBwYXRobmFtZTogXCIvdGFicy9leGVyY2lzZVNlbGVjdGlvblwiLFxyXG4gICAgICBwYXJhbXM6IHsgbGV2ZWwgfVxyXG4gICAgfSk7XHJcbiAgfSwgW2xldmVsXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUNhdGVnb3J5Q2hhbmdlID0gdXNlQ2FsbGJhY2soKGluZGV4KSA9PiBjaGFuZ2VDYXRlZ29yeShpbmRleCksIFtjaGFuZ2VDYXRlZ29yeV0pO1xyXG4gIGNvbnN0IGhhbmRsZUNhdGVnb3J5UHJvZ3Jlc3NQcmVzcyA9IHVzZUNhbGxiYWNrKChpbmRleCkgPT4gY2hhbmdlQ2F0ZWdvcnkoaW5kZXgpLCBbY2hhbmdlQ2F0ZWdvcnldKTtcclxuICBjb25zdCBoYW5kbGVUb2dnbGVQcm9ncmVzc0RldGFpbHMgPSB1c2VDYWxsYmFjaygoKSA9PiB0b2dnbGVEZXRhaWxlZFByb2dyZXNzKCksIFt0b2dnbGVEZXRhaWxlZFByb2dyZXNzXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZU5leHRXb3JkID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gaGFuZGxlTmV4dCgpO1xyXG4gICAgLy8gQXR0ZW5kcmUgbGEgc2F1dmVnYXJkZSBhdmFudCBkZSBuYXZpZ3VlclxyXG4gICAgaWYgKHR5cGVvZiBzYXZlRGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBhd2FpdCBzYXZlRGF0YSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlc3VsdC5jb21wbGV0ZWQpIHtcclxuICAgICAgbmF2aWdhdGlvbi5nb0JhY2soKTtcclxuICAgIH1cclxuICB9LCBbaGFuZGxlTmV4dCwgbmF2aWdhdGlvbiwgc2F2ZURhdGFdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUHJldmlvdXNXb3JkID0gdXNlQ2FsbGJhY2soKCkgPT4gaGFuZGxlUHJldmlvdXMoKSwgW2hhbmRsZVByZXZpb3VzXSk7XHJcblxyXG4gIC8vIExvYWRpbmcgc3RhdGVcclxuICBpZiAoIWxvYWRlZCB8fCAhdm9jYWJ1bGFyeURhdGEpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxDb250YWluZXJcclxuICAgICAgICBzYWZlQXJlYVxyXG4gICAgICAgIHNhZmVBcmVhRWRnZXM9e0NPTlRBSU5FUl9TQUZFX0VER0VTLkFMTH1cclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCIjZjhmYWZjXCJcclxuICAgICAgICBzdGF0dXNCYXJTdHlsZT1cImRhcmstY29udGVudFwiXHJcbiAgICAgID5cclxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmxvYWRpbmdDb250YWluZXJ9PlxyXG4gICAgICAgICAgPEFjdGl2aXR5SW5kaWNhdG9yIHRlc3RJRD1cImFjdGl2aXR5LWluZGljYXRvclwiIHNpemU9XCJsYXJnZVwiIGNvbG9yPXtsZXZlbENvbG9yfSAvPlxyXG4gICAgICAgIDwvVmlldz5cclxuICAgICAgPC9Db250YWluZXI+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxDb250YWluZXJcclxuICAgICAgc2FmZUFyZWFcclxuICAgICAgc2FmZUFyZWFFZGdlcz17Q09OVEFJTkVSX1NBRkVfRURHRVMuQUxMfVxyXG4gICAgICB3aXRoU2Nyb2xsVmlld1xyXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I9XCIjZjhmYWZjXCJcclxuICAgICAgc3RhdHVzQmFyU3R5bGU9XCJkYXJrLWNvbnRlbnRcIlxyXG4gICAgICB3aXRoUGFkZGluZz17ZmFsc2V9XHJcbiAgICAgIHNjcm9sbFZpZXdQcm9wcz17e1xyXG4gICAgICAgIHNob3dzVmVydGljYWxTY3JvbGxJbmRpY2F0b3I6IGZhbHNlLFxyXG4gICAgICAgIGNvbnRlbnRDb250YWluZXJTdHlsZTogc3R5bGVzLnNjcm9sbENvbnRlbnQsXHJcbiAgICAgIH19XHJcbiAgICA+XHJcbiAgICAgIDxWb2NhYnVsYXJ5SGVhZGVyXHJcbiAgICAgICAgbGV2ZWw9e2xldmVsfVxyXG4gICAgICAgIG1vZGU9e2ZpbmFsTW9kZX1cclxuICAgICAgICBvbkJhY2tQcmVzcz17aGFuZGxlQmFja1ByZXNzfVxyXG4gICAgICAvPlxyXG5cclxuICAgICAgPFZvY2FidWxhcnlQcm9ncmVzc1xyXG4gICAgICAgIHZvY2FidWxhcnlEYXRhPXt2b2NhYnVsYXJ5RGF0YX1cclxuICAgICAgICBjb21wbGV0ZWRXb3Jkcz17Y29tcGxldGVkV29yZHN9XHJcbiAgICAgICAgbGV2ZWxDb2xvcj17bGV2ZWxDb2xvcn1cclxuICAgICAgICBleHBhbmRlZD17c2hvd0RldGFpbGVkUHJvZ3Jlc3N9XHJcbiAgICAgICAgb25Ub2dnbGVFeHBhbmQ9e2hhbmRsZVRvZ2dsZVByb2dyZXNzRGV0YWlsc31cclxuICAgICAgICBvbkNhdGVnb3J5UHJlc3M9e2hhbmRsZUNhdGVnb3J5UHJvZ3Jlc3NQcmVzc31cclxuICAgICAgLz5cclxuXHJcbiAgICAgIDxWb2NhYnVsYXJ5Q2F0ZWdvcnlTZWxlY3RvclxyXG4gICAgICAgIGNhdGVnb3JpZXM9e2Rpc3BsYXkuY2F0ZWdvcmllc31cclxuICAgICAgICBzZWxlY3RlZEluZGV4PXtjYXRlZ29yeUluZGV4fVxyXG4gICAgICAgIG9uU2VsZWN0Q2F0ZWdvcnk9e2hhbmRsZUNhdGVnb3J5Q2hhbmdlfVxyXG4gICAgICAgIGxldmVsQ29sb3I9e2xldmVsQ29sb3J9XHJcbiAgICAgIC8+XHJcblxyXG4gICAgICA8Vm9jYWJ1bGFyeVdvcmRTZWN0aW9uXHJcbiAgICAgICAgY3VycmVudFdvcmQ9e2N1cnJlbnRXb3JkfVxyXG4gICAgICAgIHdvcmRDb3VudGVyPXtkaXNwbGF5LndvcmRDb3VudGVyfVxyXG4gICAgICAgIG1vZGU9e2ZpbmFsTW9kZX1cclxuICAgICAgICBsZXZlbD17bGV2ZWx9XHJcbiAgICAgICAgbGV2ZWxDb2xvcj17bGV2ZWxDb2xvcn1cclxuICAgICAgICBzaG93VHJhbnNsYXRpb249e3Nob3dUcmFuc2xhdGlvbn1cclxuICAgICAgICBvblRvZ2dsZVRyYW5zbGF0aW9uPXt0b2dnbGVUcmFuc2xhdGlvbn1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIDxWb2NhYnVsYXJ5TmF2aWdhdGlvblxyXG4gICAgICAgIG9uTmV4dD17aGFuZGxlTmV4dFdvcmR9XHJcbiAgICAgICAgb25QcmV2aW91cz17aGFuZGxlUHJldmlvdXNXb3JkfVxyXG4gICAgICAgIGNhbkdvUHJldmlvdXM9e2NhbkdvVG9QcmV2aW91c31cclxuICAgICAgICBpc0xhc3Q9e2lzTGFzdFdvcmRJbkV4ZXJjaXNlfVxyXG4gICAgICAgIGxldmVsQ29sb3I9e2xldmVsQ29sb3J9XHJcbiAgICAgIC8+XHJcbiAgICA8L0NvbnRhaW5lcj5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVm9jYWJ1bGFyeUV4ZXJjaXNlO1xyXG5cclxuLy8g4pyFIEFqb3V0IGRlIGxhIHZhbGlkYXRpb24gZGVzIHByb3BzXHJcblZvY2FidWxhcnlFeGVyY2lzZS5wcm9wVHlwZXMgPSB7XHJcbiAgcm91dGU6IFByb3BUeXBlcy5zaGFwZSh7XHJcbiAgICBwYXJhbXM6IFByb3BUeXBlcy5zaGFwZSh7XHJcbiAgICAgIGxldmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICBtb2RlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgfSksXHJcbiAgfSkuaXNSZXF1aXJlZCxcclxufTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxJQUFBQSxZQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxXQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFILE9B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