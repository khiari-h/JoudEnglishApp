{"version":3,"names":["_getJestObj","mock","getItem","jest","fn","getVocabularyData","_interopRequireDefault","require","_asyncToGenerator2","_reactNative","_asyncStorage","_useRevisionData","_require2","describe","mockOriginalData","exercises","words","word","translation","definition","beforeEach","clearAllMocks","_require","mockReturnValue","it","AsyncStorage","mockResolvedValue","_renderHook","renderHook","useRevisionData","result","expect","current","isLoading","toBe","allLearnedWords","toEqual","revisionQuestions","error","toBeNull","_renderHook2","default","mockStorageData","completedWords","wordIndex","timestamp","mockImplementation","key","Promise","resolve","JSON","stringify","_renderHook3","waitFor","length","toBeGreaterThan","_renderHook4","stats","toBeDefined","hasEnoughWords","canGenerateQuestions"],"sources":["useRevisionData.test.js"],"sourcesContent":["// __tests__/hooks/useRevisionData.test.js\nimport { renderHook, waitFor } from '@testing-library/react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport useRevisionData from '../../src/hooks/useRevisionData';\n\njest.mock('@react-native-async-storage/async-storage', () => ({\n  getItem: jest.fn(),\n}));\n\njest.mock('../../src/utils/vocabulary/vocabularyDataHelper', () => ({\n  getVocabularyData: jest.fn()\n}));\n\ndescribe('useRevisionData', () => {\n  const mockOriginalData = {\n    exercises: [\n      {\n        words: [\n          { word: 'hello', translation: 'bonjour', definition: 'greeting' },\n          { word: 'goodbye', translation: 'au revoir', definition: 'farewell' }\n        ]\n      }\n    ]\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    const { getVocabularyData } = require('../../src/utils/vocabulary/vocabularyDataHelper');\n    getVocabularyData.mockReturnValue(mockOriginalData);\n  });\n\n  it('devrait initialiser avec les bonnes valeurs', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionData());\n\n    expect(result.current.isLoading).toBe(true);\n    expect(result.current.allLearnedWords).toEqual([]);\n    expect(result.current.revisionQuestions).toEqual([]);\n    expect(result.current.error).toBeNull();\n  });\n\n  it('devrait accepter des paramètres personnalisés', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionData('2', 15));\n\n    expect(result.current.isLoading).toBe(true);\n  });\n\n  it('devrait récupérer les mots appris', async () => {\n    const mockStorageData = {\n      completedWords: {\n        '0': [\n          { wordIndex: 0, timestamp: 1640995200000 },\n          { wordIndex: 1, timestamp: 1640995300000 }\n        ]\n      }\n    };\n\n    AsyncStorage.getItem.mockImplementation((key) => {\n      if (key === 'vocabulary_1_classic') {\n        return Promise.resolve(JSON.stringify(mockStorageData));\n      }\n      return Promise.resolve(null);\n    });\n\n    const { result } = renderHook(() => useRevisionData('1'));\n\n    await waitFor(() => {\n      expect(result.current.allLearnedWords.length).toBeGreaterThan(0);\n      expect(result.current.isLoading).toBe(false);\n    });\n  });\n\n  it('devrait avoir les propriétés utilitaires', () => {\n    AsyncStorage.getItem.mockResolvedValue(null);\n    const { result } = renderHook(() => useRevisionData());\n\n    expect(result.current.stats).toBeDefined();\n    expect(typeof result.current.hasEnoughWords).toBe('boolean');\n    expect(typeof result.current.canGenerateQuestions).toBe('boolean');\n  });\n});"],"mappings":"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","ignoreList":[]}