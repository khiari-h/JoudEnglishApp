{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","AnimatedScoreCard","_ref","score","totalQuestions","percentage","resultConfig","colors","localStyles","progressAnim","useRef","Animated","Value","current","scoreAnim","_useState","useState","_useState2","_slicedToArray2","displayedScore","setDisplayedScore","useEffect","parallel","timing","toValue","duration","delay","useNativeDriver","start","scoreListenerId","addListener","_ref2","value","Math","floor","removeListener","progressWidth","interpolate","inputRange","outputRange","jsxs","View","style","scoreCard","backgroundColor","surface","children","scoreRow","jsx","Text","scoreNumber","color","scoreSlash","textSecondary","progressBar","progressFill","width","percentageText","ResultButtons","_ref3","handleRestartPress","handleFinishPress","buttonsContainer","TouchableOpacity","restartButton","onPress","activeOpacity","buttonContent","restartIcon","restartText","text","finishButton","finishIcon","finishText","ResultScreen","_ref4","source","handleRestart","handleFinish","round","emoji","title","message","resultContainer","resultEmoji","resultTitle","resultMessage","sourceText","_default","exports"],"sources":["ResultScreen.js"],"sourcesContent":["// src/screens/VocabularyRevision/components/ResultScreen.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, Animated } from 'react-native';\r\n\r\nconst AnimatedScoreCard = ({ score, totalQuestions, percentage, resultConfig, colors, localStyles }) => {\r\n  const progressAnim = useRef(new Animated.Value(0)).current;\r\n  const scoreAnim = useRef(new Animated.Value(0)).current;\r\n  const [displayedScore, setDisplayedScore] = useState(0);\r\n\r\n  useEffect(() => {\r\n    // Animate the progress bar and the score number simultaneously\r\n    Animated.parallel([\r\n      Animated.timing(progressAnim, {\r\n        toValue: percentage,\r\n        duration: 800,\r\n        delay: 300, // Start animation after a short delay for better effect\r\n        useNativeDriver: false, // 'width' is not supported by the native driver\r\n      }),\r\n      Animated.timing(scoreAnim, {\r\n        toValue: score,\r\n        duration: 800,\r\n        delay: 300,\r\n        useNativeDriver: true, // Safe for listeners\r\n      })\r\n    ]).start();\r\n\r\n    // Listener to update the score text as the animation runs\r\n    const scoreListenerId = scoreAnim.addListener(({ value }) => {\r\n      setDisplayedScore(Math.floor(value));\r\n    });\r\n\r\n    return () => {\r\n      // Cleanup listener on component unmount\r\n      scoreAnim.removeListener(scoreListenerId);\r\n    };\r\n  }, [score, percentage]);\r\n\r\n  const progressWidth = progressAnim.interpolate({\r\n    inputRange: [0, 100],\r\n    outputRange: ['0%', '100%'],\r\n  });\r\n\r\n  return (\r\n    <View style={[localStyles.scoreCard, { backgroundColor: colors.surface }]}>\r\n      <View style={localStyles.scoreRow}>\r\n        <Text style={[localStyles.scoreNumber, { color: resultConfig.color }]}>\r\n          {displayedScore}\r\n        </Text>\r\n        <Text style={[localStyles.scoreSlash, { color: colors.textSecondary }]}>/{totalQuestions}</Text>\r\n      </View>\r\n      <View style={[localStyles.progressBar, { backgroundColor: '#F3F4F6' }]}>\r\n        <Animated.View\r\n          style={[localStyles.progressFill, { backgroundColor: resultConfig.color, width: progressWidth }]}\r\n        />\r\n      </View>\r\n      <Text style={[localStyles.percentageText, { color: resultConfig.color }]}> {percentage}% de r√©ussite </Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst ResultButtons = ({ colors, resultConfig, handleRestartPress, handleFinishPress, localStyles }) => (\r\n  <View style={localStyles.buttonsContainer}>\r\n    <TouchableOpacity\r\n      style={[localStyles.restartButton, { backgroundColor: colors.surface }]}\r\n      onPress={handleRestartPress}\r\n      activeOpacity={0.8}\r\n    >\r\n      <View style={localStyles.buttonContent}>\r\n        <Text style={localStyles.restartIcon}>üîÑ</Text>\r\n        <Text style={[localStyles.restartText, { color: colors.text }]}>Rejouer</Text>\r\n      </View>\r\n    </TouchableOpacity>\r\n    <TouchableOpacity\r\n      style={[localStyles.finishButton, { backgroundColor: resultConfig.color }]}\r\n      onPress={handleFinishPress}\r\n      activeOpacity={0.8}\r\n    >\r\n      <View style={localStyles.buttonContent}>\r\n        <Text style={localStyles.finishIcon}>‚úì</Text>\r\n        <Text style={localStyles.finishText}>Terminer</Text>\r\n      </View>\r\n    </TouchableOpacity>\r\n  </View>\r\n);\r\n\r\nconst ResultScreen = ({ score, totalQuestions, source, handleRestart, handleFinish, localStyles, colors }) => {\r\n  const percentage = totalQuestions > 0 ? Math.round((score / totalQuestions) * 100) : 0;\r\n\r\n  let resultConfig;\r\n  if (percentage >= 80) {\r\n    resultConfig = { emoji: \"üéâ\", title: \"Excellent !\", message: \"Vous ma√Ætrisez parfaitement ces mots !\", color: \"#10B981\" };\r\n  } else if (percentage >= 60) {\r\n    resultConfig = { emoji: \"üëç\", title: \"Bien jou√© !\", message: \"Bonne progression, continuez !\", color: \"#3B82F6\" };\r\n  } else {\r\n    resultConfig = { emoji: \"üìñ\", title: \"√Ä am√©liorer\", message: \"R√©visez encore ces mots pour progresser\", color: \"#F59E0B\" };\r\n  }\r\n\r\n  return (\r\n    <View style={localStyles.resultContainer}>\r\n      <Text style={localStyles.resultEmoji}>{resultConfig.emoji}</Text>\r\n      <Text style={[localStyles.resultTitle, { color: colors.text }]}>{resultConfig.title}</Text>\r\n      <Text style={[localStyles.resultMessage, { color: colors.textSecondary }]}>{resultConfig.message}</Text>\r\n      <AnimatedScoreCard\r\n        score={score}\r\n        totalQuestions={totalQuestions}\r\n        percentage={percentage}\r\n        resultConfig={resultConfig}\r\n        colors={colors}\r\n        localStyles={localStyles}\r\n      />\r\n      {source && (\r\n        <Text style={[localStyles.sourceText, { color: colors.textSecondary }]}>\r\n          {source === 'popup_trigger' ? 'ü§ñ R√©vision automatique' : 'üë§ R√©vision manuelle'}\r\n        </Text>\r\n      )}\r\n      <ResultButtons\r\n        colors={colors}\r\n        resultConfig={resultConfig}\r\n        handleRestartPress={handleRestart}\r\n        handleFinishPress={handleFinish}\r\n        localStyles={localStyles}\r\n      />\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default ResultScreen;"],"mappings":"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","ignoreList":[]}