f9abc7eeac3538e07b089cf61b8ec799
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _reactNative = require("react-native");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var useReading = function useReading() {
  var _currentExercise$ques, _currentExercise$ques2, _completedQuestions$s2;
  var exercises = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "A1";
  var _useState = (0, _react.useState)(0),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    selectedExerciseIndex = _useState2[0],
    setSelectedExerciseIndex = _useState2[1];
  var _useState3 = (0, _react.useState)(0),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    currentQuestionIndex = _useState4[0],
    setCurrentQuestionIndex = _useState4[1];
  var _useState5 = (0, _react.useState)(null),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    selectedAnswer = _useState6[0],
    setSelectedAnswer = _useState6[1];
  var _useState7 = (0, _react.useState)(false),
    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),
    showFeedback = _useState8[0],
    setShowFeedback = _useState8[1];
  var _useState9 = (0, _react.useState)(true),
    _useState0 = (0, _slicedToArray2.default)(_useState9, 2),
    textExpanded = _useState0[0],
    setTextExpanded = _useState0[1];
  var _useState1 = (0, _react.useState)(0),
    _useState10 = (0, _slicedToArray2.default)(_useState1, 2),
    attempts = _useState10[0],
    setAttempts = _useState10[1];
  var _useState11 = (0, _react.useState)({}),
    _useState12 = (0, _slicedToArray2.default)(_useState11, 2),
    completedQuestions = _useState12[0],
    setCompletedQuestions = _useState12[1];
  var _useState13 = (0, _react.useState)(false),
    _useState14 = (0, _slicedToArray2.default)(_useState13, 2),
    loaded = _useState14[0],
    setLoaded = _useState14[1];
  var _useState15 = (0, _react.useState)(false),
    _useState16 = (0, _slicedToArray2.default)(_useState15, 2),
    showDetailedProgress = _useState16[0],
    setShowDetailedProgress = _useState16[1];
  var _useState17 = (0, _react.useState)(false),
    _useState18 = (0, _slicedToArray2.default)(_useState17, 2),
    isCorrect = _useState18[0],
    setIsCorrect = _useState18[1];
  var scrollViewRef = (0, _react.useRef)(null);
  var textsScrollViewRef = (0, _react.useRef)(null);
  var fadeAnim = (0, _react.useRef)(new _reactNative.Animated.Value(1)).current;
  var slideAnim = (0, _react.useRef)(new _reactNative.Animated.Value(0)).current;
  var isInitialized = (0, _react.useRef)(false);
  var currentExercise = exercises[selectedExerciseIndex] || {
    title: "",
    text: "",
    questions: []
  };
  var currentQuestion = ((_currentExercise$ques = currentExercise.questions) == null ? void 0 : _currentExercise$ques[currentQuestionIndex]) || null;
  var totalExercises = exercises.length;
  var totalQuestions = ((_currentExercise$ques2 = currentExercise.questions) == null ? void 0 : _currentExercise$ques2.length) || 0;
  var STORAGE_KEY = `reading_progress_${level}`;
  var loadProgress = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      var storedProgress = yield _asyncStorage.default.getItem(STORAGE_KEY);
      if (storedProgress) {
        setCompletedQuestions(JSON.parse(storedProgress));
      }
    } catch (error) {
      console.error('Erreur lors du chargement de la progression de lecture:', error);
    } finally {
      setLoaded(true);
    }
  }), [STORAGE_KEY]);
  var saveProgress = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      yield _asyncStorage.default.setItem(STORAGE_KEY, JSON.stringify(completedQuestions));
    } catch (error) {
      console.error('Erreur lors de la sauvegarde de la progression de lecture:', error);
    }
  }), [completedQuestions, STORAGE_KEY]);
  (0, _react.useEffect)(function () {
    loadProgress();
  }, [loadProgress]);
  (0, _react.useEffect)(function () {
    if (loaded) {
      saveProgress();
    }
  }, [completedQuestions, loaded, saveProgress]);
  (0, _react.useEffect)(function () {
    setShowFeedback(false);
    setSelectedAnswer(null);
    setAttempts(0);
    setTextExpanded(true);
    if (currentQuestionIndex === 0 && selectedExerciseIndex === 0 && !isInitialized.current) {
      isInitialized.current = true;
    } else {
      var _scrollViewRef$curren, _textsScrollViewRef$c;
      (_scrollViewRef$curren = scrollViewRef.current) == null || _scrollViewRef$curren.scrollTo({
        y: 0,
        animated: true
      });
      (_textsScrollViewRef$c = textsScrollViewRef.current) == null || _textsScrollViewRef$c.scrollTo({
        y: 0,
        animated: true
      });
    }
  }, [currentQuestionIndex, selectedExerciseIndex]);
  var changeExercise = (0, _react.useCallback)(function (index) {
    if (index >= 0 && index < totalExercises) {
      setSelectedExerciseIndex(index);
      setCurrentQuestionIndex(0);
    }
  }, [totalExercises]);
  var changeQuestion = (0, _react.useCallback)(function (index) {
    if (index >= 0 && index < totalQuestions) {
      setCurrentQuestionIndex(index);
    }
  }, [totalQuestions]);
  var selectAnswer = (0, _react.useCallback)(function (answer) {
    if (!showFeedback) {
      setSelectedAnswer(answer);
    }
  }, [showFeedback]);
  var submitAnswer = (0, _react.useCallback)(function () {
    if (!currentQuestion || selectedAnswer === null) {
      _reactNative.Alert.alert("Sélection requise", "Veuillez sélectionner une réponse.");
      return;
    }
    var isCurrentAnswerCorrect = selectedAnswer === currentQuestion.correctAnswer;
    setIsCorrect(isCurrentAnswerCorrect);
    setShowFeedback(true);
    setAttempts(function (prev) {
      return prev + 1;
    });
    if (isCurrentAnswerCorrect) {
      setCompletedQuestions(function (prev) {
        var newCompleted = Object.assign({}, prev);
        if (!newCompleted[selectedExerciseIndex]) {
          newCompleted[selectedExerciseIndex] = [];
        }
        if (!newCompleted[selectedExerciseIndex].includes(currentQuestionIndex)) {
          newCompleted[selectedExerciseIndex].push(currentQuestionIndex);
        }
        return newCompleted;
      });
    } else {}
  }, [currentQuestion, selectedAnswer, selectedExerciseIndex, currentQuestionIndex]);
  var nextQuestion = (0, _react.useCallback)(function () {
    if (currentQuestionIndex < totalQuestions - 1) {
      changeQuestion(currentQuestionIndex + 1);
      return;
    }
    if (selectedExerciseIndex < totalExercises - 1) {
      changeExercise(selectedExerciseIndex + 1);
      return;
    }
    _reactNative.Alert.alert("Exercice terminé", "Vous avez terminé tous les exercices de lecture pour ce niveau !");
  }, [currentQuestionIndex, totalQuestions, changeQuestion, selectedExerciseIndex, totalExercises, changeExercise]);
  var previousQuestion = (0, _react.useCallback)(function () {
    if (currentQuestionIndex > 0) {
      changeQuestion(currentQuestionIndex - 1);
    } else if (selectedExerciseIndex > 0) {
      var prevExercise = exercises[selectedExerciseIndex - 1];
      if (prevExercise) {
        setSelectedExerciseIndex(selectedExerciseIndex - 1);
        setCurrentQuestionIndex(prevExercise.questions.length - 1);
      }
    }
  }, [currentQuestionIndex, changeQuestion, selectedExerciseIndex, exercises]);
  var retryQuestion = (0, _react.useCallback)(function () {
    setShowFeedback(false);
    setSelectedAnswer(null);
    setAttempts(0);
  }, []);
  var toggleTextExpansion = (0, _react.useCallback)(function () {
    setTextExpanded(function (prev) {
      return !prev;
    });
  }, []);
  var toggleDetailedProgress = (0, _react.useCallback)(function () {
    setShowDetailedProgress(function (prev) {
      return !prev;
    });
  }, []);
  var getProgress = (0, _react.useCallback)(function () {
    var _completedQuestions$s;
    var totalCompletedQuestions = Object.values(completedQuestions).reduce(function (sum, completed) {
      return sum + ((completed == null ? void 0 : completed.length) || 0);
    }, 0);
    var totalQuestionsAllExercises = exercises.reduce(function (sum, ex) {
      var _ex$questions;
      return sum + (((_ex$questions = ex.questions) == null ? void 0 : _ex$questions.length) || 0);
    }, 0);
    var completedInCurrentExercise = ((_completedQuestions$s = completedQuestions[selectedExerciseIndex]) == null ? void 0 : _completedQuestions$s.length) || 0;
    var progressPercent = totalQuestions > 0 ? completedInCurrentExercise / totalQuestions * 100 : 0;
    var overallProgress = totalQuestionsAllExercises > 0 ? totalCompletedQuestions / totalQuestionsAllExercises * 100 : 0;
    return {
      currentExercise: progressPercent,
      overall: overallProgress,
      completedInCurrent: completedInCurrentExercise,
      totalInCurrent: totalQuestions,
      completedOverall: totalCompletedQuestions,
      totalOverall: totalQuestionsAllExercises
    };
  }, [completedQuestions, selectedExerciseIndex, totalQuestions, exercises]);
  var isQuestionCompleted = ((_completedQuestions$s2 = completedQuestions[selectedExerciseIndex]) == null ? void 0 : _completedQuestions$s2.includes(currentQuestionIndex)) || false;
  return {
    selectedExerciseIndex: selectedExerciseIndex,
    currentQuestionIndex: currentQuestionIndex,
    selectedAnswer: selectedAnswer,
    showFeedback: showFeedback,
    textExpanded: textExpanded,
    attempts: attempts,
    completedQuestions: completedQuestions,
    loaded: loaded,
    showDetailedProgress: showDetailedProgress,
    currentExercise: currentExercise,
    currentQuestion: currentQuestion,
    totalExercises: totalExercises,
    totalQuestions: totalQuestions,
    changeExercise: changeExercise,
    changeQuestion: changeQuestion,
    selectAnswer: selectAnswer,
    submitAnswer: submitAnswer,
    nextQuestion: nextQuestion,
    previousQuestion: previousQuestion,
    retryQuestion: retryQuestion,
    toggleTextExpansion: toggleTextExpansion,
    toggleDetailedProgress: toggleDetailedProgress,
    isCorrect: isCorrect,
    isQuestionCompleted: isQuestionCompleted,
    progress: getProgress(),
    scrollViewRef: scrollViewRef,
    textsScrollViewRef: textsScrollViewRef,
    fadeAnim: fadeAnim,
    slideAnim: slideAnim
  };
};
var _default = exports.default = useReading;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3JlYWN0TmF0aXZlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJ1c2VSZWFkaW5nIiwiX2N1cnJlbnRFeGVyY2lzZSRxdWVzIiwiX2N1cnJlbnRFeGVyY2lzZSRxdWVzMiIsIl9jb21wbGV0ZWRRdWVzdGlvbnMkczIiLCJleGVyY2lzZXMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJsZXZlbCIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJzZWxlY3RlZEV4ZXJjaXNlSW5kZXgiLCJzZXRTZWxlY3RlZEV4ZXJjaXNlSW5kZXgiLCJfdXNlU3RhdGUzIiwiX3VzZVN0YXRlNCIsImN1cnJlbnRRdWVzdGlvbkluZGV4Iiwic2V0Q3VycmVudFF1ZXN0aW9uSW5kZXgiLCJfdXNlU3RhdGU1IiwiX3VzZVN0YXRlNiIsInNlbGVjdGVkQW5zd2VyIiwic2V0U2VsZWN0ZWRBbnN3ZXIiLCJfdXNlU3RhdGU3IiwiX3VzZVN0YXRlOCIsInNob3dGZWVkYmFjayIsInNldFNob3dGZWVkYmFjayIsIl91c2VTdGF0ZTkiLCJfdXNlU3RhdGUwIiwidGV4dEV4cGFuZGVkIiwic2V0VGV4dEV4cGFuZGVkIiwiX3VzZVN0YXRlMSIsIl91c2VTdGF0ZTEwIiwiYXR0ZW1wdHMiLCJzZXRBdHRlbXB0cyIsIl91c2VTdGF0ZTExIiwiX3VzZVN0YXRlMTIiLCJjb21wbGV0ZWRRdWVzdGlvbnMiLCJzZXRDb21wbGV0ZWRRdWVzdGlvbnMiLCJfdXNlU3RhdGUxMyIsIl91c2VTdGF0ZTE0IiwibG9hZGVkIiwic2V0TG9hZGVkIiwiX3VzZVN0YXRlMTUiLCJfdXNlU3RhdGUxNiIsInNob3dEZXRhaWxlZFByb2dyZXNzIiwic2V0U2hvd0RldGFpbGVkUHJvZ3Jlc3MiLCJfdXNlU3RhdGUxNyIsIl91c2VTdGF0ZTE4IiwiaXNDb3JyZWN0Iiwic2V0SXNDb3JyZWN0Iiwic2Nyb2xsVmlld1JlZiIsInVzZVJlZiIsInRleHRzU2Nyb2xsVmlld1JlZiIsImZhZGVBbmltIiwiQW5pbWF0ZWQiLCJWYWx1ZSIsImN1cnJlbnQiLCJzbGlkZUFuaW0iLCJpc0luaXRpYWxpemVkIiwiY3VycmVudEV4ZXJjaXNlIiwidGl0bGUiLCJ0ZXh0IiwicXVlc3Rpb25zIiwiY3VycmVudFF1ZXN0aW9uIiwidG90YWxFeGVyY2lzZXMiLCJ0b3RhbFF1ZXN0aW9ucyIsIlNUT1JBR0VfS0VZIiwibG9hZFByb2dyZXNzIiwidXNlQ2FsbGJhY2siLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJzdG9yZWRQcm9ncmVzcyIsIkFzeW5jU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJlcnJvciIsImNvbnNvbGUiLCJzYXZlUHJvZ3Jlc3MiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidXNlRWZmZWN0IiwiX3Njcm9sbFZpZXdSZWYkY3VycmVuIiwiX3RleHRzU2Nyb2xsVmlld1JlZiRjIiwic2Nyb2xsVG8iLCJ5IiwiYW5pbWF0ZWQiLCJjaGFuZ2VFeGVyY2lzZSIsImluZGV4IiwiY2hhbmdlUXVlc3Rpb24iLCJzZWxlY3RBbnN3ZXIiLCJhbnN3ZXIiLCJzdWJtaXRBbnN3ZXIiLCJBbGVydCIsImFsZXJ0IiwiaXNDdXJyZW50QW5zd2VyQ29ycmVjdCIsImNvcnJlY3RBbnN3ZXIiLCJwcmV2IiwibmV3Q29tcGxldGVkIiwiT2JqZWN0IiwiYXNzaWduIiwiaW5jbHVkZXMiLCJwdXNoIiwibmV4dFF1ZXN0aW9uIiwicHJldmlvdXNRdWVzdGlvbiIsInByZXZFeGVyY2lzZSIsInJldHJ5UXVlc3Rpb24iLCJ0b2dnbGVUZXh0RXhwYW5zaW9uIiwidG9nZ2xlRGV0YWlsZWRQcm9ncmVzcyIsImdldFByb2dyZXNzIiwiX2NvbXBsZXRlZFF1ZXN0aW9ucyRzIiwidG90YWxDb21wbGV0ZWRRdWVzdGlvbnMiLCJ2YWx1ZXMiLCJyZWR1Y2UiLCJzdW0iLCJjb21wbGV0ZWQiLCJ0b3RhbFF1ZXN0aW9uc0FsbEV4ZXJjaXNlcyIsImV4IiwiX2V4JHF1ZXN0aW9ucyIsImNvbXBsZXRlZEluQ3VycmVudEV4ZXJjaXNlIiwicHJvZ3Jlc3NQZXJjZW50Iiwib3ZlcmFsbFByb2dyZXNzIiwib3ZlcmFsbCIsImNvbXBsZXRlZEluQ3VycmVudCIsInRvdGFsSW5DdXJyZW50IiwiY29tcGxldGVkT3ZlcmFsbCIsInRvdGFsT3ZlcmFsbCIsImlzUXVlc3Rpb25Db21wbGV0ZWQiLCJwcm9ncmVzcyIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVzZVJlYWRpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaG9va3MvdXNlUmVhZGluZy5qcyAtIEJPVUNMRVMgSU5GSU5JRVMgQ09SUklHw4lFUyBFVCBDQVRDSCBCTE9DS1MgQ09SUklHw4lTXG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBBbmltYXRlZCwgQWxlcnQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IEFzeW5jU3RvcmFnZSBmcm9tICdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZSc7XG5cbmNvbnN0IHVzZVJlYWRpbmcgPSAoZXhlcmNpc2VzID0gW10sIGxldmVsID0gXCJBMVwiKSA9PiB7XG5cbiAgY29uc3QgW3NlbGVjdGVkRXhlcmNpc2VJbmRleCwgc2V0U2VsZWN0ZWRFeGVyY2lzZUluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbY3VycmVudFF1ZXN0aW9uSW5kZXgsIHNldEN1cnJlbnRRdWVzdGlvbkluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbc2VsZWN0ZWRBbnN3ZXIsIHNldFNlbGVjdGVkQW5zd2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbc2hvd0ZlZWRiYWNrLCBzZXRTaG93RmVlZGJhY2tdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdGV4dEV4cGFuZGVkLCBzZXRUZXh0RXhwYW5kZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFthdHRlbXB0cywgc2V0QXR0ZW1wdHNdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtjb21wbGV0ZWRRdWVzdGlvbnMsIHNldENvbXBsZXRlZFF1ZXN0aW9uc10gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtsb2FkZWQsIHNldExvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93RGV0YWlsZWRQcm9ncmVzcywgc2V0U2hvd0RldGFpbGVkUHJvZ3Jlc3NdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNDb3JyZWN0LCBzZXRJc0NvcnJlY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gUkVGUyAmIEFOSU1BVElPTlMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBzY3JvbGxWaWV3UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCB0ZXh0c1Njcm9sbFZpZXdSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGZhZGVBbmltID0gdXNlUmVmKG5ldyBBbmltYXRlZC5WYWx1ZSgxKSkuY3VycmVudDtcbiAgY29uc3Qgc2xpZGVBbmltID0gdXNlUmVmKG5ldyBBbmltYXRlZC5WYWx1ZSgwKSkuY3VycmVudDtcbiAgY29uc3QgaXNJbml0aWFsaXplZCA9IHVzZVJlZihmYWxzZSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PSBDT01QVVRFRCBWQUxVRVMgPT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBjdXJyZW50RXhlcmNpc2UgPSBleGVyY2lzZXNbc2VsZWN0ZWRFeGVyY2lzZUluZGV4XSB8fCB7IHRpdGxlOiBcIlwiLCB0ZXh0OiBcIlwiLCBxdWVzdGlvbnM6IFtdIH07XG4gIGNvbnN0IGN1cnJlbnRRdWVzdGlvbiA9IGN1cnJlbnRFeGVyY2lzZS5xdWVzdGlvbnM/LltjdXJyZW50UXVlc3Rpb25JbmRleF0gfHwgbnVsbDtcbiAgY29uc3QgdG90YWxFeGVyY2lzZXMgPSBleGVyY2lzZXMubGVuZ3RoO1xuICBjb25zdCB0b3RhbFF1ZXN0aW9ucyA9IGN1cnJlbnRFeGVyY2lzZS5xdWVzdGlvbnM/Lmxlbmd0aCB8fCAwO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gQVNZTkMgU1RPUkFHRSA9PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IFNUT1JBR0VfS0VZID0gYHJlYWRpbmdfcHJvZ3Jlc3NfJHtsZXZlbH1gO1xuXG4gIGNvbnN0IGxvYWRQcm9ncmVzcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RvcmVkUHJvZ3Jlc3MgPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoc3RvcmVkUHJvZ3Jlc3MpIHtcbiAgICAgICAgc2V0Q29tcGxldGVkUXVlc3Rpb25zKEpTT04ucGFyc2Uoc3RvcmVkUHJvZ3Jlc3MpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZHUgY2hhcmdlbWVudCBkZSBsYSBwcm9ncmVzc2lvbiBkZSBsZWN0dXJlOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGVkKHRydWUpO1xuICAgIH1cbiAgfSwgW1NUT1JBR0VfS0VZXSk7XG5cbiAgY29uc3Qgc2F2ZVByb2dyZXNzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBBc3luY1N0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkoY29tcGxldGVkUXVlc3Rpb25zKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHNhdXZlZ2FyZGUgZGUgbGEgcHJvZ3Jlc3Npb24gZGUgbGVjdHVyZTonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbY29tcGxldGVkUXVlc3Rpb25zLCBTVE9SQUdFX0tFWV0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gRUZGRUNUUyA9PT09PT09PT09PT09PT09PT09XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9hZFByb2dyZXNzKCk7XG4gIH0sIFtsb2FkUHJvZ3Jlc3NdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChsb2FkZWQpIHtcbiAgICAgIHNhdmVQcm9ncmVzcygpO1xuICAgIH1cbiAgfSwgW2NvbXBsZXRlZFF1ZXN0aW9ucywgbG9hZGVkLCBzYXZlUHJvZ3Jlc3NdKTtcblxuICAvLyBSw6lpbml0aWFsaXNlciBsZSBmZWVkYmFjayBldCBsYSByw6lwb25zZSBzw6lsZWN0aW9ubsOpZSBxdWFuZCBsJ2V4ZXJjaWNlIG91IGxhIHF1ZXN0aW9uIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFNob3dGZWVkYmFjayhmYWxzZSk7XG4gICAgc2V0U2VsZWN0ZWRBbnN3ZXIobnVsbCk7XG4gICAgc2V0QXR0ZW1wdHMoMCk7IC8vIFLDqWluaXRpYWxpc2VyIGxlcyB0ZW50YXRpdmVzIHBvdXIgbGEgbm91dmVsbGUgcXVlc3Rpb25cbiAgICBzZXRUZXh0RXhwYW5kZWQodHJ1ZSk7IC8vIFRvdWpvdXJzIGTDqW1hcnJlciBhdmVjIGxlIHRleHRlIGTDqXZlbG9wcMOpIHBvdXIgdW5lIG5vdXZlbGxlIHF1ZXN0aW9uXG5cbiAgICBpZiAoY3VycmVudFF1ZXN0aW9uSW5kZXggPT09IDAgJiYgc2VsZWN0ZWRFeGVyY2lzZUluZGV4ID09PSAwICYmICFpc0luaXRpYWxpemVkLmN1cnJlbnQpIHtcbiAgICAgIC8vIE5lIHBhcyBzY3JvbGxlciBhdSBwcmVtaWVyIGNoYXJnZW1lbnQgaW5pdGlhbFxuICAgICAgaXNJbml0aWFsaXplZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2Nyb2xsZXIgdmVycyBsZSBoYXV0IHNpIG9uIG4nZXN0IHBhcyBhdSBjaGFyZ2VtZW50IGluaXRpYWxcbiAgICAgIHNjcm9sbFZpZXdSZWYuY3VycmVudD8uc2Nyb2xsVG8oeyB5OiAwLCBhbmltYXRlZDogdHJ1ZSB9KTtcbiAgICAgIHRleHRzU2Nyb2xsVmlld1JlZi5jdXJyZW50Py5zY3JvbGxUbyh7IHk6IDAsIGFuaW1hdGVkOiB0cnVlIH0pO1xuICAgIH1cbiAgfSwgW2N1cnJlbnRRdWVzdGlvbkluZGV4LCBzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdKTtcblxuXG4gIC8vID09PT09PT09PT09PT09PT09PT0gQUNUSU9OUyA9PT09PT09PT09PT09PT09PT09XG5cbiAgY29uc3QgY2hhbmdlRXhlcmNpc2UgPSB1c2VDYWxsYmFjaygoaW5kZXgpID0+IHtcbiAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRvdGFsRXhlcmNpc2VzKSB7XG4gICAgICBzZXRTZWxlY3RlZEV4ZXJjaXNlSW5kZXgoaW5kZXgpO1xuICAgICAgc2V0Q3VycmVudFF1ZXN0aW9uSW5kZXgoMCk7IC8vIFRvdWpvdXJzIHJldmVuaXIgw6AgbGEgcHJlbWnDqHJlIHF1ZXN0aW9uXG4gICAgfVxuICB9LCBbdG90YWxFeGVyY2lzZXNdKTtcblxuICBjb25zdCBjaGFuZ2VRdWVzdGlvbiA9IHVzZUNhbGxiYWNrKChpbmRleCkgPT4ge1xuICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdG90YWxRdWVzdGlvbnMpIHtcbiAgICAgIHNldEN1cnJlbnRRdWVzdGlvbkluZGV4KGluZGV4KTtcbiAgICB9XG4gIH0sIFt0b3RhbFF1ZXN0aW9uc10pO1xuXG4gIGNvbnN0IHNlbGVjdEFuc3dlciA9IHVzZUNhbGxiYWNrKChhbnN3ZXIpID0+IHtcbiAgICBpZiAoIXNob3dGZWVkYmFjaykge1xuICAgICAgc2V0U2VsZWN0ZWRBbnN3ZXIoYW5zd2VyKTtcbiAgICB9XG4gIH0sIFtzaG93RmVlZGJhY2tdKTtcblxuICBjb25zdCBzdWJtaXRBbnN3ZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFjdXJyZW50UXVlc3Rpb24gfHwgc2VsZWN0ZWRBbnN3ZXIgPT09IG51bGwpIHtcbiAgICAgIEFsZXJ0LmFsZXJ0KFwiU8OpbGVjdGlvbiByZXF1aXNlXCIsIFwiVmV1aWxsZXogc8OpbGVjdGlvbm5lciB1bmUgcsOpcG9uc2UuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlzQ3VycmVudEFuc3dlckNvcnJlY3QgPSBzZWxlY3RlZEFuc3dlciA9PT0gY3VycmVudFF1ZXN0aW9uLmNvcnJlY3RBbnN3ZXI7XG4gICAgc2V0SXNDb3JyZWN0KGlzQ3VycmVudEFuc3dlckNvcnJlY3QpO1xuICAgIHNldFNob3dGZWVkYmFjayh0cnVlKTtcbiAgICBzZXRBdHRlbXB0cyhwcmV2ID0+IHByZXYgKyAxKTtcblxuICAgIGlmIChpc0N1cnJlbnRBbnN3ZXJDb3JyZWN0KSB7XG4gICAgICBzZXRDb21wbGV0ZWRRdWVzdGlvbnMocHJldiA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0NvbXBsZXRlZCA9IHsgLi4ucHJldiB9O1xuICAgICAgICBpZiAoIW5ld0NvbXBsZXRlZFtzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdKSB7XG4gICAgICAgICAgbmV3Q29tcGxldGVkW3NlbGVjdGVkRXhlcmNpc2VJbmRleF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5ld0NvbXBsZXRlZFtzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdLmluY2x1ZGVzKGN1cnJlbnRRdWVzdGlvbkluZGV4KSkge1xuICAgICAgICAgIG5ld0NvbXBsZXRlZFtzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdLnB1c2goY3VycmVudFF1ZXN0aW9uSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdDb21wbGV0ZWQ7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3B0aW9ubmVsOiBSw6lpbml0aWFsaXNlciBzZWxlY3RlZEFuc3dlciBzaSBpbmNvcnJlY3QgcG91ciBwZXJtZXR0cmUgdW5lIG5vdXZlbGxlIHRlbnRhdGl2ZVxuICAgICAgLy8gc2V0U2VsZWN0ZWRBbnN3ZXIobnVsbCk7XG4gICAgfVxuICB9LCBbY3VycmVudFF1ZXN0aW9uLCBzZWxlY3RlZEFuc3dlciwgc2VsZWN0ZWRFeGVyY2lzZUluZGV4LCBjdXJyZW50UXVlc3Rpb25JbmRleF0pO1xuXG4gIGNvbnN0IG5leHRRdWVzdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoY3VycmVudFF1ZXN0aW9uSW5kZXggPCB0b3RhbFF1ZXN0aW9ucyAtIDEpIHtcbiAgICAgIGNoYW5nZVF1ZXN0aW9uKGN1cnJlbnRRdWVzdGlvbkluZGV4ICsgMSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFNpIGMnZXN0IGxhIGRlcm5pw6hyZSBxdWVzdGlvbiBkZSBsJ2V4ZXJjaWNlIGFjdHVlbCwgcGFzc2VyIMOgIGwnZXhlcmNpY2Ugc3VpdmFudFxuICAgIGlmIChzZWxlY3RlZEV4ZXJjaXNlSW5kZXggPCB0b3RhbEV4ZXJjaXNlcyAtIDEpIHtcbiAgICAgIGNoYW5nZUV4ZXJjaXNlKHNlbGVjdGVkRXhlcmNpc2VJbmRleCArIDEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBPcHRpb25uZWw6IEfDqXJlciBsYSBmaW4gZGUgdG91cyBsZXMgZXhlcmNpY2VzIGRlIGxlY3R1cmVcbiAgICBBbGVydC5hbGVydChcIkV4ZXJjaWNlIHRlcm1pbsOpXCIsIFwiVm91cyBhdmV6IHRlcm1pbsOpIHRvdXMgbGVzIGV4ZXJjaWNlcyBkZSBsZWN0dXJlIHBvdXIgY2Ugbml2ZWF1ICFcIik7XG4gIH0sIFtjdXJyZW50UXVlc3Rpb25JbmRleCwgdG90YWxRdWVzdGlvbnMsIGNoYW5nZVF1ZXN0aW9uLCBzZWxlY3RlZEV4ZXJjaXNlSW5kZXgsIHRvdGFsRXhlcmNpc2VzLCBjaGFuZ2VFeGVyY2lzZV0pO1xuXG4gIGNvbnN0IHByZXZpb3VzUXVlc3Rpb24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRRdWVzdGlvbkluZGV4ID4gMCkge1xuICAgICAgY2hhbmdlUXVlc3Rpb24oY3VycmVudFF1ZXN0aW9uSW5kZXggLSAxKTtcbiAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRXhlcmNpc2VJbmRleCA+IDApIHtcbiAgICAgIC8vIFNpIGMnZXN0IGxhIHByZW1pw6hyZSBxdWVzdGlvbiBkZSBsJ2V4ZXJjaWNlIGFjdHVlbCwgcGFzc2VyIMOgIGxhIGRlcm5pw6hyZSBxdWVzdGlvbiBkZSBsJ2V4ZXJjaWNlIHByw6ljw6lkZW50XG4gICAgICBjb25zdCBwcmV2RXhlcmNpc2UgPSBleGVyY2lzZXNbc2VsZWN0ZWRFeGVyY2lzZUluZGV4IC0gMV07XG4gICAgICBpZiAocHJldkV4ZXJjaXNlKSB7XG4gICAgICAgIHNldFNlbGVjdGVkRXhlcmNpc2VJbmRleChzZWxlY3RlZEV4ZXJjaXNlSW5kZXggLSAxKTtcbiAgICAgICAgc2V0Q3VycmVudFF1ZXN0aW9uSW5kZXgocHJldkV4ZXJjaXNlLnF1ZXN0aW9ucy5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjdXJyZW50UXVlc3Rpb25JbmRleCwgY2hhbmdlUXVlc3Rpb24sIHNlbGVjdGVkRXhlcmNpc2VJbmRleCwgZXhlcmNpc2VzXSk7XG5cblxuICBjb25zdCByZXRyeVF1ZXN0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dGZWVkYmFjayhmYWxzZSk7XG4gICAgc2V0U2VsZWN0ZWRBbnN3ZXIobnVsbCk7XG4gICAgc2V0QXR0ZW1wdHMoMCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCB0b2dnbGVUZXh0RXhwYW5zaW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFRleHRFeHBhbmRlZChwcmV2ID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHRvZ2dsZURldGFpbGVkUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd0RldGFpbGVkUHJvZ3Jlc3MocHJldiA9PiAhcHJldik7XG4gIH0sIFtdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IFBST0dSRVNTSU9OID09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgZ2V0UHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgdG90YWxDb21wbGV0ZWRRdWVzdGlvbnMgPSBPYmplY3QudmFsdWVzKGNvbXBsZXRlZFF1ZXN0aW9ucykucmVkdWNlKChzdW0sIGNvbXBsZXRlZCkgPT4gc3VtICsgKGNvbXBsZXRlZD8ubGVuZ3RoIHx8IDApLCAwKTtcbiAgICBjb25zdCB0b3RhbFF1ZXN0aW9uc0FsbEV4ZXJjaXNlcyA9IGV4ZXJjaXNlcy5yZWR1Y2UoKHN1bSwgZXgpID0+IHN1bSArIChleC5xdWVzdGlvbnM/Lmxlbmd0aCB8fCAwKSwgMCk7XG5cbiAgICBjb25zdCBjb21wbGV0ZWRJbkN1cnJlbnRFeGVyY2lzZSA9IGNvbXBsZXRlZFF1ZXN0aW9uc1tzZWxlY3RlZEV4ZXJjaXNlSW5kZXhdPy5sZW5ndGggfHwgMDtcbiAgICBjb25zdCBwcm9ncmVzc1BlcmNlbnQgPSB0b3RhbFF1ZXN0aW9ucyA+IDAgPyAoY29tcGxldGVkSW5DdXJyZW50RXhlcmNpc2UgLyB0b3RhbFF1ZXN0aW9ucykgKiAxMDAgOiAwO1xuXG4gICAgY29uc3Qgb3ZlcmFsbFByb2dyZXNzID0gdG90YWxRdWVzdGlvbnNBbGxFeGVyY2lzZXMgPiAwID8gKHRvdGFsQ29tcGxldGVkUXVlc3Rpb25zIC8gdG90YWxRdWVzdGlvbnNBbGxFeGVyY2lzZXMpICogMTAwIDogMDtcblxuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50RXhlcmNpc2U6IHByb2dyZXNzUGVyY2VudCxcbiAgICAgIG92ZXJhbGw6IG92ZXJhbGxQcm9ncmVzcyxcbiAgICAgIGNvbXBsZXRlZEluQ3VycmVudDogY29tcGxldGVkSW5DdXJyZW50RXhlcmNpc2UsXG4gICAgICB0b3RhbEluQ3VycmVudDogdG90YWxRdWVzdGlvbnMsXG4gICAgICBjb21wbGV0ZWRPdmVyYWxsOiB0b3RhbENvbXBsZXRlZFF1ZXN0aW9ucyxcbiAgICAgIHRvdGFsT3ZlcmFsbDogdG90YWxRdWVzdGlvbnNBbGxFeGVyY2lzZXNcbiAgICB9O1xuICB9LCBbY29tcGxldGVkUXVlc3Rpb25zLCBzZWxlY3RlZEV4ZXJjaXNlSW5kZXgsIHRvdGFsUXVlc3Rpb25zLCBleGVyY2lzZXNdKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09IFZBTElEQVRJT04gPT09PT09PT09PT09PT09PT09PVxuICAvLyDinIUgQ09SUkVDVElPTjogU3VwcHJlc3Npb24gZGUgbGEgdmFyaWFibGUgaXNBbnN3ZXJDb3JyZWN0Q29tcHV0ZWQgY2FyIGVsbGUgbifDqXRhaXQgcGFzIHV0aWxpc8OpZS5cblxuICBjb25zdCBpc1F1ZXN0aW9uQ29tcGxldGVkID0gY29tcGxldGVkUXVlc3Rpb25zW3NlbGVjdGVkRXhlcmNpc2VJbmRleF0/LmluY2x1ZGVzKGN1cnJlbnRRdWVzdGlvbkluZGV4KSB8fCBmYWxzZTtcblxuICByZXR1cm4ge1xuICAgIHNlbGVjdGVkRXhlcmNpc2VJbmRleCxcbiAgICBjdXJyZW50UXVlc3Rpb25JbmRleCxcbiAgICBzZWxlY3RlZEFuc3dlcixcbiAgICBzaG93RmVlZGJhY2ssXG4gICAgdGV4dEV4cGFuZGVkLFxuICAgIGF0dGVtcHRzLFxuICAgIGNvbXBsZXRlZFF1ZXN0aW9ucyxcbiAgICBsb2FkZWQsXG4gICAgc2hvd0RldGFpbGVkUHJvZ3Jlc3MsXG4gICAgY3VycmVudEV4ZXJjaXNlLFxuICAgIGN1cnJlbnRRdWVzdGlvbixcbiAgICB0b3RhbEV4ZXJjaXNlcyxcbiAgICB0b3RhbFF1ZXN0aW9ucyxcbiAgICBjaGFuZ2VFeGVyY2lzZSxcbiAgICBjaGFuZ2VRdWVzdGlvbixcbiAgICBzZWxlY3RBbnN3ZXIsXG4gICAgc3VibWl0QW5zd2VyLFxuICAgIG5leHRRdWVzdGlvbixcbiAgICBwcmV2aW91c1F1ZXN0aW9uLFxuICAgIHJldHJ5UXVlc3Rpb24sXG4gICAgdG9nZ2xlVGV4dEV4cGFuc2lvbixcbiAgICB0b2dnbGVEZXRhaWxlZFByb2dyZXNzLFxuICAgIGlzQ29ycmVjdCxcbiAgICBpc1F1ZXN0aW9uQ29tcGxldGVkLFxuICAgIHByb2dyZXNzOiBnZXRQcm9ncmVzcygpLFxuICAgIHNjcm9sbFZpZXdSZWYsXG4gICAgdGV4dHNTY3JvbGxWaWV3UmVmLFxuICAgIGZhZGVBbmltLFxuICAgIHNsaWRlQW5pbSxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZVJlYWRpbmc7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUEsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsYUFBQSxHQUFBQyxzQkFBQSxDQUFBSCxPQUFBO0FBRUEsSUFBTUksVUFBVSxHQUFHLFNBQWJBLFVBQVVBLENBQUEsRUFBcUM7RUFBQSxJQUFBQyxxQkFBQSxFQUFBQyxzQkFBQSxFQUFBQyxzQkFBQTtFQUFBLElBQWpDQyxTQUFTLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHLEVBQUU7RUFBQSxJQUFFRyxLQUFLLEdBQUFILFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHLElBQUk7RUFFOUMsSUFBQUksU0FBQSxHQUEwRCxJQUFBQyxlQUFRLEVBQUMsQ0FBQyxDQUFDO0lBQUFDLFVBQUEsT0FBQUMsZUFBQSxDQUFBQyxPQUFBLEVBQUFKLFNBQUE7SUFBOURLLHFCQUFxQixHQUFBSCxVQUFBO0lBQUVJLHdCQUF3QixHQUFBSixVQUFBO0VBQ3RELElBQUFLLFVBQUEsR0FBd0QsSUFBQU4sZUFBUSxFQUFDLENBQUMsQ0FBQztJQUFBTyxVQUFBLE9BQUFMLGVBQUEsQ0FBQUMsT0FBQSxFQUFBRyxVQUFBO0lBQTVERSxvQkFBb0IsR0FBQUQsVUFBQTtJQUFFRSx1QkFBdUIsR0FBQUYsVUFBQTtFQUNw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