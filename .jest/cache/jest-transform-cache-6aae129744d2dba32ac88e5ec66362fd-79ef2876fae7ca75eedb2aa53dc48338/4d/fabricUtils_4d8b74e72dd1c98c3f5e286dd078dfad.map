{"version":3,"names":["Object","defineProperty","exports","value","getShadowNodeWrapperFromRef","_findHostInstance","require","getInternalInstanceHandleFromPublicInstance","ref","hostInstance","_ref$getScrollRespond","_ref$__internalInstan","undefined","_require$getInternalI","_ref","_internalInstanceHandle","e","scrollViewRef","getScrollResponder","getNativeScrollRef","otherScrollViewRef","textInputRef","__internalInstanceHandle","stateNode","node","resolvedRef","instance","findHostInstance"],"sources":["fabricUtils.ts"],"sourcesContent":["'use strict';\n/* eslint-disable */\n\nimport type { ShadowNodeWrapper } from './commonTypes';\nimport {\n  findHostInstance,\n  HostInstance,\n} from './platform-specific/findHostInstance';\n\nlet getInternalInstanceHandleFromPublicInstance: (ref: unknown) => {\n  stateNode: { node: unknown };\n};\n\nexport function getShadowNodeWrapperFromRef(\n  ref: React.Component,\n  hostInstance?: HostInstance\n): ShadowNodeWrapper {\n  if (getInternalInstanceHandleFromPublicInstance === undefined) {\n    try {\n      getInternalInstanceHandleFromPublicInstance =\n        require('react-native/Libraries/ReactNative/ReactFabricPublicInstance/ReactFabricPublicInstance')\n          .getInternalInstanceHandleFromPublicInstance ??\n        ((_ref: any) => _ref._internalInstanceHandle);\n    } catch (e) {\n      getInternalInstanceHandleFromPublicInstance = (_ref: any) =>\n        _ref._internalInstanceHandle;\n    }\n  }\n\n  // taken from https://github.com/facebook/react-native/commit/803bb16531697233686efd475f004c1643e03617#diff-d8172256c6d63b5d32db10e54d7b10f37a26b337d5280d89f5bfd7bcea778292R196\n  // @ts-ignore some weird stuff on RN 0.74 - see examples with scrollView\n  const scrollViewRef = ref?.getScrollResponder?.()?.getNativeScrollRef?.();\n  // @ts-ignore some weird stuff on RN 0.74  - see examples with scrollView\n  const otherScrollViewRef = ref?.getNativeScrollRef?.();\n  // @ts-ignore some weird stuff on RN 0.74 - see setNativeProps example\n  const textInputRef = ref?.__internalInstanceHandle?.stateNode?.node;\n\n  let resolvedRef;\n  if (scrollViewRef) {\n    resolvedRef = scrollViewRef.__internalInstanceHandle.stateNode.node;\n  } else if (otherScrollViewRef) {\n    resolvedRef = otherScrollViewRef.__internalInstanceHandle.stateNode.node;\n  } else if (textInputRef) {\n    resolvedRef = textInputRef;\n  } else {\n    const instance = hostInstance ?? findHostInstance(ref);\n    resolvedRef =\n      getInternalInstanceHandleFromPublicInstance(instance).stateNode.node;\n  }\n\n  return resolvedRef;\n}\n"],"mappings":"AAAA,YAAY;AAACA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,2BAAA,GAAAA,2BAAA;AAIb,IAAAC,iBAAA,GAAAC,OAAA;AAKA,IAAIC,2CAEH;AAEM,SAASH,2BAA2BA,CACzCI,GAAoB,EACpBC,YAA2B,EACR;EAAA,IAAAC,qBAAA,EAAAC,qBAAA;EACnB,IAAIJ,2CAA2C,KAAKK,SAAS,EAAE;IAC7D,IAAI;MAAA,IAAAC,qBAAA;MACFN,2CAA2C,IAAAM,qBAAA,GACzCP,OAAO,CAAC,wFAAwF,CAAC,CAC9FC,2CAA2C,YAAAM,qBAAA,GAC7C,UAACC,IAAS;QAAA,OAAKA,IAAI,CAACC,uBAAuB;MAAA,CAAC;IACjD,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVT,2CAA2C,GAAG,SAA9CA,2CAA2CA,CAAIO,IAAS;QAAA,OACtDA,IAAI,CAACC,uBAAuB;MAAA;IAChC;EACF;EAIA,IAAME,aAAa,GAAGT,GAAG,YAAHA,GAAG,CAAEU,kBAAkB,aAAAR,qBAAA,GAAvBF,GAAG,CAAEU,kBAAkB,CAAG,CAAC,aAA3BR,qBAAA,CAA6BS,kBAAkB,oBAA/CT,qBAAA,CAA6BS,kBAAkB,CAAG,CAAC;EAEzE,IAAMC,kBAAkB,GAAGZ,GAAG,YAAHA,GAAG,CAAEW,kBAAkB,oBAAvBX,GAAG,CAAEW,kBAAkB,CAAG,CAAC;EAEtD,IAAME,YAAY,GAAGb,GAAG,aAAAG,qBAAA,GAAHH,GAAG,CAAEc,wBAAwB,cAAAX,qBAAA,GAA7BA,qBAAA,CAA+BY,SAAS,qBAAxCZ,qBAAA,CAA0Ca,IAAI;EAEnE,IAAIC,WAAW;EACf,IAAIR,aAAa,EAAE;IACjBQ,WAAW,GAAGR,aAAa,CAACK,wBAAwB,CAACC,SAAS,CAACC,IAAI;EACrE,CAAC,MAAM,IAAIJ,kBAAkB,EAAE;IAC7BK,WAAW,GAAGL,kBAAkB,CAACE,wBAAwB,CAACC,SAAS,CAACC,IAAI;EAC1E,CAAC,MAAM,IAAIH,YAAY,EAAE;IACvBI,WAAW,GAAGJ,YAAY;EAC5B,CAAC,MAAM;IACL,IAAMK,QAAQ,GAAGjB,YAAY,WAAZA,YAAY,GAAI,IAAAkB,kCAAgB,EAACnB,GAAG,CAAC;IACtDiB,WAAW,GACTlB,2CAA2C,CAACmB,QAAQ,CAAC,CAACH,SAAS,CAACC,IAAI;EACxE;EAEA,OAAOC,WAAW;AACpB","ignoreList":[]}