{"version":3,"names":["_getJestObj","mock","Object","assign","jest","requireActual","useNavigation","navigate","fn","goBack","useRoute","params","_interopRequireDefault","require","_asyncToGenerator2","_react","_reactNative","_layout","_AppProvider","_ProgressContext","_jsxRuntime","_require","describe","it","default","_render","render","jsx","AppProvider","children","jsxs","ProgressProvider","getByText","findByText","queryByText","fireEvent","press","levelA1","vocabExercise","navigation","vocabExerciseAfter","expect","toBeNull"],"sources":["exercise-abandonment.test.js"],"sourcesContent":["\nimport React from 'react';\nimport { render, fireEvent } from '@testing-library/react-native';\nimport App from '../../app/_layout';\nimport { AppProvider } from '../../src/contexts/AppProvider';\nimport { ProgressProvider } from '../../src/contexts/ProgressContext';\n\njest.mock('@react-navigation/native', () => ({\n  ...jest.requireActual('@react-navigation/native'),\n  useNavigation: () => ({\n    navigate: jest.fn(),\n    goBack: jest.fn(),\n  }),\n  useRoute: () => ({ params: {} }),\n}));\n\ndescribe('Exercise Abandonment Integration Test', () => {\n  it('should not save progress if an exercise is abandoned midway', async () => {\n    const { getByText, findByText, queryByText } = render(\n      <AppProvider>\n        <ProgressProvider> {/* Assurez-vous que le contexte de progression est ici */}\n          <App />\n        </ProgressProvider>\n      </AppProvider>\n    );\n\n    // 1. Naviguer vers un exercice\n    fireEvent.press(getByText(/Commencer l'apprentissage/i));\n    const levelA1 = await findByText(/Niveau A1/i);\n    fireEvent.press(levelA1);\n    const vocabExercise = await findByText(/Vocabulaire/i);\n    fireEvent.press(vocabExercise);\n\n    // 2. Simuler une progression partielle dans l'exercice\n    // (Cette partie est une simplification, vous interagiriez avec les questions)\n\n    // 3. Abandonner l'exercice en revenant en arrière\n    const navigation = require('@react-navigation/native');\n    fireEvent.press(navigation.useNavigation().goBack());\n\n    // 4. Vérifier que la progression sur l'écran de sélection d'exercices n'a pas changé\n    const vocabExerciseAfter = await findByText(/Vocabulaire/i);\n    // S'assurer que le texte de progression (ex: \"10%\") n'est PAS là\n    expect(queryByText(/%/)).toBeNull();\n  });\n});\n"],"mappings":"AAOAA,WAAA,GAAKC,IAAI,CAAC,0BAA0B,EAAE;EAAA,OAAAC,MAAA,CAAAC,MAAA,KACjCC,IAAI,CAACC,aAAa,CAAC,0BAA0B,CAAC;IACjDC,aAAa,EAAE,SAAfA,aAAaA,CAAA;MAAA,OAAS;QACpBC,QAAQ,EAAEH,IAAI,CAACI,EAAE,CAAC,CAAC;QACnBC,MAAM,EAAEL,IAAI,CAACI,EAAE,CAAC;MAClB,CAAC;IAAA,CAAC;IACFE,QAAQ,EAAE,SAAVA,QAAQA,CAAA;MAAA,OAAS;QAAEC,MAAM,EAAE,CAAC;MAAE,CAAC;IAAA;EAAC;AAAA,CAChC,CAAC;AAAC,IAAAC,sBAAA,GAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AAbJ,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,YAAA,GAAAL,OAAA;AACA,IAAAM,gBAAA,GAAAN,OAAA;AAAsE,IAAAO,WAAA,GAAAP,OAAA;AAAA,SAAAb,YAAA;EAAA,IAAAqB,QAAA,GAAAR,OAAA;IAAAT,IAAA,GAAAiB,QAAA,CAAAjB,IAAA;EAAAJ,WAAA,YAAAA,YAAA;IAAA,OAAAI,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAWtEkB,QAAQ,CAAC,uCAAuC,EAAE,YAAM;EACtDC,EAAE,CAAC,6DAA6D,MAAAT,kBAAA,CAAAU,OAAA,EAAE,aAAY;IAC5E,IAAAC,OAAA,GAA+C,IAAAC,mBAAM,EACnD,IAAAN,WAAA,CAAAO,GAAA,EAACT,YAAA,CAAAU,WAAW;QAAAC,QAAA,EACV,IAAAT,WAAA,CAAAU,IAAA,EAACX,gBAAA,CAAAY,gBAAgB;UAAAF,QAAA,GAAC,GAAC,EACjB,IAAAT,WAAA,CAAAO,GAAA,EAACV,OAAA,CAAAO,OAAG,IAAE,CAAC;QAAA,CACS;MAAC,CACR,CACf,CAAC;MANOQ,SAAS,GAAAP,OAAA,CAATO,SAAS;MAAEC,UAAU,GAAAR,OAAA,CAAVQ,UAAU;MAAEC,WAAW,GAAAT,OAAA,CAAXS,WAAW;IAS1CC,sBAAS,CAACC,KAAK,CAACJ,SAAS,CAAC,4BAA4B,CAAC,CAAC;IACxD,IAAMK,OAAO,SAASJ,UAAU,CAAC,YAAY,CAAC;IAC9CE,sBAAS,CAACC,KAAK,CAACC,OAAO,CAAC;IACxB,IAAMC,aAAa,SAASL,UAAU,CAAC,cAAc,CAAC;IACtDE,sBAAS,CAACC,KAAK,CAACE,aAAa,CAAC;IAM9B,IAAMC,UAAU,GAAG1B,OAAO,CAAC,0BAA0B,CAAC;IACtDsB,sBAAS,CAACC,KAAK,CAACG,UAAU,CAACjC,aAAa,CAAC,CAAC,CAACG,MAAM,CAAC,CAAC,CAAC;IAGpD,IAAM+B,kBAAkB,SAASP,UAAU,CAAC,cAAc,CAAC;IAE3DQ,MAAM,CAACP,WAAW,CAAC,GAAG,CAAC,CAAC,CAACQ,QAAQ,CAAC,CAAC;EACrC,CAAC,EAAC;AACJ,CAAC,CAAC","ignoreList":[]}