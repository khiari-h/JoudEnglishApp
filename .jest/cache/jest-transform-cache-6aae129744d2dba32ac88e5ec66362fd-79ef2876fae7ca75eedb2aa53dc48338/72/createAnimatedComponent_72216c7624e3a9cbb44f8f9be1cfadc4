fa38a20b7b22de545e81a8c31a448962
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createAnimatedComponent = createAnimatedComponent;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("react-native");
require("../layoutReanimation/animationsManager");
var _invariant = _interopRequireDefault(require("invariant"));
var _ConfigHelper = require("../ConfigHelper");
var _findHostInstance = require("../platform-specific/findHostInstance");
var _core = require("../core");
var _layoutReanimation = require("../layoutReanimation");
var _fabricUtils = require("../fabricUtils");
var _PropsRegistry = require("../PropsRegistry");
var _util = require("../animation/util");
var _animationBuilder = require("../animationBuilder");
var _LayoutAnimationConfig = require("../component/LayoutAnimationConfig");
var _JSPropsUpdater = _interopRequireDefault(require("./JSPropsUpdater"));
var _utils = require("./utils");
var _setAndForwardRef = _interopRequireDefault(require("./setAndForwardRef"));
var _PlatformChecker = require("../PlatformChecker");
var _InlinePropManager = require("./InlinePropManager");
var _PropsFilter = require("./PropsFilter");
var _web = require("../layoutReanimation/web");
var _UpdateLayoutAnimations = require("../UpdateLayoutAnimations");
var _domUtils = require("../layoutReanimation/web/domUtils");
var _getViewInfo2 = require("./getViewInfo");
var _NativeEventsManager = require("./NativeEventsManager");
var _errors = require("../errors");
var _jsxRuntime = require("react/jsx-runtime");
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
var IS_WEB = (0, _PlatformChecker.isWeb)();
var IS_JEST = (0, _PlatformChecker.isJest)();
var SHOULD_BE_USE_WEB = (0, _PlatformChecker.shouldBeUseWeb)();
if (IS_WEB) {
  (0, _web.configureWebLayoutAnimations)();
}
function onlyAnimatedStyles(styles) {
  return styles.filter(function (style) {
    return style == null ? void 0 : style.viewDescriptors;
  });
}
var id = 0;
function createAnimatedComponent(Component, options) {
  (0, _invariant.default)(typeof Component !== 'function' || Component.prototype && Component.prototype.isReactComponent, `Looks like you're passing a function component \`${Component.name}\` to \`createAnimatedComponent\` function which supports only class components. Please wrap your function component with \`React.forwardRef()\` or use a class component instead.`);
  var AnimatedComponent = function (_ref) {
    function AnimatedComponent(props) {
      var _this;
      (0, _classCallCheck2.default)(this, AnimatedComponent);
      _this = _callSuper(this, AnimatedComponent, [props]);
      _this._styles = null;
      _this._isFirstRender = true;
      _this.jestAnimatedStyle = {
        value: {}
      };
      _this._componentRef = null;
      _this._sharedElementTransition = null;
      _this._jsPropsUpdater = new _JSPropsUpdater.default();
      _this._InlinePropManager = new _InlinePropManager.InlinePropManager();
      _this._PropsFilter = new _PropsFilter.PropsFilter();
      _this.reanimatedID = id++;
      _this._resolveComponentRef = function (ref) {
        var componentRef = ref;
        if (componentRef && componentRef.getAnimatableRef) {
          return componentRef.getAnimatableRef();
        }
        return componentRef;
      };
      _this._setComponentRef = (0, _setAndForwardRef.default)({
        getForwardedRef: function getForwardedRef() {
          return _this.props.forwardedRef;
        },
        setLocalRef: function setLocalRef(ref) {
          if (!ref) {
            return;
          }
          if (ref !== _this._componentRef) {
            _this._componentRef = _this._resolveComponentRef(ref);
            _this._viewInfo = undefined;
          }
          var tag = _this.getComponentViewTag();
          var _this$props = _this.props,
            layout = _this$props.layout,
            entering = _this$props.entering,
            exiting = _this$props.exiting,
            sharedTransitionTag = _this$props.sharedTransitionTag;
          if (layout || entering || exiting || sharedTransitionTag) {
            var _this$context;
            if (!SHOULD_BE_USE_WEB) {
              (0, _core.enableLayoutAnimations)(true, false);
            }
            if (sharedTransitionTag) {
              _this._configureSharedTransition();
            }
            if (exiting && (0, _PlatformChecker.isFabric)()) {
              var reduceMotionInExiting = 'getReduceMotion' in exiting && typeof exiting.getReduceMotion === 'function' ? (0, _util.getReduceMotionFromConfig)(exiting.getReduceMotion()) : (0, _util.getReduceMotionFromConfig)();
              if (!reduceMotionInExiting) {
                var _this$props2;
                (0, _UpdateLayoutAnimations.updateLayoutAnimations)(tag, _layoutReanimation.LayoutAnimationType.EXITING, (0, _animationBuilder.maybeBuild)(exiting, (_this$props2 = _this.props) == null ? void 0 : _this$props2.style, AnimatedComponent.displayName));
              }
            }
            var skipEntering = (_this$context = _this.context) == null ? void 0 : _this$context.current;
            if (entering && !skipEntering && !IS_WEB) {
              var _this$props3;
              (0, _UpdateLayoutAnimations.updateLayoutAnimations)(tag, _layoutReanimation.LayoutAnimationType.ENTERING, (0, _animationBuilder.maybeBuild)(entering, (_this$props3 = _this.props) == null ? void 0 : _this$props3.style, AnimatedComponent.displayName));
            }
          }
        }
      });
      if (IS_JEST) {
        _this.jestAnimatedStyle = {
          value: {}
        };
      }
      var _entering = _this.props.entering;
      if (_entering && (0, _PlatformChecker.isFabric)()) {
        var _this$props4;
        (0, _UpdateLayoutAnimations.updateLayoutAnimations)(_this.reanimatedID, _layoutReanimation.LayoutAnimationType.ENTERING, (0, _animationBuilder.maybeBuild)(_entering, (_this$props4 = _this.props) == null ? void 0 : _this$props4.style, AnimatedComponent.displayName));
      }
      return _this;
    }
    (0, _inherits2.default)(AnimatedComponent, _ref);
    return (0, _createClass2.default)(AnimatedComponent, [{
      key: "componentDidMount",
      value: function componentDidMount() {
        var _this$_NativeEventsMa;
        if (!IS_WEB) {
          this._NativeEventsManager = new _NativeEventsManager.NativeEventsManager(this, options);
        }
        (_this$_NativeEventsMa = this._NativeEventsManager) == null || _this$_NativeEventsMa.attachEvents();
        this._jsPropsUpdater.addOnJSPropsChangeListener(this);
        this._attachAnimatedStyles();
        this._InlinePropManager.attachInlineProps(this, this._getViewInfo());
        var layout = this.props.layout;
        if (layout) {
          this._configureLayoutTransition();
        }
        if (IS_WEB) {
          var _this$context2;
          if (this.props.exiting) {
            (0, _web.saveSnapshot)(this._componentRef);
          }
          if (!this.props.entering || (0, _web.getReducedMotionFromConfig)(this.props.entering)) {
            this._isFirstRender = false;
            return;
          }
          var skipEntering = (_this$context2 = this.context) == null ? void 0 : _this$context2.current;
          if (!skipEntering) {
            (0, _web.startWebLayoutAnimation)(this.props, this._componentRef, _layoutReanimation.LayoutAnimationType.ENTERING);
          } else {
            this._componentRef.style.visibility = 'initial';
          }
        }
        this._isFirstRender = false;
      }
    }, {
      key: "componentWillUnmount",
      value: function componentWillUnmount() {
        var _this$_NativeEventsMa2, _this$_sharedElementT;
        (_this$_NativeEventsMa2 = this._NativeEventsManager) == null || _this$_NativeEventsMa2.detachEvents();
        this._jsPropsUpdater.removeOnJSPropsChangeListener(this);
        this._detachStyles();
        this._InlinePropManager.detachInlineProps();
        if (this.props.sharedTransitionTag) {
          this._configureSharedTransition(true);
        }
        (_this$_sharedElementT = this._sharedElementTransition) == null || _this$_sharedElementT.unregisterTransition(this.getComponentViewTag(), true);
        var exiting = this.props.exiting;
        if (IS_WEB && this._componentRef && exiting && !(0, _web.getReducedMotionFromConfig)(exiting)) {
          (0, _domUtils.addHTMLMutationObserver)();
          (0, _web.startWebLayoutAnimation)(this.props, this._componentRef, _layoutReanimation.LayoutAnimationType.EXITING);
        } else if (exiting && !IS_WEB && !(0, _PlatformChecker.isFabric)()) {
          var reduceMotionInExiting = 'getReduceMotion' in exiting && typeof exiting.getReduceMotion === 'function' ? (0, _util.getReduceMotionFromConfig)(exiting.getReduceMotion()) : (0, _util.getReduceMotionFromConfig)();
          if (!reduceMotionInExiting) {
            var _this$props5;
            (0, _UpdateLayoutAnimations.updateLayoutAnimations)(this.getComponentViewTag(), _layoutReanimation.LayoutAnimationType.EXITING, (0, _animationBuilder.maybeBuild)(exiting, (_this$props5 = this.props) == null ? void 0 : _this$props5.style, AnimatedComponent.displayName));
          }
        }
      }
    }, {
      key: "getComponentViewTag",
      value: function getComponentViewTag() {
        return this._getViewInfo().viewTag;
      }
    }, {
      key: "_detachStyles",
      value: function _detachStyles() {
        var viewTag = this.getComponentViewTag();
        if (viewTag !== -1 && this._styles !== null) {
          var _this$props$animatedP;
          for (var style of this._styles) {
            style.viewDescriptors.remove(viewTag);
          }
          if ((_this$props$animatedP = this.props.animatedProps) != null && _this$props$animatedP.viewDescriptors) {
            this.props.animatedProps.viewDescriptors.remove(viewTag);
          }
          if ((0, _PlatformChecker.isFabric)()) {
            (0, _PropsRegistry.removeFromPropsRegistry)(viewTag);
          }
        }
      }
    }, {
      key: "_updateFromNative",
      value: function _updateFromNative(props) {
        if (options != null && options.setNativeProps) {
          options.setNativeProps(this._componentRef, props);
        } else {
          var _this$_componentRef;
          (_this$_componentRef = this._componentRef) == null || _this$_componentRef.setNativeProps == null || _this$_componentRef.setNativeProps(props);
        }
      }
    }, {
      key: "_getViewInfo",
      value: function _getViewInfo() {
        if (this._viewInfo !== undefined) {
          return this._viewInfo;
        }
        var viewTag;
        var viewName;
        var shadowNodeWrapper = null;
        var viewConfig;
        if (SHOULD_BE_USE_WEB) {
          viewTag = this._componentRef;
          viewName = null;
          shadowNodeWrapper = null;
          viewConfig = null;
        } else {
          var hostInstance = (0, _findHostInstance.findHostInstance)(this);
          if (!hostInstance) {
            throw new _errors.ReanimatedError('Cannot find host instance for this component. Maybe it renders nothing?');
          }
          var viewInfo = (0, _getViewInfo2.getViewInfo)(hostInstance);
          viewTag = viewInfo.viewTag;
          viewName = viewInfo.viewName;
          viewConfig = viewInfo.viewConfig;
          shadowNodeWrapper = (0, _PlatformChecker.isFabric)() ? (0, _fabricUtils.getShadowNodeWrapperFromRef)(this, hostInstance) : null;
        }
        this._viewInfo = {
          viewTag: viewTag,
          viewName: viewName,
          shadowNodeWrapper: shadowNodeWrapper,
          viewConfig: viewConfig
        };
        return this._viewInfo;
      }
    }, {
      key: "_attachAnimatedStyles",
      value: function _attachAnimatedStyles() {
        var _this$props$animatedP2,
          _this2 = this,
          _this$props$animatedP3;
        var styles = this.props.style ? onlyAnimatedStyles((0, _utils.flattenArray)(this.props.style)) : [];
        var prevStyles = this._styles;
        this._styles = styles;
        var prevAnimatedProps = this._animatedProps;
        this._animatedProps = this.props.animatedProps;
        var _this$_getViewInfo = this._getViewInfo(),
          viewTag = _this$_getViewInfo.viewTag,
          viewName = _this$_getViewInfo.viewName,
          shadowNodeWrapper = _this$_getViewInfo.shadowNodeWrapper,
          viewConfig = _this$_getViewInfo.viewConfig;
        var hasReanimated2Props = ((_this$props$animatedP2 = this.props.animatedProps) == null ? void 0 : _this$props$animatedP2.viewDescriptors) || styles.length;
        if (hasReanimated2Props && viewConfig) {
          (0, _ConfigHelper.adaptViewConfig)(viewConfig);
        }
        if (prevStyles) {
          var hasOneSameStyle = styles.length === 1 && prevStyles.length === 1 && styles[0] === prevStyles[0];
          if (!hasOneSameStyle) {
            var _loop = function _loop(prevStyle) {
              var isPresent = styles.some(function (style) {
                return style === prevStyle;
              });
              if (!isPresent) {
                prevStyle.viewDescriptors.remove(viewTag);
              }
            };
            for (var prevStyle of prevStyles) {
              _loop(prevStyle);
            }
          }
        }
        styles.forEach(function (style) {
          style.viewDescriptors.add({
            tag: viewTag,
            name: viewName,
            shadowNodeWrapper: shadowNodeWrapper
          });
          if (IS_JEST) {
            _this2.jestAnimatedStyle.value = Object.assign({}, _this2.jestAnimatedStyle.value, style.initial.value);
            style.jestAnimatedStyle.current = _this2.jestAnimatedStyle;
          }
        });
        if (prevAnimatedProps && prevAnimatedProps !== this.props.animatedProps) {
          prevAnimatedProps.viewDescriptors.remove(viewTag);
        }
        if ((_this$props$animatedP3 = this.props.animatedProps) != null && _this$props$animatedP3.viewDescriptors) {
          this.props.animatedProps.viewDescriptors.add({
            tag: viewTag,
            name: viewName,
            shadowNodeWrapper: shadowNodeWrapper
          });
        }
      }
    }, {
      key: "componentDidUpdate",
      value: function componentDidUpdate(prevProps, _prevState, snapshot) {
        var _this$_NativeEventsMa3;
        var layout = this.props.layout;
        var oldLayout = prevProps.layout;
        if (layout !== oldLayout) {
          this._configureLayoutTransition();
        }
        if (this.props.sharedTransitionTag !== undefined || prevProps.sharedTransitionTag !== undefined) {
          this._configureSharedTransition();
        }
        (_this$_NativeEventsMa3 = this._NativeEventsManager) == null || _this$_NativeEventsMa3.updateEvents(prevProps);
        this._attachAnimatedStyles();
        this._InlinePropManager.attachInlineProps(this, this._getViewInfo());
        if (IS_WEB && this.props.exiting) {
          (0, _web.saveSnapshot)(this._componentRef);
        }
        if (IS_WEB && snapshot !== null && this.props.layout && !(0, _web.getReducedMotionFromConfig)(this.props.layout)) {
          (0, _web.tryActivateLayoutTransition)(this.props, this._componentRef, snapshot);
        }
      }
    }, {
      key: "_configureLayoutTransition",
      value: function _configureLayoutTransition() {
        if (IS_WEB) {
          return;
        }
        var layout = this.props.layout ? (0, _animationBuilder.maybeBuild)(this.props.layout, undefined, AnimatedComponent.displayName) : undefined;
        (0, _UpdateLayoutAnimations.updateLayoutAnimations)(this.getComponentViewTag(), _layoutReanimation.LayoutAnimationType.LAYOUT, layout);
      }
    }, {
      key: "_configureSharedTransition",
      value: function _configureSharedTransition() {
        var _ref2, _this$props$sharedTra;
        var isUnmounting = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        if (IS_WEB) {
          return;
        }
        var sharedTransitionTag = this.props.sharedTransitionTag;
        if (!sharedTransitionTag) {
          var _this$_sharedElementT2;
          (_this$_sharedElementT2 = this._sharedElementTransition) == null || _this$_sharedElementT2.unregisterTransition(this.getComponentViewTag(), isUnmounting);
          this._sharedElementTransition = null;
          return;
        }
        var sharedElementTransition = (_ref2 = (_this$props$sharedTra = this.props.sharedTransitionStyle) != null ? _this$props$sharedTra : this._sharedElementTransition) != null ? _ref2 : new _layoutReanimation.SharedTransition();
        sharedElementTransition.registerTransition(this.getComponentViewTag(), sharedTransitionTag, isUnmounting);
        this._sharedElementTransition = sharedElementTransition;
      }
    }, {
      key: "getSnapshotBeforeUpdate",
      value: function getSnapshotBeforeUpdate() {
        var _this$_componentRef2;
        if (IS_WEB && ((_this$_componentRef2 = this._componentRef) == null ? void 0 : _this$_componentRef2.getBoundingClientRect) !== undefined) {
          return this._componentRef.getBoundingClientRect();
        }
        return null;
      }
    }, {
      key: "render",
      value: function render() {
        var _this$context3;
        var filteredProps = this._PropsFilter.filterNonAnimatedProps(this);
        if (IS_JEST) {
          filteredProps.jestAnimatedStyle = this.jestAnimatedStyle;
        }
        if (this._isFirstRender && IS_WEB && filteredProps.entering && !(0, _web.getReducedMotionFromConfig)(filteredProps.entering)) {
          var _filteredProps$style;
          filteredProps.style = Object.assign({}, (_filteredProps$style = filteredProps.style) != null ? _filteredProps$style : {}, {
            visibility: 'hidden'
          });
        }
        var platformProps = _reactNative.Platform.select({
          web: {},
          default: {
            collapsable: false
          }
        });
        var skipEntering = (_this$context3 = this.context) == null ? void 0 : _this$context3.current;
        var nativeID = skipEntering || !(0, _PlatformChecker.isFabric)() ? undefined : `${this.reanimatedID}`;
        var jestProps = IS_JEST ? {
          jestInlineStyle: this.props.style,
          jestAnimatedStyle: this.jestAnimatedStyle
        } : {};
        return (0, _jsxRuntime.jsx)(Component, Object.assign({
          nativeID: nativeID
        }, filteredProps, jestProps, {
          ref: this._setComponentRef
        }, platformProps));
      }
    }]);
  }(_react.default.Component);
  AnimatedComponent.contextType = _LayoutAnimationConfig.SkipEnteringContext;
  AnimatedComponent.displayName = `AnimatedComponent(${Component.displayName || Component.name || 'Component'})`;
  return _react.default.forwardRef(function (props, ref) {
    return (0, _jsxRuntime.jsx)(AnimatedComponent, Object.assign({}, props, ref === null ? null : {
      forwardedRef: ref
    }));
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX2NyZWF0ZUNsYXNzMiIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9nZXRQcm90b3R5cGVPZjIiLCJfaW5oZXJpdHMyIiwiX3JlYWN0IiwiX3JlYWN0TmF0aXZlIiwiX2ludmFyaWFudCIsIl9Db25maWdIZWxwZXIiLCJfZmluZEhvc3RJbnN0YW5jZSIsIl9jb3JlIiwiX2xheW91dFJlYW5pbWF0aW9uIiwiX2ZhYnJpY1V0aWxzIiwiX1Byb3BzUmVnaXN0cnkiLCJfdXRpbCIsIl9hbmltYXRpb25CdWlsZGVyIiwiX0xheW91dEFuaW1hdGlvbkNvbmZpZyIsIl9KU1Byb3BzVXBkYXRlciIsIl91dGlscyIsIl9zZXRBbmRGb3J3YXJkUmVmIiwiX1BsYXRmb3JtQ2hlY2tlciIsIl9JbmxpbmVQcm9wTWFuYWdlciIsIl9Qcm9wc0ZpbHRlciIsIl93ZWIiLCJfVXBkYXRlTGF5b3V0QW5pbWF0aW9ucyIsIl9kb21VdGlscyIsIl9nZXRWaWV3SW5mbzIiLCJfTmF0aXZlRXZlbnRzTWFuYWdlciIsIl9lcnJvcnMiLCJfanN4UnVudGltZSIsIl9jYWxsU3VwZXIiLCJ0IiwibyIsImUiLCJkZWZhdWx0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJjb25zdHJ1Y3RvciIsImFwcGx5IiwiQm9vbGVhbiIsInByb3RvdHlwZSIsInZhbHVlT2YiLCJjYWxsIiwiSVNfV0VCIiwiaXNXZWIiLCJJU19KRVNUIiwiaXNKZXN0IiwiU0hPVUxEX0JFX1VTRV9XRUIiLCJzaG91bGRCZVVzZVdlYiIsImNvbmZpZ3VyZVdlYkxheW91dEFuaW1hdGlvbnMiLCJvbmx5QW5pbWF0ZWRTdHlsZXMiLCJzdHlsZXMiLCJmaWx0ZXIiLCJzdHlsZSIsInZpZXdEZXNjcmlwdG9ycyIsImlkIiwiQ29tcG9uZW50Iiwib3B0aW9ucyIsImludmFyaWFudCIsImlzUmVhY3RDb21wb25lbnQiLCJuYW1lIiwiQW5pbWF0ZWRDb21wb25lbnQiLCJfcmVmIiwicHJvcHMiLCJfdGhpcyIsIl9zdHlsZXMiLCJfaXNGaXJzdFJlbmRlciIsImplc3RBbmltYXRlZFN0eWxlIiwiX2NvbXBvbmVudFJlZiIsIl9zaGFyZWRFbGVtZW50VHJhbnNpdGlvbiIsIl9qc1Byb3BzVXBkYXRlciIsIkpTUHJvcHNVcGRhdGVyIiwiSW5saW5lUHJvcE1hbmFnZXIiLCJQcm9wc0ZpbHRlciIsInJlYW5pbWF0ZWRJRCIsIl9yZXNvbHZlQ29tcG9uZW50UmVmIiwicmVmIiwiY29tcG9uZW50UmVmIiwiZ2V0QW5pbWF0YWJsZVJlZiIsIl9zZXRDb21wb25lbnRSZWYiLCJzZXRBbmRGb3J3YXJkUmVmIiwiZ2V0Rm9yd2FyZGVkUmVmIiwiZm9yd2FyZGVkUmVmIiwic2V0TG9jYWxSZWYiLCJfdmlld0luZm8iLCJ1bmRlZmluZWQiLCJ0YWciLCJnZXRDb21wb25lbnRWaWV3VGFnIiwiX3RoaXMkcHJvcHMiLCJsYXlvdXQiLCJlbnRlcmluZyIsImV4aXRpbmciLCJzaGFyZWRUcmFuc2l0aW9uVGFnIiwiX3RoaXMkY29udGV4dCIsImVuYWJsZUxheW91dEFuaW1hdGlvbnMiLCJfY29uZmlndXJlU2hhcmVkVHJhbnNpdGlvbiIsImlzRmFicmljIiwicmVkdWNlTW90aW9uSW5FeGl0aW5nIiwiZ2V0UmVkdWNlTW90aW9uIiwiZ2V0UmVkdWNlTW90aW9uRnJvbUNvbmZpZyIsIl90aGlzJHByb3BzMiIsInVwZGF0ZUxheW91dEFuaW1hdGlvbnMiLCJMYXlvdXRBbmltYXRpb25UeXBlIiwiRVhJVElORyIsIm1heWJlQnVpbGQiLCJkaXNwbGF5TmFtZSIsInNraXBFbnRlcmluZyIsImNvbnRleHQiLCJjdXJyZW50IiwiX3RoaXMkcHJvcHMzIiwiRU5URVJJTkciLCJfdGhpcyRwcm9wczQiLCJrZXkiLCJjb21wb25lbnREaWRNb3VudCIsIl90aGlzJF9OYXRpdmVFdmVudHNNYSIsIk5hdGl2ZUV2ZW50c01hbmFnZXIiLCJhdHRhY2hFdmVudHMiLCJhZGRPbkpTUHJvcHNDaGFuZ2VMaXN0ZW5lciIsIl9hdHRhY2hBbmltYXRlZFN0eWxlcyIsImF0dGFjaElubGluZVByb3BzIiwiX2dldFZpZXdJbmZvIiwiX2NvbmZpZ3VyZUxheW91dFRyYW5zaXRpb24iLCJfdGhpcyRjb250ZXh0MiIsInNhdmVTbmFwc2hvdCIsImdldFJlZHVjZWRNb3Rpb25Gcm9tQ29uZmlnIiwic3RhcnRXZWJMYXlvdXRBbmltYXRpb24iLCJ2aXNpYmlsaXR5IiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJfdGhpcyRfTmF0aXZlRXZlbnRzTWEyIiwiX3RoaXMkX3NoYXJlZEVsZW1lbnRUIiwiZGV0YWNoRXZlbnRzIiwicmVtb3ZlT25KU1Byb3BzQ2hhbmdlTGlzdGVuZXIiLCJfZGV0YWNoU3R5bGVzIiwiZGV0YWNoSW5saW5lUHJvcHMiLCJ1bnJlZ2lzdGVyVHJhbnNpdGlvbiIsImFkZEhUTUxNdXRhdGlvbk9ic2VydmVyIiwiX3RoaXMkcHJvcHM1Iiwidmlld1RhZyIsIl90aGlzJHByb3BzJGFuaW1hdGVkUCIsInJlbW92ZSIsImFuaW1hdGVkUHJvcHMiLCJyZW1vdmVGcm9tUHJvcHNSZWdpc3RyeSIsIl91cGRhdGVGcm9tTmF0aXZlIiwic2V0TmF0aXZlUHJvcHMiLCJfdGhpcyRfY29tcG9uZW50UmVmIiwidmlld05hbWUiLCJzaGFkb3dOb2RlV3JhcHBlciIsInZpZXdDb25maWciLCJob3N0SW5zdGFuY2UiLCJmaW5kSG9zdEluc3RhbmNlIiwiUmVhbmltYXRlZEVycm9yIiwidmlld0luZm8iLCJnZXRWaWV3SW5mbyIsImdldFNoYWRvd05vZGVXcmFwcGVyRnJvbVJlZiIsIl90aGlzJHByb3BzJGFuaW1hdGVkUDIiLCJfdGhpczIiLCJfdGhpcyRwcm9wcyRhbmltYXRlZFAzIiwiZmxhdHRlbkFycmF5IiwicHJldlN0eWxlcyIsInByZXZBbmltYXRlZFByb3BzIiwiX2FuaW1hdGVkUHJvcHMiLCJfdGhpcyRfZ2V0Vmlld0luZm8iLCJoYXNSZWFuaW1hdGVkMlByb3BzIiwibGVuZ3RoIiwiYWRhcHRWaWV3Q29uZmlnIiwiaGFzT25lU2FtZVN0eWxlIiwiX2xvb3AiLCJwcmV2U3R5bGUiLCJpc1ByZXNlbnQiLCJzb21lIiwiZm9yRWFjaCIsImFkZCIsImFzc2lnbiIsImluaXRpYWwiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJfcHJldlN0YXRlIiwic25hcHNob3QiLCJfdGhpcyRfTmF0aXZlRXZlbnRzTWEzIiwib2xkTGF5b3V0IiwidXBkYXRlRXZlbnRzIiwidHJ5QWN0aXZhdGVMYXlvdXRUcmFuc2l0aW9uIiwiTEFZT1VUIiwiX3JlZjIiLCJfdGhpcyRwcm9wcyRzaGFyZWRUcmEiLCJpc1VubW91bnRpbmciLCJhcmd1bWVudHMiLCJfdGhpcyRfc2hhcmVkRWxlbWVudFQyIiwic2hhcmVkRWxlbWVudFRyYW5zaXRpb24iLCJzaGFyZWRUcmFuc2l0aW9uU3R5bGUiLCJTaGFyZWRUcmFuc2l0aW9uIiwicmVnaXN0ZXJUcmFuc2l0aW9uIiwiZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUiLCJfdGhpcyRfY29tcG9uZW50UmVmMiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJlbmRlciIsIl90aGlzJGNvbnRleHQzIiwiZmlsdGVyZWRQcm9wcyIsImZpbHRlck5vbkFuaW1hdGVkUHJvcHMiLCJfZmlsdGVyZWRQcm9wcyRzdHlsZSIsInBsYXRmb3JtUHJvcHMiLCJQbGF0Zm9ybSIsInNlbGVjdCIsIndlYiIsImNvbGxhcHNhYmxlIiwibmF0aXZlSUQiLCJqZXN0UHJvcHMiLCJqZXN0SW5saW5lU3R5bGUiLCJqc3giLCJSZWFjdCIsImNvbnRleHRUeXBlIiwiU2tpcEVudGVyaW5nQ29udGV4dCIsImZvcndhcmRSZWYiXSwic291cmNlcyI6WyJjcmVhdGVBbmltYXRlZENvbXBvbmVudC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHR5cGUge1xuICBDb21wb25lbnQsXG4gIENvbXBvbmVudENsYXNzLFxuICBDb21wb25lbnRUeXBlLFxuICBGdW5jdGlvbkNvbXBvbmVudCxcbiAgTXV0YWJsZVJlZk9iamVjdCxcbn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCAnLi4vbGF5b3V0UmVhbmltYXRpb24vYW5pbWF0aW9uc01hbmFnZXInO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuaW1wb3J0IHsgYWRhcHRWaWV3Q29uZmlnIH0gZnJvbSAnLi4vQ29uZmlnSGVscGVyJztcbmltcG9ydCB7IGZpbmRIb3N0SW5zdGFuY2UgfSBmcm9tICcuLi9wbGF0Zm9ybS1zcGVjaWZpYy9maW5kSG9zdEluc3RhbmNlJztcbmltcG9ydCB7IGVuYWJsZUxheW91dEFuaW1hdGlvbnMgfSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IFNoYXJlZFRyYW5zaXRpb24sIExheW91dEFuaW1hdGlvblR5cGUgfSBmcm9tICcuLi9sYXlvdXRSZWFuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7IFN0eWxlUHJvcHMsIFNoYWRvd05vZGVXcmFwcGVyIH0gZnJvbSAnLi4vY29tbW9uVHlwZXMnO1xuaW1wb3J0IHsgZ2V0U2hhZG93Tm9kZVdyYXBwZXJGcm9tUmVmIH0gZnJvbSAnLi4vZmFicmljVXRpbHMnO1xuaW1wb3J0IHsgcmVtb3ZlRnJvbVByb3BzUmVnaXN0cnkgfSBmcm9tICcuLi9Qcm9wc1JlZ2lzdHJ5JztcbmltcG9ydCB7IGdldFJlZHVjZU1vdGlvbkZyb21Db25maWcgfSBmcm9tICcuLi9hbmltYXRpb24vdXRpbCc7XG5pbXBvcnQgeyBtYXliZUJ1aWxkIH0gZnJvbSAnLi4vYW5pbWF0aW9uQnVpbGRlcic7XG5pbXBvcnQgeyBTa2lwRW50ZXJpbmdDb250ZXh0IH0gZnJvbSAnLi4vY29tcG9uZW50L0xheW91dEFuaW1hdGlvbkNvbmZpZyc7XG5pbXBvcnQgdHlwZSB7IEFuaW1hdGVQcm9wcyB9IGZyb20gJy4uL2hlbHBlclR5cGVzJztcbmltcG9ydCBKU1Byb3BzVXBkYXRlciBmcm9tICcuL0pTUHJvcHNVcGRhdGVyJztcbmltcG9ydCB0eXBlIHtcbiAgQW5pbWF0ZWRDb21wb25lbnRQcm9wcyxcbiAgQW5pbWF0ZWRQcm9wcyxcbiAgSW5pdGlhbENvbXBvbmVudFByb3BzLFxuICBBbmltYXRlZENvbXBvbmVudFJlZixcbiAgSUFuaW1hdGVkQ29tcG9uZW50SW50ZXJuYWwsXG4gIFZpZXdJbmZvLFxuICBJTmF0aXZlRXZlbnRzTWFuYWdlcixcbiAgTmVzdGVkQXJyYXksXG59IGZyb20gJy4vY29tbW9uVHlwZXMnO1xuaW1wb3J0IHsgZmxhdHRlbkFycmF5IH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgc2V0QW5kRm9yd2FyZFJlZiBmcm9tICcuL3NldEFuZEZvcndhcmRSZWYnO1xuaW1wb3J0IHsgaXNGYWJyaWMsIGlzSmVzdCwgaXNXZWIsIHNob3VsZEJlVXNlV2ViIH0gZnJvbSAnLi4vUGxhdGZvcm1DaGVja2VyJztcbmltcG9ydCB7IElubGluZVByb3BNYW5hZ2VyIH0gZnJvbSAnLi9JbmxpbmVQcm9wTWFuYWdlcic7XG5pbXBvcnQgeyBQcm9wc0ZpbHRlciB9IGZyb20gJy4vUHJvcHNGaWx0ZXInO1xuaW1wb3J0IHtcbiAgc3RhcnRXZWJMYXlvdXRBbmltYXRpb24sXG4gIHRyeUFjdGl2YXRlTGF5b3V0VHJhbnNpdGlvbixcbiAgY29uZmlndXJlV2ViTGF5b3V0QW5pbWF0aW9ucyxcbiAgZ2V0UmVkdWNlZE1vdGlvbkZyb21Db25maWcsXG4gIHNhdmVTbmFwc2hvdCxcbn0gZnJvbSAnLi4vbGF5b3V0UmVhbmltYXRpb24vd2ViJztcbmltcG9ydCB7IHVwZGF0ZUxheW91dEFuaW1hdGlvbnMgfSBmcm9tICcuLi9VcGRhdGVMYXlvdXRBbmltYXRpb25zJztcbmltcG9ydCB0eXBlIHsgQ3VzdG9tQ29uZmlnIH0gZnJvbSAnLi4vbGF5b3V0UmVhbmltYXRpb24vd2ViL2NvbmZpZyc7XG5pbXBvcnQgdHlwZSB7IEZsYXRMaXN0LCBGbGF0TGlzdFByb3BzIH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCB7IGFkZEhUTUxNdXRhdGlvbk9ic2VydmVyIH0gZnJvbSAnLi4vbGF5b3V0UmVhbmltYXRpb24vd2ViL2RvbVV0aWxzJztcbmltcG9ydCB7IGdldFZpZXdJbmZvIH0gZnJvbSAnLi9nZXRWaWV3SW5mbyc7XG5pbXBvcnQgeyBOYXRpdmVFdmVudHNNYW5hZ2VyIH0gZnJvbSAnLi9OYXRpdmVFdmVudHNNYW5hZ2VyJztcbmltcG9ydCB0eXBlIHsgUmVhbmltYXRlZEhUTUxFbGVtZW50IH0gZnJvbSAnLi4vanMtcmVhbmltYXRlZCc7XG5pbXBvcnQgeyBSZWFuaW1hdGVkRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMnO1xuXG5jb25zdCBJU19XRUIgPSBpc1dlYigpO1xuY29uc3QgSVNfSkVTVCA9IGlzSmVzdCgpO1xuY29uc3QgU0hPVUxEX0JFX1VTRV9XRUIgPSBzaG91bGRCZVVzZVdlYigpO1xuXG5pZiAoSVNfV0VCKSB7XG4gIGNvbmZpZ3VyZVdlYkxheW91dEFuaW1hdGlvbnMoKTtcbn1cblxuZnVuY3Rpb24gb25seUFuaW1hdGVkU3R5bGVzKHN0eWxlczogU3R5bGVQcm9wc1tdKTogU3R5bGVQcm9wc1tdIHtcbiAgcmV0dXJuIHN0eWxlcy5maWx0ZXIoKHN0eWxlKSA9PiBzdHlsZT8udmlld0Rlc2NyaXB0b3JzKTtcbn1cblxudHlwZSBPcHRpb25zPFA+ID0ge1xuICBzZXROYXRpdmVQcm9wczogKHJlZjogQW5pbWF0ZWRDb21wb25lbnRSZWYsIHByb3BzOiBQKSA9PiB2b2lkO1xufTtcblxuLyoqXG4gKiBMZXRzIHlvdSBjcmVhdGUgYW4gQW5pbWF0ZWQgdmVyc2lvbiBvZiBhbnkgUmVhY3QgTmF0aXZlIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gVGhlIGNvbXBvbmVudCB5b3Ugd2FudCB0byBtYWtlIGFuaW1hdGFibGUuXG4gKiBAcmV0dXJucyBBIGNvbXBvbmVudCB0aGF0IFJlYW5pbWF0ZWQgaXMgY2FwYWJsZSBvZiBhbmltYXRpbmcuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5zd21hbnNpb24uY29tL3JlYWN0LW5hdGl2ZS1yZWFuaW1hdGVkL2RvY3MvY29yZS9jcmVhdGVBbmltYXRlZENvbXBvbmVudFxuICovXG5cbi8vIERvbid0IGNoYW5nZSB0aGUgb3JkZXIgb2Ygb3ZlcmxvYWRzLCBzaW5jZSBzdWNoIGEgY2hhbmdlIGJyZWFrcyBjdXJyZW50IGJlaGF2aW9yXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQ8UCBleHRlbmRzIG9iamVjdD4oXG4gIGNvbXBvbmVudDogRnVuY3Rpb25Db21wb25lbnQ8UD4sXG4gIG9wdGlvbnM/OiBPcHRpb25zPFA+XG4pOiBGdW5jdGlvbkNvbXBvbmVudDxBbmltYXRlUHJvcHM8UD4+O1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQ8UCBleHRlbmRzIG9iamVjdD4oXG4gIGNvbXBvbmVudDogQ29tcG9uZW50Q2xhc3M8UD4sXG4gIG9wdGlvbnM/OiBPcHRpb25zPFA+XG4pOiBDb21wb25lbnRDbGFzczxBbmltYXRlUHJvcHM8UD4+O1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQ8UCBleHRlbmRzIG9iamVjdD4oXG4gIC8vIEFjdHVhbGx5IENvbXBvbmVudFR5cGU8UCA9IHt9PiA9IENvbXBvbmVudENsYXNzPFA+IHwgRnVuY3Rpb25Db21wb25lbnQ8UD4gYnV0IHdlIG5lZWQgdGhpcyBvdmVybG9hZCB0b29cbiAgLy8gc2luY2Ugc29tZSBleHRlcm5hbCBjb21wb25lbnRzIChsaWtlIEZhc3RJbWFnZSkgYXJlIHR5cGVkIGp1c3QgYXMgQ29tcG9uZW50VHlwZVxuICBjb21wb25lbnQ6IENvbXBvbmVudFR5cGU8UD4sXG4gIG9wdGlvbnM/OiBPcHRpb25zPFA+XG4pOiBGdW5jdGlvbkNvbXBvbmVudDxBbmltYXRlUHJvcHM8UD4+IHwgQ29tcG9uZW50Q2xhc3M8QW5pbWF0ZVByb3BzPFA+PjtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBBbmltYXRlZC5GbGF0TGlzdGAgY29tcG9uZW50IGluc3RlYWQgb2YgY2FsbGluZ1xuICogICBgQW5pbWF0ZWQuY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQoRmxhdExpc3QpYCBtYW51YWxseS5cbiAqL1xuLy8gQHRzLWlnbm9yZSBUaGlzIGlzIHJlcXVpcmVkIHRvIGNyZWF0ZSB0aGlzIG92ZXJsb2FkLCBzaW5jZSB0eXBlIG9mIGNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50IGlzIGluY29ycmVjdCBhbmQgZG9lc24ndCBpbmNsdWRlIHR5cGVvZiBGbGF0TGlzdFxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50KFxuICBjb21wb25lbnQ6IHR5cGVvZiBGbGF0TGlzdDx1bmtub3duPixcbiAgb3B0aW9ucz86IE9wdGlvbnM8YW55PlxuKTogQ29tcG9uZW50Q2xhc3M8QW5pbWF0ZVByb3BzPEZsYXRMaXN0UHJvcHM8dW5rbm93bj4+PjtcblxubGV0IGlkID0gMDtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50KFxuICBDb21wb25lbnQ6IENvbXBvbmVudFR5cGU8SW5pdGlhbENvbXBvbmVudFByb3BzPixcbiAgb3B0aW9ucz86IE9wdGlvbnM8SW5pdGlhbENvbXBvbmVudFByb3BzPlxuKTogYW55IHtcbiAgaW52YXJpYW50KFxuICAgIHR5cGVvZiBDb21wb25lbnQgIT09ICdmdW5jdGlvbicgfHxcbiAgICAgIChDb21wb25lbnQucHJvdG90eXBlICYmIENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCksXG4gICAgYExvb2tzIGxpa2UgeW91J3JlIHBhc3NpbmcgYSBmdW5jdGlvbiBjb21wb25lbnQgXFxgJHtDb21wb25lbnQubmFtZX1cXGAgdG8gXFxgY3JlYXRlQW5pbWF0ZWRDb21wb25lbnRcXGAgZnVuY3Rpb24gd2hpY2ggc3VwcG9ydHMgb25seSBjbGFzcyBjb21wb25lbnRzLiBQbGVhc2Ugd3JhcCB5b3VyIGZ1bmN0aW9uIGNvbXBvbmVudCB3aXRoIFxcYFJlYWN0LmZvcndhcmRSZWYoKVxcYCBvciB1c2UgYSBjbGFzcyBjb21wb25lbnQgaW5zdGVhZC5gXG4gICk7XG5cbiAgY2xhc3MgQW5pbWF0ZWRDb21wb25lbnRcbiAgICBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxBbmltYXRlZENvbXBvbmVudFByb3BzPEluaXRpYWxDb21wb25lbnRQcm9wcz4+XG4gICAgaW1wbGVtZW50cyBJQW5pbWF0ZWRDb21wb25lbnRJbnRlcm5hbFxuICB7XG4gICAgX3N0eWxlczogU3R5bGVQcm9wc1tdIHwgbnVsbCA9IG51bGw7XG4gICAgX2FuaW1hdGVkUHJvcHM/OiBQYXJ0aWFsPEFuaW1hdGVkQ29tcG9uZW50UHJvcHM8QW5pbWF0ZWRQcm9wcz4+O1xuICAgIF9pc0ZpcnN0UmVuZGVyID0gdHJ1ZTtcbiAgICBqZXN0SW5saW5lU3R5bGU6IE5lc3RlZEFycmF5PFN0eWxlUHJvcHM+IHwgdW5kZWZpbmVkO1xuICAgIGplc3RBbmltYXRlZFN0eWxlOiB7IHZhbHVlOiBTdHlsZVByb3BzIH0gPSB7IHZhbHVlOiB7fSB9O1xuICAgIF9jb21wb25lbnRSZWY6IEFuaW1hdGVkQ29tcG9uZW50UmVmIHwgSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBfc2hhcmVkRWxlbWVudFRyYW5zaXRpb246IFNoYXJlZFRyYW5zaXRpb24gfCBudWxsID0gbnVsbDtcbiAgICBfanNQcm9wc1VwZGF0ZXIgPSBuZXcgSlNQcm9wc1VwZGF0ZXIoKTtcbiAgICBfSW5saW5lUHJvcE1hbmFnZXIgPSBuZXcgSW5saW5lUHJvcE1hbmFnZXIoKTtcbiAgICBfUHJvcHNGaWx0ZXIgPSBuZXcgUHJvcHNGaWx0ZXIoKTtcbiAgICBfTmF0aXZlRXZlbnRzTWFuYWdlcj86IElOYXRpdmVFdmVudHNNYW5hZ2VyO1xuICAgIF92aWV3SW5mbz86IFZpZXdJbmZvO1xuICAgIHN0YXRpYyBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICAgIHN0YXRpYyBjb250ZXh0VHlwZSA9IFNraXBFbnRlcmluZ0NvbnRleHQ7XG4gICAgY29udGV4dCE6IFJlYWN0LkNvbnRleHRUeXBlPHR5cGVvZiBTa2lwRW50ZXJpbmdDb250ZXh0PjtcbiAgICByZWFuaW1hdGVkSUQgPSBpZCsrO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IEFuaW1hdGVkQ29tcG9uZW50UHJvcHM8SW5pdGlhbENvbXBvbmVudFByb3BzPikge1xuICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgaWYgKElTX0pFU1QpIHtcbiAgICAgICAgdGhpcy5qZXN0QW5pbWF0ZWRTdHlsZSA9IHsgdmFsdWU6IHt9IH07XG4gICAgICB9XG4gICAgICBjb25zdCBlbnRlcmluZyA9IHRoaXMucHJvcHMuZW50ZXJpbmc7XG4gICAgICBpZiAoZW50ZXJpbmcgJiYgaXNGYWJyaWMoKSkge1xuICAgICAgICB1cGRhdGVMYXlvdXRBbmltYXRpb25zKFxuICAgICAgICAgIHRoaXMucmVhbmltYXRlZElELFxuICAgICAgICAgIExheW91dEFuaW1hdGlvblR5cGUuRU5URVJJTkcsXG4gICAgICAgICAgbWF5YmVCdWlsZChlbnRlcmluZywgdGhpcy5wcm9wcz8uc3R5bGUsIEFuaW1hdGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaWYgKCFJU19XRUIpIHtcbiAgICAgICAgLy8gSXQgZXhpc3RzIG9ubHkgb24gbmF0aXZlIHBsYXRmb3Jtcy4gV2UgaW5pdGlhbGl6ZSBpdCBoZXJlIGJlY2F1c2UgdGhlIHJlZiB0byB0aGUgYW5pbWF0ZWQgY29tcG9uZW50IGlzIGF2YWlsYWJsZSBvbmx5IHBvc3QtbW91bnRcbiAgICAgICAgdGhpcy5fTmF0aXZlRXZlbnRzTWFuYWdlciA9IG5ldyBOYXRpdmVFdmVudHNNYW5hZ2VyKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgdGhpcy5fTmF0aXZlRXZlbnRzTWFuYWdlcj8uYXR0YWNoRXZlbnRzKCk7XG4gICAgICB0aGlzLl9qc1Byb3BzVXBkYXRlci5hZGRPbkpTUHJvcHNDaGFuZ2VMaXN0ZW5lcih0aGlzKTtcbiAgICAgIHRoaXMuX2F0dGFjaEFuaW1hdGVkU3R5bGVzKCk7XG4gICAgICB0aGlzLl9JbmxpbmVQcm9wTWFuYWdlci5hdHRhY2hJbmxpbmVQcm9wcyh0aGlzLCB0aGlzLl9nZXRWaWV3SW5mbygpKTtcblxuICAgICAgY29uc3QgbGF5b3V0ID0gdGhpcy5wcm9wcy5sYXlvdXQ7XG4gICAgICBpZiAobGF5b3V0KSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZ3VyZUxheW91dFRyYW5zaXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKElTX1dFQikge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5leGl0aW5nKSB7XG4gICAgICAgICAgc2F2ZVNuYXBzaG90KHRoaXMuX2NvbXBvbmVudFJlZiBhcyBIVE1MRWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgIXRoaXMucHJvcHMuZW50ZXJpbmcgfHxcbiAgICAgICAgICBnZXRSZWR1Y2VkTW90aW9uRnJvbUNvbmZpZyh0aGlzLnByb3BzLmVudGVyaW5nIGFzIEN1c3RvbUNvbmZpZylcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5faXNGaXJzdFJlbmRlciA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNraXBFbnRlcmluZyA9IHRoaXMuY29udGV4dD8uY3VycmVudDtcblxuICAgICAgICBpZiAoIXNraXBFbnRlcmluZykge1xuICAgICAgICAgIHN0YXJ0V2ViTGF5b3V0QW5pbWF0aW9uKFxuICAgICAgICAgICAgdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudFJlZiBhcyBSZWFuaW1hdGVkSFRNTEVsZW1lbnQsXG4gICAgICAgICAgICBMYXlvdXRBbmltYXRpb25UeXBlLkVOVEVSSU5HXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAodGhpcy5fY29tcG9uZW50UmVmIGFzIEhUTUxFbGVtZW50KS5zdHlsZS52aXNpYmlsaXR5ID0gJ2luaXRpYWwnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2lzRmlyc3RSZW5kZXIgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRoaXMuX05hdGl2ZUV2ZW50c01hbmFnZXI/LmRldGFjaEV2ZW50cygpO1xuICAgICAgdGhpcy5fanNQcm9wc1VwZGF0ZXIucmVtb3ZlT25KU1Byb3BzQ2hhbmdlTGlzdGVuZXIodGhpcyk7XG4gICAgICB0aGlzLl9kZXRhY2hTdHlsZXMoKTtcbiAgICAgIHRoaXMuX0lubGluZVByb3BNYW5hZ2VyLmRldGFjaElubGluZVByb3BzKCk7XG4gICAgICBpZiAodGhpcy5wcm9wcy5zaGFyZWRUcmFuc2l0aW9uVGFnKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZ3VyZVNoYXJlZFRyYW5zaXRpb24odHJ1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zaGFyZWRFbGVtZW50VHJhbnNpdGlvbj8udW5yZWdpc3RlclRyYW5zaXRpb24oXG4gICAgICAgIHRoaXMuZ2V0Q29tcG9uZW50Vmlld1RhZygpLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuXG4gICAgICBjb25zdCBleGl0aW5nID0gdGhpcy5wcm9wcy5leGl0aW5nO1xuXG4gICAgICBpZiAoXG4gICAgICAgIElTX1dFQiAmJlxuICAgICAgICB0aGlzLl9jb21wb25lbnRSZWYgJiZcbiAgICAgICAgZXhpdGluZyAmJlxuICAgICAgICAhZ2V0UmVkdWNlZE1vdGlvbkZyb21Db25maWcoZXhpdGluZyBhcyBDdXN0b21Db25maWcpXG4gICAgICApIHtcbiAgICAgICAgYWRkSFRNTE11dGF0aW9uT2JzZXJ2ZXIoKTtcblxuICAgICAgICBzdGFydFdlYkxheW91dEFuaW1hdGlvbihcbiAgICAgICAgICB0aGlzLnByb3BzLFxuICAgICAgICAgIHRoaXMuX2NvbXBvbmVudFJlZiBhcyBSZWFuaW1hdGVkSFRNTEVsZW1lbnQsXG4gICAgICAgICAgTGF5b3V0QW5pbWF0aW9uVHlwZS5FWElUSU5HXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGV4aXRpbmcgJiYgIUlTX1dFQiAmJiAhaXNGYWJyaWMoKSkge1xuICAgICAgICBjb25zdCByZWR1Y2VNb3Rpb25JbkV4aXRpbmcgPVxuICAgICAgICAgICdnZXRSZWR1Y2VNb3Rpb24nIGluIGV4aXRpbmcgJiZcbiAgICAgICAgICB0eXBlb2YgZXhpdGluZy5nZXRSZWR1Y2VNb3Rpb24gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgID8gZ2V0UmVkdWNlTW90aW9uRnJvbUNvbmZpZyhleGl0aW5nLmdldFJlZHVjZU1vdGlvbigpKVxuICAgICAgICAgICAgOiBnZXRSZWR1Y2VNb3Rpb25Gcm9tQ29uZmlnKCk7XG4gICAgICAgIGlmICghcmVkdWNlTW90aW9uSW5FeGl0aW5nKSB7XG4gICAgICAgICAgdXBkYXRlTGF5b3V0QW5pbWF0aW9ucyhcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29tcG9uZW50Vmlld1RhZygpLFxuICAgICAgICAgICAgTGF5b3V0QW5pbWF0aW9uVHlwZS5FWElUSU5HLFxuICAgICAgICAgICAgbWF5YmVCdWlsZChcbiAgICAgICAgICAgICAgZXhpdGluZyxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcz8uc3R5bGUsXG4gICAgICAgICAgICAgIEFuaW1hdGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGdldENvbXBvbmVudFZpZXdUYWcoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0Vmlld0luZm8oKS52aWV3VGFnIGFzIG51bWJlcjtcbiAgICB9XG5cbiAgICBfZGV0YWNoU3R5bGVzKCkge1xuICAgICAgY29uc3Qgdmlld1RhZyA9IHRoaXMuZ2V0Q29tcG9uZW50Vmlld1RhZygpO1xuICAgICAgaWYgKHZpZXdUYWcgIT09IC0xICYmIHRoaXMuX3N0eWxlcyAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGNvbnN0IHN0eWxlIG9mIHRoaXMuX3N0eWxlcykge1xuICAgICAgICAgIHN0eWxlLnZpZXdEZXNjcmlwdG9ycy5yZW1vdmUodmlld1RhZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYW5pbWF0ZWRQcm9wcz8udmlld0Rlc2NyaXB0b3JzKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5hbmltYXRlZFByb3BzLnZpZXdEZXNjcmlwdG9ycy5yZW1vdmUodmlld1RhZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRmFicmljKCkpIHtcbiAgICAgICAgICByZW1vdmVGcm9tUHJvcHNSZWdpc3RyeSh2aWV3VGFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIF91cGRhdGVGcm9tTmF0aXZlKHByb3BzOiBTdHlsZVByb3BzKSB7XG4gICAgICBpZiAob3B0aW9ucz8uc2V0TmF0aXZlUHJvcHMpIHtcbiAgICAgICAgb3B0aW9ucy5zZXROYXRpdmVQcm9wcyhcbiAgICAgICAgICB0aGlzLl9jb21wb25lbnRSZWYgYXMgQW5pbWF0ZWRDb21wb25lbnRSZWYsXG4gICAgICAgICAgcHJvcHNcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICh0aGlzLl9jb21wb25lbnRSZWYgYXMgQW5pbWF0ZWRDb21wb25lbnRSZWYpPy5zZXROYXRpdmVQcm9wcz8uKHByb3BzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfZ2V0Vmlld0luZm8oKTogVmlld0luZm8ge1xuICAgICAgaWYgKHRoaXMuX3ZpZXdJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZXdJbmZvO1xuICAgICAgfVxuXG4gICAgICBsZXQgdmlld1RhZzogbnVtYmVyIHwgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgbGV0IHZpZXdOYW1lOiBzdHJpbmcgfCBudWxsO1xuICAgICAgbGV0IHNoYWRvd05vZGVXcmFwcGVyOiBTaGFkb3dOb2RlV3JhcHBlciB8IG51bGwgPSBudWxsO1xuICAgICAgbGV0IHZpZXdDb25maWc7XG5cbiAgICAgIGlmIChTSE9VTERfQkVfVVNFX1dFQikge1xuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IEkgYXNzdW1lIHRoYXQgYF9zZXRDb21wb25lbnRSZWZgIHdhcyBhbHJlYWR5IGNhbGxlZCBhbmQgYF9jb21wb25lbnRgIGlzIHNldC5cbiAgICAgICAgLy8gYHRoaXMuX2NvbXBvbmVudGAgb24gd2ViIHJlcHJlc2VudHMgSFRNTEVsZW1lbnQgb2Ygb3VyIGNvbXBvbmVudCwgdGhhdCdzIHdoeSB3ZSB1c2UgY2FzdGluZ1xuICAgICAgICB2aWV3VGFnID0gdGhpcy5fY29tcG9uZW50UmVmIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICB2aWV3TmFtZSA9IG51bGw7XG4gICAgICAgIHNoYWRvd05vZGVXcmFwcGVyID0gbnVsbDtcbiAgICAgICAgdmlld0NvbmZpZyA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBob3N0SW5zdGFuY2UgPSBmaW5kSG9zdEluc3RhbmNlKHRoaXMpO1xuICAgICAgICBpZiAoIWhvc3RJbnN0YW5jZSkge1xuICAgICAgICAgIC8qIFxuICAgICAgICAgICAgZmluZEhvc3RJbnN0YW5jZSBjYW4gcmV0dXJuIG51bGwgZm9yIGEgY29tcG9uZW50IHRoYXQgZG9lc24ndCByZW5kZXIgYW55dGhpbmcgXG4gICAgICAgICAgICAocmVuZGVyIGZ1bmN0aW9uIHJldHVybnMgbnVsbCkuIEV4YW1wbGU6IFxuICAgICAgICAgICAgc3ZnIFN0b3A6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1uYXRpdmUtc3ZnL3JlYWN0LW5hdGl2ZS1zdmcvYmxvYi9kZXZlbG9wL3NyYy9lbGVtZW50cy9TdG9wLnRzeFxuICAgICAgICAgICovXG4gICAgICAgICAgdGhyb3cgbmV3IFJlYW5pbWF0ZWRFcnJvcihcbiAgICAgICAgICAgICdDYW5ub3QgZmluZCBob3N0IGluc3RhbmNlIGZvciB0aGlzIGNvbXBvbmVudC4gTWF5YmUgaXQgcmVuZGVycyBub3RoaW5nPydcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgdmlld0luZm8gPSBnZXRWaWV3SW5mbyhob3N0SW5zdGFuY2UpO1xuICAgICAgICB2aWV3VGFnID0gdmlld0luZm8udmlld1RhZztcbiAgICAgICAgdmlld05hbWUgPSB2aWV3SW5mby52aWV3TmFtZTtcbiAgICAgICAgdmlld0NvbmZpZyA9IHZpZXdJbmZvLnZpZXdDb25maWc7XG4gICAgICAgIHNoYWRvd05vZGVXcmFwcGVyID0gaXNGYWJyaWMoKVxuICAgICAgICAgID8gZ2V0U2hhZG93Tm9kZVdyYXBwZXJGcm9tUmVmKHRoaXMsIGhvc3RJbnN0YW5jZSlcbiAgICAgICAgICA6IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLl92aWV3SW5mbyA9IHsgdmlld1RhZywgdmlld05hbWUsIHNoYWRvd05vZGVXcmFwcGVyLCB2aWV3Q29uZmlnIH07XG4gICAgICByZXR1cm4gdGhpcy5fdmlld0luZm87XG4gICAgfVxuXG4gICAgX2F0dGFjaEFuaW1hdGVkU3R5bGVzKCkge1xuICAgICAgY29uc3Qgc3R5bGVzID0gdGhpcy5wcm9wcy5zdHlsZVxuICAgICAgICA/IG9ubHlBbmltYXRlZFN0eWxlcyhmbGF0dGVuQXJyYXk8U3R5bGVQcm9wcz4odGhpcy5wcm9wcy5zdHlsZSkpXG4gICAgICAgIDogW107XG4gICAgICBjb25zdCBwcmV2U3R5bGVzID0gdGhpcy5fc3R5bGVzO1xuICAgICAgdGhpcy5fc3R5bGVzID0gc3R5bGVzO1xuXG4gICAgICBjb25zdCBwcmV2QW5pbWF0ZWRQcm9wcyA9IHRoaXMuX2FuaW1hdGVkUHJvcHM7XG4gICAgICB0aGlzLl9hbmltYXRlZFByb3BzID0gdGhpcy5wcm9wcy5hbmltYXRlZFByb3BzO1xuXG4gICAgICBjb25zdCB7IHZpZXdUYWcsIHZpZXdOYW1lLCBzaGFkb3dOb2RlV3JhcHBlciwgdmlld0NvbmZpZyB9ID1cbiAgICAgICAgdGhpcy5fZ2V0Vmlld0luZm8oKTtcblxuICAgICAgLy8gdXBkYXRlIFVJIHByb3BzIHdoaXRlbGlzdCBmb3IgdGhpcyB2aWV3XG4gICAgICBjb25zdCBoYXNSZWFuaW1hdGVkMlByb3BzID1cbiAgICAgICAgdGhpcy5wcm9wcy5hbmltYXRlZFByb3BzPy52aWV3RGVzY3JpcHRvcnMgfHwgc3R5bGVzLmxlbmd0aDtcbiAgICAgIGlmIChoYXNSZWFuaW1hdGVkMlByb3BzICYmIHZpZXdDb25maWcpIHtcbiAgICAgICAgYWRhcHRWaWV3Q29uZmlnKHZpZXdDb25maWcpO1xuICAgICAgfVxuXG4gICAgICAvLyByZW1vdmUgb2xkIHN0eWxlc1xuICAgICAgaWYgKHByZXZTdHlsZXMpIHtcbiAgICAgICAgLy8gaW4gbW9zdCBvZiB0aGUgY2FzZXMsIHZpZXdzIGhhdmUgb25seSBhIHNpbmdsZSBhbmltYXRlZCBzdHlsZSBhbmQgaXQgcmVtYWlucyB1bmNoYW5nZWRcbiAgICAgICAgY29uc3QgaGFzT25lU2FtZVN0eWxlID1cbiAgICAgICAgICBzdHlsZXMubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgcHJldlN0eWxlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICBzdHlsZXNbMF0gPT09IHByZXZTdHlsZXNbMF07XG5cbiAgICAgICAgaWYgKCFoYXNPbmVTYW1lU3R5bGUpIHtcbiAgICAgICAgICAvLyBvdGhlcndpc2UsIHJlbW92ZSBlYWNoIHN0eWxlIHRoYXQgaXMgbm90IHByZXNlbnQgaW4gbmV3IHN0eWxlc1xuICAgICAgICAgIGZvciAoY29uc3QgcHJldlN0eWxlIG9mIHByZXZTdHlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzUHJlc2VudCA9IHN0eWxlcy5zb21lKChzdHlsZSkgPT4gc3R5bGUgPT09IHByZXZTdHlsZSk7XG4gICAgICAgICAgICBpZiAoIWlzUHJlc2VudCkge1xuICAgICAgICAgICAgICBwcmV2U3R5bGUudmlld0Rlc2NyaXB0b3JzLnJlbW92ZSh2aWV3VGFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3R5bGVzLmZvckVhY2goKHN0eWxlKSA9PiB7XG4gICAgICAgIHN0eWxlLnZpZXdEZXNjcmlwdG9ycy5hZGQoe1xuICAgICAgICAgIHRhZzogdmlld1RhZyxcbiAgICAgICAgICBuYW1lOiB2aWV3TmFtZSxcbiAgICAgICAgICBzaGFkb3dOb2RlV3JhcHBlcixcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChJU19KRVNUKSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogV2UgbmVlZCB0byBjb25uZWN0IEplc3QncyBUZXN0T2JqZWN0IGluc3RhbmNlIHdob3NlIGNvbnRhaW5zIGp1c3RcbiAgICAgICAgICAgKiBwcm9wcyBvYmplY3Qgd2l0aCB0aGUgdXBkYXRlUHJvcHMoKSBmdW5jdGlvbiB3aGVyZSB3ZSB1cGRhdGUgdGhlXG4gICAgICAgICAgICogcHJvcGVydGllcyBvZiB0aGUgY29tcG9uZW50LiBXZSBjYW4ndCB1cGRhdGUgcHJvcHMgb2JqZWN0IGRpcmVjdGx5XG4gICAgICAgICAgICogYmVjYXVzZSBUZXN0T2JqZWN0IGNvbnRhaW5zIGEgY29weSBvZiBwcm9wcyAtIGxvb2sgYXQgcmVuZGVyXG4gICAgICAgICAgICogZnVuY3Rpb246IGNvbnN0IHByb3BzID0gdGhpcy5fZmlsdGVyTm9uQW5pbWF0ZWRQcm9wcyh0aGlzLnByb3BzKTtcbiAgICAgICAgICAgKi9cbiAgICAgICAgICB0aGlzLmplc3RBbmltYXRlZFN0eWxlLnZhbHVlID0ge1xuICAgICAgICAgICAgLi4udGhpcy5qZXN0QW5pbWF0ZWRTdHlsZS52YWx1ZSxcbiAgICAgICAgICAgIC4uLnN0eWxlLmluaXRpYWwudmFsdWUsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBzdHlsZS5qZXN0QW5pbWF0ZWRTdHlsZS5jdXJyZW50ID0gdGhpcy5qZXN0QW5pbWF0ZWRTdHlsZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGRldGFjaCBvbGQgYW5pbWF0ZWRQcm9wc1xuICAgICAgaWYgKHByZXZBbmltYXRlZFByb3BzICYmIHByZXZBbmltYXRlZFByb3BzICE9PSB0aGlzLnByb3BzLmFuaW1hdGVkUHJvcHMpIHtcbiAgICAgICAgcHJldkFuaW1hdGVkUHJvcHMudmlld0Rlc2NyaXB0b3JzIS5yZW1vdmUodmlld1RhZyBhcyBudW1iZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBhdHRhY2ggYW5pbWF0ZWRQcm9wcyBwcm9wZXJ0eVxuICAgICAgaWYgKHRoaXMucHJvcHMuYW5pbWF0ZWRQcm9wcz8udmlld0Rlc2NyaXB0b3JzKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYW5pbWF0ZWRQcm9wcy52aWV3RGVzY3JpcHRvcnMuYWRkKHtcbiAgICAgICAgICB0YWc6IHZpZXdUYWcgYXMgbnVtYmVyLFxuICAgICAgICAgIG5hbWU6IHZpZXdOYW1lISxcbiAgICAgICAgICBzaGFkb3dOb2RlV3JhcHBlcjogc2hhZG93Tm9kZVdyYXBwZXIhLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoXG4gICAgICBwcmV2UHJvcHM6IEFuaW1hdGVkQ29tcG9uZW50UHJvcHM8SW5pdGlhbENvbXBvbmVudFByb3BzPixcbiAgICAgIF9wcmV2U3RhdGU6IFJlYWRvbmx5PHVua25vd24+LFxuICAgICAgLy8gVGhpcyB0eXBlIGNvbWVzIHN0cmFpZ2h0IGZyb20gUmVhY3RcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICBzbmFwc2hvdDogRE9NUmVjdCB8IG51bGxcbiAgICApIHtcbiAgICAgIGNvbnN0IGxheW91dCA9IHRoaXMucHJvcHMubGF5b3V0O1xuICAgICAgY29uc3Qgb2xkTGF5b3V0ID0gcHJldlByb3BzLmxheW91dDtcbiAgICAgIGlmIChsYXlvdXQgIT09IG9sZExheW91dCkge1xuICAgICAgICB0aGlzLl9jb25maWd1cmVMYXlvdXRUcmFuc2l0aW9uKCk7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMucHJvcHMuc2hhcmVkVHJhbnNpdGlvblRhZyAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgIHByZXZQcm9wcy5zaGFyZWRUcmFuc2l0aW9uVGFnICE9PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9jb25maWd1cmVTaGFyZWRUcmFuc2l0aW9uKCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9OYXRpdmVFdmVudHNNYW5hZ2VyPy51cGRhdGVFdmVudHMocHJldlByb3BzKTtcbiAgICAgIHRoaXMuX2F0dGFjaEFuaW1hdGVkU3R5bGVzKCk7XG4gICAgICB0aGlzLl9JbmxpbmVQcm9wTWFuYWdlci5hdHRhY2hJbmxpbmVQcm9wcyh0aGlzLCB0aGlzLl9nZXRWaWV3SW5mbygpKTtcblxuICAgICAgaWYgKElTX1dFQiAmJiB0aGlzLnByb3BzLmV4aXRpbmcpIHtcbiAgICAgICAgc2F2ZVNuYXBzaG90KHRoaXMuX2NvbXBvbmVudFJlZiBhcyBIVE1MRWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNuYXBzaG90IHdvbid0IGJlIHVuZGVmaW5lZCBiZWNhdXNlIGl0IGNvbWVzIGZyb20gZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUgbWV0aG9kXG4gICAgICBpZiAoXG4gICAgICAgIElTX1dFQiAmJlxuICAgICAgICBzbmFwc2hvdCAhPT0gbnVsbCAmJlxuICAgICAgICB0aGlzLnByb3BzLmxheW91dCAmJlxuICAgICAgICAhZ2V0UmVkdWNlZE1vdGlvbkZyb21Db25maWcodGhpcy5wcm9wcy5sYXlvdXQgYXMgQ3VzdG9tQ29uZmlnKVxuICAgICAgKSB7XG4gICAgICAgIHRyeUFjdGl2YXRlTGF5b3V0VHJhbnNpdGlvbihcbiAgICAgICAgICB0aGlzLnByb3BzLFxuICAgICAgICAgIHRoaXMuX2NvbXBvbmVudFJlZiBhcyBSZWFuaW1hdGVkSFRNTEVsZW1lbnQsXG4gICAgICAgICAgc25hcHNob3RcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfY29uZmlndXJlTGF5b3V0VHJhbnNpdGlvbigpIHtcbiAgICAgIGlmIChJU19XRUIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsYXlvdXQgPSB0aGlzLnByb3BzLmxheW91dFxuICAgICAgICA/IG1heWJlQnVpbGQoXG4gICAgICAgICAgICB0aGlzLnByb3BzLmxheW91dCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCAvKiBXZSBkb24ndCBoYXZlIHRvIHdhcm4gdXNlciBpZiBzdHlsZSBoYXMgY29tbW9uIHByb3BlcnRpZXMgd2l0aCBhbmltYXRpb24gZm9yIExBWU9VVCAqLyxcbiAgICAgICAgICAgIEFuaW1hdGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lXG4gICAgICAgICAgKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgIHVwZGF0ZUxheW91dEFuaW1hdGlvbnMoXG4gICAgICAgIHRoaXMuZ2V0Q29tcG9uZW50Vmlld1RhZygpLFxuICAgICAgICBMYXlvdXRBbmltYXRpb25UeXBlLkxBWU9VVCxcbiAgICAgICAgbGF5b3V0XG4gICAgICApO1xuICAgIH1cblxuICAgIF9jb25maWd1cmVTaGFyZWRUcmFuc2l0aW9uKGlzVW5tb3VudGluZyA9IGZhbHNlKSB7XG4gICAgICBpZiAoSVNfV0VCKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBzaGFyZWRUcmFuc2l0aW9uVGFnIH0gPSB0aGlzLnByb3BzO1xuICAgICAgaWYgKCFzaGFyZWRUcmFuc2l0aW9uVGFnKSB7XG4gICAgICAgIHRoaXMuX3NoYXJlZEVsZW1lbnRUcmFuc2l0aW9uPy51bnJlZ2lzdGVyVHJhbnNpdGlvbihcbiAgICAgICAgICB0aGlzLmdldENvbXBvbmVudFZpZXdUYWcoKSxcbiAgICAgICAgICBpc1VubW91bnRpbmdcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fc2hhcmVkRWxlbWVudFRyYW5zaXRpb24gPSBudWxsO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzaGFyZWRFbGVtZW50VHJhbnNpdGlvbiA9XG4gICAgICAgIHRoaXMucHJvcHMuc2hhcmVkVHJhbnNpdGlvblN0eWxlID8/XG4gICAgICAgIHRoaXMuX3NoYXJlZEVsZW1lbnRUcmFuc2l0aW9uID8/XG4gICAgICAgIG5ldyBTaGFyZWRUcmFuc2l0aW9uKCk7XG4gICAgICBzaGFyZWRFbGVtZW50VHJhbnNpdGlvbi5yZWdpc3RlclRyYW5zaXRpb24oXG4gICAgICAgIHRoaXMuZ2V0Q29tcG9uZW50Vmlld1RhZygpLFxuICAgICAgICBzaGFyZWRUcmFuc2l0aW9uVGFnLFxuICAgICAgICBpc1VubW91bnRpbmdcbiAgICAgICk7XG4gICAgICB0aGlzLl9zaGFyZWRFbGVtZW50VHJhbnNpdGlvbiA9IHNoYXJlZEVsZW1lbnRUcmFuc2l0aW9uO1xuICAgIH1cblxuICAgIF9yZXNvbHZlQ29tcG9uZW50UmVmID0gKHJlZjogQ29tcG9uZW50IHwgSFRNTEVsZW1lbnQgfCBudWxsKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnRSZWYgPSByZWYgYXMgQW5pbWF0ZWRDb21wb25lbnRSZWY7XG4gICAgICAvLyBDb21wb25lbnQgY2FuIHNwZWNpZnkgcmVmIHdoaWNoIHNob3VsZCBiZSBhbmltYXRlZCB3aGVuIGFuaW1hdGVkIHZlcnNpb24gb2YgdGhlIGNvbXBvbmVudCBpcyBjcmVhdGVkLlxuICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBhbmltYXRlIHRoZSBjb21wb25lbnQgaXRzZWxmLlxuICAgICAgaWYgKGNvbXBvbmVudFJlZiAmJiBjb21wb25lbnRSZWYuZ2V0QW5pbWF0YWJsZVJlZikge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50UmVmLmdldEFuaW1hdGFibGVSZWYoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb21wb25lbnRSZWY7XG4gICAgfTtcblxuICAgIF9zZXRDb21wb25lbnRSZWYgPSBzZXRBbmRGb3J3YXJkUmVmPENvbXBvbmVudCB8IEhUTUxFbGVtZW50Pih7XG4gICAgICBnZXRGb3J3YXJkZWRSZWY6ICgpID0+XG4gICAgICAgIHRoaXMucHJvcHMuZm9yd2FyZGVkUmVmIGFzIE11dGFibGVSZWZPYmplY3Q8XG4gICAgICAgICAgQ29tcG9uZW50PFJlY29yZDxzdHJpbmcsIHVua25vd24+LCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgdW5rbm93bj5cbiAgICAgICAgPixcbiAgICAgIHNldExvY2FsUmVmOiAocmVmKSA9PiB7XG4gICAgICAgIGlmICghcmVmKSB7XG4gICAgICAgICAgLy8gY29tcG9uZW50IGhhcyBiZWVuIHVubW91bnRlZFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVmICE9PSB0aGlzLl9jb21wb25lbnRSZWYpIHtcbiAgICAgICAgICB0aGlzLl9jb21wb25lbnRSZWYgPSB0aGlzLl9yZXNvbHZlQ29tcG9uZW50UmVmKHJlZik7XG4gICAgICAgICAgLy8gaWYgcmVmIGlzIGNoYW5nZWQsIHJlc2V0IHZpZXdJbmZvXG4gICAgICAgICAgdGhpcy5fdmlld0luZm8gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFnID0gdGhpcy5nZXRDb21wb25lbnRWaWV3VGFnKCk7XG5cbiAgICAgICAgY29uc3QgeyBsYXlvdXQsIGVudGVyaW5nLCBleGl0aW5nLCBzaGFyZWRUcmFuc2l0aW9uVGFnIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAobGF5b3V0IHx8IGVudGVyaW5nIHx8IGV4aXRpbmcgfHwgc2hhcmVkVHJhbnNpdGlvblRhZykge1xuICAgICAgICAgIGlmICghU0hPVUxEX0JFX1VTRV9XRUIpIHtcbiAgICAgICAgICAgIGVuYWJsZUxheW91dEFuaW1hdGlvbnModHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzaGFyZWRUcmFuc2l0aW9uVGFnKSB7XG4gICAgICAgICAgICB0aGlzLl9jb25maWd1cmVTaGFyZWRUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChleGl0aW5nICYmIGlzRmFicmljKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZHVjZU1vdGlvbkluRXhpdGluZyA9XG4gICAgICAgICAgICAgICdnZXRSZWR1Y2VNb3Rpb24nIGluIGV4aXRpbmcgJiZcbiAgICAgICAgICAgICAgdHlwZW9mIGV4aXRpbmcuZ2V0UmVkdWNlTW90aW9uID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyBnZXRSZWR1Y2VNb3Rpb25Gcm9tQ29uZmlnKGV4aXRpbmcuZ2V0UmVkdWNlTW90aW9uKCkpXG4gICAgICAgICAgICAgICAgOiBnZXRSZWR1Y2VNb3Rpb25Gcm9tQ29uZmlnKCk7XG4gICAgICAgICAgICBpZiAoIXJlZHVjZU1vdGlvbkluRXhpdGluZykge1xuICAgICAgICAgICAgICB1cGRhdGVMYXlvdXRBbmltYXRpb25zKFxuICAgICAgICAgICAgICAgIHRhZyxcbiAgICAgICAgICAgICAgICBMYXlvdXRBbmltYXRpb25UeXBlLkVYSVRJTkcsXG4gICAgICAgICAgICAgICAgbWF5YmVCdWlsZChcbiAgICAgICAgICAgICAgICAgIGV4aXRpbmcsXG4gICAgICAgICAgICAgICAgICB0aGlzLnByb3BzPy5zdHlsZSxcbiAgICAgICAgICAgICAgICAgIEFuaW1hdGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHNraXBFbnRlcmluZyA9IHRoaXMuY29udGV4dD8uY3VycmVudDtcbiAgICAgICAgICBpZiAoZW50ZXJpbmcgJiYgIXNraXBFbnRlcmluZyAmJiAhSVNfV0VCKSB7XG4gICAgICAgICAgICB1cGRhdGVMYXlvdXRBbmltYXRpb25zKFxuICAgICAgICAgICAgICB0YWcsXG4gICAgICAgICAgICAgIExheW91dEFuaW1hdGlvblR5cGUuRU5URVJJTkcsXG4gICAgICAgICAgICAgIG1heWJlQnVpbGQoXG4gICAgICAgICAgICAgICAgZW50ZXJpbmcsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcz8uc3R5bGUsXG4gICAgICAgICAgICAgICAgQW5pbWF0ZWRDb21wb25lbnQuZGlzcGxheU5hbWVcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBUaGlzIGlzIGEgY29tcG9uZW50IGxpZmVjeWNsZSBtZXRob2QgZnJvbSBSZWFjdCwgdGhlcmVmb3JlIHdlIGFyZSBub3QgY2FsbGluZyBpdCBkaXJlY3RseS5cbiAgICAvLyBJdCBpcyBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgZ2V0cyByZXJlbmRlcmVkLiBUaGlzIHdheSB3ZSBjYW4gYWNjZXNzIGNvbXBvbmVudHMnIHBvc2l0aW9uIGJlZm9yZSBpdCBjaGFuZ2VkXG4gICAgLy8gYW5kIGxhdGVyIG9uLCBpbiBjb21wb25lbnREaWRVcGRhdGUsIGNhbGN1bGF0ZSB0cmFuc2xhdGlvbiBmb3IgbGF5b3V0IHRyYW5zaXRpb24uXG4gICAgZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoKSB7XG4gICAgICBpZiAoXG4gICAgICAgIElTX1dFQiAmJlxuICAgICAgICAodGhpcy5fY29tcG9uZW50UmVmIGFzIEhUTUxFbGVtZW50KT8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2NvbXBvbmVudFJlZiBhcyBIVE1MRWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgIGNvbnN0IGZpbHRlcmVkUHJvcHMgPSB0aGlzLl9Qcm9wc0ZpbHRlci5maWx0ZXJOb25BbmltYXRlZFByb3BzKHRoaXMpO1xuXG4gICAgICBpZiAoSVNfSkVTVCkge1xuICAgICAgICBmaWx0ZXJlZFByb3BzLmplc3RBbmltYXRlZFN0eWxlID0gdGhpcy5qZXN0QW5pbWF0ZWRTdHlsZTtcbiAgICAgIH1cblxuICAgICAgLy8gTGF5b3V0IGFuaW1hdGlvbnMgb24gd2ViIGFyZSBzZXQgaW5zaWRlIGBjb21wb25lbnREaWRNb3VudGAgbWV0aG9kLCB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgZmlyc3QgcmVuZGVyLlxuICAgICAgLy8gQmVjYXVzZSBvZiB0aGF0IHdlIGNhbiBlbmNvdW50ZXIgYSBzaXR1YXRpb24gaW4gd2hpY2ggY29tcG9uZW50IGlzIHZpc2libGUgZm9yIGEgc2hvcnQgYW1vdW50IG9mIHRpbWUsIGFuZCBsYXRlciBvbiBhbmltYXRpb24gdHJpZ2dlcnMuXG4gICAgICAvLyBJJ3ZlIHRlc3RlZCB0aGF0IG9uIHZhcmlvdXMgYnJvd3NlcnMgYW5kIGRldmljZXMgYW5kIGl0IGRpZCBub3QgaGFwcGVuIHRvIG1lLiBUbyBiZSBzdXJlIHRoYXQgaXQgd29uJ3QgaGFwcGVuIHRvIHNvbWVvbmUgZWxzZSxcbiAgICAgIC8vIEkndmUgZGVjaWRlZCB0byBoaWRlIGNvbXBvbmVudCBhdCBmaXJzdCByZW5kZXIuIEl0cyB2aXNpYmlsaXR5IGlzIHJlc2V0IGluIGBjb21wb25lbnREaWRNb3VudGAuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2lzRmlyc3RSZW5kZXIgJiZcbiAgICAgICAgSVNfV0VCICYmXG4gICAgICAgIGZpbHRlcmVkUHJvcHMuZW50ZXJpbmcgJiZcbiAgICAgICAgIWdldFJlZHVjZWRNb3Rpb25Gcm9tQ29uZmlnKGZpbHRlcmVkUHJvcHMuZW50ZXJpbmcgYXMgQ3VzdG9tQ29uZmlnKVxuICAgICAgKSB7XG4gICAgICAgIGZpbHRlcmVkUHJvcHMuc3R5bGUgPSB7XG4gICAgICAgICAgLi4uKGZpbHRlcmVkUHJvcHMuc3R5bGUgPz8ge30pLFxuICAgICAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLCAvLyBIaWRlIGNvbXBvbmVudCB1bnRpbCBgY29tcG9uZW50RGlkTW91bnRgIHRyaWdnZXJzXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYXRmb3JtUHJvcHMgPSBQbGF0Zm9ybS5zZWxlY3Qoe1xuICAgICAgICB3ZWI6IHt9LFxuICAgICAgICBkZWZhdWx0OiB7IGNvbGxhcHNhYmxlOiBmYWxzZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHNraXBFbnRlcmluZyA9IHRoaXMuY29udGV4dD8uY3VycmVudDtcbiAgICAgIGNvbnN0IG5hdGl2ZUlEID1cbiAgICAgICAgc2tpcEVudGVyaW5nIHx8ICFpc0ZhYnJpYygpID8gdW5kZWZpbmVkIDogYCR7dGhpcy5yZWFuaW1hdGVkSUR9YDtcblxuICAgICAgY29uc3QgamVzdFByb3BzID0gSVNfSkVTVFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGplc3RJbmxpbmVTdHlsZTogdGhpcy5wcm9wcy5zdHlsZSxcbiAgICAgICAgICAgIGplc3RBbmltYXRlZFN0eWxlOiB0aGlzLmplc3RBbmltYXRlZFN0eWxlLFxuICAgICAgICAgIH1cbiAgICAgICAgOiB7fTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPENvbXBvbmVudFxuICAgICAgICAgIG5hdGl2ZUlEPXtuYXRpdmVJRH1cbiAgICAgICAgICB7Li4uZmlsdGVyZWRQcm9wc31cbiAgICAgICAgICB7Li4uamVzdFByb3BzfVxuICAgICAgICAgIC8vIENhc3RpbmcgaXMgdXNlZCBoZXJlLCBiZWNhdXNlIHJlZiBjYW4gYmUgbnVsbCAtIGluIHRoYXQgY2FzZSBpdCBjYW5ub3QgYmUgYXNzaWduZWQgdG8gSFRNTEVsZW1lbnQuXG4gICAgICAgICAgLy8gQWZ0ZXIgc3BlbmRpbmcgc29tZSB0aW1lIHRyeWluZyB0byBmaWd1cmUgb3V0IHdoYXQgdG8gZG8gd2l0aCB0aGlzIHByb2JsZW0sIHdlIGRlY2lkZWQgdG8gbGVhdmUgaXQgdGhpcyB3YXlcbiAgICAgICAgICByZWY9e3RoaXMuX3NldENvbXBvbmVudFJlZiBhcyAocmVmOiBDb21wb25lbnQpID0+IHZvaWR9XG4gICAgICAgICAgey4uLnBsYXRmb3JtUHJvcHN9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIEFuaW1hdGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gYEFuaW1hdGVkQ29tcG9uZW50KCR7XG4gICAgQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnXG4gIH0pYDtcblxuICByZXR1cm4gUmVhY3QuZm9yd2FyZFJlZjxDb21wb25lbnQ+KChwcm9wcywgcmVmKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxBbmltYXRlZENvbXBvbmVudFxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIHsuLi4ocmVmID09PSBudWxsID8gbnVsbCA6IHsgZm9yd2FyZGVkUmVmOiByZWYgfSl9XG4gICAgICAvPlxuICAgICk7XG4gIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQUMsTUFBQSxDQUFBQyxjQUFBLENBQUFDLE9BQUE7RUFBQUMsS0FBQTtBQUFBO0FBQUFELE9BQUEsQ0FBQUUsdUJBQUEsR0FBQUEsdUJBQUE7QUFBQSxJQUFBQyxnQkFB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