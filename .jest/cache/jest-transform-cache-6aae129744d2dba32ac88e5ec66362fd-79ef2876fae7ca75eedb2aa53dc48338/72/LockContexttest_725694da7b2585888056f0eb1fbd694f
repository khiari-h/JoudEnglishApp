fb7088b521c2d5fc5cd6ada26f25218f
_getJestObj().mock('../../src/services/lockService', function () {
  return mockLockService;
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _LockContext = require("../../src/contexts/LockContext");
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockLockService = {
  isEnabled: jest.fn(),
  verifyPin: jest.fn(),
  disableLock: jest.fn(),
  enableLock: jest.fn()
};
var Consumer = function Consumer() {
  var _useLock = (0, _LockContext.useLock)(),
    isEnabled = _useLock.isEnabled,
    isLocked = _useLock.isLocked,
    unlockWithPin = _useLock.unlockWithPin,
    disable = _useLock.disable,
    enable = _useLock.enable,
    isLoading = _useLock.isLoading;
  return (0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {
    children: [isLoading && (0, _jsxRuntime.jsx)("text", {
      testID: "loading",
      children: "Loading..."
    }), (0, _jsxRuntime.jsx)("text", {
      testID: "enabled",
      children: String(isEnabled)
    }), (0, _jsxRuntime.jsx)("text", {
      testID: "locked",
      children: String(isLocked)
    }), (0, _jsxRuntime.jsx)("button", {
      testID: "unlock-correct-pin",
      onPress: function onPress() {
        return unlockWithPin('1234');
      }
    }), (0, _jsxRuntime.jsx)("button", {
      testID: "unlock-wrong-pin",
      onPress: function onPress() {
        return unlockWithPin('0000');
      }
    }), (0, _jsxRuntime.jsx)("button", {
      testID: "unlock-lockout",
      onPress: function onPress() {
        return unlockWithPin('0000');
      }
    }), (0, _jsxRuntime.jsx)("button", {
      testID: "disable",
      onPress: disable
    }), (0, _jsxRuntime.jsx)("button", {
      testID: "enable",
      onPress: enable
    })]
  });
};
var TestText = function TestText(_ref) {
  var children = _ref.children,
    testID = _ref.testID;
  return (0, _jsxRuntime.jsx)("text", {
    testID: testID,
    children: children
  });
};
var TestButton = function TestButton(_ref2) {
  var onPress = _ref2.onPress,
    testID = _ref2.testID;
  return (0, _jsxRuntime.jsx)("button", {
    testID: testID,
    onPress: onPress
  });
};
describe('LockContext', function () {
  beforeEach(function () {
    jest.clearAllMocks();
    mockLockService.isEnabled.mockResolvedValue(true);
    mockLockService.verifyPin.mockResolvedValue({
      ok: true
    });
    mockLockService.disableLock.mockResolvedValue(true);
    mockLockService.enableLock.mockResolvedValue(true);
  });
  it('initializes locked when enabled, unlocks with correct PIN, and can disable', (0, _asyncToGenerator2.default)(function* () {
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    expect(ui.getByTestId('enabled').props.children).toBe('true');
    expect(ui.getByTestId('locked').props.children).toBe('true');
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(ui.getByTestId('unlock-correct-pin'));
    }));
    expect(ui.getByTestId('locked').props.children).toBe('false');
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(ui.getByTestId('disable'));
    }));
    expect(ui.getByTestId('enabled').props.children).toBe('false');
  }));
  it('initializes unlocked when not enabled', (0, _asyncToGenerator2.default)(function* () {
    mockLockService.isEnabled.mockResolvedValueOnce(false);
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    expect(ui.getByTestId('enabled').props.children).toBe('false');
    expect(ui.getByTestId('locked').props.children).toBe('false');
  }));
  it('should not unlock with an incorrect PIN', (0, _asyncToGenerator2.default)(function* () {
    mockLockService.verifyPin.mockResolvedValueOnce({
      ok: false
    });
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    expect(ui.getByTestId('locked').props.children).toBe('true');
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(ui.getByTestId('unlock-wrong-pin'));
    }));
    expect(ui.getByTestId('locked').props.children).toBe('true');
  }));
  it('should return lockout reason when pin verification fails with lockout', (0, _asyncToGenerator2.default)(function* () {
    mockLockService.verifyPin.mockResolvedValueOnce({
      ok: false,
      reason: 'lockout'
    });
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    var result;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      result = yield ui.getByTestId('unlock-lockout').props.onPress();
    }));
    expect(ui.getByTestId('locked').props.children).toBe('true');
    expect(result).toEqual({
      ok: false,
      reason: 'lockout'
    });
  }));
  it('should enable the lock', (0, _asyncToGenerator2.default)(function* () {
    mockLockService.isEnabled.mockResolvedValueOnce(false);
    var ui = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_LockContext.LockProvider, {
      children: (0, _jsxRuntime.jsx)(Consumer, {})
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(ui.queryByTestId('loading')).toBeNull();
    });
    expect(ui.getByTestId('enabled').props.children).toBe('false');
    expect(ui.getByTestId('locked').props.children).toBe('false');
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(ui.getByTestId('enable'));
    }));
    expect(ui.getByTestId('enabled').props.children).toBe('true');
    expect(ui.getByTestId('locked').props.children).toBe('true');
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJtb2NrTG9ja1NlcnZpY2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWFjdCIsIl9yZWFjdE5hdGl2ZSIsIl9Mb2NrQ29udGV4dCIsIl9qc3hSdW50aW1lIiwiX3JlcXVpcmUiLCJqZXN0IiwiaXNFbmFibGVkIiwiZm4iLCJ2ZXJpZnlQaW4iLCJkaXNhYmxlTG9jayIsImVuYWJsZUxvY2siLCJDb25zdW1lciIsIl91c2VMb2NrIiwidXNlTG9jayIsImlzTG9ja2VkIiwidW5sb2NrV2l0aFBpbiIsImRpc2FibGUiLCJlbmFibGUiLCJpc0xvYWRpbmciLCJqc3hzIiwiRnJhZ21lbnQiLCJjaGlsZHJlbiIsImpzeCIsInRlc3RJRCIsIlN0cmluZyIsIm9uUHJlc3MiLCJUZXN0VGV4dCIsIl9yZWYiLCJUZXN0QnV0dG9uIiwiX3JlZjIiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJvayIsIml0IiwiZGVmYXVsdCIsInVpIiwicmVuZGVyIiwiTG9ja1Byb3ZpZGVyIiwid2FpdEZvciIsImV4cGVjdCIsInF1ZXJ5QnlUZXN0SWQiLCJ0b0JlTnVsbCIsImdldEJ5VGVzdElkIiwicHJvcHMiLCJ0b0JlIiwiYWN0IiwiZmlyZUV2ZW50IiwicHJlc3MiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJyZWFzb24iLCJyZXN1bHQiLCJ0b0VxdWFsIl0sInNvdXJjZXMiOlsiTG9ja0NvbnRleHQudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyByZW5kZXIsIGFjdCwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdC1uYXRpdmUnO1xyXG5pbXBvcnQgeyBMb2NrUHJvdmlkZXIsIHVzZUxvY2sgfSBmcm9tICcuLi8uLi9zcmMvY29udGV4dHMvTG9ja0NvbnRleHQnO1xyXG5cclxuLy8gTW9jayBkdSBzZXJ2aWNlIGRlIHZlcnJvdWlsbGFnZSBhdmVjIGxlcyBjYXMgZGUgc3VjY8OocyBldCBkJ8OpY2hlY1xyXG5jb25zdCBtb2NrTG9ja1NlcnZpY2UgPSB7XHJcbiAgaXNFbmFibGVkOiBqZXN0LmZuKCksXHJcbiAgdmVyaWZ5UGluOiBqZXN0LmZuKCksXHJcbiAgZGlzYWJsZUxvY2s6IGplc3QuZm4oKSxcclxuICBlbmFibGVMb2NrOiBqZXN0LmZuKCksXHJcbn07XHJcblxyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9zZXJ2aWNlcy9sb2NrU2VydmljZScsICgpID0+IG1vY2tMb2NrU2VydmljZSk7XHJcblxyXG5jb25zdCBDb25zdW1lciA9ICgpID0+IHtcclxuICBjb25zdCB7IGlzRW5hYmxlZCwgaXNMb2NrZWQsIHVubG9ja1dpdGhQaW4sIGRpc2FibGUsIGVuYWJsZSwgaXNMb2FkaW5nIH0gPSB1c2VMb2NrKCk7XHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIHtpc0xvYWRpbmcgJiYgPHRleHQgdGVzdElEPVwibG9hZGluZ1wiPkxvYWRpbmcuLi48L3RleHQ+fVxyXG4gICAgICA8dGV4dCB0ZXN0SUQ9XCJlbmFibGVkXCI+e1N0cmluZyhpc0VuYWJsZWQpfTwvdGV4dD5cclxuICAgICAgPHRleHQgdGVzdElEPVwibG9ja2VkXCI+e1N0cmluZyhpc0xvY2tlZCl9PC90ZXh0PlxyXG4gICAgICA8YnV0dG9uIHRlc3RJRD1cInVubG9jay1jb3JyZWN0LXBpblwiIG9uUHJlc3M9eygpID0+IHVubG9ja1dpdGhQaW4oJzEyMzQnKX0gLz5cclxuICAgICAgPGJ1dHRvbiB0ZXN0SUQ9XCJ1bmxvY2std3JvbmctcGluXCIgb25QcmVzcz17KCkgPT4gdW5sb2NrV2l0aFBpbignMDAwMCcpfSAvPlxyXG4gICAgICA8YnV0dG9uIHRlc3RJRD1cInVubG9jay1sb2Nrb3V0XCIgb25QcmVzcz17KCkgPT4gdW5sb2NrV2l0aFBpbignMDAwMCcpfSAvPlxyXG4gICAgICA8YnV0dG9uIHRlc3RJRD1cImRpc2FibGVcIiBvblByZXNzPXtkaXNhYmxlfSAvPlxyXG4gICAgICA8YnV0dG9uIHRlc3RJRD1cImVuYWJsZVwiIG9uUHJlc3M9e2VuYWJsZX0gLz5cclxuICAgIDwvPlxyXG4gICk7XHJcbn07XHJcblxyXG4vLyBUaW55IHNoaW1zIHRvIGF2b2lkIGltcG9ydGluZyBSTiBwcmltaXRpdmVzXHJcbmNvbnN0IFRlc3RUZXh0ID0gKHsgY2hpbGRyZW4sIHRlc3RJRCB9KSA9PiAoPHRleHQgdGVzdElEPXt0ZXN0SUR9PntjaGlsZHJlbn08L3RleHQ+KTtcclxuY29uc3QgVGVzdEJ1dHRvbiA9ICh7IG9uUHJlc3MsIHRlc3RJRCB9KSA9PiAoPGJ1dHRvbiB0ZXN0SUQ9e3Rlc3RJRH0gb25QcmVzcz17b25QcmVzc30gLz4pO1xyXG5cclxuZGVzY3JpYmUoJ0xvY2tDb250ZXh0JywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICAvLyBQYXIgZMOpZmF1dCwgbGUgdmVycm91IGVzdCBhY3RpdsOpXHJcbiAgICBtb2NrTG9ja1NlcnZpY2UuaXNFbmFibGVkLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xyXG4gICAgLy8gUGFyIGTDqWZhdXQsIGxlIFBJTiBlc3QgY29ycmVjdFxyXG4gICAgbW9ja0xvY2tTZXJ2aWNlLnZlcmlmeVBpbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG9rOiB0cnVlIH0pO1xyXG4gICAgbW9ja0xvY2tTZXJ2aWNlLmRpc2FibGVMb2NrLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xyXG4gICAgbW9ja0xvY2tTZXJ2aWNlLmVuYWJsZUxvY2subW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIFRlc3QgMTogQ29tcG9ydGVtZW50IGluaXRpYWwgKGNhcyBkZSBzdWNjw6hzKVxyXG4gIGl0KCdpbml0aWFsaXplcyBsb2NrZWQgd2hlbiBlbmFibGVkLCB1bmxvY2tzIHdpdGggY29ycmVjdCBQSU4sIGFuZCBjYW4gZGlzYWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHVpID0gcmVuZGVyKDxMb2NrUHJvdmlkZXI+PENvbnN1bWVyIC8+PC9Mb2NrUHJvdmlkZXI+KTtcclxuXHJcbiAgICAvLyBBdHRlbmRyZSBsZSBjaGFyZ2VtZW50IGluaXRpYWxcclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4gZXhwZWN0KHVpLnF1ZXJ5QnlUZXN0SWQoJ2xvYWRpbmcnKSkudG9CZU51bGwoKSk7XHJcbiAgICBcclxuICAgIC8vIFbDqXJpZmllciBsJ8OpdGF0IGluaXRpYWxcclxuICAgIGV4cGVjdCh1aS5nZXRCeVRlc3RJZCgnZW5hYmxlZCcpLnByb3BzLmNoaWxkcmVuKS50b0JlKCd0cnVlJyk7XHJcbiAgICBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2xvY2tlZCcpLnByb3BzLmNoaWxkcmVuKS50b0JlKCd0cnVlJyk7XHJcblxyXG4gICAgLy8gRMOpdmVycm91aWxsYWdlIHLDqXVzc2lcclxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgIGZpcmVFdmVudC5wcmVzcyh1aS5nZXRCeVRlc3RJZCgndW5sb2NrLWNvcnJlY3QtcGluJykpO1xyXG4gICAgfSk7XHJcbiAgICBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2xvY2tlZCcpLnByb3BzLmNoaWxkcmVuKS50b0JlKCdmYWxzZScpO1xyXG5cclxuICAgIC8vIETDqXNhY3RpdmF0aW9uIGR1IHZlcnJvdVxyXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgZmlyZUV2ZW50LnByZXNzKHVpLmdldEJ5VGVzdElkKCdkaXNhYmxlJykpO1xyXG4gICAgfSk7XHJcbiAgICBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2VuYWJsZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgnZmFsc2UnKTtcclxuICB9KTtcclxuXHJcbiAgLy8gVGVzdCAyOiBHw6lyZXIgbCfDqXRhdCBpbml0aWFsIGTDqXNhY3RpdsOpXHJcbiAgaXQoJ2luaXRpYWxpemVzIHVubG9ja2VkIHdoZW4gbm90IGVuYWJsZWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBtb2NrTG9ja1NlcnZpY2UuaXNFbmFibGVkLm1vY2tSZXNvbHZlZFZhbHVlT25jZShmYWxzZSk7XHJcbiAgICBjb25zdCB1aSA9IHJlbmRlcig8TG9ja1Byb3ZpZGVyPjxDb25zdW1lciAvPjwvTG9ja1Byb3ZpZGVyPik7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiBleHBlY3QodWkucXVlcnlCeVRlc3RJZCgnbG9hZGluZycpKS50b0JlTnVsbCgpKTtcclxuXHJcbiAgICBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2VuYWJsZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgnZmFsc2UnKTtcclxuICAgIGV4cGVjdCh1aS5nZXRCeVRlc3RJZCgnbG9ja2VkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ2ZhbHNlJyk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIFRlc3QgMzogR8OpcmVyIGxlIFBJTiBpbmNvcnJlY3RcclxuICBpdCgnc2hvdWxkIG5vdCB1bmxvY2sgd2l0aCBhbiBpbmNvcnJlY3QgUElOJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgbW9ja0xvY2tTZXJ2aWNlLnZlcmlmeVBpbi5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBvazogZmFsc2UgfSk7XHJcbiAgICBjb25zdCB1aSA9IHJlbmRlcig8TG9ja1Byb3ZpZGVyPjxDb25zdW1lciAvPjwvTG9ja1Byb3ZpZGVyPik7XHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IGV4cGVjdCh1aS5xdWVyeUJ5VGVzdElkKCdsb2FkaW5nJykpLnRvQmVOdWxsKCkpO1xyXG5cclxuICAgIGV4cGVjdCh1aS5nZXRCeVRlc3RJZCgnbG9ja2VkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ3RydWUnKTtcclxuXHJcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICBmaXJlRXZlbnQucHJlc3ModWkuZ2V0QnlUZXN0SWQoJ3VubG9jay13cm9uZy1waW4nKSk7XHJcbiAgICB9KTtcclxuICAgIC8vIExlIHZlcnJvdSBuZSBkb2l0IHBhcyBjaGFuZ2VyIGQnw6l0YXRcclxuICAgIGV4cGVjdCh1aS5nZXRCeVRlc3RJZCgnbG9ja2VkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ3RydWUnKTtcclxuICB9KTtcclxuXHJcbiAgLy8gVGVzdCA0OiBHw6lyZXIgbGEgcmFpc29uIFwibG9ja291dFwiXHJcbiAgaXQoJ3Nob3VsZCByZXR1cm4gbG9ja291dCByZWFzb24gd2hlbiBwaW4gdmVyaWZpY2F0aW9uIGZhaWxzIHdpdGggbG9ja291dCcsIGFzeW5jICgpID0+IHtcclxuICAgIG1vY2tMb2NrU2VydmljZS52ZXJpZnlQaW4ubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgb2s6IGZhbHNlLCByZWFzb246ICdsb2Nrb3V0JyB9KTtcclxuICAgIGNvbnN0IHVpID0gcmVuZGVyKDxMb2NrUHJvdmlkZXI+PENvbnN1bWVyIC8+PC9Mb2NrUHJvdmlkZXI+KTtcclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4gZXhwZWN0KHVpLnF1ZXJ5QnlUZXN0SWQoJ2xvYWRpbmcnKSkudG9CZU51bGwoKSk7XHJcblxyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIGNhcHR1cmUgbGUgcsOpc3VsdGF0IGRlIGwnYXBwZWwgw6AgdW5sb2NrV2l0aFBpbiBwb3VyIGxlIHbDqXJpZmllclxyXG4gICAgICByZXN1bHQgPSBhd2FpdCB1aS5nZXRCeVRlc3RJZCgndW5sb2NrLWxvY2tvdXQnKS5wcm9wcy5vblByZXNzKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2xvY2tlZCcpLnByb3BzLmNoaWxkcmVuKS50b0JlKCd0cnVlJyk7XHJcbiAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgb2s6IGZhbHNlLCByZWFzb246ICdsb2Nrb3V0JyB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gVGVzdCA1OiBBY3RpdmVyIGxlIHZlcnJvdWlsbGFnZVxyXG4gIGl0KCdzaG91bGQgZW5hYmxlIHRoZSBsb2NrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgbW9ja0xvY2tTZXJ2aWNlLmlzRW5hYmxlZC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZmFsc2UpO1xyXG4gICAgY29uc3QgdWkgPSByZW5kZXIoPExvY2tQcm92aWRlcj48Q29uc3VtZXIgLz48L0xvY2tQcm92aWRlcj4pO1xyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiBleHBlY3QodWkucXVlcnlCeVRlc3RJZCgnbG9hZGluZycpKS50b0JlTnVsbCgpKTtcclxuXHJcbiAgICAvLyBWw6lyaWZpZXIgbCfDqXRhdCBpbml0aWFsIGTDqXNhY3RpdsOpXHJcbiAgICBleHBlY3QodWkuZ2V0QnlUZXN0SWQoJ2VuYWJsZWQnKS5wcm9wcy5jaGlsZHJlbikudG9CZSgnZmFsc2UnKTtcclxuICAgIGV4cGVjdCh1aS5nZXRCeVRlc3RJZCgnbG9ja2VkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ2ZhbHNlJyk7XHJcblxyXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgZmlyZUV2ZW50LnByZXNzKHVpLmdldEJ5VGVzdElkKCdlbmFibGUnKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBWw6lyaWZpZXIgcXVlIGwnw6l0YXQgYSBiYXNjdWzDqVxyXG4gICAgZXhwZWN0KHVpLmdldEJ5VGVzdElkKCdlbmFibGVkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ3RydWUnKTtcclxuICAgIGV4cGVjdCh1aS5nZXRCeVRlc3RJZCgnbG9ja2VkJykucHJvcHMuY2hpbGRyZW4pLnRvQmUoJ3RydWUnKTtcclxuICB9KTtcclxufSk7Il0sIm1hcHBpbmdzIjoiQUFZQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsZ0NBQWdDLEVBQUU7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