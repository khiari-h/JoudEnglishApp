{"version":3,"names":["_View","_interopRequireDefault","require","_StyleSheet","LogBoxData","_interopRequireWildcard","_LogBoxLog","_LogBoxNotification","React","_SafeAreaView_INTERNAL_DO_NOT_USE","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_LogBoxNotificationContainer","props","logs","onDismissWarns","clearWarnings","onDismissErrors","clearErrors","setSelectedLog","index","openLog","log","onNotificationPress","length","isDisabled","warnings","filter","level","errors","jsxs","style","styles","list","children","jsx","toast","totalLogCount","onPressOpen","onPressDismiss","StyleSheet","create","bottom","left","right","position","borderRadius","marginBottom","overflow","_default","exports","withSubscription"],"sources":["LogBoxNotificationContainer.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport View from '../Components/View/View';\nimport StyleSheet from '../StyleSheet/StyleSheet';\nimport * as LogBoxData from './Data/LogBoxData';\nimport LogBoxLog from './Data/LogBoxLog';\nimport LogBoxLogNotification from './UI/LogBoxNotification';\nimport * as React from 'react';\nimport SafeAreaView from '../../src/private/components/SafeAreaView_INTERNAL_DO_NOT_USE';\n\ntype Props = $ReadOnly<{|\n  logs: $ReadOnlyArray<LogBoxLog>,\n  selectedLogIndex: number,\n  isDisabled?: ?boolean,\n|}>;\n\nexport function _LogBoxNotificationContainer(props: Props): React.Node {\n  const {logs} = props;\n\n  const onDismissWarns = () => {\n    LogBoxData.clearWarnings();\n  };\n  const onDismissErrors = () => {\n    LogBoxData.clearErrors();\n  };\n\n  const setSelectedLog = (index: number): void => {\n    LogBoxData.setSelectedLog(index);\n  };\n\n  function openLog(log: LogBoxLog) {\n    if (log.onNotificationPress) {\n      log.onNotificationPress();\n      return;\n    }\n    let index = logs.length - 1;\n\n    // Stop at zero because if we don't find any log, we'll open the first log.\n    while (index > 0 && logs[index] !== log) {\n      index -= 1;\n    }\n    setSelectedLog(index);\n  }\n\n  if (logs.length === 0 || props.isDisabled === true) {\n    return null;\n  }\n\n  const warnings = logs.filter(log => log.level === 'warn');\n  const errors = logs.filter(\n    log => log.level === 'error' || log.level === 'fatal',\n  );\n  return (\n    <SafeAreaView style={styles.list}>\n      {warnings.length > 0 && (\n        <View style={styles.toast}>\n          <LogBoxLogNotification\n            log={warnings[warnings.length - 1]}\n            level=\"warn\"\n            totalLogCount={warnings.length}\n            onPressOpen={() => openLog(warnings[warnings.length - 1])}\n            onPressDismiss={onDismissWarns}\n          />\n        </View>\n      )}\n      {errors.length > 0 && (\n        <View style={styles.toast}>\n          <LogBoxLogNotification\n            log={errors[errors.length - 1]}\n            level=\"error\"\n            totalLogCount={errors.length}\n            onPressOpen={() => openLog(errors[errors.length - 1])}\n            onPressDismiss={onDismissErrors}\n          />\n        </View>\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  list: {\n    bottom: 20,\n    left: 10,\n    right: 10,\n    position: 'absolute',\n  },\n  toast: {\n    borderRadius: 8,\n    marginBottom: 5,\n    overflow: 'hidden',\n  },\n});\n\nexport default (LogBoxData.withSubscription(\n  _LogBoxNotificationContainer,\n): React.AbstractComponent<{||}>);\n"],"mappings":"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","ignoreList":[]}